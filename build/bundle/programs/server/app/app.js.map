{"version":3,"sources":["meteor://ðŸ’»app/imports/api/opt-ins/server/publications.js","meteor://ðŸ’»app/imports/api/opt-ins/methods.js","meteor://ðŸ’»app/imports/api/opt-ins/opt-ins.js","meteor://ðŸ’»app/imports/api/recipients/server/publications.js","meteor://ðŸ’»app/imports/api/recipients/recipients.js","meteor://ðŸ’»app/imports/api/doichain/entries.js","meteor://ðŸ’»app/imports/api/doichain/methods.js","meteor://ðŸ’»app/imports/api/languages/methods.js","meteor://ðŸ’»app/imports/api/meta/meta.js","meteor://ðŸ’»app/imports/api/senders/senders.js","meteor://ðŸ’»app/imports/api/version/publications.js","meteor://ðŸ’»app/imports/modules/server/dapps/export_dois.js","meteor://ðŸ’»app/imports/modules/server/dapps/fetch_doi-mail-data.js","meteor://ðŸ’»app/imports/modules/server/dapps/get_doi-mail-data.js","meteor://ðŸ’»app/imports/modules/server/dns/get_opt-in-key.js","meteor://ðŸ’»app/imports/modules/server/dns/get_opt-in-provider.js","meteor://ðŸ’»app/imports/modules/server/doichain/add_entry_and_fetch_data.js","meteor://ðŸ’»app/imports/modules/server/doichain/check_new_transactions.js","meteor://ðŸ’»app/imports/modules/server/doichain/decrypt_message.js","meteor://ðŸ’»app/imports/modules/server/doichain/encrypt_message.js","meteor://ðŸ’»app/imports/modules/server/doichain/generate_name-id.js","meteor://ðŸ’»app/imports/modules/server/doichain/get_address.js","meteor://ðŸ’»app/imports/modules/server/doichain/get_balance.js","meteor://ðŸ’»app/imports/modules/server/doichain/get_data-hash.js","meteor://ðŸ’»app/imports/modules/server/doichain/get_key-pair.js","meteor://ðŸ’»app/imports/modules/server/doichain/get_private-key_from_wif.js","meteor://ðŸ’»app/imports/modules/server/doichain/get_publickey_and_address_by_domain.js","meteor://ðŸ’»app/imports/modules/server/doichain/get_signature.js","meteor://ðŸ’»app/imports/modules/server/doichain/insert.js","meteor://ðŸ’»app/imports/modules/server/doichain/update.js","meteor://ðŸ’»app/imports/modules/server/doichain/verify_signature.js","meteor://ðŸ’»app/imports/modules/server/doichain/write_to_blockchain.js","meteor://ðŸ’»app/imports/modules/server/emails/decode_doi-hash.js","meteor://ðŸ’»app/imports/modules/server/emails/generate_doi-hash.js","meteor://ðŸ’»app/imports/modules/server/emails/parse_template.js","meteor://ðŸ’»app/imports/modules/server/emails/send.js","meteor://ðŸ’»app/imports/modules/server/jobs/add_check_new_transactions.js","meteor://ðŸ’»app/imports/modules/server/jobs/add_fetch-doi-mail-data.js","meteor://ðŸ’»app/imports/modules/server/jobs/add_insert_blockchain.js","meteor://ðŸ’»app/imports/modules/server/jobs/add_send_mail.js","meteor://ðŸ’»app/imports/modules/server/jobs/add_update_blockchain.js","meteor://ðŸ’»app/imports/modules/server/languages/get.js","meteor://ðŸ’»app/imports/modules/server/meta/addOrUpdate.js","meteor://ðŸ’»app/imports/modules/server/opt-ins/add.js","meteor://ðŸ’»app/imports/modules/server/opt-ins/add_and_write_to_blockchain.js","meteor://ðŸ’»app/imports/modules/server/opt-ins/confirm.js","meteor://ðŸ’»app/imports/modules/server/opt-ins/generate_doi-token.js","meteor://ðŸ’»app/imports/modules/server/opt-ins/update_status.js","meteor://ðŸ’»app/imports/modules/server/opt-ins/verify.js","meteor://ðŸ’»app/imports/modules/server/recipients/add.js","meteor://ðŸ’»app/imports/modules/server/senders/add.js","meteor://ðŸ’»app/imports/startup/server/dapp-configuration.js","meteor://ðŸ’»app/imports/startup/server/dns-configuration.js","meteor://ðŸ’»app/imports/startup/server/doichain-configuration.js","meteor://ðŸ’»app/imports/startup/server/email-configuration.js","meteor://ðŸ’»app/imports/startup/server/fixtures.js","meteor://ðŸ’»app/imports/startup/server/index.js","meteor://ðŸ’»app/imports/startup/server/jobs.js","meteor://ðŸ’»app/imports/startup/server/log-configuration.js","meteor://ðŸ’»app/imports/startup/server/register-api.js","meteor://ðŸ’»app/imports/startup/server/security.js","meteor://ðŸ’»app/imports/startup/server/type-configuration.js","meteor://ðŸ’»app/imports/startup/server/useraccounts-configuration.js","meteor://ðŸ’»app/server/api/rest/imports/confirm.js","meteor://ðŸ’»app/server/api/rest/imports/debug.js","meteor://ðŸ’»app/server/api/rest/imports/send.js","meteor://ðŸ’»app/server/api/rest/imports/status.js","meteor://ðŸ’»app/server/api/rest/imports/user.js","meteor://ðŸ’»app/server/api/rest/imports/verify.js","meteor://ðŸ’»app/server/api/rest/rest.js","meteor://ðŸ’»app/server/api/blockchain_jobs.js","meteor://ðŸ’»app/server/api/dapp_jobs.js","meteor://ðŸ’»app/server/api/dns.js","meteor://ðŸ’»app/server/api/doichain.js","meteor://ðŸ’»app/server/api/http.js","meteor://ðŸ’»app/server/api/index.js","meteor://ðŸ’»app/server/api/mail_jobs.js","meteor://ðŸ’»app/server/test/test-api/test-api-on-dapp.js","meteor://ðŸ’»app/server/test/test-api/test-api-on-node.js","meteor://ðŸ’»app/server/test/0-basic-doi-tests.0.js","meteor://ðŸ’»app/server/test/1-basic-doi-test.1.js","meteor://ðŸ’»app/server/test/2-basic-doi-test.2.js","meteor://ðŸ’»app/server/test/3-basic-doi-test.3.js","meteor://ðŸ’»app/server/test/5-selenium-test-flo.js","meteor://ðŸ’»app/server/test/basic-doi-test-nico.js","meteor://ðŸ’»app/server/test/basic-doi-test.flo.js","meteor://ðŸ’»app/server/main.js"],"names":["Meteor","module","link","v","Roles","OptIns","publish","OptInsAll","userId","ready","userIsInRole","find","ownerId","fields","publicFields","DDPRateLimiter","i18n","_i18n","ValidatedMethod","_","addOptIn","default","add","name","validate","run","recipientMail","senderMail","data","error","Error","__","optIn","OPTIONS_METHODS","pluck","isServer","addRule","contains","connectionId","export","Mongo","SimpleSchema","OptInsCollection","Collection","insert","callback","ourOptIn","recipient_sender","recipient","sender","createdAt","Date","result","update","selector","modifier","remove","deny","schema","_id","type","String","regEx","RegEx","Id","optional","denyUpdate","index","Integer","nameId","txId","masterDoi","confirmedAt","confirmedBy","IP","confirmationToken","attachSchema","Recipients","recipientGet","pipeline","push","$redact","$cond","if","$cmp","then","else","$lookup","from","localField","foreignField","as","$unwind","$project","aggregate","rIds","forEach","element","RecipientEmail","recipientsAll","RecipientsCollection","ourRecipient","email","privateKey","unique","publicKey","DoichainEntries","DoichainEntriesCollection","entry","value","address","getKeyPairM","getBalanceM","getKeyPair","getBalance","logVal","OPTINS_METHODS","getLanguages","getAllLanguages","Meta","MetaCollection","ourData","key","Senders","SendersCollection","ourSender","version","DOI_MAIL_FETCH_URL","logSend","ExportDoisDataSchema","status","role","userid","id","exportDois","$match","$exists","$ne","undefined","optIns","exportDoiData","JSON","stringify","exception","exportDefault","DOI_FETCH_ROUTE","DOI_CONFIRMATION_ROUTE","API_PATH","VERSION","getUrl","CONFIRM_CLIENT","CONFIRM_ADDRESS","getHttpGET","signMessage","parseTemplate","generateDoiToken","generateDoiHash","addSendMailJob","logConfirm","logError","FetchDoiMailDataSchema","domain","fetchDoiMailData","url","signature","query","encodeURIComponent","response","responseData","includes","optInId","findOne","token","confirmationHash","redirect","confirmationUrl","template","content","confirmation_url","to","subject","message","returnPath","getOptInProvider","getOptInKey","verifySignature","Accounts","GetDoiMailDataSchema","name_id","userProfileSchema","Email","templateURL","getDoiMailData","parts","split","length","provider","doiMailData","defaultReturnData","returnData","owner","users","mailTemplate","profile","resolveTxt","FALLBACK_PROVIDER","isRegtest","isTestnet","OPT_IN_KEY","OPT_IN_KEY_TESTNET","GetOptInKeySchema","ourOPT_IN_KEY","foundKey","dnskey","useFallback","PROVIDER_KEY","PROVIDER_KEY_TESTNET","GetOptInProviderSchema","ourPROVIDER_KEY","providerKey","getWif","addFetchDoiMailDataJob","getPrivateKeyFromWif","decryptMessage","AddDoichainEntrySchema","addDoichainEntry","ourEntry","ety","parse","wif","namePos","indexOf","substring","expiresIn","expired","listSinceBlock","nameShow","getRawTransaction","addOrUpdateMeta","TX_NAME_START","LAST_CHECKED_BLOCK_KEY","checkNewTransaction","txid","job","lastCheckedBlock","ret","transactions","txs","lastblock","addressTxs","filter","tx","startsWith","txName","addTx","done","vout","scriptPubKey","nameOp","op","addresses","crypto","ecies","DecryptMessageSchema","Buffer","ecdh","createECDH","setPrivateKey","decrypt","toString","EncryptMessageSchema","encryptMessage","encrypt","GenerateNameIdSchema","generateNameId","$set","CryptoJS","Base58","VERSION_BYTE","VERSION_BYTE_REGTEST","GetAddressSchema","getAddress","_getAddress","pubKey","lib","WordArray","create","SHA256","RIPEMD160","versionByte","concat","checksum","encode","get_Balance","bal","GetDataHashSchema","getDataHash","hash","randomBytes","secp256k1","privKey","privateKeyVerify","publicKeyCreate","toUpperCase","GetPrivateKeyFromWifSchema","_getPrivateKeyFromWif","decode","endsWith","GetPublicKeySchema","getPublicKeyAndAddress","destAddress","bitcore","Message","GetSignatureSchema","getSignature","sign","PrivateKey","SEND_CLIENT","logBlockchain","feeDoi","nameDoi","InsertSchema","dataHash","soiDate","publicKeyAndAddress","nameValue","feeDoiTx","nameDoiTx","getTransaction","DOI_CONFIRMATION_NOTIFY_ROUTE","getHttpPUT","UpdateSchema","host","fromHostUrl","name_data","rerun","our_transaction","confirmations","ourfromHostUrl","updateData","cancel","restart","err","logVerify","NETWORK","Networks","alias","pubkeyhash","privatekey","scripthash","networkMagic","VerifySignatureSchema","Address","fromPublicKey","PublicKey","verify","addInsertBlockchainJob","WriteToBlockchainSchema","writeToBlockchain","HashIds","DecodeDoiHashSchema","decodeDoiHash","ourHash","hex","decodeHex","obj","GenerateDoiHashSchema","json","encodeHex","PLACEHOLDER_REGEX","ParseTemplateSchema","Object","blackbox","_match","exec","_replacePlaceholder","replace","rep","DOI_MAIL_DEFAULT_EMAIL_FROM","SendMailSchema","sendMail","mail","ourMail","send","html","headers","Job","BlockchainJobs","addCheckNewTransactionsBlockchainJob","retry","retries","wait","save","cancelRepeats","DAppJobs","AddFetchDoiMailDataJobSchema","AddInsertBlockchainJobSchema","MailJobs","AddSendMailJobSchema","AddUpdateBlockchainJobSchema","addUpdateBlockchainJob","AddOrUpdateMetaSchema","meta","AddOptInSchema","fetch","addRecipient","addSender","recipient_mail","sender_mail","master_doi","recipientId","senderId","ConfirmOptInSchema","confirmOptIn","request","ourRequest","decoded","entries","$or","doiSignature","doiTimestamp","toISOString","jsonValue","GenerateDoiTokenSchema","UpdateOptInStatusSchema","updateOptInStatus","VERIFY_CLIENT","VerifyOptInSchema","recipient_public_key","verifyOptIn","nameIdFound","entryData","firstCheck","soiSignatureStatus","doiSignatureStatus","secondCheck","AddRecipientSchema","recipients","keyPair","AddSenderSchema","senders","isDebug","settings","app","debug","regtest","testnet","port","absoluteUrl","namecoin","SEND_APP","CONFIRM_APP","VERIFY_APP","isAppType","sendSettings","sendClient","doichain","createClient","confirmSettings","confirm","confirmClient","confirmAddress","verifySettings","verifyClient","Client","user","username","pass","password","Hashids","doiMailFetchUrl","defaultFrom","smtp","startup","process","env","MAIL_URL","server","NODE_TLS_REJECT_UNAUTHORIZED","Assets","getText","count","createUser","addUsersToRoles","startJobServer","console","sendModeTagColor","confirmModeTagColor","verifyModeTagColor","blockchainModeTagColor","testingModeTagColor","logMain","testLogging","require","msg","colors","param","time","tag","log","AUTH_METHODS","types","config","sendVerificationEmail","forbidClientAccountCreation","emailTemplates","Api","DOI_WALLETNOTIFY_ROUTE","addRoute","authRequired","get","action","urlParams","ip","connection","remoteAddress","socket","statusCode","body","params","queryParams","DOI_EXPORT_ROUTE","post","qParams","bParams","bodyParams","uid","constructor","Array","prepareCoDOI","prepareAdd","put","val","ownerID","currentOptInId","retResponse","ret_response","getInfo","ex","mailTemplateSchema","createUserSchema","updateUserSchema","collectionOptions","path","routeOptions","excludedEndpoints","endpoints","delete","roleRequired","paramId","addCollection","Restivus","apiPath","useDefaultAuth","prettyJson","JobCollection","processJobs","workTimeout","cb","fail","pause","repeat","schedule","later","text","q","pollInterval","current","setMinutes","getMinutes","ids","$in","jobStatusRemovable","updated","$lt","removeJobs","observe","added","trigger","dns","syncFunc","wrapAsync","dns_resolveTxt","records","record","trim","getServers","getAddressesByAccount","getNewAddress","NAMESPACE","client","doichain_dumpprivkey","ourAddress","cmd","accout","doichain_getaddressesbyaccount","account","ourAccount","doichain_getnewaddress","doichain_signMessage","ourMessage","doichain_nameShow","ourId","checkId","doichain_feeDoi","doichain_nameDoi","ourName","ourValue","block","doichain_listSinceBlock","ourBlock","doichain_gettransaction","doichain_getrawtransaction","doichain_getbalance","doichain_getinfo","DOI_PREFIX","ret_val","getHttpGETdata","getHttpPOST","HTTP","_get","_getData","_post","_put","ourUrl","ourQuery","login","requestDOI","getNameIdOfRawTransaction","getNameIdOfOptInFromRawTx","fetchConfirmLinkFromPop3Mail","deleteAllEmailsFromPop3","confirmLink","verifyDOI","findUser","findOptIn","exportOptIns","requestConfirmVerifyBasicDoi","updateUser","resetUsers","chai","quotedPrintableDecode","generatetoaddress","os","POP3Client","paramsLogin","urlLogin","headersLogin","realDataLogin","dataLogin","statusLogin","assert","equal","auth","urlOptIn","dataOptIn","headersOptIn","authToken","realDataOptIn","resultOptIn","isArray","get_nameid_of_raw_transaction","running","counter","loop","dataGetRawTransaction","realdataGetRawTransaction","resultGetRawTransaction","Promise","resolve","setTimeout","get_nameid_of_optin_from_rawtx","our_optIn","notEqual","isBelow","hostname","alicedapp_url","fetch_confirm_link_from_pop3_mail","tlserrs","enabletls","on","rawdata","list","msgcount","msgnumber","rset","retr","maildata","replaceAll","expect","not","linkdata","be","null","requestData","dele","quit","end","str","RegExp","delete_all_emails_from_pop3","i","confirm_link","doiConfirmlinkResult","have","string","e","dAppUrl","dAppUrlAuth","node_url_alice","rpcAuthAlice","verify_doi","our_recipient_mail","urlVerify","resultVerify","statusVerify","dataVerify","headersVerify","realdataVerify","global","aliceAddress","headersUser","urlUsers","dataUser","realDataUser","res","urlExport","dappUrlAlice","dataLoginAlice","dappUrlBob","optionalData","recipient_pop3username","recipient_pop3password","request_confirm_verify_basic_doi","sender_mail_in","resultDataOptInTmp","resultDataOptIn","confirmedLink","link2Confirm","tmpId","updateId","usDat","initBlockchain","isNodeAlive","isNodeAliveAndConnectedToHost","importPrivKey","waitToStartContainer","deleteOptInsFromAliceAndBob","start3rdNode","stopDockerBob","getContainerIdOfName","startDockerBob","doichainAddNode","getDockerStatus","connectDockerBob","runAndWait","sudo","node_url_bob","rpcAuth","privKeyBob","aliceContainerId","statusDocker","balance","Number","connections","wait_to_start_container","startedContainerId","error2","delete_options_from_alice_and_bob","containerId","stdout","stderr","dataGetNetworkInfo","realdataGetNetworkInfo","resultGetNetworkInfo","statusGetNetworkInfo","statusAddNode","dataGetPeerInfo","realdataGetPeerInfo","resultGetPeerInfo","statusGetPeerInfo","isAbove","rescan","data_importprivkey","realdata_importprivkey","dataGetNewAddress","realdataGetNewAddress","resultGetNewAddress","statusOptInGetNewAddress","newAddress","toaddress","amount","dataGenerate","headersGenerates","realdataGenerate","resultGenerate","statusResultGenerate","dataGetBalance","realdataGetBalance","resultGetBalance","get_container_id_of_name","bobsContainerId","stop_docker_bob","doichain_add_node","get_docker_status","start_docker_bob","connect_docker_bob","start_3rd_node","network","run_and_wait","runfunction","seconds","isAppTest","describe","timeout","before","it","aliceBalance","dAppLogin","templateUrlA","templateUrlB","aliceALogin","aliceBLogin","logAdmin","userA","userB","sender_mail_alice_a","sender_mail_alice_b","logUserA","logUserB","exportedOptIns","exportedOptInsA","userUp","changedData","logUserUp","coDoiList","coDois","adLog","returnedData","stdout2","stderr2","isTest","beforeEach","xdescribe","xit"],"mappings":";;;;;;;;AAAA,IAAIA,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIC,KAAJ;AAAUH,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAoC;AAACE,OAAK,CAACD,CAAD,EAAG;AAACC,SAAK,GAACD,CAAN;AAAQ;;AAAlB,CAApC,EAAwD,CAAxD;AAA2D,IAAIE,MAAJ;AAAWJ,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACG,QAAM,CAACF,CAAD,EAAG;AAACE,UAAM,GAACF,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAKhJH,MAAM,CAACM,OAAP,CAAe,aAAf,EAA8B,SAASC,SAAT,GAAqB;AACjD,MAAG,CAAC,KAAKC,MAAT,EAAiB;AACf,WAAO,KAAKC,KAAL,EAAP;AACD;;AACD,MAAG,CAACL,KAAK,CAACM,YAAN,CAAmB,KAAKF,MAAxB,EAAgC,CAAC,OAAD,CAAhC,CAAJ,EAA+C;AAC7C,WAAOH,MAAM,CAACM,IAAP,CAAY;AAACC,aAAO,EAAC,KAAKJ;AAAd,KAAZ,EAAmC;AACxCK,YAAM,EAAER,MAAM,CAACS;AADyB,KAAnC,CAAP;AAGD;;AAGD,SAAOT,MAAM,CAACM,IAAP,CAAY,EAAZ,EAAgB;AACrBE,UAAM,EAAER,MAAM,CAACS;AADM,GAAhB,CAAP;AAGD,CAdD,E;;;;;;;;;;;ACLA,IAAId,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIY,cAAJ;AAAmBd,MAAM,CAACC,IAAP,CAAY,yBAAZ,EAAsC;AAACa,gBAAc,CAACZ,CAAD,EAAG;AAACY,kBAAc,GAACZ,CAAf;AAAiB;;AAApC,CAAtC,EAA4E,CAA5E;AAA+E,IAAIa,IAAJ;AAASf,MAAM,CAACC,IAAP,CAAY,sBAAZ,EAAmC;AAACe,OAAK,CAACd,CAAD,EAAG;AAACa,QAAI,GAACb,CAAL;AAAO;;AAAjB,CAAnC,EAAsD,CAAtD;AAAyD,IAAIe,eAAJ;AAAoBjB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACgB,iBAAe,CAACf,CAAD,EAAG;AAACe,mBAAe,GAACf,CAAhB;AAAkB;;AAAtC,CAA1C,EAAkF,CAAlF;AAAqF,IAAIC,KAAJ;AAAUH,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAoC;AAACE,OAAK,CAACD,CAAD,EAAG;AAACC,SAAK,GAACD,CAAN;AAAQ;;AAAlB,CAApC,EAAwD,CAAxD;;AAA2D,IAAIgB,CAAJ;;AAAMlB,MAAM,CAACC,IAAP,CAAY,mBAAZ,EAAgC;AAACiB,GAAC,CAAChB,CAAD,EAAG;AAACgB,KAAC,GAAChB,CAAF;AAAI;;AAAV,CAAhC,EAA4C,CAA5C;AAA+C,IAAIiB,QAAJ;AAAanB,MAAM,CAACC,IAAP,CAAY,6DAAZ,EAA0E;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACiB,YAAQ,GAACjB,CAAT;AAAW;;AAAvB,CAA1E,EAAmG,CAAnG;AAQpd,MAAMmB,GAAG,GAAG,IAAIJ,eAAJ,CAAoB;AAC9BK,MAAI,EAAE,aADwB;AAE9BC,UAAQ,EAAE,IAFoB;;AAG9BC,KAAG,CAAC;AAAEC,iBAAF;AAAiBC,cAAjB;AAA6BC;AAA7B,GAAD,EAAsC;AACvC,QAAG,CAAC,KAAKpB,MAAN,IAAgB,CAACJ,KAAK,CAACM,YAAN,CAAmB,KAAKF,MAAxB,EAAgC,CAAC,OAAD,CAAhC,CAApB,EAAgE;AAC9D,YAAMqB,KAAK,GAAG,8BAAd;AACA,YAAM,IAAI7B,MAAM,CAAC8B,KAAX,CAAiBD,KAAjB,EAAwBb,IAAI,CAACe,EAAL,CAAQF,KAAR,CAAxB,CAAN;AACD;;AAED,UAAMG,KAAK,GAAG;AACZ,wBAAkBN,aADN;AAEZ,qBAAeC,UAFH;AAGZC;AAHY,KAAd;AAMAR,YAAQ,CAACY,KAAD,CAAR;AACD;;AAhB6B,CAApB,CAAZ,C,CAmBA;;AACA,MAAMC,eAAe,GAAGd,CAAC,CAACe,KAAF,CAAQ,CAC9BZ,GAD8B,CAAR,EAErB,MAFqB,CAAxB;;AAIA,IAAItB,MAAM,CAACmC,QAAX,EAAqB;AACnB;AACApB,gBAAc,CAACqB,OAAf,CAAuB;AACrBb,QAAI,CAACA,IAAD,EAAO;AACT,aAAOJ,CAAC,CAACkB,QAAF,CAAWJ,eAAX,EAA4BV,IAA5B,CAAP;AACD,KAHoB;;AAKrB;AACAe,gBAAY,GAAG;AAAE,aAAO,IAAP;AAAc;;AANV,GAAvB,EAOG,CAPH,EAOM,IAPN;AAQD,C;;;;;;;;;;;AC1CDrC,MAAM,CAACsC,MAAP,CAAc;AAAClC,QAAM,EAAC,MAAIA;AAAZ,CAAd;AAAmC,IAAImC,KAAJ;AAAUvC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACsC,OAAK,CAACrC,CAAD,EAAG;AAACqC,SAAK,GAACrC,CAAN;AAAQ;;AAAlB,CAA3B,EAA+C,CAA/C;AAAkD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;;AAGhH,MAAMuC,gBAAN,SAA+BF,KAAK,CAACG,UAArC,CAAgD;AAC9CC,QAAM,CAACZ,KAAD,EAAQa,QAAR,EAAkB;AACtB,UAAMC,QAAQ,GAAGd,KAAjB;AACAc,YAAQ,CAACC,gBAAT,GAA4BD,QAAQ,CAACE,SAAT,GAAmBF,QAAQ,CAACG,MAAxD;AACAH,YAAQ,CAACI,SAAT,GAAqBJ,QAAQ,CAACI,SAAT,IAAsB,IAAIC,IAAJ,EAA3C;AACA,UAAMC,MAAM,GAAG,MAAMR,MAAN,CAAaE,QAAb,EAAuBD,QAAvB,CAAf;AACA,WAAOO,MAAP;AACD;;AACDC,QAAM,CAACC,QAAD,EAAWC,QAAX,EAAqB;AACzB,UAAMH,MAAM,GAAG,MAAMC,MAAN,CAAaC,QAAb,EAAuBC,QAAvB,CAAf;AACA,WAAOH,MAAP;AACD;;AACDI,QAAM,CAACF,QAAD,EAAW;AACf,UAAMF,MAAM,GAAG,MAAMI,MAAN,CAAaF,QAAb,CAAf;AACA,WAAOF,MAAP;AACD;;AAf6C;;AAkBzC,MAAM/C,MAAM,GAAG,IAAIqC,gBAAJ,CAAqB,SAArB,CAAf;AAEP;AACArC,MAAM,CAACoD,IAAP,CAAY;AACVb,QAAM,GAAG;AAAE,WAAO,IAAP;AAAc,GADf;;AAEVS,QAAM,GAAG;AAAE,WAAO,IAAP;AAAc,GAFf;;AAGVG,QAAM,GAAG;AAAE,WAAO,IAAP;AAAc;;AAHf,CAAZ;AAMAnD,MAAM,CAACqD,MAAP,GAAgB,IAAIjB,YAAJ,CAAiB;AAC/BkB,KAAG,EAAE;AACHC,QAAI,EAAEC,MADH;AAEHC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmBC;AAFvB,GAD0B;AAK/BhB,WAAS,EAAE;AACTY,QAAI,EAAEC,MADG;AAETI,YAAQ,EAAE,IAFD;AAGTC,cAAU,EAAE;AAHH,GALoB;AAU/BjB,QAAM,EAAE;AACNW,QAAI,EAAEC,MADA;AAENI,YAAQ,EAAE,IAFJ;AAGNC,cAAU,EAAE;AAHN,GAVuB;AAe/BtC,MAAI,EAAE;AACJgC,QAAI,EAAEC,MADF;AAEJI,YAAQ,EAAE,IAFN;AAGJC,cAAU,EAAE;AAHR,GAfyB;AAoB/BC,OAAK,EAAE;AACLP,QAAI,EAAEnB,YAAY,CAAC2B,OADd;AAELH,YAAQ,EAAE,IAFL;AAGLC,cAAU,EAAE;AAHP,GApBwB;AAyB/BG,QAAM,EAAE;AACNT,QAAI,EAAEC,MADA;AAENI,YAAQ,EAAE,IAFJ;AAGNC,cAAU,EAAE;AAHN,GAzBuB;AA8B/BI,MAAI,EAAE;AACFV,QAAI,EAAEC,MADJ;AAEFI,YAAQ,EAAE,IAFR;AAGFC,cAAU,EAAE;AAHV,GA9ByB;AAmC/BK,WAAS,EAAE;AACPX,QAAI,EAAEC,MADC;AAEPI,YAAQ,EAAE,IAFH;AAGPC,cAAU,EAAE;AAHL,GAnCoB;AAwC/BhB,WAAS,EAAE;AACTU,QAAI,EAAET,IADG;AAETe,cAAU,EAAE;AAFH,GAxCoB;AA4C/BM,aAAW,EAAE;AACXZ,QAAI,EAAET,IADK;AAEXc,YAAQ,EAAE,IAFC;AAGXC,cAAU,EAAE;AAHD,GA5CkB;AAiD/BO,aAAW,EAAE;AACXb,QAAI,EAAEC,MADK;AAEXC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmBW,EAFf;AAGXT,YAAQ,EAAE,IAHC;AAIXC,cAAU,EAAE;AAJD,GAjDkB;AAuD/BS,mBAAiB,EAAE;AACjBf,QAAI,EAAEC,MADW;AAEjBI,YAAQ,EAAE,IAFO;AAGjBC,cAAU,EAAE;AAHK,GAvDY;AA4D/BtD,SAAO,EAAC;AACNgD,QAAI,EAAEC,MADA;AAENI,YAAQ,EAAE,IAFJ;AAGNH,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmBC;AAHpB,GA5DuB;AAiE/BnC,OAAK,EAAC;AACF+B,QAAI,EAAEC,MADJ;AAEFI,YAAQ,EAAE,IAFR;AAGFC,cAAU,EAAE;AAHV;AAjEyB,CAAjB,CAAhB;AAwEA7D,MAAM,CAACuE,YAAP,CAAoBvE,MAAM,CAACqD,MAA3B,E,CAEA;AACA;AACA;;AACArD,MAAM,CAACS,YAAP,GAAsB;AACpB6C,KAAG,EAAE,CADe;AAEpBX,WAAS,EAAE,CAFS;AAGpBC,QAAM,EAAE,CAHY;AAIpBrB,MAAI,EAAE,CAJc;AAKpBuC,OAAK,EAAE,CALa;AAMpBE,QAAM,EAAE,CANY;AAOpBC,MAAI,EAAE,CAPc;AAQpBC,WAAS,EAAE,CARS;AASpBrB,WAAS,EAAE,CATS;AAUpBsB,aAAW,EAAE,CAVO;AAWpBC,aAAW,EAAE,CAXO;AAYpB7D,SAAO,EAAE,CAZW;AAapBiB,OAAK,EAAE;AAba,CAAtB,C;;;;;;;;;;;AC3GA,IAAI7B,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIC,KAAJ;AAAUH,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAoC;AAACE,OAAK,CAACD,CAAD,EAAG;AAACC,SAAK,GAACD,CAAN;AAAQ;;AAAlB,CAApC,EAAwD,CAAxD;AAA2D,IAAI0E,UAAJ;AAAe5E,MAAM,CAACC,IAAP,CAAY,kBAAZ,EAA+B;AAAC2E,YAAU,CAAC1E,CAAD,EAAG;AAAC0E,cAAU,GAAC1E,CAAX;AAAa;;AAA5B,CAA/B,EAA6D,CAA7D;AAAgE,IAAIE,MAAJ;AAAWJ,MAAM,CAACC,IAAP,CAAY,0BAAZ,EAAuC;AAACG,QAAM,CAACF,CAAD,EAAG;AAACE,UAAM,GAACF,CAAP;AAAS;;AAApB,CAAvC,EAA6D,CAA7D;AAK/NH,MAAM,CAACM,OAAP,CAAe,oBAAf,EAAoC,SAASwE,YAAT,GAAuB;AACzD,MAAIC,QAAQ,GAAC,EAAb;;AACA,MAAG,CAAC3E,KAAK,CAACM,YAAN,CAAmB,KAAKF,MAAxB,EAAgC,CAAC,OAAD,CAAhC,CAAJ,EAA+C;AAC7CuE,YAAQ,CAACC,IAAT,CACE;AAACC,aAAO,EAAC;AACTC,aAAK,EAAE;AACLC,YAAE,EAAE;AAAEC,gBAAI,EAAE,CAAE,UAAF,EAAc,KAAK5E,MAAnB;AAAR,WADC;AAEL6E,cAAI,EAAE,SAFD;AAGLC,cAAI,EAAE;AAHD;AADE;AAAT,KADF;AAMG;;AACDP,UAAQ,CAACC,IAAT,CAAc;AAAEO,WAAO,EAAE;AAAEC,UAAI,EAAE,YAAR;AAAsBC,gBAAU,EAAE,WAAlC;AAA+CC,kBAAY,EAAE,KAA7D;AAAoEC,QAAE,EAAE;AAAxE;AAAX,GAAd;AACAZ,UAAQ,CAACC,IAAT,CAAc;AAAEY,WAAO,EAAE;AAAX,GAAd;AACAb,UAAQ,CAACC,IAAT,CAAc;AAAEa,YAAQ,EAAE;AAAC,4BAAqB;AAAtB;AAAZ,GAAd;AAEA,QAAMzC,MAAM,GAAG/C,MAAM,CAACyF,SAAP,CAAiBf,QAAjB,CAAf;AACA,MAAIgB,IAAI,GAAC,EAAT;AACA3C,QAAM,CAAC4C,OAAP,CAAeC,OAAO,IAAI;AACxBF,QAAI,CAACf,IAAL,CAAUiB,OAAO,CAACC,cAAR,CAAuBvC,GAAjC;AACD,GAFD;AAGJ,SAAOkB,UAAU,CAAClE,IAAX,CAAgB;AAAC,WAAM;AAAC,aAAMoF;AAAP;AAAP,GAAhB,EAAqC;AAAClF,UAAM,EAACgE,UAAU,CAAC/D;AAAnB,GAArC,CAAP;AACD,CApBD;AAqBAd,MAAM,CAACM,OAAP,CAAe,gBAAf,EAAiC,SAAS6F,aAAT,GAAyB;AACxD,MAAG,CAAC,KAAK3F,MAAN,IAAgB,CAACJ,KAAK,CAACM,YAAN,CAAmB,KAAKF,MAAxB,EAAgC,CAAC,OAAD,CAAhC,CAApB,EAAgE;AAC9D,WAAO,KAAKC,KAAL,EAAP;AACD;;AAED,SAAOoE,UAAU,CAAClE,IAAX,CAAgB,EAAhB,EAAoB;AACzBE,UAAM,EAAEgE,UAAU,CAAC/D;AADM,GAApB,CAAP;AAGD,CARD,E;;;;;;;;;;;AC1BAb,MAAM,CAACsC,MAAP,CAAc;AAACsC,YAAU,EAAC,MAAIA;AAAhB,CAAd;AAA2C,IAAIrC,KAAJ;AAAUvC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACsC,OAAK,CAACrC,CAAD,EAAG;AAACqC,SAAK,GAACrC,CAAN;AAAQ;;AAAlB,CAA3B,EAA+C,CAA/C;AAAkD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;;AAGxH,MAAMiG,oBAAN,SAAmC5D,KAAK,CAACG,UAAzC,CAAoD;AAClDC,QAAM,CAACI,SAAD,EAAYH,QAAZ,EAAsB;AAC1B,UAAMwD,YAAY,GAAGrD,SAArB;AACAqD,gBAAY,CAACnD,SAAb,GAAyBmD,YAAY,CAACnD,SAAb,IAA0B,IAAIC,IAAJ,EAAnD;AACA,UAAMC,MAAM,GAAG,MAAMR,MAAN,CAAayD,YAAb,EAA2BxD,QAA3B,CAAf;AACA,WAAOO,MAAP;AACD;;AACDC,QAAM,CAACC,QAAD,EAAWC,QAAX,EAAqB;AACzB,UAAMH,MAAM,GAAG,MAAMC,MAAN,CAAaC,QAAb,EAAuBC,QAAvB,CAAf;AACA,WAAOH,MAAP;AACD;;AACDI,QAAM,CAACF,QAAD,EAAW;AACf,UAAMF,MAAM,GAAG,MAAMI,MAAN,CAAaF,QAAb,CAAf;AACA,WAAOF,MAAP;AACD;;AAdiD;;AAiB7C,MAAMyB,UAAU,GAAG,IAAIuB,oBAAJ,CAAyB,YAAzB,CAAnB;AAEP;AACAvB,UAAU,CAACpB,IAAX,CAAgB;AACdb,QAAM,GAAG;AAAE,WAAO,IAAP;AAAc,GADX;;AAEdS,QAAM,GAAG;AAAE,WAAO,IAAP;AAAc,GAFX;;AAGdG,QAAM,GAAG;AAAE,WAAO,IAAP;AAAc;;AAHX,CAAhB;AAMAqB,UAAU,CAACnB,MAAX,GAAoB,IAAIjB,YAAJ,CAAiB;AACnCkB,KAAG,EAAE;AACHC,QAAI,EAAEC,MADH;AAEHC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmBC;AAFvB,GAD8B;AAKnCsC,OAAK,EAAE;AACL1C,QAAI,EAAEC,MADD;AAELM,SAAK,EAAE,IAFF;AAGLD,cAAU,EAAE;AAHP,GAL4B;AAUnCqC,YAAU,EAAE;AACV3C,QAAI,EAAEC,MADI;AAEV2C,UAAM,EAAE,IAFE;AAGVtC,cAAU,EAAE;AAHF,GAVuB;AAenCuC,WAAS,EAAE;AACT7C,QAAI,EAAEC,MADG;AAET2C,UAAM,EAAE,IAFC;AAGTtC,cAAU,EAAE;AAHH,GAfwB;AAoBnChB,WAAS,EAAE;AACTU,QAAI,EAAET,IADG;AAETe,cAAU,EAAE;AAFH;AApBwB,CAAjB,CAApB;AA0BAW,UAAU,CAACD,YAAX,CAAwBC,UAAU,CAACnB,MAAnC,E,CAEA;AACA;AACA;;AACAmB,UAAU,CAAC/D,YAAX,GAA0B;AACxB6C,KAAG,EAAE,CADmB;AAExB2C,OAAK,EAAE,CAFiB;AAGxBG,WAAS,EAAE,CAHa;AAIxBvD,WAAS,EAAE;AAJa,CAA1B,C;;;;;;;;;;;AC5DAjD,MAAM,CAACsC,MAAP,CAAc;AAACmE,iBAAe,EAAC,MAAIA;AAArB,CAAd;AAAqD,IAAIlE,KAAJ;AAAUvC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACsC,OAAK,CAACrC,CAAD,EAAG;AAACqC,SAAK,GAACrC,CAAN;AAAQ;;AAAlB,CAA3B,EAA+C,CAA/C;AAAkD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;;AAGlI,MAAMwG,yBAAN,SAAwCnE,KAAK,CAACG,UAA9C,CAAyD;AACvDC,QAAM,CAACgE,KAAD,EAAQ/D,QAAR,EAAkB;AACtB,UAAMO,MAAM,GAAG,MAAMR,MAAN,CAAagE,KAAb,EAAoB/D,QAApB,CAAf;AACA,WAAOO,MAAP;AACD;;AACDC,QAAM,CAACC,QAAD,EAAWC,QAAX,EAAqB;AACzB,UAAMH,MAAM,GAAG,MAAMC,MAAN,CAAaC,QAAb,EAAuBC,QAAvB,CAAf;AACA,WAAOH,MAAP;AACD;;AACDI,QAAM,CAACF,QAAD,EAAW;AACf,UAAMF,MAAM,GAAG,MAAMI,MAAN,CAAaF,QAAb,CAAf;AACA,WAAOF,MAAP;AACD;;AAZsD;;AAelD,MAAMsD,eAAe,GAAG,IAAIC,yBAAJ,CAA8B,kBAA9B,CAAxB;AAEP;AACAD,eAAe,CAACjD,IAAhB,CAAqB;AACnBb,QAAM,GAAG;AAAE,WAAO,IAAP;AAAc,GADN;;AAEnBS,QAAM,GAAG;AAAE,WAAO,IAAP;AAAc,GAFN;;AAGnBG,QAAM,GAAG;AAAE,WAAO,IAAP;AAAc;;AAHN,CAArB;AAMAkD,eAAe,CAAChD,MAAhB,GAAyB,IAAIjB,YAAJ,CAAiB;AACxCkB,KAAG,EAAE;AACHC,QAAI,EAAEC,MADH;AAEHC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmBC;AAFvB,GADmC;AAKxCzC,MAAI,EAAE;AACJqC,QAAI,EAAEC,MADF;AAEJM,SAAK,EAAE,IAFH;AAGJD,cAAU,EAAE;AAHR,GALkC;AAUxC2C,OAAK,EAAE;AACLjD,QAAI,EAAEC,MADD;AAELK,cAAU,EAAE;AAFP,GAViC;AAcxC4C,SAAO,EAAE;AACPlD,QAAI,EAAEC,MADC;AAEPK,cAAU,EAAE;AAFL,GAd+B;AAkBxCK,WAAS,EAAE;AACLX,QAAI,EAAEC,MADD;AAELI,YAAQ,EAAE,IAFL;AAGLE,SAAK,EAAE,IAHF;AAILD,cAAU,EAAE;AAJP,GAlB6B;AAwBxCC,OAAK,EAAE;AACDP,QAAI,EAAEnB,YAAY,CAAC2B,OADlB;AAEDH,YAAQ,EAAE,IAFT;AAGDC,cAAU,EAAE;AAHX,GAxBiC;AA6BxCI,MAAI,EAAE;AACJV,QAAI,EAAEC,MADF;AAEJK,cAAU,EAAE;AAFR;AA7BkC,CAAjB,CAAzB;AAmCAwC,eAAe,CAAC9B,YAAhB,CAA6B8B,eAAe,CAAChD,MAA7C,E,CAEA;AACA;AACA;;AACAgD,eAAe,CAAC5F,YAAhB,GAA+B;AAC7B6C,KAAG,EAAE,CADwB;AAE7BpC,MAAI,EAAE,CAFuB;AAG7BsF,OAAK,EAAE,CAHsB;AAI7BC,SAAO,EAAE,CAJoB;AAK7BvC,WAAS,EAAE,CALkB;AAM7BJ,OAAK,EAAE,CANsB;AAO7BG,MAAI,EAAE;AAPuB,CAA/B,C;;;;;;;;;;;ACnEA,IAAIpD,eAAJ;AAAoBjB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACgB,iBAAe,CAACf,CAAD,EAAG;AAACe,mBAAe,GAACf,CAAhB;AAAkB;;AAAtC,CAA1C,EAAkF,CAAlF;AAAqF,IAAIH,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIY,cAAJ;AAAmBd,MAAM,CAACC,IAAP,CAAY,yBAAZ,EAAsC;AAACa,gBAAc,CAACZ,CAAD,EAAG;AAACY,kBAAc,GAACZ,CAAf;AAAiB;;AAApC,CAAtC,EAA4E,CAA5E;AAA+E,IAAI4G,WAAJ;AAAgB9G,MAAM,CAACC,IAAP,CAAY,+CAAZ,EAA4D;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC4G,eAAW,GAAC5G,CAAZ;AAAc;;AAA1B,CAA5D,EAAwF,CAAxF;AAA2F,IAAI6G,WAAJ;AAAgB/G,MAAM,CAACC,IAAP,CAAY,8CAAZ,EAA2D;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC6G,eAAW,GAAC7G,CAAZ;AAAc;;AAA1B,CAA3D,EAAuF,CAAvF;AAOtY,MAAM8G,UAAU,GAAG,IAAI/F,eAAJ,CAAoB;AACrCK,MAAI,EAAE,qBAD+B;AAErCC,UAAQ,EAAE,IAF2B;;AAGrCC,KAAG,GAAG;AACJ,WAAOsF,WAAW,EAAlB;AACD;;AALoC,CAApB,CAAnB;AAQA,MAAMG,UAAU,GAAG,IAAIhG,eAAJ,CAAoB;AACrCK,MAAI,EAAE,qBAD+B;AAErCC,UAAQ,EAAE,IAF2B;;AAGrCC,KAAG,GAAG;AACJ,UAAM0F,MAAM,GAAGH,WAAW,EAA1B;AACA,WAAOG,MAAP;AACD;;AANoC,CAApB,CAAnB,C,CAUA;;AACA,MAAMC,cAAc,GAAGjG,CAAC,CAACe,KAAF,CAAQ,CAC7B+E,UAD6B,EAE9BC,UAF8B,CAAR,EAET,MAFS,CAAvB;;AAIA,IAAIlH,MAAM,CAACmC,QAAX,EAAqB;AACnB;AACApB,gBAAc,CAACqB,OAAf,CAAuB;AACrBb,QAAI,CAACA,IAAD,EAAO;AACT,aAAOJ,CAAC,CAACkB,QAAF,CAAW+E,cAAX,EAA2B7F,IAA3B,CAAP;AACD,KAHoB;;AAKrB;AACAe,gBAAY,GAAG;AAAE,aAAO,IAAP;AAAc;;AANV,GAAvB,EAOG,CAPH,EAOM,IAPN;AAQD,C;;;;;;;;;;;ACxCD,IAAItC,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIY,cAAJ;AAAmBd,MAAM,CAACC,IAAP,CAAY,yBAAZ,EAAsC;AAACa,gBAAc,CAACZ,CAAD,EAAG;AAACY,kBAAc,GAACZ,CAAf;AAAiB;;AAApC,CAAtC,EAA4E,CAA5E;AAA+E,IAAIe,eAAJ;AAAoBjB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACgB,iBAAe,CAACf,CAAD,EAAG;AAACe,mBAAe,GAACf,CAAhB;AAAkB;;AAAtC,CAA1C,EAAkF,CAAlF;AAAqF,IAAIkH,YAAJ;AAAiBpH,MAAM,CAACC,IAAP,CAAY,uCAAZ,EAAoD;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACkH,gBAAY,GAAClH,CAAb;AAAe;;AAA3B,CAApD,EAAiF,CAAjF;AAK5R,MAAMmH,eAAe,GAAG,IAAIpG,eAAJ,CAAoB;AAC1CK,MAAI,EAAE,kBADoC;AAE1CC,UAAQ,EAAE,IAFgC;;AAG1CC,KAAG,GAAG;AACJ,WAAO4F,YAAY,EAAnB;AACD;;AALyC,CAApB,CAAxB,C,CAQA;;AACA,MAAMD,cAAc,GAAGjG,CAAC,CAACe,KAAF,CAAQ,CAC7BoF,eAD6B,CAAR,EAEpB,MAFoB,CAAvB;;AAIA,IAAItH,MAAM,CAACmC,QAAX,EAAqB;AACnB;AACApB,gBAAc,CAACqB,OAAf,CAAuB;AACrBb,QAAI,CAACA,IAAD,EAAO;AACT,aAAOJ,CAAC,CAACkB,QAAF,CAAW+E,cAAX,EAA2B7F,IAA3B,CAAP;AACD,KAHoB;;AAKrB;AACAe,gBAAY,GAAG;AAAE,aAAO,IAAP;AAAc;;AANV,GAAvB,EAOG,CAPH,EAOM,IAPN;AAQD,C;;;;;;;;;;;AC5BDrC,MAAM,CAACsC,MAAP,CAAc;AAACgF,MAAI,EAAC,MAAIA;AAAV,CAAd;AAA+B,IAAI/E,KAAJ;AAAUvC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACsC,OAAK,CAACrC,CAAD,EAAG;AAACqC,SAAK,GAACrC,CAAN;AAAQ;;AAAlB,CAA3B,EAA+C,CAA/C;AAAkD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;;AAG5G,MAAMqH,cAAN,SAA6BhF,KAAK,CAACG,UAAnC,CAA8C;AAC5CC,QAAM,CAAChB,IAAD,EAAOiB,QAAP,EAAiB;AACrB,UAAM4E,OAAO,GAAG7F,IAAhB;AACA,UAAMwB,MAAM,GAAG,MAAMR,MAAN,CAAa6E,OAAb,EAAsB5E,QAAtB,CAAf;AACA,WAAOO,MAAP;AACD;;AACDC,QAAM,CAACC,QAAD,EAAWC,QAAX,EAAqB;AACzB,UAAMH,MAAM,GAAG,MAAMC,MAAN,CAAaC,QAAb,EAAuBC,QAAvB,CAAf;AACA,WAAOH,MAAP;AACD;;AACDI,QAAM,CAACF,QAAD,EAAW;AACf,UAAMF,MAAM,GAAG,MAAMI,MAAN,CAAaF,QAAb,CAAf;AACA,WAAOF,MAAP;AACD;;AAb2C;;AAgBvC,MAAMmE,IAAI,GAAG,IAAIC,cAAJ,CAAmB,MAAnB,CAAb;AAEP;AACAD,IAAI,CAAC9D,IAAL,CAAU;AACRb,QAAM,GAAG;AAAE,WAAO,IAAP;AAAc,GADjB;;AAERS,QAAM,GAAG;AAAE,WAAO,IAAP;AAAc,GAFjB;;AAGRG,QAAM,GAAG;AAAE,WAAO,IAAP;AAAc;;AAHjB,CAAV;AAMA+D,IAAI,CAAC7D,MAAL,GAAc,IAAIjB,YAAJ,CAAiB;AAC7BkB,KAAG,EAAE;AACHC,QAAI,EAAEC,MADH;AAEHC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmBC;AAFvB,GADwB;AAK7B0D,KAAG,EAAE;AACH9D,QAAI,EAAEC,MADH;AAEHM,SAAK,EAAE,IAFJ;AAGHD,cAAU,EAAE;AAHT,GALwB;AAU7B2C,OAAK,EAAE;AACLjD,QAAI,EAAEC;AADD;AAVsB,CAAjB,CAAd;AAeA0D,IAAI,CAAC3C,YAAL,CAAkB2C,IAAI,CAAC7D,MAAvB,E,CAEA;AACA;AACA;;AACA6D,IAAI,CAACzG,YAAL,GAAoB,EAApB,C;;;;;;;;;;;AChDAb,MAAM,CAACsC,MAAP,CAAc;AAACoF,SAAO,EAAC,MAAIA;AAAb,CAAd;AAAqC,IAAInF,KAAJ;AAAUvC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACsC,OAAK,CAACrC,CAAD,EAAG;AAACqC,SAAK,GAACrC,CAAN;AAAQ;;AAAlB,CAA3B,EAA+C,CAA/C;AAAkD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;;AAGlH,MAAMyH,iBAAN,SAAgCpF,KAAK,CAACG,UAAtC,CAAiD;AAC/CC,QAAM,CAACK,MAAD,EAASJ,QAAT,EAAmB;AACvB,UAAMgF,SAAS,GAAG5E,MAAlB;AACA4E,aAAS,CAAC3E,SAAV,GAAsB2E,SAAS,CAAC3E,SAAV,IAAuB,IAAIC,IAAJ,EAA7C;AACA,UAAMC,MAAM,GAAG,MAAMR,MAAN,CAAaiF,SAAb,EAAwBhF,QAAxB,CAAf;AACA,WAAOO,MAAP;AACD;;AACDC,QAAM,CAACC,QAAD,EAAWC,QAAX,EAAqB;AACzB,UAAMH,MAAM,GAAG,MAAMC,MAAN,CAAaC,QAAb,EAAuBC,QAAvB,CAAf;AACA,WAAOH,MAAP;AACD;;AACDI,QAAM,CAACF,QAAD,EAAW;AACf,UAAMF,MAAM,GAAG,MAAMI,MAAN,CAAaF,QAAb,CAAf;AACA,WAAOF,MAAP;AACD;;AAd8C;;AAiB1C,MAAMuE,OAAO,GAAG,IAAIC,iBAAJ,CAAsB,SAAtB,CAAhB;AAEP;AACAD,OAAO,CAAClE,IAAR,CAAa;AACXb,QAAM,GAAG;AAAE,WAAO,IAAP;AAAc,GADd;;AAEXS,QAAM,GAAG;AAAE,WAAO,IAAP;AAAc,GAFd;;AAGXG,QAAM,GAAG;AAAE,WAAO,IAAP;AAAc;;AAHd,CAAb;AAMAmE,OAAO,CAACjE,MAAR,GAAiB,IAAIjB,YAAJ,CAAiB;AAChCkB,KAAG,EAAE;AACHC,QAAI,EAAEC,MADH;AAEHC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmBC;AAFvB,GAD2B;AAKhCsC,OAAK,EAAE;AACL1C,QAAI,EAAEC,MADD;AAELM,SAAK,EAAE,IAFF;AAGLD,cAAU,EAAE;AAHP,GALyB;AAUhChB,WAAS,EAAE;AACTU,QAAI,EAAET,IADG;AAETe,cAAU,EAAE;AAFH;AAVqB,CAAjB,CAAjB;AAgBAyD,OAAO,CAAC/C,YAAR,CAAqB+C,OAAO,CAACjE,MAA7B,E,CAEA;AACA;AACA;;AACAiE,OAAO,CAAC7G,YAAR,GAAuB;AACrBwF,OAAK,EAAE,CADc;AAErBpD,WAAS,EAAE;AAFU,CAAvB,C;;;;;;;;;;;AClDA,IAAIlD,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIoH,IAAJ;AAAStH,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACqH,MAAI,CAACpH,CAAD,EAAG;AAACoH,QAAI,GAACpH,CAAL;AAAO;;AAAhB,CAA3B,EAA6C,CAA7C;AAIzEH,MAAM,CAACM,OAAP,CAAe,SAAf,EAA0B,SAASwH,OAAT,GAAmB;AACzC,SAAOP,IAAI,CAAC5G,IAAL,CAAU,EAAV,CAAP;AACH,CAFD,E;;;;;;;;;;;ACJA,IAAIX,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAI4H,kBAAJ;AAAuB9H,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAAC6H,oBAAkB,CAAC5H,CAAD,EAAG;AAAC4H,sBAAkB,GAAC5H,CAAnB;AAAqB;;AAA5C,CAA7D,EAA2G,CAA3G;AAA8G,IAAI6H,OAAJ;AAAY/H,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC8H,SAAO,CAAC7H,CAAD,EAAG;AAAC6H,WAAO,GAAC7H,CAAR;AAAU;;AAAtB,CAAxD,EAAgF,CAAhF;AAAmF,IAAIE,MAAJ;AAAWJ,MAAM,CAACC,IAAP,CAAY,8BAAZ,EAA2C;AAACG,QAAM,CAACF,CAAD,EAAG;AAACE,UAAM,GAACF,CAAP;AAAS;;AAApB,CAA3C,EAAiE,CAAjE;AAM3X,MAAM8H,oBAAoB,GAAG,IAAIxF,YAAJ,CAAiB;AAC5CyF,QAAM,EAAE;AACNtE,QAAI,EAAEC,MADA;AAENI,YAAQ,EAAE;AAFJ,GADoC;AAK5CkE,MAAI,EAAC;AACHvE,QAAI,EAACC;AADF,GALuC;AAQ5CuE,QAAM,EAAC;AACLxE,QAAI,EAAEC,MADD;AAELC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmBsE,EAFrB;AAGLpE,YAAQ,EAAC;AAHJ;AARqC,CAAjB,CAA7B,C,CAeA;;AAEA,MAAMqE,UAAU,GAAI1G,IAAD,IAAU;AAC3B,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB;AACAqG,wBAAoB,CAACzG,QAArB,CAA8BiG,OAA9B;AACA,QAAI1C,QAAQ,GAAC,CAAC;AAAEwD,YAAM,EAAE;AAAC,uBAAc;AAAEC,iBAAO,EAAE,IAAX;AAAiBC,aAAG,EAAE;AAAtB;AAAf;AAAV,KAAD,CAAb;;AAEA,QAAGhB,OAAO,CAACU,IAAR,IAAc,OAAd,IAAuBV,OAAO,CAACW,MAAR,IAAgBM,SAA1C,EAAoD;AAClD3D,cAAQ,CAACC,IAAT,CAAc;AAAEC,eAAO,EAAC;AACtBC,eAAK,EAAE;AACLC,cAAE,EAAE;AAAEC,kBAAI,EAAE,CAAE,UAAF,EAAcqC,OAAO,CAACW,MAAtB;AAAR,aADC;AAEL/C,gBAAI,EAAE,SAFD;AAGLC,gBAAI,EAAE;AAHD;AADe;AAAV,OAAd;AAKD;;AACDP,YAAQ,GAAC,CAAC,GAAGA,QAAJ,EACL;AAAEQ,aAAO,EAAE;AAAEC,YAAI,EAAE,YAAR;AAAsBC,kBAAU,EAAE,WAAlC;AAA+CC,oBAAY,EAAE,KAA7D;AAAoEC,UAAE,EAAE;AAAxE;AAAX,KADK,EAEL;AAAEJ,aAAO,EAAE;AAAEC,YAAI,EAAE,SAAR;AAAmBC,kBAAU,EAAE,QAA/B;AAAyCC,oBAAY,EAAE,KAAvD;AAA8DC,UAAE,EAAE;AAAlE;AAAX,KAFK,EAGL;AAAEC,aAAO,EAAE;AAAX,KAHK,EAIL;AAAEA,aAAO,EAAE;AAAX,KAJK,EAKL;AAAEC,cAAQ,EAAE;AAAClC,WAAG,EAAC,CAAL;AAAO/C,eAAO,EAAC,CAAf;AAAkBsC,iBAAS,EAAC,CAA5B;AAA+BsB,mBAAW,EAAC,CAA3C;AAA6CH,cAAM,EAAC,CAApD;AAAuD,6BAAoB,CAA3E;AAA6E,gCAAuB;AAApG;AAAZ,KALK,CAAT,CAZE,CAoBF;;AAEA,QAAIsE,MAAM,GAAItI,MAAM,CAACyF,SAAP,CAAiBf,QAAjB,CAAd;AACA,QAAI6D,aAAJ;;AACA,QAAI;AACAA,mBAAa,GAAGD,MAAhB;AACAX,aAAO,CAAC,gBAAD,EAAkBD,kBAAlB,EAAqCc,IAAI,CAACC,SAAL,CAAeF,aAAf,CAArC,CAAP;AACF,aAAOA,aAAP;AAED,KALD,CAKE,OAAM/G,KAAN,EAAa;AACb,YAAM,iCAA+BA,KAArC;AACD;AAEF,GAjCD,CAiCE,OAAOkH,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,2BAAjB,EAA8CiH,SAA9C,CAAN;AACD;AACF,CArCD;;AAvBA9I,MAAM,CAAC+I,aAAP,CA8DeV,UA9Df,E;;;;;;;;;;;ACAA,IAAItI,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAI8I,eAAJ,EAAoBC,sBAApB,EAA2CC,QAA3C,EAAoDC,OAApD;AAA4DnJ,MAAM,CAACC,IAAP,CAAY,qCAAZ,EAAkD;AAAC+I,iBAAe,CAAC9I,CAAD,EAAG;AAAC8I,mBAAe,GAAC9I,CAAhB;AAAkB,GAAtC;;AAAuC+I,wBAAsB,CAAC/I,CAAD,EAAG;AAAC+I,0BAAsB,GAAC/I,CAAvB;AAAyB,GAA1F;;AAA2FgJ,UAAQ,CAAChJ,CAAD,EAAG;AAACgJ,YAAQ,GAAChJ,CAAT;AAAW,GAAlH;;AAAmHiJ,SAAO,CAACjJ,CAAD,EAAG;AAACiJ,WAAO,GAACjJ,CAAR;AAAU;;AAAxI,CAAlD,EAA4L,CAA5L;AAA+L,IAAIkJ,MAAJ;AAAWpJ,MAAM,CAACC,IAAP,CAAY,+CAAZ,EAA4D;AAACmJ,QAAM,CAAClJ,CAAD,EAAG;AAACkJ,UAAM,GAAClJ,CAAP;AAAS;;AAApB,CAA5D,EAAkF,CAAlF;AAAqF,IAAImJ,cAAJ,EAAmBC,eAAnB;AAAmCtJ,MAAM,CAACC,IAAP,CAAY,mDAAZ,EAAgE;AAACoJ,gBAAc,CAACnJ,CAAD,EAAG;AAACmJ,kBAAc,GAACnJ,CAAf;AAAiB,GAApC;;AAAqCoJ,iBAAe,CAACpJ,CAAD,EAAG;AAACoJ,mBAAe,GAACpJ,CAAhB;AAAkB;;AAA1E,CAAhE,EAA4I,CAA5I;AAA+I,IAAIqJ,UAAJ;AAAevJ,MAAM,CAACC,IAAP,CAAY,gCAAZ,EAA6C;AAACsJ,YAAU,CAACrJ,CAAD,EAAG;AAACqJ,cAAU,GAACrJ,CAAX;AAAa;;AAA5B,CAA7C,EAA2E,CAA3E;AAA8E,IAAIsJ,WAAJ;AAAgBxJ,MAAM,CAACC,IAAP,CAAY,oCAAZ,EAAiD;AAACuJ,aAAW,CAACtJ,CAAD,EAAG;AAACsJ,eAAW,GAACtJ,CAAZ;AAAc;;AAA9B,CAAjD,EAAiF,CAAjF;AAAoF,IAAIE,MAAJ;AAAWJ,MAAM,CAACC,IAAP,CAAY,4CAAZ,EAAyD;AAACG,QAAM,CAACF,CAAD,EAAG;AAACE,UAAM,GAACF,CAAP;AAAS;;AAApB,CAAzD,EAA+E,CAA/E;AAAkF,IAAIuJ,aAAJ;AAAkBzJ,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACuJ,iBAAa,GAACvJ,CAAd;AAAgB;;AAA5B,CAA1C,EAAwE,CAAxE;AAA2E,IAAIwJ,gBAAJ;AAAqB1J,MAAM,CAACC,IAAP,CAAY,kCAAZ,EAA+C;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACwJ,oBAAgB,GAACxJ,CAAjB;AAAmB;;AAA/B,CAA/C,EAAgF,CAAhF;AAAmF,IAAIyJ,eAAJ;AAAoB3J,MAAM,CAACC,IAAP,CAAY,gCAAZ,EAA6C;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACyJ,mBAAe,GAACzJ,CAAhB;AAAkB;;AAA9B,CAA7C,EAA6E,EAA7E;AAAiF,IAAIiB,QAAJ;AAAanB,MAAM,CAACC,IAAP,CAAY,mBAAZ,EAAgC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACiB,YAAQ,GAACjB,CAAT;AAAW;;AAAvB,CAAhC,EAAyD,EAAzD;AAA6D,IAAI0J,cAAJ;AAAmB5J,MAAM,CAACC,IAAP,CAAY,0BAAZ,EAAuC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC0J,kBAAc,GAAC1J,CAAf;AAAiB;;AAA7B,CAAvC,EAAsE,EAAtE;AAA0E,IAAI2J,UAAJ,EAAeC,QAAf;AAAwB9J,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC4J,YAAU,CAAC3J,CAAD,EAAG;AAAC2J,cAAU,GAAC3J,CAAX;AAAa,GAA5B;;AAA6B4J,UAAQ,CAAC5J,CAAD,EAAG;AAAC4J,YAAQ,GAAC5J,CAAT;AAAW;;AAApD,CAAxD,EAA8G,EAA9G;AAeh6C,MAAM6J,sBAAsB,GAAG,IAAIvH,YAAJ,CAAiB;AAC9ClB,MAAI,EAAE;AACJqC,QAAI,EAAEC;AADF,GADwC;AAI9CoG,QAAM,EAAE;AACNrG,QAAI,EAAEC;AADA;AAJsC,CAAjB,CAA/B;;AAUA,MAAMqG,gBAAgB,GAAItI,IAAD,IAAU;AACjC,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB;AACAoI,0BAAsB,CAACxI,QAAvB,CAAgCiG,OAAhC;AACA,UAAM0C,GAAG,GAAG1C,OAAO,CAACwC,MAAR,GAAed,QAAf,GAAwBC,OAAxB,GAAgC,GAAhC,GAAoCH,eAAhD;AACA,UAAMmB,SAAS,GAAGX,WAAW,CAACH,cAAD,EAAiBC,eAAjB,EAAkC9B,OAAO,CAAClG,IAA1C,CAA7B;AACA,UAAM8I,KAAK,GAAG,aAAWC,kBAAkB,CAAC7C,OAAO,CAAClG,IAAT,CAA7B,GAA4C,aAA5C,GAA0D+I,kBAAkB,CAACF,SAAD,CAA1F;AACAN,cAAU,CAAC,oCAAkCK,GAAlC,GAAsC,SAAvC,EAAkDE,KAAlD,CAAV;AAEA;;;;;AAIA,UAAME,QAAQ,GAAGf,UAAU,CAACW,GAAD,EAAME,KAAN,CAA3B;AACA,QAAGE,QAAQ,KAAK7B,SAAb,IAA0B6B,QAAQ,CAAC3I,IAAT,KAAkB8G,SAA/C,EAA0D,MAAM,cAAN;AAC1D,UAAM8B,YAAY,GAAGD,QAAQ,CAAC3I,IAA9B;AACAkI,cAAU,CAAC,yDAAD,EAA2DS,QAAQ,CAAC3I,IAAT,CAAcsG,MAAzE,CAAV;;AAEA,QAAGsC,YAAY,CAACtC,MAAb,KAAwB,SAA3B,EAAsC;AACpC,UAAGsC,YAAY,CAAC3I,KAAb,KAAuB6G,SAA1B,EAAqC,MAAM,cAAN;;AACrC,UAAG8B,YAAY,CAAC3I,KAAb,CAAmB4I,QAAnB,CAA4B,kBAA5B,CAAH,EAAoD;AAClD;AACEV,gBAAQ,CAAC,+BAAD,EAAiCS,YAAY,CAAC3I,KAA9C,CAAR;AACF;AACD;;AACD,YAAM2I,YAAY,CAAC3I,KAAnB;AACD;;AACDiI,cAAU,CAAC,wBAAD,CAAV;AAEA,UAAMY,OAAO,GAAGtJ,QAAQ,CAAC;AAACG,UAAI,EAAEkG,OAAO,CAAClG;AAAf,KAAD,CAAxB;AACA,UAAMS,KAAK,GAAG3B,MAAM,CAACsK,OAAP,CAAe;AAAChH,SAAG,EAAE+G;AAAN,KAAf,CAAd;AACAZ,cAAU,CAAC,eAAD,EAAiB9H,KAAjB,CAAV;AACA,QAAGA,KAAK,CAAC2C,iBAAN,KAA4B+D,SAA/B,EAA0C;AAE1C,UAAMkC,KAAK,GAAGjB,gBAAgB,CAAC;AAACtB,QAAE,EAAErG,KAAK,CAAC2B;AAAX,KAAD,CAA9B;AACAmG,cAAU,CAAC,8BAAD,EAAgCc,KAAhC,CAAV;AACA,UAAMC,gBAAgB,GAAGjB,eAAe,CAAC;AAACvB,QAAE,EAAErG,KAAK,CAAC2B,GAAX;AAAgBiH,WAAK,EAAEA,KAAvB;AAA8BE,cAAQ,EAAEN,YAAY,CAAC5I,IAAb,CAAkBkJ;AAA1D,KAAD,CAAxC;AACAhB,cAAU,CAAC,6BAAD,EAA+Be,gBAA/B,CAAV;AACA,UAAME,eAAe,GAAG1B,MAAM,KAAGF,QAAT,GAAkBC,OAAlB,GAA0B,GAA1B,GAA8BF,sBAA9B,GAAqD,GAArD,GAAyDoB,kBAAkB,CAACO,gBAAD,CAAnG;AACAf,cAAU,CAAC,qBAAmBiB,eAApB,CAAV;AAEA,UAAMC,QAAQ,GAAGtB,aAAa,CAAC;AAACsB,cAAQ,EAAER,YAAY,CAAC5I,IAAb,CAAkBqJ,OAA7B;AAAsCrJ,UAAI,EAAE;AACzEsJ,wBAAgB,EAAEH;AADuD;AAA5C,KAAD,CAA9B,CAxCE,CA4CF;;AAEAjB,cAAU,CAAC,wDAAD,CAAV;AACAD,kBAAc,CAAC;AACbsB,QAAE,EAAEX,YAAY,CAAC5I,IAAb,CAAkBoB,SADT;AAEboI,aAAO,EAAEZ,YAAY,CAAC5I,IAAb,CAAkBwJ,OAFd;AAGbC,aAAO,EAAEL,QAHI;AAIbM,gBAAU,EAAEd,YAAY,CAAC5I,IAAb,CAAkB0J;AAJjB,KAAD,CAAd;AAMD,GArDD,CAqDE,OAAOvC,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,kCAAjB,EAAqDiH,SAArD,CAAN;AACD;AACF,CAzDD;;AAzBA9I,MAAM,CAAC+I,aAAP,CAoFekB,gBApFf,E;;;;;;;;;;;ACAA,IAAIlK,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIE,MAAJ;AAAWJ,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAACG,QAAM,CAACF,CAAD,EAAG;AAACE,UAAM,GAACF,CAAP;AAAS;;AAApB,CAA9C,EAAoE,CAApE;AAAuE,IAAI0E,UAAJ;AAAe5E,MAAM,CAACC,IAAP,CAAY,uCAAZ,EAAoD;AAAC2E,YAAU,CAAC1E,CAAD,EAAG;AAAC0E,cAAU,GAAC1E,CAAX;AAAa;;AAA5B,CAApD,EAAkF,CAAlF;AAAqF,IAAIoL,gBAAJ;AAAqBtL,MAAM,CAACC,IAAP,CAAY,+BAAZ,EAA4C;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACoL,oBAAgB,GAACpL,CAAjB;AAAmB;;AAA/B,CAA5C,EAA6E,CAA7E;AAAgF,IAAIqL,WAAJ;AAAgBvL,MAAM,CAACC,IAAP,CAAY,0BAAZ,EAAuC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACqL,eAAW,GAACrL,CAAZ;AAAc;;AAA1B,CAAvC,EAAmE,CAAnE;AAAsE,IAAIsL,eAAJ;AAAoBxL,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsL,mBAAe,GAACtL,CAAhB;AAAkB;;AAA9B,CAA9C,EAA8E,CAA9E;AAAiF,IAAIqJ,UAAJ;AAAevJ,MAAM,CAACC,IAAP,CAAY,gCAAZ,EAA6C;AAACsJ,YAAU,CAACrJ,CAAD,EAAG;AAACqJ,cAAU,GAACrJ,CAAX;AAAa;;AAA5B,CAA7C,EAA2E,CAA3E;AAA8E,IAAI4H,kBAAJ;AAAuB9H,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAAC6H,oBAAkB,CAAC5H,CAAD,EAAG;AAAC4H,sBAAkB,GAAC5H,CAAnB;AAAqB;;AAA5C,CAA7D,EAA2G,CAA3G;AAA8G,IAAI6H,OAAJ;AAAY/H,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC8H,SAAO,CAAC7H,CAAD,EAAG;AAAC6H,WAAO,GAAC7H,CAAR;AAAU;;AAAtB,CAAxD,EAAgF,CAAhF;AAAmF,IAAIuL,QAAJ;AAAazL,MAAM,CAACC,IAAP,CAAY,sBAAZ,EAAmC;AAACwL,UAAQ,CAACvL,CAAD,EAAG;AAACuL,YAAQ,GAACvL,CAAT;AAAW;;AAAxB,CAAnC,EAA6D,EAA7D;AAYh7B,MAAMwL,oBAAoB,GAAG,IAAIlJ,YAAJ,CAAiB;AAC5CmJ,SAAO,EAAE;AACPhI,QAAI,EAAEC;AADC,GADmC;AAI5CuG,WAAS,EAAE;AACTxG,QAAI,EAAEC;AADG;AAJiC,CAAjB,CAA7B;AASA,MAAMgI,iBAAiB,GAAG,IAAIpJ,YAAJ,CAAiB;AACzC2I,SAAO,EAAE;AACPxH,QAAI,EAAEC,MADC;AAEPI,YAAQ,EAAC;AAFF,GADgC;AAKzC6G,UAAQ,EAAE;AACRlH,QAAI,EAAEC,MADE;AAERC,SAAK,EAAE,2DAFC;AAGRG,YAAQ,EAAC;AAHD,GAL+B;AAUzCqH,YAAU,EAAE;AACV1H,QAAI,EAAEC,MADI;AAEVC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmB+H,KAFhB;AAGV7H,YAAQ,EAAC;AAHC,GAV6B;AAezC8H,aAAW,EAAE;AACXnI,QAAI,EAAEC,MADK;AAEXC,SAAK,EAAE,2DAFI;AAGXG,YAAQ,EAAC;AAHE;AAf4B,CAAjB,CAA1B;;AAsBA,MAAM+H,cAAc,GAAIpK,IAAD,IAAU;AAC/B,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB;AACA+J,wBAAoB,CAACnK,QAArB,CAA8BiG,OAA9B;AACA,UAAMzF,KAAK,GAAG3B,MAAM,CAACsK,OAAP,CAAe;AAACtG,YAAM,EAAEoD,OAAO,CAACmE;AAAjB,KAAf,CAAd;AACA,QAAG5J,KAAK,KAAK0G,SAAb,EAAwB,MAAM,0BAAwBjB,OAAO,CAACmE,OAAhC,GAAwC,YAA9C;AACxB5D,WAAO,CAAC,cAAD,EAAgBhG,KAAhB,CAAP;AAEA,UAAMgB,SAAS,GAAG6B,UAAU,CAAC8F,OAAX,CAAmB;AAAChH,SAAG,EAAE3B,KAAK,CAACgB;AAAZ,KAAnB,CAAlB;AACA,QAAGA,SAAS,KAAK0F,SAAjB,EAA4B,MAAM,qBAAN;AAC5BV,WAAO,CAAC,iBAAD,EAAoBhF,SAApB,CAAP;AAEA,UAAMiJ,KAAK,GAAGjJ,SAAS,CAACsD,KAAV,CAAgB4F,KAAhB,CAAsB,GAAtB,CAAd;AACA,UAAMjC,MAAM,GAAGgC,KAAK,CAACA,KAAK,CAACE,MAAN,GAAa,CAAd,CAApB;AAEA,QAAI1F,SAAS,GAAG+E,WAAW,CAAC;AAAEvB,YAAM,EAAEA;AAAV,KAAD,CAA3B;;AAEA,QAAG,CAACxD,SAAJ,EAAc;AACZ,YAAM2F,QAAQ,GAAGb,gBAAgB,CAAC;AAACtB,cAAM,EAAExC,OAAO,CAACwC;AAAjB,OAAD,CAAjC;AACAjC,aAAO,CAAC,mEAAD,EAAsE;AAAEoE,gBAAQ,EAAEA;AAAZ,OAAtE,CAAP;AACA3F,eAAS,GAAG+E,WAAW,CAAC;AAAEvB,cAAM,EAAEmC;AAAV,OAAD,CAAvB,CAHY,CAGkC;AAC/C;;AAEDpE,WAAO,CAAC,oDAAD,EAAuD,MAAIiE,KAAJ,GAAU,GAAV,GAAchC,MAAd,GAAqB,GAArB,GAAyBxD,SAAzB,GAAmC,GAA1F,CAAP,CAtBE,CAwBF;AACA;AACA;AACA;AACA;AACA;;AACAuB,WAAO,CAAC,wBAAD,CAAP;;AACA,QAAG,CAACyD,eAAe,CAAC;AAAChF,eAAS,EAAEA,SAAZ;AAAuB7E,UAAI,EAAE6F,OAAO,CAACmE,OAArC;AAA8CxB,eAAS,EAAE3C,OAAO,CAAC2C;AAAjE,KAAD,CAAnB,EAAkG;AAChG,YAAM,qCAAN;AACD;;AAEDpC,WAAO,CAAC,oBAAD,CAAP,CAnCE,CAqCF;;AACA,QAAIqE,WAAJ;;AACA,QAAI;AAEFA,iBAAW,GAAG7C,UAAU,CAACzB,kBAAD,EAAqB,EAArB,CAAV,CAAmCnG,IAAjD;AACA,UAAI0K,iBAAiB,GAAG;AACtB,qBAAatJ,SAAS,CAACsD,KADD;AAEtB,mBAAW+F,WAAW,CAACzK,IAAZ,CAAiBqJ,OAFN;AAGtB,oBAAYoB,WAAW,CAACzK,IAAZ,CAAiBkJ,QAHP;AAItB,mBAAWuB,WAAW,CAACzK,IAAZ,CAAiBwJ,OAJN;AAKtB,sBAAciB,WAAW,CAACzK,IAAZ,CAAiB0J;AALT,OAAxB;AAQF,UAAIiB,UAAU,GAAGD,iBAAjB;;AAEA,UAAG;AACD,YAAIE,KAAK,GAAGd,QAAQ,CAACe,KAAT,CAAe9B,OAAf,CAAuB;AAAChH,aAAG,EAAE3B,KAAK,CAACpB;AAAZ,SAAvB,CAAZ;AACA,YAAI8L,YAAY,GAAGF,KAAK,CAACG,OAAN,CAAcD,YAAjC;AACAb,yBAAiB,CAACrK,QAAlB,CAA2BkL,YAA3B;AAEAH,kBAAU,CAAC,UAAD,CAAV,GAAyBG,YAAY,CAAC,UAAD,CAAZ,IAA4BJ,iBAAiB,CAAC,UAAD,CAAtE;AACAC,kBAAU,CAAC,SAAD,CAAV,GAAwBG,YAAY,CAAC,SAAD,CAAZ,IAA2BJ,iBAAiB,CAAC,SAAD,CAApE;AACAC,kBAAU,CAAC,YAAD,CAAV,GAA2BG,YAAY,CAAC,YAAD,CAAZ,IAA8BJ,iBAAiB,CAAC,YAAD,CAA1E;AACAC,kBAAU,CAAC,SAAD,CAAV,GAAwBG,YAAY,CAAC,aAAD,CAAZ,GAA+BlD,UAAU,CAACkD,YAAY,CAAC,aAAD,CAAb,EAA8B,EAA9B,CAAV,CAA4CzB,OAA5C,IAAuDqB,iBAAiB,CAAC,SAAD,CAAvG,GAAsHA,iBAAiB,CAAC,SAAD,CAA/J;AAED,OAVD,CAWA,OAAMzK,KAAN,EAAa;AACX0K,kBAAU,GAACD,iBAAX;AACD;;AAECtE,aAAO,CAAC,sBAAD,EAAyBD,kBAAzB,EAA6CwE,UAA7C,CAAP;AAEA,aAAOA,UAAP;AAED,KAhCD,CAgCE,OAAM1K,KAAN,EAAa;AACb,YAAM,wCAAsCA,KAA5C;AACD;AAEF,GA3ED,CA2EE,OAAMkH,SAAN,EAAiB;AACjB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,gCAAjB,EAAmDiH,SAAnD,CAAN;AACD;AACF,CA/ED;;AA3CA9I,MAAM,CAAC+I,aAAP,CA4HegD,cA5Hf,E;;;;;;;;;;;ACAA,IAAIhM,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIyM,UAAJ;AAAe3M,MAAM,CAACC,IAAP,CAAY,+BAAZ,EAA4C;AAAC0M,YAAU,CAACzM,CAAD,EAAG;AAACyM,cAAU,GAACzM,CAAX;AAAa;;AAA5B,CAA5C,EAA0E,CAA1E;AAA6E,IAAI0M,iBAAJ;AAAsB5M,MAAM,CAACC,IAAP,CAAY,8CAAZ,EAA2D;AAAC2M,mBAAiB,CAAC1M,CAAD,EAAG;AAAC0M,qBAAiB,GAAC1M,CAAlB;AAAoB;;AAA1C,CAA3D,EAAuG,CAAvG;AAA0G,IAAI2M,SAAJ,EAAcC,SAAd;AAAwB9M,MAAM,CAACC,IAAP,CAAY,4CAAZ,EAAyD;AAAC4M,WAAS,CAAC3M,CAAD,EAAG;AAAC2M,aAAS,GAAC3M,CAAV;AAAY,GAA1B;;AAA2B4M,WAAS,CAAC5M,CAAD,EAAG;AAAC4M,aAAS,GAAC5M,CAAV;AAAY;;AAApD,CAAzD,EAA+G,CAA/G;AAAkH,IAAI6H,OAAJ;AAAY/H,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC8H,SAAO,CAAC7H,CAAD,EAAG;AAAC6H,WAAO,GAAC7H,CAAR;AAAU;;AAAtB,CAAxD,EAAgF,CAAhF;AAO9f,MAAM6M,UAAU,GAAG,qBAAnB;AACA,MAAMC,kBAAkB,GAAG,6BAA3B;AAEA,MAAMC,iBAAiB,GAAG,IAAIzK,YAAJ,CAAiB;AACzCwH,QAAM,EAAE;AACNrG,QAAI,EAAEC;AADA;AADiC,CAAjB,CAA1B;;AAOA,MAAM2H,WAAW,GAAI5J,IAAD,IAAU;AAC5B,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB;AACAsL,qBAAiB,CAAC1L,QAAlB,CAA2BiG,OAA3B;AAEA,QAAI0F,aAAa,GAACH,UAAlB;;AAEA,QAAGF,SAAS,MAAMC,SAAS,EAA3B,EAA8B;AAC1BI,mBAAa,GAAGF,kBAAhB;AACAjF,aAAO,CAAC,mBAAiB8E,SAAS,EAA1B,GAA6B,YAA7B,GAA0CC,SAAS,EAAnD,GAAsD,gBAAvD,EAAwEI,aAAxE,CAAP;AACH;;AACD,UAAMzF,GAAG,GAAGkF,UAAU,CAACO,aAAD,EAAgB1F,OAAO,CAACwC,MAAxB,CAAtB;AACAjC,WAAO,CAAC,+EAAD,EAAiF;AAACoF,cAAQ,EAAC1F,GAAV;AAAeuC,YAAM,EAACxC,OAAO,CAACwC,MAA9B;AAAsCoD,YAAM,EAACF;AAA7C,KAAjF,CAAP;AAEA,QAAGzF,GAAG,KAAKgB,SAAX,EAAsB,OAAO4E,WAAW,CAAC7F,OAAO,CAACwC,MAAT,CAAlB;AACtB,WAAOvC,GAAP;AACD,GAfD,CAeE,OAAOqB,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,2BAAjB,EAA8CiH,SAA9C,CAAN;AACD;AACF,CAnBD;;AAqBA,MAAMuE,WAAW,GAAIrD,MAAD,IAAY;AAC9B,MAAGA,MAAM,KAAK4C,iBAAd,EAAiC,MAAM,IAAI7M,MAAM,CAAC8B,KAAX,CAAiB,8BAAjB,CAAN;AAC/BkG,SAAO,CAAC,mCAAD,EAAqC6E,iBAArC,CAAP;AACF,SAAOrB,WAAW,CAAC;AAACvB,UAAM,EAAE4C;AAAT,GAAD,CAAlB;AACD,CAJD;;AAtCA5M,MAAM,CAAC+I,aAAP,CA4CewC,WA5Cf,E;;;;;;;;;;;ACAA,IAAIxL,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIyM,UAAJ;AAAe3M,MAAM,CAACC,IAAP,CAAY,+BAAZ,EAA4C;AAAC0M,YAAU,CAACzM,CAAD,EAAG;AAACyM,cAAU,GAACzM,CAAX;AAAa;;AAA5B,CAA5C,EAA0E,CAA1E;AAA6E,IAAI0M,iBAAJ;AAAsB5M,MAAM,CAACC,IAAP,CAAY,8CAAZ,EAA2D;AAAC2M,mBAAiB,CAAC1M,CAAD,EAAG;AAAC0M,qBAAiB,GAAC1M,CAAlB;AAAoB;;AAA1C,CAA3D,EAAuG,CAAvG;AAA0G,IAAI6H,OAAJ;AAAY/H,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC8H,SAAO,CAAC7H,CAAD,EAAG;AAAC6H,WAAO,GAAC7H,CAAR;AAAU;;AAAtB,CAAxD,EAAgF,CAAhF;AAAmF,IAAI2M,SAAJ,EAAcC,SAAd;AAAwB9M,MAAM,CAACC,IAAP,CAAY,4CAAZ,EAAyD;AAAC4M,WAAS,CAAC3M,CAAD,EAAG;AAAC2M,aAAS,GAAC3M,CAAV;AAAY,GAA1B;;AAA2B4M,WAAS,CAAC5M,CAAD,EAAG;AAAC4M,aAAS,GAAC5M,CAAV;AAAY;;AAApD,CAAzD,EAA+G,CAA/G;AAO/d,MAAMoN,YAAY,GAAG,0BAArB;AACA,MAAMC,oBAAoB,GAAG,kCAA7B;AAEA,MAAMC,sBAAsB,GAAG,IAAIhL,YAAJ,CAAiB;AAC9CwH,QAAM,EAAE;AACNrG,QAAI,EAAEC;AADA;AADsC,CAAjB,CAA/B;;AAOA,MAAM0H,gBAAgB,GAAI3J,IAAD,IAAU;AACjC,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB;AACA6L,0BAAsB,CAACjM,QAAvB,CAAgCiG,OAAhC;AAEA,QAAIiG,eAAe,GAACH,YAApB;;AACA,QAAGT,SAAS,MAAMC,SAAS,EAA3B,EAA8B;AAC1BW,qBAAe,GAAGF,oBAAlB;AACAxF,aAAO,CAAC,mBAAiB8E,SAAS,EAA1B,GAA6B,aAA7B,GAA2CC,SAAS,EAApD,GAAuD,eAAxD,EAAwE;AAACY,mBAAW,EAACD,eAAb;AAA8BzD,cAAM,EAACxC,OAAO,CAACwC;AAA7C,OAAxE,CAAP;AACH;;AAED,UAAMmC,QAAQ,GAAGQ,UAAU,CAACc,eAAD,EAAkBjG,OAAO,CAACwC,MAA1B,CAA3B;AACA,QAAGmC,QAAQ,KAAK1D,SAAhB,EAA2B,OAAO4E,WAAW,EAAlB;AAE3BtF,WAAO,CAAC,6DAAD,EAA+DoE,QAA/D,CAAP;AACA,WAAOA,QAAP;AACD,GAfD,CAeE,OAAOrD,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,gCAAjB,EAAmDiH,SAAnD,CAAN;AACD;AACF,CAnBD;;AAqBA,MAAMuE,WAAW,GAAG,MAAM;AACxBtF,SAAO,CAAC,oCAAkC6E,iBAAlC,GAAoD,UAArD,CAAP;AACA,SAAOA,iBAAP;AACD,CAHD;;AAtCA5M,MAAM,CAAC+I,aAAP,CA2CeuC,gBA3Cf,E;;;;;;;;;;;ACAA,IAAIvL,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAImJ,cAAJ,EAAmBC,eAAnB;AAAmCtJ,MAAM,CAACC,IAAP,CAAY,mDAAZ,EAAgE;AAACoJ,gBAAc,CAACnJ,CAAD,EAAG;AAACmJ,kBAAc,GAACnJ,CAAf;AAAiB,GAApC;;AAAqCoJ,iBAAe,CAACpJ,CAAD,EAAG;AAACoJ,mBAAe,GAACpJ,CAAhB;AAAkB;;AAA1E,CAAhE,EAA4I,CAA5I;AAA+I,IAAIyN,MAAJ;AAAW3N,MAAM,CAACC,IAAP,CAAY,oCAAZ,EAAiD;AAAC0N,QAAM,CAACzN,CAAD,EAAG;AAACyN,UAAM,GAACzN,CAAP;AAAS;;AAApB,CAAjD,EAAuE,CAAvE;AAA0E,IAAIuG,eAAJ;AAAoBzG,MAAM,CAACC,IAAP,CAAY,kCAAZ,EAA+C;AAACwG,iBAAe,CAACvG,CAAD,EAAG;AAACuG,mBAAe,GAACvG,CAAhB;AAAkB;;AAAtC,CAA/C,EAAuF,CAAvF;AAA0F,IAAI0N,sBAAJ;AAA2B5N,MAAM,CAACC,IAAP,CAAY,oCAAZ,EAAiD;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC0N,0BAAsB,GAAC1N,CAAvB;AAAyB;;AAArC,CAAjD,EAAwF,CAAxF;AAA2F,IAAI2N,oBAAJ;AAAyB7N,MAAM,CAACC,IAAP,CAAY,+BAAZ,EAA4C;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC2N,wBAAoB,GAAC3N,CAArB;AAAuB;;AAAnC,CAA5C,EAAiF,CAAjF;AAAoF,IAAI4N,cAAJ;AAAmB9N,MAAM,CAACC,IAAP,CAAY,sBAAZ,EAAmC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC4N,kBAAc,GAAC5N,CAAf;AAAiB;;AAA7B,CAAnC,EAAkE,CAAlE;AAAqE,IAAI2J,UAAJ,EAAe9B,OAAf;AAAuB/H,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC4J,YAAU,CAAC3J,CAAD,EAAG;AAAC2J,cAAU,GAAC3J,CAAX;AAAa,GAA5B;;AAA6B6H,SAAO,CAAC7H,CAAD,EAAG;AAAC6H,WAAO,GAAC7H,CAAR;AAAU;;AAAlD,CAAxD,EAA4G,CAA5G;AAUn1B,MAAM6N,sBAAsB,GAAG,IAAIvL,YAAJ,CAAiB;AAC9ClB,MAAI,EAAE;AACJqC,QAAI,EAAEC;AADF,GADwC;AAI9CgD,OAAK,EAAE;AACLjD,QAAI,EAAEC;AADD,GAJuC;AAO9CiD,SAAO,EAAE;AACPlD,QAAI,EAAEC;AADC,GAPqC;AAU9CS,MAAI,EAAE;AACJV,QAAI,EAAEC;AADF;AAVwC,CAAjB,CAA/B;AAeA;;;;;;;AAMA,MAAMoK,gBAAgB,GAAIrH,KAAD,IAAW;AAClC,MAAI;AAEF,UAAMsH,QAAQ,GAAGtH,KAAjB;AACAkD,cAAU,CAAC,gCAAD,EAAkCoE,QAAQ,CAAC3M,IAA3C,CAAV;AACAyM,0BAAsB,CAACxM,QAAvB,CAAgC0M,QAAhC;AAEA,UAAMC,GAAG,GAAGzH,eAAe,CAACiE,OAAhB,CAAwB;AAACpJ,UAAI,EAAE2M,QAAQ,CAAC3M;AAAhB,KAAxB,CAAZ;;AACA,QAAG4M,GAAG,KAAKzF,SAAX,EAAqB;AACjBV,aAAO,CAAC,4CAA0CmG,GAAG,CAACxK,GAA/C,CAAP;AACA,aAAOwK,GAAG,CAACxK,GAAX;AACH;;AAED,UAAMkD,KAAK,GAAGgC,IAAI,CAACuF,KAAL,CAAWF,QAAQ,CAACrH,KAApB,CAAd,CAZE,CAaF;;AACA,QAAGA,KAAK,CAACrB,IAAN,KAAekD,SAAlB,EAA6B,MAAM,wBAAN,CAd3B,CAc2D;;AAC7D,UAAM2F,GAAG,GAAGT,MAAM,CAACtE,cAAD,EAAiBC,eAAjB,CAAlB;AACA,UAAMhD,UAAU,GAAGuH,oBAAoB,CAAC;AAACO,SAAG,EAAEA;AAAN,KAAD,CAAvC;AACArG,WAAO,CAAC,yCAAD,CAAP;AAEA,UAAMiC,MAAM,GAAG8D,cAAc,CAAC;AAACxH,gBAAU,EAAEA,UAAb;AAAyB8E,aAAO,EAAExE,KAAK,CAACrB;AAAxC,KAAD,CAA7B;AACAwC,WAAO,CAAC,iCAAD,EAAmCiC,MAAnC,CAAP;AAEA,UAAMqE,OAAO,GAAGJ,QAAQ,CAAC3M,IAAT,CAAcgN,OAAd,CAAsB,GAAtB,CAAhB,CAtBE,CAsB0C;;AAC5CvG,WAAO,CAAC,UAAD,EAAYsG,OAAZ,CAAP;AACA,UAAM/J,SAAS,GAAI+J,OAAO,IAAE,CAAC,CAAX,GAAcJ,QAAQ,CAAC3M,IAAT,CAAciN,SAAd,CAAwB,CAAxB,EAA0BF,OAA1B,CAAd,GAAiD5F,SAAnE;AACAV,WAAO,CAAC,YAAD,EAAczD,SAAd,CAAP;AACA,UAAMJ,KAAK,GAAGI,SAAS,GAAC2J,QAAQ,CAAC3M,IAAT,CAAciN,SAAd,CAAwBF,OAAO,GAAC,CAAhC,CAAD,GAAoC5F,SAA3D;AACAV,WAAO,CAAC,QAAD,EAAU7D,KAAV,CAAP;AAEA,UAAMkE,EAAE,GAAG3B,eAAe,CAAC9D,MAAhB,CAAuB;AAC9BrB,UAAI,EAAE2M,QAAQ,CAAC3M,IADe;AAE9BsF,WAAK,EAAEqH,QAAQ,CAACrH,KAFc;AAG9BC,aAAO,EAAEoH,QAAQ,CAACpH,OAHY;AAI9BvC,eAAS,EAAEA,SAJmB;AAK9BJ,WAAK,EAAEA,KALuB;AAM9BG,UAAI,EAAE4J,QAAQ,CAAC5J,IANe;AAO9BmK,eAAS,EAAEP,QAAQ,CAACO,SAPU;AAQ9BC,aAAO,EAAER,QAAQ,CAACQ;AARY,KAAvB,CAAX;AAWA1G,WAAO,CAAC,6BAAD,EAAgC;AAACK,QAAE,EAACA,EAAJ;AAAO9G,UAAI,EAAC2M,QAAQ,CAAC3M,IAArB;AAA0BgD,eAAS,EAACA,SAApC;AAA8CJ,WAAK,EAACA;AAApD,KAAhC,CAAP;;AAEA,QAAG,CAACI,SAAJ,EAAc;AACVsJ,4BAAsB,CAAC;AACnBtM,YAAI,EAAE2M,QAAQ,CAAC3M,IADI;AAEnB0I,cAAM,EAAEA;AAFW,OAAD,CAAtB;AAIAjC,aAAO,CAAC,wBACJ,SADI,GACMkG,QAAQ,CAAC3M,IADf,GACoB,IADpB,GAEJ,UAFI,GAEO2M,QAAQ,CAACpH,OAFhB,GAEwB,IAFxB,GAGJ,OAHI,GAGIoH,QAAQ,CAAC5J,IAHb,GAGkB,IAHlB,GAIJ,QAJI,GAIK4J,QAAQ,CAACrH,KAJf,CAAP;AAMH,KAXD,MAWK;AACDmB,aAAO,CAAC,6CAAD,EAAgDzD,SAAhD,CAAP;AACH;;AAED,WAAO8D,EAAP;AACD,GA1DD,CA0DE,OAAOU,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,yCAAjB,EAA4DiH,SAA5D,CAAN;AACD;AACF,CA9DD;;AA/BA9I,MAAM,CAAC+I,aAAP,CA+FeiF,gBA/Ff,E;;;;;;;;;;;ACAA,IAAIjO,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIwO,cAAJ,EAAmBC,QAAnB,EAA4BC,iBAA5B;AAA8C5O,MAAM,CAACC,IAAP,CAAY,oCAAZ,EAAiD;AAACyO,gBAAc,CAACxO,CAAD,EAAG;AAACwO,kBAAc,GAACxO,CAAf;AAAiB,GAApC;;AAAqCyO,UAAQ,CAACzO,CAAD,EAAG;AAACyO,YAAQ,GAACzO,CAAT;AAAW,GAA5D;;AAA6D0O,mBAAiB,CAAC1O,CAAD,EAAG;AAAC0O,qBAAiB,GAAC1O,CAAlB;AAAoB;;AAAtG,CAAjD,EAAyJ,CAAzJ;AAA4J,IAAImJ,cAAJ,EAAmBC,eAAnB;AAAmCtJ,MAAM,CAACC,IAAP,CAAY,mDAAZ,EAAgE;AAACoJ,gBAAc,CAACnJ,CAAD,EAAG;AAACmJ,kBAAc,GAACnJ,CAAf;AAAiB,GAApC;;AAAqCoJ,iBAAe,CAACpJ,CAAD,EAAG;AAACoJ,mBAAe,GAACpJ,CAAhB;AAAkB;;AAA1E,CAAhE,EAA4I,CAA5I;AAA+I,IAAI8N,gBAAJ;AAAqBhO,MAAM,CAACC,IAAP,CAAY,+BAAZ,EAA4C;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC8N,oBAAgB,GAAC9N,CAAjB;AAAmB;;AAA/B,CAA5C,EAA6E,CAA7E;AAAgF,IAAIoH,IAAJ;AAAStH,MAAM,CAACC,IAAP,CAAY,2BAAZ,EAAwC;AAACqH,MAAI,CAACpH,CAAD,EAAG;AAACoH,QAAI,GAACpH,CAAL;AAAO;;AAAhB,CAAxC,EAA0D,CAA1D;AAA6D,IAAI2O,eAAJ;AAAoB7O,MAAM,CAACC,IAAP,CAAY,wBAAZ,EAAqC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC2O,mBAAe,GAAC3O,CAAhB;AAAkB;;AAA9B,CAArC,EAAqE,CAArE;AAAwE,IAAI2J,UAAJ;AAAe7J,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC4J,YAAU,CAAC3J,CAAD,EAAG;AAAC2J,cAAU,GAAC3J,CAAX;AAAa;;AAA5B,CAAxD,EAAsF,CAAtF;AAQltB,MAAM4O,aAAa,GAAG,IAAtB;AACA,MAAMC,sBAAsB,GAAG,kBAA/B;;AAEA,MAAMC,mBAAmB,GAAG,CAACC,IAAD,EAAOC,GAAP,KAAe;AACzC,MAAI;AAEA,QAAG,CAACD,IAAJ,EAAS;AACLpF,gBAAU,CAAC,wHAAD,EAA0HP,eAA1H,CAAV;;AAEA,UAAI;AACA,YAAI6F,gBAAgB,GAAG7H,IAAI,CAACoD,OAAL,CAAa;AAACjD,aAAG,EAAEsH;AAAN,SAAb,CAAvB;AACA,YAAGI,gBAAgB,KAAK1G,SAAxB,EAAmC0G,gBAAgB,GAAGA,gBAAgB,CAACvI,KAApC;AACnCiD,kBAAU,CAAC,kBAAD,EAAoBsF,gBAApB,CAAV;AACA,cAAMC,GAAG,GAAGV,cAAc,CAACrF,cAAD,EAAiB8F,gBAAjB,CAA1B;AACA,YAAGC,GAAG,KAAK3G,SAAR,IAAqB2G,GAAG,CAACC,YAAJ,KAAqB5G,SAA7C,EAAwD;AAExD,cAAM6G,GAAG,GAAGF,GAAG,CAACC,YAAhB;AACAF,wBAAgB,GAAGC,GAAG,CAACG,SAAvB;;AACA,YAAG,CAACH,GAAD,IAAQ,CAACE,GAAT,IAAgB,CAACA,GAAG,CAACpD,MAAL,KAAc,CAAjC,EAAmC;AAC/BrC,oBAAU,CAAC,kFAAD,EAAqFsF,gBAArF,CAAV;AACAN,yBAAe,CAAC;AAACpH,eAAG,EAAEsH,sBAAN;AAA8BnI,iBAAK,EAAEuI;AAArC,WAAD,CAAf;AACA;AACH;;AAEDtF,kBAAU,CAAC,gBAAD,EAAkBuF,GAAlB,CAAV;AAEA,cAAMI,UAAU,GAAGF,GAAG,CAACG,MAAJ,CAAWC,EAAE,IAC5BA,EAAE,CAAC7I,OAAH,KAAeyC,eAAf,IACGoG,EAAE,CAACpO,IAAH,KAAYmH,SADf,CACyB;AADzB,WAEGiH,EAAE,CAACpO,IAAH,CAAQqO,UAAR,CAAmB,UAAQb,aAA3B,CAHY,CAG+B;AAH/B,SAAnB;AAKAU,kBAAU,CAACzJ,OAAX,CAAmB2J,EAAE,IAAI;AACrB7F,oBAAU,CAAC,KAAD,EAAO6F,EAAP,CAAV;AACA,cAAIE,MAAM,GAAGF,EAAE,CAACpO,IAAH,CAAQiN,SAAR,CAAkB,CAAC,UAAQO,aAAT,EAAwB5C,MAA1C,CAAb;AACArC,oBAAU,CAAC,qDAAD,EAAwD+F,MAAxD,CAAV;AACA,gBAAM1B,GAAG,GAAGS,QAAQ,CAACtF,cAAD,EAAiBuG,MAAjB,CAApB;AACA/F,oBAAU,CAAC,iBAAD,EAAmBqE,GAAnB,CAAV;;AACA,cAAG,CAACA,GAAJ,EAAQ;AACJrE,sBAAU,CAAC,qEAAD,EAAwEqE,GAAxE,CAAV;AACA;AACH;;AACD2B,eAAK,CAACD,MAAD,EAAS1B,GAAG,CAACtH,KAAb,EAAmB8I,EAAE,CAAC7I,OAAtB,EAA8B6I,EAAE,CAACT,IAAjC,CAAL,CAVqB,CAUwB;AAChD,SAXD;AAYAJ,uBAAe,CAAC;AAACpH,aAAG,EAAEsH,sBAAN;AAA8BnI,eAAK,EAAEuI;AAArC,SAAD,CAAf;AACAtF,kBAAU,CAAC,0CAAD,EAA4CsF,gBAA5C,CAAV;AACAD,WAAG,CAACY,IAAJ;AACH,OArCD,CAqCE,OAAMhH,SAAN,EAAiB;AACf,cAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,yCAAjB,EAA4DiH,SAA5D,CAAN;AACH;AAEJ,KA5CD,MA4CK;AACDe,gBAAU,CAAC,WAASoF,IAAT,GAAc,6CAAf,EAA6D3F,eAA7D,CAAV;AAEA,YAAM8F,GAAG,GAAGR,iBAAiB,CAACvF,cAAD,EAAiB4F,IAAjB,CAA7B;AACA,YAAMK,GAAG,GAAGF,GAAG,CAACW,IAAhB;;AAEA,UAAG,CAACX,GAAD,IAAQ,CAACE,GAAT,IAAgB,CAACA,GAAG,CAACpD,MAAL,KAAc,CAAjC,EAAmC;AAC/BrC,kBAAU,CAAC,UAAQoF,IAAR,GAAa,iEAAd,CAAV;AACA;AACH,OATA,CAUF;;;AAEC,YAAMO,UAAU,GAAGF,GAAG,CAACG,MAAJ,CAAWC,EAAE,IAC5BA,EAAE,CAACM,YAAH,KAAoBvH,SAApB,IACGiH,EAAE,CAACM,YAAH,CAAgBC,MAAhB,KAA2BxH,SAD9B,IAEGiH,EAAE,CAACM,YAAH,CAAgBC,MAAhB,CAAuBC,EAAvB,KAA8B,UAFjC,CAGF;AAHE,SAIGR,EAAE,CAACM,YAAH,CAAgBC,MAAhB,CAAuB3O,IAAvB,KAAgCmH,SAJnC,IAKGiH,EAAE,CAACM,YAAH,CAAgBC,MAAhB,CAAuB3O,IAAvB,CAA4BqO,UAA5B,CAAuCb,aAAvC,CANY,CAAnB,CAZC,CAqBD;;AACAU,gBAAU,CAACzJ,OAAX,CAAmB2J,EAAE,IAAI;AACrBG,aAAK,CAACH,EAAE,CAACM,YAAH,CAAgBC,MAAhB,CAAuB3O,IAAxB,EAA8BoO,EAAE,CAACM,YAAH,CAAgBC,MAAhB,CAAuBrJ,KAArD,EAA2D8I,EAAE,CAACM,YAAH,CAAgBG,SAAhB,CAA0B,CAA1B,CAA3D,EAAwFlB,IAAxF,CAAL;AACH,OAFD;AAGH;AACJ,GAxED,CAwEE,OAAMnG,SAAN,EAAiB;AACjB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,yCAAjB,EAA4DiH,SAA5D,CAAN;AACD;;AACD,SAAO,IAAP;AACD,CA7ED;;AAgFA,SAAS+G,KAAT,CAAevO,IAAf,EAAqBsF,KAArB,EAA4BC,OAA5B,EAAqCoI,IAArC,EAA2C;AACvC,QAAMW,MAAM,GAAGtO,IAAI,CAACiN,SAAL,CAAeO,aAAa,CAAC5C,MAA7B,CAAf;AAEA8B,kBAAgB,CAAC;AACb1M,QAAI,EAAEsO,MADO;AAEbhJ,SAAK,EAAEA,KAFM;AAGbC,WAAO,EAAEA,OAHI;AAIbxC,QAAI,EAAE4K;AAJO,GAAD,CAAhB;AAMH;;AApGDjP,MAAM,CAAC+I,aAAP,CAsGeiG,mBAtGf,E;;;;;;;;;;;ACAA,IAAIjP,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIkQ,MAAJ;AAAWpQ,MAAM,CAACC,IAAP,CAAY,QAAZ,EAAqB;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACkQ,UAAM,GAAClQ,CAAP;AAAS;;AAArB,CAArB,EAA4C,CAA5C;AAA+C,IAAImQ,KAAJ;AAAUrQ,MAAM,CAACC,IAAP,CAAY,gBAAZ,EAA6B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACmQ,SAAK,GAACnQ,CAAN;AAAQ;;AAApB,CAA7B,EAAmD,CAAnD;AAKhN,MAAMoQ,oBAAoB,GAAG,IAAI9N,YAAJ,CAAiB;AAC5C8D,YAAU,EAAE;AACV3C,QAAI,EAAEC;AADI,GADgC;AAI5CwH,SAAO,EAAE;AACPzH,QAAI,EAAEC;AADC;AAJmC,CAAjB,CAA7B;;AASA,MAAMkK,cAAc,GAAInM,IAAD,IAAU;AAC/B,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB;AACA2O,wBAAoB,CAAC/O,QAArB,CAA8BiG,OAA9B;AACA,UAAMlB,UAAU,GAAGiK,MAAM,CAAChL,IAAP,CAAYiC,OAAO,CAAClB,UAApB,EAAgC,KAAhC,CAAnB;AACA,UAAMkK,IAAI,GAAGJ,MAAM,CAACK,UAAP,CAAkB,WAAlB,CAAb;AACAD,QAAI,CAACE,aAAL,CAAmBpK,UAAnB;AACA,UAAM8E,OAAO,GAAGmF,MAAM,CAAChL,IAAP,CAAYiC,OAAO,CAAC4D,OAApB,EAA6B,KAA7B,CAAhB;AACA,WAAOiF,KAAK,CAACM,OAAN,CAAcH,IAAd,EAAoBpF,OAApB,EAA6BwF,QAA7B,CAAsC,MAAtC,CAAP;AACD,GARD,CAQE,OAAM9H,SAAN,EAAiB;AACjB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,mCAAjB,EAAsDiH,SAAtD,CAAN;AACD;AACF,CAZD;;AAdA9I,MAAM,CAAC+I,aAAP,CA4Be+E,cA5Bf,E;;;;;;;;;;;ACAA,IAAI/N,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAImQ,KAAJ;AAAUrQ,MAAM,CAACC,IAAP,CAAY,gBAAZ,EAA6B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACmQ,SAAK,GAACnQ,CAAN;AAAQ;;AAApB,CAA7B,EAAmD,CAAnD;AAItJ,MAAM2Q,oBAAoB,GAAG,IAAIrO,YAAJ,CAAiB;AAC5CgE,WAAS,EAAE;AACT7C,QAAI,EAAEC;AADG,GADiC;AAI5CwH,SAAO,EAAE;AACPzH,QAAI,EAAEC;AADC;AAJmC,CAAjB,CAA7B;;AASA,MAAMkN,cAAc,GAAInP,IAAD,IAAU;AAC/B,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB;AACAkP,wBAAoB,CAACtP,QAArB,CAA8BiG,OAA9B;AACA,UAAMhB,SAAS,GAAG+J,MAAM,CAAChL,IAAP,CAAYiC,OAAO,CAAChB,SAApB,EAA+B,KAA/B,CAAlB;AACA,UAAM4E,OAAO,GAAGmF,MAAM,CAAChL,IAAP,CAAYiC,OAAO,CAAC4D,OAApB,CAAhB;AACA,WAAOiF,KAAK,CAACU,OAAN,CAAcvK,SAAd,EAAyB4E,OAAzB,EAAkCwF,QAAlC,CAA2C,KAA3C,CAAP;AACD,GAND,CAME,OAAM9H,SAAN,EAAiB;AACjB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,mCAAjB,EAAsDiH,SAAtD,CAAN;AACD;AACF,CAVD;;AAbA9I,MAAM,CAAC+I,aAAP,CAyBe+H,cAzBf,E;;;;;;;;;;;ACAA,IAAI/Q,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIE,MAAJ;AAAWJ,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAACG,QAAM,CAACF,CAAD,EAAG;AAACE,UAAM,GAACF,CAAP;AAAS;;AAApB,CAA9C,EAAoE,CAApE;AAAuE,IAAI8G,UAAJ;AAAehH,MAAM,CAACC,IAAP,CAAY,mBAAZ,EAAgC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC8G,cAAU,GAAC9G,CAAX;AAAa;;AAAzB,CAAhC,EAA2D,CAA3D;AAA8D,IAAI6H,OAAJ;AAAY/H,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC8H,SAAO,CAAC7H,CAAD,EAAG;AAAC6H,WAAO,GAAC7H,CAAR;AAAU;;AAAtB,CAAxD,EAAgF,CAAhF;AAMvT,MAAM8Q,oBAAoB,GAAG,IAAIxO,YAAJ,CAAiB;AAC5C4F,IAAE,EAAE;AACFzE,QAAI,EAAEC;AADJ,GADwC;AAI5CU,WAAS,EAAE;AACPX,QAAI,EAAEC,MADC;AAEPI,YAAQ,EAAE;AAFH,GAJiC;AAQ5CE,OAAK,EAAE;AACHP,QAAI,EAAEnB,YAAY,CAAC2B,OADhB;AAEHH,YAAQ,EAAE;AAFP;AARqC,CAAjB,CAA7B;;AAcA,MAAMiN,cAAc,GAAIlP,KAAD,IAAW;AAChC,MAAI;AACF,UAAMc,QAAQ,GAAGd,KAAjB;AACAiP,wBAAoB,CAACzP,QAArB,CAA8BsB,QAA9B;AACA,QAAIuB,MAAJ;;AACA,QAAGrC,KAAK,CAACuC,SAAT,EAAmB;AACfF,YAAM,GAAGvB,QAAQ,CAACyB,SAAT,GAAmB,GAAnB,GAAuBzB,QAAQ,CAACqB,KAAzC;AACA6D,aAAO,CAAC,qCAAmChG,KAAK,CAACmC,KAAzC,GAA+C,UAAhD,EAA2DE,MAA3D,CAAP;AACH,KAHD,MAII;AACAA,YAAM,GAAG4C,UAAU,GAAGV,UAAtB;AACAyB,aAAO,CAAC,wCAAD,EAA0C3D,MAA1C,CAAP;AACH;;AAEDhE,UAAM,CAACgD,MAAP,CAAc;AAACM,SAAG,EAAGb,QAAQ,CAACuF;AAAhB,KAAd,EAAmC;AAAC8I,UAAI,EAAC;AAAC9M,cAAM,EAAEA;AAAT;AAAN,KAAnC;AAEA,WAAOA,MAAP;AACD,GAhBD,CAgBE,OAAM0E,SAAN,EAAiB;AACjB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,mCAAjB,EAAsDiH,SAAtD,CAAN;AACD;AACF,CApBD;;AApBA9I,MAAM,CAAC+I,aAAP,CA0CekI,cA1Cf,E;;;;;;;;;;;ACAA,IAAIlR,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIiR,QAAJ;AAAanR,MAAM,CAACC,IAAP,CAAY,WAAZ,EAAwB;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACiR,YAAQ,GAACjR,CAAT;AAAW;;AAAvB,CAAxB,EAAiD,CAAjD;AAAoD,IAAIkR,MAAJ;AAAWpR,MAAM,CAACC,IAAP,CAAY,MAAZ,EAAmB;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACkR,UAAM,GAAClR,CAAP;AAAS;;AAArB,CAAnB,EAA0C,CAA1C;AAA6C,IAAI2M,SAAJ;AAAc7M,MAAM,CAACC,IAAP,CAAY,+CAAZ,EAA4D;AAAC4M,WAAS,CAAC3M,CAAD,EAAG;AAAC2M,aAAS,GAAC3M,CAAV;AAAY;;AAA1B,CAA5D,EAAwF,CAAxF;AAA2F,IAAI4M,SAAJ;AAAc9M,MAAM,CAACC,IAAP,CAAY,4CAAZ,EAAyD;AAAC6M,WAAS,CAAC5M,CAAD,EAAG;AAAC4M,aAAS,GAAC5M,CAAV;AAAY;;AAA1B,CAAzD,EAAqF,CAArF;AAO5X,MAAMmR,YAAY,GAAG,IAArB;AACA,MAAMC,oBAAoB,GAAG,IAA7B;AACA,MAAMC,gBAAgB,GAAG,IAAI/O,YAAJ,CAAiB;AACxCgE,WAAS,EAAE;AACT7C,QAAI,EAAEC;AADG;AAD6B,CAAjB,CAAzB;;AAMA,MAAM4N,UAAU,GAAI7P,IAAD,IAAU;AAC3B,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB;AACA4P,oBAAgB,CAAChQ,QAAjB,CAA0BiG,OAA1B;AACA,WAAOiK,WAAW,CAACjK,OAAO,CAAChB,SAAT,CAAlB;AACD,GAJD,CAIE,OAAMsC,SAAN,EAAiB;AACjB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,+BAAjB,EAAkDiH,SAAlD,CAAN;AACD;AACF,CARD;;AAUA,SAAS2I,WAAT,CAAqBjL,SAArB,EAAgC;AAC9B,QAAMkL,MAAM,GAAGP,QAAQ,CAACQ,GAAT,CAAaC,SAAb,CAAuBC,MAAvB,CAA8BtB,MAAM,CAAChL,IAAP,CAAYiB,SAAZ,EAAuB,KAAvB,CAA9B,CAAf;AACA,MAAIiB,GAAG,GAAG0J,QAAQ,CAACW,MAAT,CAAgBJ,MAAhB,CAAV;AACAjK,KAAG,GAAG0J,QAAQ,CAACY,SAAT,CAAmBtK,GAAnB,CAAN;AACA,MAAIuK,WAAW,GAAGX,YAAlB;AACA,MAAGxE,SAAS,MAAMC,SAAS,EAA3B,EAA+BkF,WAAW,GAAGV,oBAAd;AAC/B,MAAIzK,OAAO,GAAG0J,MAAM,CAAC0B,MAAP,CAAc,CAAC1B,MAAM,CAAChL,IAAP,CAAY,CAACyM,WAAD,CAAZ,CAAD,EAA6BzB,MAAM,CAAChL,IAAP,CAAYkC,GAAG,CAACmJ,QAAJ,EAAZ,EAA4B,KAA5B,CAA7B,CAAd,CAAd;AACAnJ,KAAG,GAAG0J,QAAQ,CAACW,MAAT,CAAgBX,QAAQ,CAACQ,GAAT,CAAaC,SAAb,CAAuBC,MAAvB,CAA8BhL,OAA9B,CAAhB,CAAN;AACAY,KAAG,GAAG0J,QAAQ,CAACW,MAAT,CAAgBrK,GAAhB,CAAN;AACA,MAAIyK,QAAQ,GAAGzK,GAAG,CAACmJ,QAAJ,GAAerC,SAAf,CAAyB,CAAzB,EAA4B,CAA5B,CAAf;AACA1H,SAAO,GAAG,IAAI0J,MAAJ,CAAW1J,OAAO,CAAC+J,QAAR,CAAiB,KAAjB,IAAwBsB,QAAnC,EAA4C,KAA5C,CAAV;AACArL,SAAO,GAAGuK,MAAM,CAACe,MAAP,CAActL,OAAd,CAAV;AACA,SAAOA,OAAP;AACD;;AAtCD7G,MAAM,CAAC+I,aAAP,CAwCeyI,UAxCf,E;;;;;;;;;;;ACAA,IAAIzR,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAI+G,UAAJ;AAAejH,MAAM,CAACC,IAAP,CAAY,oCAAZ,EAAiD;AAACgH,YAAU,CAAC/G,CAAD,EAAG;AAAC+G,cAAU,GAAC/G,CAAX;AAAa;;AAA5B,CAAjD,EAA+E,CAA/E;AAAkF,IAAImJ,cAAJ;AAAmBrJ,MAAM,CAACC,IAAP,CAAY,mDAAZ,EAAgE;AAACoJ,gBAAc,CAACnJ,CAAD,EAAG;AAACmJ,kBAAc,GAACnJ,CAAf;AAAiB;;AAApC,CAAhE,EAAsG,CAAtG;;AAKpL,MAAMkS,WAAW,GAAG,MAAM;AAExB,MAAI;AACF,UAAMC,GAAG,GAACpL,UAAU,CAACoC,cAAD,CAApB;AACA,WAAOgJ,GAAP;AAED,GAJD,CAIE,OAAMvJ,SAAN,EAAiB;AACjB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,+BAAjB,EAAkDiH,SAAlD,CAAN;AACD;;AACD,SAAO,IAAP;AACD,CAVD;;AALA9I,MAAM,CAAC+I,aAAP,CAiBeqJ,WAjBf,E;;;;;;;;;;;ACAA,IAAIrS,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIiR,QAAJ;AAAanR,MAAM,CAACC,IAAP,CAAY,WAAZ,EAAwB;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACiR,YAAQ,GAACjR,CAAT;AAAW;;AAAvB,CAAxB,EAAiD,CAAjD;AAAoD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAIlJ,MAAMoS,iBAAiB,GAAG,IAAI9P,YAAJ,CAAiB;AACzCb,MAAI,EAAE;AACJgC,QAAI,EAAEC;AADF;AADmC,CAAjB,CAA1B;;AAMA,MAAM2O,WAAW,GAAI5Q,IAAD,IAAU;AAC5B,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB;AACE2Q,qBAAiB,CAAC/Q,QAAlB,CAA2BiG,OAA3B;AACF,UAAMgL,IAAI,GAAGrB,QAAQ,CAACW,MAAT,CAAgBtK,OAAhB,EAAyBoJ,QAAzB,EAAb;AACA,WAAO4B,IAAP;AACD,GALD,CAKE,OAAM1J,SAAN,EAAiB;AACjB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,gCAAjB,EAAmDiH,SAAnD,CAAN;AACD;AACF,CATD;;AAVA9I,MAAM,CAAC+I,aAAP,CAqBewJ,WArBf,E;;;;;;;;;;;ACAA,IAAIxS,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIuS,WAAJ;AAAgBzS,MAAM,CAACC,IAAP,CAAY,QAAZ,EAAqB;AAACwS,aAAW,CAACvS,CAAD,EAAG;AAACuS,eAAW,GAACvS,CAAZ;AAAc;;AAA9B,CAArB,EAAqD,CAArD;AAAwD,IAAIwS,SAAJ;AAAc1S,MAAM,CAACC,IAAP,CAAY,WAAZ,EAAwB;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACwS,aAAS,GAACxS,CAAV;AAAY;;AAAxB,CAAxB,EAAkD,CAAlD;;AAItJ,MAAM8G,UAAU,GAAG,MAAM;AACvB,MAAI;AACF,QAAI2L,OAAJ;;AACA,OAAG;AAACA,aAAO,GAAGF,WAAW,CAAC,EAAD,CAArB;AAA0B,KAA9B,QAAqC,CAACC,SAAS,CAACE,gBAAV,CAA2BD,OAA3B,CAAtC;;AACA,UAAMrM,UAAU,GAAGqM,OAAnB;AACA,UAAMnM,SAAS,GAAGkM,SAAS,CAACG,eAAV,CAA0BvM,UAA1B,CAAlB;AACA,WAAO;AACLA,gBAAU,EAAEA,UAAU,CAACsK,QAAX,CAAoB,KAApB,EAA2BkC,WAA3B,EADP;AAELtM,eAAS,EAAEA,SAAS,CAACoK,QAAV,CAAmB,KAAnB,EAA0BkC,WAA1B;AAFN,KAAP;AAID,GATD,CASE,OAAMhK,SAAN,EAAiB;AACjB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,+BAAjB,EAAkDiH,SAAlD,CAAN;AACD;AACF,CAbD;;AAJA9I,MAAM,CAAC+I,aAAP,CAmBe/B,UAnBf,E;;;;;;;;;;;ACAA,IAAIjH,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIkR,MAAJ;AAAWpR,MAAM,CAACC,IAAP,CAAY,MAAZ,EAAmB;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACkR,UAAM,GAAClR,CAAP;AAAS;;AAArB,CAAnB,EAA0C,CAA1C;AAIvJ,MAAM6S,0BAA0B,GAAG,IAAIvQ,YAAJ,CAAiB;AAClD4L,KAAG,EAAE;AACHzK,QAAI,EAAEC;AADH;AAD6C,CAAjB,CAAnC;;AAMA,MAAMiK,oBAAoB,GAAIlM,IAAD,IAAU;AACrC,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB;AACAoR,8BAA0B,CAACxR,QAA3B,CAAoCiG,OAApC;AACA,WAAOwL,qBAAqB,CAACxL,OAAO,CAAC4G,GAAT,CAA5B;AACD,GAJD,CAIE,OAAMtF,SAAN,EAAiB;AACjB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,yCAAjB,EAA4DiH,SAA5D,CAAN;AACD;AACF,CARD;;AAUA,SAASkK,qBAAT,CAA+B5E,GAA/B,EAAoC;AAClC,MAAI9H,UAAU,GAAG8K,MAAM,CAAC6B,MAAP,CAAc7E,GAAd,EAAmBwC,QAAnB,CAA4B,KAA5B,CAAjB;AACAtK,YAAU,GAAGA,UAAU,CAACiI,SAAX,CAAqB,CAArB,EAAwBjI,UAAU,CAAC4F,MAAX,GAAoB,CAA5C,CAAb;;AACA,MAAG5F,UAAU,CAAC4F,MAAX,KAAsB,EAAtB,IAA4B5F,UAAU,CAAC4M,QAAX,CAAoB,IAApB,CAA/B,EAA0D;AACxD5M,cAAU,GAAGA,UAAU,CAACiI,SAAX,CAAqB,CAArB,EAAwBjI,UAAU,CAAC4F,MAAX,GAAoB,CAA5C,CAAb;AACD;;AACD,SAAO5F,UAAP;AACD;;AA3BDtG,MAAM,CAAC+I,aAAP,CA6Be8E,oBA7Bf,E;;;;;;;;;;;ACAA,IAAIrL,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAI6H,OAAJ;AAAY/H,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC8H,SAAO,CAAC7H,CAAD,EAAG;AAAC6H,WAAO,GAAC7H,CAAR;AAAU;;AAAtB,CAAxD,EAAgF,CAAhF;AAAmF,IAAIqL,WAAJ;AAAgBvL,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAoC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACqL,eAAW,GAACrL,CAAZ;AAAc;;AAA1B,CAApC,EAAgE,CAAhE;AAAmE,IAAIoL,gBAAJ;AAAqBtL,MAAM,CAACC,IAAP,CAAY,4BAAZ,EAAyC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACoL,oBAAgB,GAACpL,CAAjB;AAAmB;;AAA/B,CAAzC,EAA0E,CAA1E;AAA6E,IAAIsR,UAAJ;AAAexR,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsR,cAAU,GAACtR,CAAX;AAAa;;AAAzB,CAA5B,EAAuD,CAAvD;AAO/W,MAAMiT,kBAAkB,GAAG,IAAI3Q,YAAJ,CAAiB;AACxCwH,QAAM,EAAE;AACJrG,QAAI,EAAEC;AADF;AADgC,CAAjB,CAA3B;;AAMA,MAAMwP,sBAAsB,GAAIzR,IAAD,IAAU;AAErC,QAAM6F,OAAO,GAAG7F,IAAhB;AACAwR,oBAAkB,CAAC5R,QAAnB,CAA4BiG,OAA5B;AAEA,MAAIhB,SAAS,GAAG+E,WAAW,CAAC;AAACvB,UAAM,EAAExC,OAAO,CAACwC;AAAjB,GAAD,CAA3B;;AACA,MAAG,CAACxD,SAAJ,EAAc;AACV,UAAM2F,QAAQ,GAAGb,gBAAgB,CAAC;AAACtB,YAAM,EAAExC,OAAO,CAACwC;AAAjB,KAAD,CAAjC;AACAjC,WAAO,CAAC,mEAAD,EAAqE;AAACoE,cAAQ,EAACA;AAAV,KAArE,CAAP;AACA3F,aAAS,GAAG+E,WAAW,CAAC;AAACvB,YAAM,EAAEmC;AAAT,KAAD,CAAvB,CAHU,CAGmC;AAChD;;AACD,QAAMkH,WAAW,GAAI7B,UAAU,CAAC;AAAChL,aAAS,EAAEA;AAAZ,GAAD,CAA/B;AACAuB,SAAO,CAAC,4BAAD,EAA+B;AAACvB,aAAS,EAACA,SAAX;AAAqB6M,eAAW,EAACA;AAAjC,GAA/B,CAAP;AACA,SAAO;AAAC7M,aAAS,EAACA,SAAX;AAAqB6M,eAAW,EAACA;AAAjC,GAAP;AACH,CAdD;;AAbArT,MAAM,CAAC+I,aAAP,CA6BeqK,sBA7Bf,E;;;;;;;;;;;ACAA,IAAIrT,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIoT,OAAJ;AAAYtT,MAAM,CAACC,IAAP,CAAY,aAAZ,EAA0B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACoT,WAAO,GAACpT,CAAR;AAAU;;AAAtB,CAA1B,EAAkD,CAAlD;AAAqD,IAAIqT,OAAJ;AAAYvT,MAAM,CAACC,IAAP,CAAY,iBAAZ,EAA8B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACqT,WAAO,GAACrT,CAAR;AAAU;;AAAtB,CAA9B,EAAsD,CAAtD;AAKzN,MAAMsT,kBAAkB,GAAG,IAAIhR,YAAJ,CAAiB;AAC1C4I,SAAO,EAAE;AACPzH,QAAI,EAAEC;AADC,GADiC;AAI1C0C,YAAU,EAAE;AACV3C,QAAI,EAAEC;AADI;AAJ8B,CAAjB,CAA3B;;AASA,MAAM6P,YAAY,GAAI9R,IAAD,IAAU;AAC7B,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB;AACA6R,sBAAkB,CAACjS,QAAnB,CAA4BiG,OAA5B;AACA,UAAM2C,SAAS,GAAGoJ,OAAO,CAAC/L,OAAO,CAAC4D,OAAT,CAAP,CAAyBsI,IAAzB,CAA8B,IAAIJ,OAAO,CAACK,UAAZ,CAAuBnM,OAAO,CAAClB,UAA/B,CAA9B,CAAlB;AACA,WAAO6D,SAAP;AACD,GALD,CAKE,OAAMrB,SAAN,EAAiB;AACjB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,iCAAjB,EAAoDiH,SAApD,CAAN;AACD;AACF,CATD;;AAdA9I,MAAM,CAAC+I,aAAP,CAyBe0K,YAzBf,E;;;;;;;;;;;ACAA,IAAI1T,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAI0T,WAAJ;AAAgB5T,MAAM,CAACC,IAAP,CAAY,mDAAZ,EAAgE;AAAC2T,aAAW,CAAC1T,CAAD,EAAG;AAAC0T,eAAW,GAAC1T,CAAZ;AAAc;;AAA9B,CAAhE,EAAgG,CAAhG;AAAmG,IAAI4Q,cAAJ;AAAmB9Q,MAAM,CAACC,IAAP,CAAY,mBAAZ,EAAgC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC4Q,kBAAc,GAAC5Q,CAAf;AAAiB;;AAA7B,CAAhC,EAA+D,CAA/D;AAAkE,IAAIkJ,MAAJ;AAAWpJ,MAAM,CAACC,IAAP,CAAY,4CAAZ,EAAyD;AAACmJ,QAAM,CAAClJ,CAAD,EAAG;AAACkJ,UAAM,GAAClJ,CAAP;AAAS;;AAApB,CAAzD,EAA+E,CAA/E;AAAkF,IAAI2T,aAAJ,EAAkB9L,OAAlB;AAA0B/H,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC4T,eAAa,CAAC3T,CAAD,EAAG;AAAC2T,iBAAa,GAAC3T,CAAd;AAAgB,GAAlC;;AAAmC6H,SAAO,CAAC7H,CAAD,EAAG;AAAC6H,WAAO,GAAC7H,CAAR;AAAU;;AAAxD,CAAxD,EAAkH,CAAlH;AAAqH,IAAI4T,MAAJ,EAAWC,OAAX;AAAmB/T,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAAC6T,QAAM,CAAC5T,CAAD,EAAG;AAAC4T,UAAM,GAAC5T,CAAP;AAAS,GAApB;;AAAqB6T,SAAO,CAAC7T,CAAD,EAAG;AAAC6T,WAAO,GAAC7T,CAAR;AAAU;;AAA1C,CAA9C,EAA0F,CAA1F;AAA6F,IAAIE,MAAJ;AAAWJ,MAAM,CAACC,IAAP,CAAY,8BAAZ,EAA2C;AAACG,QAAM,CAACF,CAAD,EAAG;AAACE,UAAM,GAACF,CAAP;AAAS;;AAApB,CAA3C,EAAiE,CAAjE;AAAoE,IAAIkT,sBAAJ;AAA2BpT,MAAM,CAACC,IAAP,CAAY,uCAAZ,EAAoD;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACkT,0BAAsB,GAAClT,CAAvB;AAAyB;;AAArC,CAApD,EAA2F,CAA3F;AAW1xB,MAAM8T,YAAY,GAAG,IAAIxR,YAAJ,CAAiB;AACpC4B,QAAM,EAAE;AACNT,QAAI,EAAEC;AADA,GAD4B;AAIpCuG,WAAS,EAAE;AACTxG,QAAI,EAAEC;AADG,GAJyB;AAOpCqQ,UAAQ,EAAE;AACRtQ,QAAI,EAAEC;AADE,GAP0B;AAUpCoG,QAAM,EAAE;AACNrG,QAAI,EAAEC;AADA,GAV4B;AAapCsQ,SAAO,EAAE;AACPvQ,QAAI,EAAET;AADC;AAb2B,CAAjB,CAArB;;AAkBA,MAAMP,MAAM,GAAIhB,IAAD,IAAU;AACvB,QAAM6F,OAAO,GAAG7F,IAAhB;;AACA,MAAI;AACFqS,gBAAY,CAACzS,QAAb,CAAsBiG,OAAtB;AACAO,WAAO,CAAC,SAAD,EAAWP,OAAO,CAACwC,MAAnB,CAAP;AAEA,UAAMmK,mBAAmB,GAAGf,sBAAsB,CAAC;AAACpJ,YAAM,EAACxC,OAAO,CAACwC;AAAhB,KAAD,CAAlD;AACA,UAAMzE,IAAI,GAAGuL,cAAc,CAAC;AAACtK,eAAS,EAAE2N,mBAAmB,CAAC3N,SAAhC;AAA2C4E,aAAO,EAAEhC,MAAM;AAA1D,KAAD,CAA3B;AACArB,WAAO,CAAC,kDAAD,EAAoDqB,MAAM,EAA1D,EAA6D7D,IAA7D,CAAP;AAEA,UAAM6O,SAAS,GAAGxL,IAAI,CAACC,SAAL,CAAe;AAC7BsB,eAAS,EAAE3C,OAAO,CAAC2C,SADU;AAE7B8J,cAAQ,EAAEzM,OAAO,CAACyM,QAFW;AAG7B1O,UAAI,EAAEA;AAHuB,KAAf,CAAlB,CARE,CAcF;;AACAsO,iBAAa,CAAC,mEAAD,EAAsEM,mBAAmB,CAACd,WAA1F,CAAb;AACA,UAAMgB,QAAQ,GAAGP,MAAM,CAACF,WAAD,EAAcO,mBAAmB,CAACd,WAAlC,CAAvB;AACAQ,iBAAa,CAAC,8BAAD,EAAiCQ,QAAjC,EAA2CF,mBAAmB,CAACd,WAA/D,CAAb;AAEAQ,iBAAa,CAAC,oEAAD,EAAuErM,OAAO,CAACpD,MAA/E,EAAsFgQ,SAAtF,EAAgGD,mBAAmB,CAACd,WAApH,CAAb;AACA,UAAMiB,SAAS,GAAGP,OAAO,CAACH,WAAD,EAAcpM,OAAO,CAACpD,MAAtB,EAA8BgQ,SAA9B,EAAyCD,mBAAmB,CAACd,WAA7D,CAAzB;AACAQ,iBAAa,CAAC,kCAAD,EAAqCS,SAArC,CAAb;AAEAlU,UAAM,CAACgD,MAAP,CAAc;AAACgB,YAAM,EAAEoD,OAAO,CAACpD;AAAjB,KAAd,EAAwC;AAAC8M,UAAI,EAAE;AAAC7M,YAAI,EAACiQ;AAAN;AAAP,KAAxC;AACAT,iBAAa,CAAC,8BAAD,EAAiC;AAACzP,YAAM,EAAEoD,OAAO,CAACpD,MAAjB;AAAyBC,UAAI,EAAEiQ;AAA/B,KAAjC,CAAb;AAED,GA1BD,CA0BE,OAAMxL,SAAN,EAAiB;AACf1I,UAAM,CAACgD,MAAP,CAAc;AAACgB,YAAM,EAAEoD,OAAO,CAACpD;AAAjB,KAAd,EAAwC;AAAC8M,UAAI,EAAE;AAACtP,aAAK,EAACgH,IAAI,CAACC,SAAL,CAAeC,SAAS,CAACsC,OAAzB;AAAP;AAAP,KAAxC;AACF,UAAM,IAAIrL,MAAM,CAAC8B,KAAX,CAAiB,2BAAjB,EAA8CiH,SAA9C,CAAN,CAFiB,CAE+C;AACjE;AACF,CAhCD;;AA7BA9I,MAAM,CAAC+I,aAAP,CA+DepG,MA/Df,E;;;;;;;;;;;ACAA,IAAI5C,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAImJ,cAAJ;AAAmBrJ,MAAM,CAACC,IAAP,CAAY,mDAAZ,EAAgE;AAACoJ,gBAAc,CAACnJ,CAAD,EAAG;AAACmJ,kBAAc,GAACnJ,CAAf;AAAiB;;AAApC,CAAhE,EAAsG,CAAtG;AAAyG,IAAIyN,MAAJ,EAAWnE,WAAX,EAAuB+K,cAAvB,EAAsCR,OAAtC,EAA8CpF,QAA9C;AAAuD3O,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAAC0N,QAAM,CAACzN,CAAD,EAAG;AAACyN,UAAM,GAACzN,CAAP;AAAS,GAApB;;AAAqBsJ,aAAW,CAACtJ,CAAD,EAAG;AAACsJ,eAAW,GAACtJ,CAAZ;AAAc,GAAlD;;AAAmDqU,gBAAc,CAACrU,CAAD,EAAG;AAACqU,kBAAc,GAACrU,CAAf;AAAiB,GAAtF;;AAAuF6T,SAAO,CAAC7T,CAAD,EAAG;AAAC6T,WAAO,GAAC7T,CAAR;AAAU,GAA5G;;AAA6GyO,UAAQ,CAACzO,CAAD,EAAG;AAACyO,YAAQ,GAACzO,CAAT;AAAW;;AAApI,CAA9C,EAAoL,CAApL;AAAuL,IAAIgJ,QAAJ,EAAasL,6BAAb,EAA2CrL,OAA3C;AAAmDnJ,MAAM,CAACC,IAAP,CAAY,kCAAZ,EAA+C;AAACiJ,UAAQ,CAAChJ,CAAD,EAAG;AAACgJ,YAAQ,GAAChJ,CAAT;AAAW,GAAxB;;AAAyBsU,+BAA6B,CAACtU,CAAD,EAAG;AAACsU,iCAA6B,GAACtU,CAA9B;AAAgC,GAA1F;;AAA2FiJ,SAAO,CAACjJ,CAAD,EAAG;AAACiJ,WAAO,GAACjJ,CAAR;AAAU;;AAAhH,CAA/C,EAAiK,CAAjK;AAAoK,IAAIoJ,eAAJ;AAAoBtJ,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAACqJ,iBAAe,CAACpJ,CAAD,EAAG;AAACoJ,mBAAe,GAACpJ,CAAhB;AAAkB;;AAAtC,CAA7D,EAAqG,CAArG;AAAwG,IAAIuU,UAAJ;AAAezU,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACwU,YAAU,CAACvU,CAAD,EAAG;AAACuU,cAAU,GAACvU,CAAX;AAAa;;AAA5B,CAA1C,EAAwE,CAAxE;AAA2E,IAAI2J,UAAJ;AAAe7J,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC4J,YAAU,CAAC3J,CAAD,EAAG;AAAC2J,cAAU,GAAC3J,CAAX;AAAa;;AAA5B,CAAxD,EAAsF,CAAtF;AAAyF,IAAI2N,oBAAJ;AAAyB7N,MAAM,CAACC,IAAP,CAAY,4BAAZ,EAAyC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC2N,wBAAoB,GAAC3N,CAArB;AAAuB;;AAAnC,CAAzC,EAA8E,CAA9E;AAAiF,IAAI4N,cAAJ;AAAmB9N,MAAM,CAACC,IAAP,CAAY,mBAAZ,EAAgC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC4N,kBAAc,GAAC5N,CAAf;AAAiB;;AAA7B,CAAhC,EAA+D,CAA/D;AAAkE,IAAIE,MAAJ;AAAWJ,MAAM,CAACC,IAAP,CAAY,8BAAZ,EAA2C;AAACG,QAAM,CAACF,CAAD,EAAG;AAACE,UAAM,GAACF,CAAP;AAAS;;AAApB,CAA3C,EAAiE,EAAjE;AAYrtC,MAAMwU,YAAY,GAAG,IAAIlS,YAAJ,CAAiB;AACpC4B,QAAM,EAAE;AACNT,QAAI,EAAEC;AADA,GAD4B;AAIpCgD,OAAK,EAAE;AACLjD,QAAI,EAAEC;AADD,GAJ6B;AAOpC+Q,MAAI,EAAG;AACHhR,QAAI,EAAEC,MADH;AAEHI,YAAQ,EAAE;AAFP,GAP6B;AAWpC4Q,aAAW,EAAG;AACVjR,QAAI,EAAEC;AADI;AAXsB,CAAjB,CAArB;;AAgBA,MAAMR,MAAM,GAAG,CAACzB,IAAD,EAAOuN,GAAP,KAAe;AAC5B,MAAI;AACF,UAAM1H,OAAO,GAAG7F,IAAhB;AAEA+S,gBAAY,CAACnT,QAAb,CAAsBiG,OAAtB,EAHE,CAKF;;AACA,UAAMqN,SAAS,GAAGlG,QAAQ,CAACtF,cAAD,EAAgB7B,OAAO,CAACpD,MAAxB,CAA1B;;AACA,QAAGyQ,SAAS,KAAKpM,SAAjB,EAA2B;AACvBqM,WAAK,CAAC5F,GAAD,CAAL;AACArF,gBAAU,CAAC,yCAAD,EAA2CrC,OAAO,CAACpD,MAAnD,CAAV;AACA;AACH;;AACD,UAAM2Q,eAAe,GAAGR,cAAc,CAAClL,cAAD,EAAgBwL,SAAS,CAAC5F,IAA1B,CAAtC;;AACA,QAAG8F,eAAe,CAACC,aAAhB,KAAgC,CAAnC,EAAqC;AACjCF,WAAK,CAAC5F,GAAD,CAAL;AACArF,gBAAU,CAAC,wDAAD,EAA0DjB,IAAI,CAACuF,KAAL,CAAW3G,OAAO,CAACZ,KAAnB,CAA1D,CAAV;AACA;AACH;;AACDiD,cAAU,CAAC,wCAAD,EAA0CjB,IAAI,CAACuF,KAAL,CAAW3G,OAAO,CAACZ,KAAnB,CAA1C,CAAV;AACA,UAAMwH,GAAG,GAAGT,MAAM,CAACtE,cAAD,EAAiBC,eAAjB,CAAlB;AACA,UAAMhD,UAAU,GAAGuH,oBAAoB,CAAC;AAACO,SAAG,EAAEA;AAAN,KAAD,CAAvC;AACAvE,cAAU,CAAC,4FAAD,EAA8FrC,OAAO,CAACoN,WAAtG,CAAV;AACA,UAAMK,cAAc,GAAGnH,cAAc,CAAC;AAACxH,gBAAU,EAAEA,UAAb;AAAyB8E,aAAO,EAAE5D,OAAO,CAACoN;AAA1C,KAAD,CAArC;AACA/K,cAAU,CAAC,uBAAD,EAAyBoL,cAAzB,CAAV;AACA,UAAM/K,GAAG,GAAG+K,cAAc,GAAC/L,QAAf,GAAwBC,OAAxB,GAAgC,GAAhC,GAAoCqL,6BAAhD;AAEA3K,cAAU,CAAC,oCAAkCP,eAAlC,GAAkD,UAAnD,EAA8D9B,OAAO,CAACZ,KAAtE,CAAV;AACA,UAAMuD,SAAS,GAAGX,WAAW,CAACH,cAAD,EAAiBC,eAAjB,EAAkC9B,OAAO,CAACpD,MAA1C,CAA7B,CA3BE,CA2B8E;;AAChFyF,cAAU,CAAC,oBAAD,EAAsBM,SAAtB,CAAV;AAEA,UAAM+K,UAAU,GAAG;AACf9Q,YAAM,EAAEoD,OAAO,CAACpD,MADD;AAEf+F,eAAS,EAAEA,SAFI;AAGfwK,UAAI,EAAEnN,OAAO,CAACmN;AAHC,KAAnB;;AAMA,QAAI;AACA,YAAM1F,IAAI,GAAG8E,OAAO,CAAC1K,cAAD,EAAiB7B,OAAO,CAACpD,MAAzB,EAAiCoD,OAAO,CAACZ,KAAzC,EAAgD,IAAhD,CAApB;AACAiD,gBAAU,CAAC,0BAAD,EAA4BoF,IAA5B,CAAV;AACH,KAHD,CAGC,OAAMnG,SAAN,EAAgB;AACb;AACAe,gBAAU,CAAC,8GAAD,EAAgHrC,OAAO,CAACpD,MAAxH,CAAV;;AACA,UAAG0E,SAAS,CAAC8H,QAAV,GAAqBtC,OAArB,CAA6B,mDAA7B,KAAmF,CAAC,CAAvF,EAA0F;AACtFlO,cAAM,CAACgD,MAAP,CAAc;AAACgB,gBAAM,EAAEoD,OAAO,CAACpD;AAAjB,SAAd,EAAwC;AAAC8M,cAAI,EAAE;AAACtP,iBAAK,EAAEgH,IAAI,CAACC,SAAL,CAAeC,SAAS,CAACsC,OAAzB;AAAR;AAAP,SAAxC;AACH;;AACD,YAAM,IAAIrL,MAAM,CAAC8B,KAAX,CAAiB,2BAAjB,EAA8CiH,SAA9C,CAAN,CANa,CAOb;AACA;AACA;AACH;;AAED,UAAMwB,QAAQ,GAAGmK,UAAU,CAACvK,GAAD,EAAMgL,UAAN,CAA3B;AACArL,cAAU,CAAC,mDAAiDK,GAAjD,GAAqD,kBAArD,GAAwEtB,IAAI,CAACC,SAAL,CAAeqM,UAAf,CAAxE,GAAmG,YAApG,EAAiH5K,QAAQ,CAAC3I,IAA1H,CAAV;AACAuN,OAAG,CAACY,IAAJ;AACD,GAtDD,CAsDE,OAAMhH,SAAN,EAAiB;AACjB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,2BAAjB,EAA8CiH,SAA9C,CAAN;AACD;AACF,CA1DD;;AA4DA,SAASgM,KAAT,CAAe5F,GAAf,EAAmB;AACfrF,YAAU,CAAC,6CAAD,EAA+C,EAA/C,CAAV;AACAqF,KAAG,CAACiG,MAAJ;AACAtL,YAAU,CAAC,+BAAD,EAAiC,EAAjC,CAAV;AACAqF,KAAG,CAACkG,OAAJ,CACI,CACI;AACA;AACD;AACe;AAJlB,GADJ,EAOI,UAAUC,GAAV,EAAelS,MAAf,EAAuB;AACnB,QAAIA,MAAJ,EAAY;AACR0G,gBAAU,CAAC,0BAAD,EAA4B1G,MAA5B,CAAV;AACH;AACJ,GAXL;AAaH;;AAzGDnD,MAAM,CAAC+I,aAAP,CA2Ge3F,MA3Gf,E;;;;;;;;;;;ACAA,IAAIrD,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIoT,OAAJ;AAAYtT,MAAM,CAACC,IAAP,CAAY,aAAZ,EAA0B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACoT,WAAO,GAACpT,CAAR;AAAU;;AAAtB,CAA1B,EAAkD,CAAlD;AAAqD,IAAIqT,OAAJ;AAAYvT,MAAM,CAACC,IAAP,CAAY,iBAAZ,EAA8B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACqT,WAAO,GAACrT,CAAR;AAAU;;AAAtB,CAA9B,EAAsD,CAAtD;AAAyD,IAAI4J,QAAJ,EAAawL,SAAb;AAAuBtV,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC6J,UAAQ,CAAC5J,CAAD,EAAG;AAAC4J,YAAQ,GAAC5J,CAAT;AAAW,GAAxB;;AAAyBoV,WAAS,CAACpV,CAAD,EAAG;AAACoV,aAAS,GAACpV,CAAV;AAAY;;AAAlD,CAAxD,EAA4G,CAA5G;AAKzS,MAAMqV,OAAO,GAAGjC,OAAO,CAACkC,QAAR,CAAiBnU,GAAjB,CAAqB;AACnCC,MAAI,EAAE,UAD6B;AAEnCmU,OAAK,EAAE,UAF4B;AAGnCC,YAAU,EAAE,IAHuB;AAInCC,YAAU,EAAE,IAJuB;AAKnCC,YAAU,EAAE,EALuB;AAMnCC,cAAY,EAAE;AANqB,CAArB,CAAhB;AASA,MAAMC,qBAAqB,GAAG,IAAItT,YAAJ,CAAiB;AAC7Cb,MAAI,EAAE;AACJgC,QAAI,EAAEC;AADF,GADuC;AAI7C4C,WAAS,EAAE;AACT7C,QAAI,EAAEC;AADG,GAJkC;AAO7CuG,WAAS,EAAE;AACTxG,QAAI,EAAEC;AADG;AAPkC,CAAjB,CAA9B;;AAYA,MAAM4H,eAAe,GAAI7J,IAAD,IAAU;AAChC,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB;AACA2T,aAAS,CAAC,kBAAD,EAAoB9N,OAApB,CAAT;AACAsO,yBAAqB,CAACvU,QAAtB,CAA+BiG,OAA/B;AACA,UAAMX,OAAO,GAAGyM,OAAO,CAACyC,OAAR,CAAgBC,aAAhB,CAA8B,IAAI1C,OAAO,CAAC2C,SAAZ,CAAsBzO,OAAO,CAAChB,SAA9B,CAA9B,EAAwE+O,OAAxE,CAAhB;;AACA,QAAI;AACF,aAAOhC,OAAO,CAAC/L,OAAO,CAAC7F,IAAT,CAAP,CAAsBuU,MAAtB,CAA6BrP,OAA7B,EAAsCW,OAAO,CAAC2C,SAA9C,CAAP;AACD,KAFD,CAEE,OAAMvI,KAAN,EAAa;AAAEkI,cAAQ,CAAClI,KAAD,CAAR;AAAgB;;AACjC,WAAO,KAAP;AACD,GATD,CASE,OAAMkH,SAAN,EAAiB;AACjB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,oCAAjB,EAAuDiH,SAAvD,CAAN;AACD;AACF,CAbD;;AA1BA9I,MAAM,CAAC+I,aAAP,CAyCeyC,eAzCf,E;;;;;;;;;;;ACAA,IAAIzL,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIE,MAAJ;AAAWJ,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAACG,QAAM,CAACF,CAAD,EAAG;AAACE,UAAM,GAACF,CAAP;AAAS;;AAApB,CAA9C,EAAoE,CAApE;AAAuE,IAAIwH,OAAJ;AAAY1H,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAACyH,SAAO,CAACxH,CAAD,EAAG;AAACwH,WAAO,GAACxH,CAAR;AAAU;;AAAtB,CAA9C,EAAsE,CAAtE;AAAyE,IAAI0E,UAAJ;AAAe5E,MAAM,CAACC,IAAP,CAAY,uCAAZ,EAAoD;AAAC2E,YAAU,CAAC1E,CAAD,EAAG;AAAC0E,cAAU,GAAC1E,CAAX;AAAa;;AAA5B,CAApD,EAAkF,CAAlF;AAAqF,IAAI+Q,cAAJ;AAAmBjR,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAoC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC+Q,kBAAc,GAAC/Q,CAAf;AAAiB;;AAA7B,CAApC,EAAmE,CAAnE;AAAsE,IAAIuT,YAAJ;AAAiBzT,MAAM,CAACC,IAAP,CAAY,oBAAZ,EAAiC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACuT,gBAAY,GAACvT,CAAb;AAAe;;AAA3B,CAAjC,EAA8D,CAA9D;AAAiE,IAAIqS,WAAJ;AAAgBvS,MAAM,CAACC,IAAP,CAAY,oBAAZ,EAAiC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACqS,eAAW,GAACrS,CAAZ;AAAc;;AAA1B,CAAjC,EAA6D,CAA7D;AAAgE,IAAIiW,sBAAJ;AAA2BnW,MAAM,CAACC,IAAP,CAAY,kCAAZ,EAA+C;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACiW,0BAAsB,GAACjW,CAAvB;AAAyB;;AAArC,CAA/C,EAAsF,CAAtF;AAAyF,IAAI6H,OAAJ;AAAY/H,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC8H,SAAO,CAAC7H,CAAD,EAAG;AAAC6H,WAAO,GAAC7H,CAAR;AAAU;;AAAtB,CAAxD,EAAgF,CAAhF;AAWlxB,MAAMkW,uBAAuB,GAAG,IAAI5T,YAAJ,CAAiB;AAC/C4F,IAAE,EAAE;AACFzE,QAAI,EAAEC;AADJ;AAD2C,CAAjB,CAAhC;;AAMA,MAAMyS,iBAAiB,GAAI1U,IAAD,IAAU;AAClC,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB;AACAyU,2BAAuB,CAAC7U,QAAxB,CAAiCiG,OAAjC;AAEA,UAAMzF,KAAK,GAAG3B,MAAM,CAACsK,OAAP,CAAe;AAAChH,SAAG,EAAE/B,IAAI,CAACyG;AAAX,KAAf,CAAd;AACA,UAAMrF,SAAS,GAAG6B,UAAU,CAAC8F,OAAX,CAAmB;AAAChH,SAAG,EAAE3B,KAAK,CAACgB;AAAZ,KAAnB,CAAlB;AACA,UAAMC,MAAM,GAAG0E,OAAO,CAACgD,OAAR,CAAgB;AAAChH,SAAG,EAAE3B,KAAK,CAACiB;AAAZ,KAAhB,CAAf;AACA+E,WAAO,CAAC,aAAD,EAAe;AAAC7D,WAAK,EAACsD,OAAO,CAACtD,KAAf;AAAsBnC,WAAK,EAACA,KAA5B;AAAkCgB,eAAS,EAACA,SAA5C;AAAsDC,YAAM,EAAEA;AAA9D,KAAf,CAAP;AAGA,UAAMoB,MAAM,GAAG6M,cAAc,CAAC;AAAC7I,QAAE,EAAEzG,IAAI,CAACyG,EAAV;AAAalE,WAAK,EAACnC,KAAK,CAACmC,KAAzB;AAA+BI,eAAS,EAACvC,KAAK,CAACuC;AAA/C,KAAD,CAA7B;AACA,UAAM6F,SAAS,GAAGsJ,YAAY,CAAC;AAACrI,aAAO,EAAErI,SAAS,CAACsD,KAAV,GAAgBrD,MAAM,CAACqD,KAAjC;AAAwCC,gBAAU,EAAEvD,SAAS,CAACuD;AAA9D,KAAD,CAA9B;AACAyB,WAAO,CAAC,sDAAD,EAAwDoC,SAAxD,CAAP;AAEA,QAAI8J,QAAQ,GAAG,EAAf;;AAEA,QAAGlS,KAAK,CAACJ,IAAT,EAAe;AACbsS,cAAQ,GAAG1B,WAAW,CAAC;AAAC5Q,YAAI,EAAEI,KAAK,CAACJ;AAAb,OAAD,CAAtB;AACAoG,aAAO,CAAC,qCAAD,EAAuCkM,QAAvC,CAAP;AACD;;AAED,UAAMjI,KAAK,GAAGjJ,SAAS,CAACsD,KAAV,CAAgB4F,KAAhB,CAAsB,GAAtB,CAAd;AACA,UAAMjC,MAAM,GAAGgC,KAAK,CAACA,KAAK,CAACE,MAAN,GAAa,CAAd,CAApB;AACAnE,WAAO,CAAC,wCAAD,EAA0CiC,MAA1C,CAAP;AACAmM,0BAAsB,CAAC;AACrB/R,YAAM,EAAEA,MADa;AAErB+F,eAAS,EAAEA,SAFU;AAGrB8J,cAAQ,EAAEA,QAHW;AAIrBjK,YAAM,EAAEA,MAJa;AAKrBkK,aAAO,EAAEnS,KAAK,CAACkB;AALM,KAAD,CAAtB;AAOD,GA/BD,CA+BE,OAAO6F,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,sCAAjB,EAAyDiH,SAAzD,CAAN;AACD;AACF,CAnCD;;AAjBA9I,MAAM,CAAC+I,aAAP,CAsDesN,iBAtDf,E;;;;;;;;;;;ACAA,IAAItW,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIoW,OAAJ;AAAYtW,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAACqW,SAAO,CAACpW,CAAD,EAAG;AAACoW,WAAO,GAACpW,CAAR;AAAU;;AAAtB,CAA7D,EAAqF,CAArF;AAIxJ,MAAMqW,mBAAmB,GAAG,IAAI/T,YAAJ,CAAiB;AAC3CgQ,MAAI,EAAE;AACJ7O,QAAI,EAAEC;AADF;AADqC,CAAjB,CAA5B;;AAMA,MAAM4S,aAAa,GAAIhE,IAAD,IAAU;AAC9B,MAAI;AACF,UAAMiE,OAAO,GAAGjE,IAAhB;AACA+D,uBAAmB,CAAChV,QAApB,CAA6BkV,OAA7B;AACA,UAAMC,GAAG,GAAGJ,OAAO,CAACK,SAAR,CAAkBF,OAAO,CAACjE,IAA1B,CAAZ;AACA,QAAG,CAACkE,GAAD,IAAQA,GAAG,KAAK,EAAnB,EAAuB,MAAM,YAAN;;AACvB,QAAI;AACF,YAAME,GAAG,GAAGhO,IAAI,CAACuF,KAAL,CAAWoC,MAAM,CAACmG,GAAD,EAAM,KAAN,CAAN,CAAmB9F,QAAnB,CAA4B,OAA5B,CAAX,CAAZ;AACA,aAAOgG,GAAP;AACD,KAHD,CAGE,OAAM9N,SAAN,EAAiB;AAAC,YAAM,YAAN;AAAoB;AACzC,GATD,CASE,OAAOA,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,kCAAjB,EAAqDiH,SAArD,CAAN;AACD;AACF,CAbD;;AAVA9I,MAAM,CAAC+I,aAAP,CAyBeyN,aAzBf,E;;;;;;;;;;;ACAA,IAAIzW,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIoW,OAAJ;AAAYtW,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAACqW,SAAO,CAACpW,CAAD,EAAG;AAACoW,WAAO,GAACpW,CAAR;AAAU;;AAAtB,CAA7D,EAAqF,CAArF;AAIxJ,MAAM2W,qBAAqB,GAAG,IAAIrU,YAAJ,CAAiB;AAC7C4F,IAAE,EAAE;AACFzE,QAAI,EAAEC;AADJ,GADyC;AAI7C+G,OAAK,EAAE;AACLhH,QAAI,EAAEC;AADD,GAJsC;AAO7CiH,UAAQ,EAAE;AACRlH,QAAI,EAAEC;AADE;AAPmC,CAAjB,CAA9B;;AAYA,MAAM+F,eAAe,GAAI5H,KAAD,IAAW;AACjC,MAAI;AACF,UAAMc,QAAQ,GAAGd,KAAjB;AACA8U,yBAAqB,CAACtV,QAAtB,CAA+BsB,QAA/B;AAEA,UAAMiU,IAAI,GAAGlO,IAAI,CAACC,SAAL,CAAe;AAC1BT,QAAE,EAAEvF,QAAQ,CAACuF,EADa;AAE1BuC,WAAK,EAAE9H,QAAQ,CAAC8H,KAFU;AAG1BE,cAAQ,EAAEhI,QAAQ,CAACgI;AAHO,KAAf,CAAb;AAMA,UAAM6L,GAAG,GAAGnG,MAAM,CAACuG,IAAD,CAAN,CAAalG,QAAb,CAAsB,KAAtB,CAAZ;AACA,UAAM4B,IAAI,GAAG8D,OAAO,CAACS,SAAR,CAAkBL,GAAlB,CAAb;AACA,WAAOlE,IAAP;AACD,GAbD,CAaE,OAAO1J,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,oCAAjB,EAAuDiH,SAAvD,CAAN;AACD;AACF,CAjBD;;AAhBA9I,MAAM,CAAC+I,aAAP,CAmCeY,eAnCf,E;;;;;;;;;;;ACAA,IAAI5J,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAI2J,UAAJ;AAAe7J,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC4J,YAAU,CAAC3J,CAAD,EAAG;AAAC2J,cAAU,GAAC3J,CAAX;AAAa;;AAA5B,CAAxD,EAAsF,CAAtF;AAI3J,MAAM8W,iBAAiB,GAAG,cAA1B;AACA,MAAMC,mBAAmB,GAAG,IAAIzU,YAAJ,CAAiB;AAC3CuI,UAAQ,EAAE;AACRpH,QAAI,EAAEC;AADE,GADiC;AAI3CjC,MAAI,EAAE;AACJgC,QAAI,EAAEuT,MADF;AAEJC,YAAQ,EAAE;AAFN;AAJqC,CAAjB,CAA5B;;AAUA,MAAM1N,aAAa,GAAI9H,IAAD,IAAU;AAC9B,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB,CADE,CAEF;;AAEAsV,uBAAmB,CAAC1V,QAApB,CAA6BiG,OAA7B;AACAqC,cAAU,CAAC,+BAAD,CAAV;;AAEA,QAAIuN,MAAJ;;AACA,QAAIrM,QAAQ,GAAGvD,OAAO,CAACuD,QAAvB,CARE,CASH;;AAEC,OAAG;AACDqM,YAAM,GAAGJ,iBAAiB,CAACK,IAAlB,CAAuBtM,QAAvB,CAAT;AACA,UAAGqM,MAAH,EAAWrM,QAAQ,GAAGuM,mBAAmB,CAACvM,QAAD,EAAWqM,MAAX,EAAmB5P,OAAO,CAAC7F,IAAR,CAAayV,MAAM,CAAC,CAAD,CAAnB,CAAnB,CAA9B;AACZ,KAHD,QAGSA,MAHT;;AAIA,WAAOrM,QAAP;AACD,GAhBD,CAgBE,OAAOjC,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,gCAAjB,EAAmDiH,SAAnD,CAAN;AACD;AACF,CApBD;;AAsBA,SAASwO,mBAAT,CAA6BvM,QAA7B,EAAuCqM,MAAvC,EAA+CG,OAA/C,EAAwD;AACtD,MAAIC,GAAG,GAAGD,OAAV;AACA,MAAGA,OAAO,KAAK9O,SAAf,EAA0B+O,GAAG,GAAG,EAAN;AAC1B,SAAOzM,QAAQ,CAACwD,SAAT,CAAmB,CAAnB,EAAsB6I,MAAM,CAAClT,KAA7B,IAAoCsT,GAApC,GAAwCzM,QAAQ,CAACwD,SAAT,CAAmB6I,MAAM,CAAClT,KAAP,GAAakT,MAAM,CAAC,CAAD,CAAN,CAAUlL,MAA1C,CAA/C;AACD;;AAzCDlM,MAAM,CAAC+I,aAAP,CA2CeU,aA3Cf,E;;;;;;;;;;;ACAA,IAAI1J,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAI2J,UAAJ;AAAe7J,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC4J,YAAU,CAAC3J,CAAD,EAAG;AAAC2J,cAAU,GAAC3J,CAAX;AAAa;;AAA5B,CAAxD,EAAsF,CAAtF;AAAyF,IAAIuX,2BAAJ;AAAgCzX,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAACwX,6BAA2B,CAACvX,CAAD,EAAG;AAACuX,+BAA2B,GAACvX,CAA5B;AAA8B;;AAA9D,CAA7D,EAA6H,CAA7H;AAKpR,MAAMwX,cAAc,GAAG,IAAIlV,YAAJ,CAAiB;AACtC+C,MAAI,EAAE;AACJ5B,QAAI,EAAEC,MADF;AAEJC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmB+H;AAFtB,GADgC;AAKtCX,IAAE,EAAE;AACFvH,QAAI,EAAEC,MADJ;AAEFC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmB+H;AAFxB,GALkC;AAStCV,SAAO,EAAE;AACPxH,QAAI,EAAEC;AADC,GAT6B;AAYtCwH,SAAO,EAAE;AACPzH,QAAI,EAAEC;AADC,GAZ6B;AAetCyH,YAAU,EAAE;AACV1H,QAAI,EAAEC,MADI;AAEVC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmB+H;AAFhB;AAf0B,CAAjB,CAAvB;;AAqBA,MAAM8L,QAAQ,GAAIC,IAAD,IAAU;AACzB,MAAI;AAEFA,QAAI,CAACrS,IAAL,GAAYkS,2BAAZ;AAEA,UAAMI,OAAO,GAAGD,IAAhB;AACA/N,cAAU,CAAC,0BAAD,EAA4B;AAACqB,QAAE,EAAC0M,IAAI,CAAC1M,EAAT;AAAaC,aAAO,EAACyM,IAAI,CAACzM;AAA1B,KAA5B,CAAV;AACAuM,kBAAc,CAACnW,QAAf,CAAwBsW,OAAxB,EANE,CAOF;;AACAhM,SAAK,CAACiM,IAAN,CAAW;AACTvS,UAAI,EAAEqS,IAAI,CAACrS,IADF;AAET2F,QAAE,EAAE0M,IAAI,CAAC1M,EAFA;AAGTC,aAAO,EAAEyM,IAAI,CAACzM,OAHL;AAIT4M,UAAI,EAAEH,IAAI,CAACxM,OAJF;AAKT4M,aAAO,EAAE;AACP,uBAAeJ,IAAI,CAACvM;AADb;AALA,KAAX;AAUD,GAlBD,CAkBE,OAAOvC,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,uBAAjB,EAA0CiH,SAA1C,CAAN;AACD;AACF,CAtBD;;AA1BA9I,MAAM,CAAC+I,aAAP,CAkDe4O,QAlDf,E;;;;;;;;;;;ACAA,IAAI5X,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAI+X,GAAJ;AAAQjY,MAAM,CAACC,IAAP,CAAY,8BAAZ,EAA2C;AAACgY,KAAG,CAAC/X,CAAD,EAAG;AAAC+X,OAAG,GAAC/X,CAAJ;AAAM;;AAAd,CAA3C,EAA2D,CAA3D;AAA8D,IAAIgY,cAAJ;AAAmBlY,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAACiY,gBAAc,CAAChY,CAAD,EAAG;AAACgY,kBAAc,GAAChY,CAAf;AAAiB;;AAApC,CAAxD,EAA8F,CAA9F;;AAIzJ,MAAMiY,oCAAoC,GAAG,MAAM;AACjD,MAAI;AACF,UAAMjJ,GAAG,GAAG,IAAI+I,GAAJ,CAAQC,cAAR,EAAwB,qBAAxB,EAA+C,EAA/C,CAAZ;AACAhJ,OAAG,CAACkJ,KAAJ,CAAU;AAACC,aAAO,EAAE,EAAV;AAAcC,UAAI,EAAE,KAAG;AAAvB,KAAV,EAAyCC,IAAzC,CAA8C;AAACC,mBAAa,EAAE;AAAhB,KAA9C;AACD,GAHD,CAGE,OAAO1P,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,kDAAjB,EAAqEiH,SAArE,CAAN;AACD;AACF,CAPD;;AAJA9I,MAAM,CAAC+I,aAAP,CAaeoP,oCAbf,E;;;;;;;;;;;ACAA,IAAIpY,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAI+X,GAAJ;AAAQjY,MAAM,CAACC,IAAP,CAAY,8BAAZ,EAA2C;AAACgY,KAAG,CAAC/X,CAAD,EAAG;AAAC+X,OAAG,GAAC/X,CAAJ;AAAM;;AAAd,CAA3C,EAA2D,CAA3D;AAA8D,IAAIuY,QAAJ;AAAazY,MAAM,CAACC,IAAP,CAAY,qCAAZ,EAAkD;AAACwY,UAAQ,CAACvY,CAAD,EAAG;AAACuY,YAAQ,GAACvY,CAAT;AAAW;;AAAxB,CAAlD,EAA4E,CAA5E;AAK/N,MAAMwY,4BAA4B,GAAG,IAAIlW,YAAJ,CAAiB;AACpDlB,MAAI,EAAE;AACJqC,QAAI,EAAEC;AADF,GAD8C;AAIpDoG,QAAM,EAAE;AACNrG,QAAI,EAAEC;AADA;AAJ4C,CAAjB,CAArC;;AASA,MAAMgK,sBAAsB,GAAIjM,IAAD,IAAU;AACvC,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB;AACA+W,gCAA4B,CAACnX,QAA7B,CAAsCiG,OAAtC;AACA,UAAM0H,GAAG,GAAG,IAAI+I,GAAJ,CAAQQ,QAAR,EAAkB,kBAAlB,EAAsCjR,OAAtC,CAAZ;AACA0H,OAAG,CAACkJ,KAAJ,CAAU;AAACC,aAAO,EAAE,CAAV;AAAaC,UAAI,EAAE,IAAE,EAAF,GAAK;AAAxB,KAAV,EAA0CC,IAA1C,GAJE,CAIgD;AACnD,GALD,CAKE,OAAOzP,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,oCAAjB,EAAuDiH,SAAvD,CAAN;AACD;AACF,CATD;;AAdA9I,MAAM,CAAC+I,aAAP,CAyBe6E,sBAzBf,E;;;;;;;;;;;ACAA,IAAI7N,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAI+X,GAAJ;AAAQjY,MAAM,CAACC,IAAP,CAAY,8BAAZ,EAA2C;AAACgY,KAAG,CAAC/X,CAAD,EAAG;AAAC+X,OAAG,GAAC/X,CAAJ;AAAM;;AAAd,CAA3C,EAA2D,CAA3D;AAA8D,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIgY,cAAJ;AAAmBlY,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAACiY,gBAAc,CAAChY,CAAD,EAAG;AAACgY,kBAAc,GAAChY,CAAf;AAAiB;;AAApC,CAAxD,EAA8F,CAA9F;AAKrO,MAAMyY,4BAA4B,GAAG,IAAInW,YAAJ,CAAiB;AACpD4B,QAAM,EAAE;AACNT,QAAI,EAAEC;AADA,GAD4C;AAIpDuG,WAAS,EAAE;AACTxG,QAAI,EAAEC;AADG,GAJyC;AAOpDqQ,UAAQ,EAAE;AACRtQ,QAAI,EAAEC,MADE;AAERI,YAAQ,EAAC;AAFD,GAP0C;AAWpDgG,QAAM,EAAE;AACNrG,QAAI,EAAEC;AADA,GAX4C;AAcpDsQ,SAAO,EAAE;AACPvQ,QAAI,EAAET;AADC;AAd2C,CAAjB,CAArC;;AAmBA,MAAMiT,sBAAsB,GAAIxP,KAAD,IAAW;AACxC,MAAI;AACF,UAAMsH,QAAQ,GAAGtH,KAAjB;AACAgS,gCAA4B,CAACpX,QAA7B,CAAsC0M,QAAtC;AACA,UAAMiB,GAAG,GAAG,IAAI+I,GAAJ,CAAQC,cAAR,EAAwB,QAAxB,EAAkCjK,QAAlC,CAAZ;AACAiB,OAAG,CAACkJ,KAAJ,CAAU;AAACC,aAAO,EAAE,EAAV;AAAcC,UAAI,EAAE,IAAE,EAAF,GAAK;AAAzB,KAAV,EAA2CC,IAA3C,GAJE,CAIiD;AACpD,GALD,CAKE,OAAOzP,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,oCAAjB,EAAuDiH,SAAvD,CAAN;AACD;AACF,CATD;;AAxBA9I,MAAM,CAAC+I,aAAP,CAmCeoN,sBAnCf,E;;;;;;;;;;;ACAA,IAAIpW,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAI+X,GAAJ;AAAQjY,MAAM,CAACC,IAAP,CAAY,8BAAZ,EAA2C;AAACgY,KAAG,CAAC/X,CAAD,EAAG;AAAC+X,OAAG,GAAC/X,CAAJ;AAAM;;AAAd,CAA3C,EAA2D,CAA3D;AAA8D,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAI0Y,QAAJ;AAAa5Y,MAAM,CAACC,IAAP,CAAY,qCAAZ,EAAkD;AAAC2Y,UAAQ,CAAC1Y,CAAD,EAAG;AAAC0Y,YAAQ,GAAC1Y,CAAT;AAAW;;AAAxB,CAAlD,EAA4E,CAA5E;AAK/N,MAAM2Y,oBAAoB,GAAG,IAAIrW,YAAJ,CAAiB;AAC5C;;;;AAIA0I,IAAE,EAAE;AACFvH,QAAI,EAAEC,MADJ;AAEFC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmB+H;AAFxB,GALwC;AAS5CV,SAAO,EAAE;AACPxH,QAAI,EAAEC;AADC,GATmC;AAY5CwH,SAAO,EAAE;AACPzH,QAAI,EAAEC;AADC,GAZmC;AAe5CyH,YAAU,EAAE;AACV1H,QAAI,EAAEC,MADI;AAEVC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmB+H;AAFhB;AAfgC,CAAjB,CAA7B;;AAqBA,MAAMjC,cAAc,GAAIgO,IAAD,IAAU;AAC/B,MAAI;AACF,UAAMC,OAAO,GAAGD,IAAhB;AACAiB,wBAAoB,CAACtX,QAArB,CAA8BsW,OAA9B;AACA,UAAM3I,GAAG,GAAG,IAAI+I,GAAJ,CAAQW,QAAR,EAAkB,MAAlB,EAA0Bf,OAA1B,CAAZ;AACA3I,OAAG,CAACkJ,KAAJ,CAAU;AAACC,aAAO,EAAE,CAAV;AAAaC,UAAI,EAAE,KAAG;AAAtB,KAAV,EAAwCC,IAAxC;AACD,GALD,CAKE,OAAOzP,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,4BAAjB,EAA+CiH,SAA/C,CAAN;AACD;AACF,CATD;;AA1BA9I,MAAM,CAAC+I,aAAP,CAqCea,cArCf,E;;;;;;;;;;;ACAA,IAAI7J,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAI+X,GAAJ;AAAQjY,MAAM,CAACC,IAAP,CAAY,8BAAZ,EAA2C;AAACgY,KAAG,CAAC/X,CAAD,EAAG;AAAC+X,OAAG,GAAC/X,CAAJ;AAAM;;AAAd,CAA3C,EAA2D,CAA3D;AAA8D,IAAIgY,cAAJ;AAAmBlY,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAACiY,gBAAc,CAAChY,CAAD,EAAG;AAACgY,kBAAc,GAAChY,CAAf;AAAiB;;AAApC,CAAxD,EAA8F,CAA9F;AAKrO,MAAM4Y,4BAA4B,GAAG,IAAItW,YAAJ,CAAiB;AACpD4B,QAAM,EAAE;AACNT,QAAI,EAAEC;AADA,GAD4C;AAIpDgD,OAAK,EAAE;AACLjD,QAAI,EAAEC;AADD,GAJ6C;AAOpDgR,aAAW,EAAE;AACXjR,QAAI,EAAEC;AADK,GAPuC;AAUpD+Q,MAAI,EAAE;AACFhR,QAAI,EAAEC;AADJ;AAV8C,CAAjB,CAArC;;AAeA,MAAMmV,sBAAsB,GAAIpS,KAAD,IAAW;AACxC,MAAI;AACF,UAAMsH,QAAQ,GAAGtH,KAAjB;AACAmS,gCAA4B,CAACvX,QAA7B,CAAsC0M,QAAtC;AACA,UAAMiB,GAAG,GAAG,IAAI+I,GAAJ,CAAQC,cAAR,EAAwB,QAAxB,EAAkCjK,QAAlC,CAAZ;AACAiB,OAAG,CAACkJ,KAAJ,CAAU;AAACC,aAAO,EAAE,GAAV;AAAeC,UAAI,EAAE,IAAE,EAAF,GAAK;AAA1B,KAAV,EAA4CC,IAA5C;AACD,GALD,CAKE,OAAOzP,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,oCAAjB,EAAuDiH,SAAvD,CAAN;AACD;AACF,CATD;;AApBA9I,MAAM,CAAC+I,aAAP,CA+BegQ,sBA/Bf,E;;;;;;;;;;;ACAA,IAAIhZ,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIa,IAAJ;AAASf,MAAM,CAACC,IAAP,CAAY,sBAAZ,EAAmC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACa,QAAI,GAACb,CAAL;AAAO;;AAAnB,CAAnC,EAAwD,CAAxD;;AAGzE;AACA;AACA;AACA,MAAMkH,YAAY,GAAG,MAAM;AACzB,MAAI;AACF,WAAOrG,IAAI,CAACqG,YAAL,EAAP;AACD,GAFD,CAEE,OAAO0B,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,yBAAjB,EAA4CiH,SAA5C,CAAN;AACD;AACF,CAND;;AANA9I,MAAM,CAAC+I,aAAP,CAce3B,YAdf,E;;;;;;;;;;;ACAA,IAAIrH,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIoH,IAAJ;AAAStH,MAAM,CAACC,IAAP,CAAY,2BAAZ,EAAwC;AAACqH,MAAI,CAACpH,CAAD,EAAG;AAACoH,QAAI,GAACpH,CAAL;AAAO;;AAAhB,CAAxC,EAA0D,CAA1D;AAIrJ,MAAM8Y,qBAAqB,GAAG,IAAIxW,YAAJ,CAAiB;AAC7CiF,KAAG,EAAE;AACH9D,QAAI,EAAEC;AADH,GADwC;AAI7CgD,OAAK,EAAE;AACLjD,QAAI,EAAEC;AADD;AAJsC,CAAjB,CAA9B;;AASA,MAAMiL,eAAe,GAAIlN,IAAD,IAAU;AAChC,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB;AACAqX,yBAAqB,CAACzX,QAAtB,CAA+BiG,OAA/B;AACA,UAAMyR,IAAI,GAAG3R,IAAI,CAACoD,OAAL,CAAa;AAACjD,SAAG,EAAED,OAAO,CAACC;AAAd,KAAb,CAAb;AACA,QAAGwR,IAAI,KAAKxQ,SAAZ,EAAuBnB,IAAI,CAAClE,MAAL,CAAY;AAACM,SAAG,EAAGuV,IAAI,CAACvV;AAAZ,KAAZ,EAA8B;AAACwN,UAAI,EAAE;AAC1DtK,aAAK,EAAEY,OAAO,CAACZ;AAD2C;AAAP,KAA9B,EAAvB,KAGK,OAAOU,IAAI,CAAC3E,MAAL,CAAY;AACtB8E,SAAG,EAAED,OAAO,CAACC,GADS;AAEtBb,WAAK,EAAEY,OAAO,CAACZ;AAFO,KAAZ,CAAP;AAIN,GAXD,CAWE,OAAOkC,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,4BAAjB,EAA+CiH,SAA/C,CAAN;AACD;AACF,CAfD;;AAbA9I,MAAM,CAAC+I,aAAP,CA8Be8F,eA9Bf,E;;;;;;;;;;;ACAA,IAAI9O,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIE,MAAJ;AAAWJ,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAACG,QAAM,CAACF,CAAD,EAAG;AAACE,UAAM,GAACF,CAAP;AAAS;;AAApB,CAA9C,EAAoE,CAApE;AAIvJ,MAAMgZ,cAAc,GAAG,IAAI1W,YAAJ,CAAiB;AACtClB,MAAI,EAAE;AACJqC,QAAI,EAAEC;AADF;AADgC,CAAjB,CAAvB;;AAMA,MAAMzC,QAAQ,GAAIY,KAAD,IAAW;AAC1B,MAAI;AACF,UAAMc,QAAQ,GAAGd,KAAjB;AACAmX,kBAAc,CAAC3X,QAAf,CAAwBsB,QAAxB;AACA,UAAM6F,MAAM,GAAGtI,MAAM,CAACM,IAAP,CAAY;AAAC0D,YAAM,EAAEvB,QAAQ,CAACvB;AAAlB,KAAZ,EAAqC6X,KAArC,EAAf;AACA,QAAGzQ,MAAM,CAACwD,MAAP,GAAgB,CAAnB,EAAsB,OAAOxD,MAAM,CAAC,CAAD,CAAN,CAAUhF,GAAjB;AACtB,UAAM+G,OAAO,GAAGrK,MAAM,CAACuC,MAAP,CAAc;AAC5ByB,YAAM,EAAEvB,QAAQ,CAACvB;AADW,KAAd,CAAhB;AAGA,WAAOmJ,OAAP;AACD,GATD,CASE,OAAO3B,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,uBAAjB,EAA0CiH,SAA1C,CAAN;AACD;AACF,CAbD;;AAVA9I,MAAM,CAAC+I,aAAP,CAyBe5H,QAzBf,E;;;;;;;;;;;ACAA,IAAIpB,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIkZ,YAAJ;AAAiBpZ,MAAM,CAACC,IAAP,CAAY,sBAAZ,EAAmC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACkZ,gBAAY,GAAClZ,CAAb;AAAe;;AAA3B,CAAnC,EAAgE,CAAhE;AAAmE,IAAImZ,SAAJ;AAAcrZ,MAAM,CAACC,IAAP,CAAY,mBAAZ,EAAgC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACmZ,aAAS,GAACnZ,CAAV;AAAY;;AAAxB,CAAhC,EAA0D,CAA1D;AAA6D,IAAIE,MAAJ;AAAWJ,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAACG,QAAM,CAACF,CAAD,EAAG;AAACE,UAAM,GAACF,CAAP;AAAS;;AAApB,CAA9C,EAAoE,CAApE;AAAuE,IAAImW,iBAAJ;AAAsBrW,MAAM,CAACC,IAAP,CAAY,oCAAZ,EAAiD;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACmW,qBAAiB,GAACnW,CAAlB;AAAoB;;AAAhC,CAAjD,EAAmF,CAAnF;AAAsF,IAAI4J,QAAJ,EAAa/B,OAAb;AAAqB/H,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC6J,UAAQ,CAAC5J,CAAD,EAAG;AAAC4J,YAAQ,GAAC5J,CAAT;AAAW,GAAxB;;AAAyB6H,SAAO,CAAC7H,CAAD,EAAG;AAAC6H,WAAO,GAAC7H,CAAR;AAAU;;AAA9C,CAAxD,EAAwG,CAAxG;AAS9f,MAAMgZ,cAAc,GAAG,IAAI1W,YAAJ,CAAiB;AACtC8W,gBAAc,EAAE;AACd3V,QAAI,EAAEC,MADQ;AAEdC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmB+H;AAFZ,GADsB;AAKtC0N,aAAW,EAAE;AACX5V,QAAI,EAAEC,MADK;AAEXC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmB+H;AAFf,GALyB;AAStClK,MAAI,EAAE;AACJgC,QAAI,EAAEC,MADF;AAEJI,YAAQ,EAAE;AAFN,GATgC;AAatCwV,YAAU,EAAE;AACR7V,QAAI,EAAEC,MADE;AAERI,YAAQ,EAAE;AAFF,GAb0B;AAiBtCE,OAAK,EAAE;AACHP,QAAI,EAAEnB,YAAY,CAAC2B,OADhB;AAEHH,YAAQ,EAAE;AAFP,GAjB+B;AAqBtCrD,SAAO,EAAE;AACPgD,QAAI,EAAEC,MADC;AAEPC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmBsE;AAFnB;AArB6B,CAAjB,CAAvB;;AA2BA,MAAMjH,QAAQ,GAAIY,KAAD,IAAW;AAC1B,MAAI;AACF,UAAMc,QAAQ,GAAGd,KAAjB;AACAmX,kBAAc,CAAC3X,QAAf,CAAwBsB,QAAxB;AAEA,UAAME,SAAS,GAAG;AAChBsD,WAAK,EAAExD,QAAQ,CAACyW;AADA,KAAlB;AAGA,UAAMG,WAAW,GAAGL,YAAY,CAACrW,SAAD,CAAhC;AACA,UAAMC,MAAM,GAAG;AACbqD,WAAK,EAAExD,QAAQ,CAAC0W;AADH,KAAf;AAGA,UAAMG,QAAQ,GAAGL,SAAS,CAACrW,MAAD,CAA1B;AAEA,UAAM0F,MAAM,GAAGtI,MAAM,CAACM,IAAP,CAAY;AAACqC,eAAS,EAAE0W,WAAZ;AAAyBzW,YAAM,EAAE0W;AAAjC,KAAZ,EAAwDP,KAAxD,EAAf;AACA,QAAGzQ,MAAM,CAACwD,MAAP,GAAgB,CAAnB,EAAsB,OAAOxD,MAAM,CAAC,CAAD,CAAN,CAAUhF,GAAjB,CAdpB,CAc0C;;AAE5C,QAAGb,QAAQ,CAAClB,IAAT,KAAkB8G,SAArB,EAAgC;AAC9B,UAAI;AACFG,YAAI,CAACuF,KAAL,CAAWtL,QAAQ,CAAClB,IAApB;AACD,OAFD,CAEE,OAAMC,KAAN,EAAa;AACbkI,gBAAQ,CAAC,gBAAD,EAAkBjH,QAAQ,CAAClB,IAA3B,CAAR;AACA,cAAM,oBAAN;AACD;AACF;;AAED,UAAM8I,OAAO,GAAGrK,MAAM,CAACuC,MAAP,CAAc;AAC5BI,eAAS,EAAE0W,WADiB;AAE5BzW,YAAM,EAAE0W,QAFoB;AAG5BxV,WAAK,EAAErB,QAAQ,CAACqB,KAHY;AAI5BI,eAAS,EAAGzB,QAAQ,CAAC2W,UAJO;AAK5B7X,UAAI,EAAEkB,QAAQ,CAAClB,IALa;AAM5BhB,aAAO,EAAEkC,QAAQ,CAAClC;AANU,KAAd,CAAhB;AAQAoH,WAAO,CAAC,kBAAgBlF,QAAQ,CAACqB,KAAzB,GAA+B,iCAAhC,EAAkEuG,OAAlE,CAAP;AAEA4L,qBAAiB,CAAC;AAACjO,QAAE,EAAEqC;AAAL,KAAD,CAAjB;AACA,WAAOA,OAAP;AACD,GArCD,CAqCE,OAAO3B,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,2CAAjB,EAA8DiH,SAA9D,CAAN;AACD;AACF,CAzCD;;AApCA9I,MAAM,CAAC+I,aAAP,CA+Ee5H,QA/Ef,E;;;;;;;;;;;ACAA,IAAIpB,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAImJ,cAAJ,EAAmBC,eAAnB;AAAmCtJ,MAAM,CAACC,IAAP,CAAY,mDAAZ,EAAgE;AAACoJ,gBAAc,CAACnJ,CAAD,EAAG;AAACmJ,kBAAc,GAACnJ,CAAf;AAAiB,GAApC;;AAAqCoJ,iBAAe,CAACpJ,CAAD,EAAG;AAACoJ,mBAAe,GAACpJ,CAAhB;AAAkB;;AAA1E,CAAhE,EAA4I,CAA5I;AAA+I,IAAIE,MAAJ;AAAWJ,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAACG,QAAM,CAACF,CAAD,EAAG;AAACE,UAAM,GAACF,CAAP;AAAS;;AAApB,CAA9C,EAAoE,CAApE;AAAuE,IAAIuG,eAAJ;AAAoBzG,MAAM,CAACC,IAAP,CAAY,kCAAZ,EAA+C;AAACwG,iBAAe,CAACvG,CAAD,EAAG;AAACuG,mBAAe,GAACvG,CAAhB;AAAkB;;AAAtC,CAA/C,EAAuF,CAAvF;AAA0F,IAAIsW,aAAJ;AAAkBxW,MAAM,CAACC,IAAP,CAAY,8BAAZ,EAA2C;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsW,iBAAa,GAACtW,CAAd;AAAgB;;AAA5B,CAA3C,EAAyE,CAAzE;AAA4E,IAAIsJ,WAAJ;AAAgBxJ,MAAM,CAACC,IAAP,CAAY,oCAAZ,EAAiD;AAACuJ,aAAW,CAACtJ,CAAD,EAAG;AAACsJ,eAAW,GAACtJ,CAAZ;AAAc;;AAA9B,CAAjD,EAAiF,CAAjF;AAAoF,IAAI6Y,sBAAJ;AAA2B/Y,MAAM,CAACC,IAAP,CAAY,kCAAZ,EAA+C;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC6Y,0BAAsB,GAAC7Y,CAAvB;AAAyB;;AAArC,CAA/C,EAAsF,CAAtF;AAAyF,IAAI2J,UAAJ;AAAe7J,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC4J,YAAU,CAAC3J,CAAD,EAAG;AAAC2J,cAAU,GAAC3J,CAAX;AAAa;;AAA5B,CAAxD,EAAsF,CAAtF;AAUn0B,MAAMyZ,kBAAkB,GAAG,IAAInX,YAAJ,CAAiB;AAC1CmS,MAAI,EAAE;AACJhR,QAAI,EAAEC;AADF,GADoC;AAI1C4O,MAAI,EAAE;AACJ7O,QAAI,EAAEC;AADF;AAJoC,CAAjB,CAA3B;;AASA,MAAMgW,YAAY,GAAIC,OAAD,IAAa;AAChC,MAAI;AACF,UAAMC,UAAU,GAAGD,OAAnB;AACAF,sBAAkB,CAACpY,QAAnB,CAA4BuY,UAA5B;AACA,UAAMC,OAAO,GAAGvD,aAAa,CAAC;AAAChE,UAAI,EAAEqH,OAAO,CAACrH;AAAf,KAAD,CAA7B;AACA,UAAMzQ,KAAK,GAAG3B,MAAM,CAACsK,OAAP,CAAe;AAAChH,SAAG,EAAEqW,OAAO,CAAC3R;AAAd,KAAf,CAAd;AACA,QAAGrG,KAAK,KAAK0G,SAAV,IAAuB1G,KAAK,CAAC2C,iBAAN,KAA4BqV,OAAO,CAACpP,KAA9D,EAAqE,MAAM,cAAN;;AACrE,QAAG5I,KAAK,CAAC2C,iBAAN,KAA4BqV,OAAO,CAACpP,KAApC,IAA6C5I,KAAK,CAACwC,WAAN,IAAqBkE,SAArE,EAA+E;AAAE;AAC/EoB,gBAAU,CAAC,2BAAD,EAA6B9H,KAA7B,CAAV;AACA,aAAOgY,OAAO,CAAClP,QAAf;AACD;;AACD,UAAMtG,WAAW,GAAG,IAAIrB,IAAJ,EAApB,CAVE,CAWN;;AACI9C,UAAM,CAACgD,MAAP,CAAc;AAACM,SAAG,EAAG3B,KAAK,CAAC2B;AAAb,KAAd,EAAgC;AAACwN,UAAI,EAAC;AAAC3M,mBAAW,EAAEA,WAAd;AAA2BC,mBAAW,EAAEsV,UAAU,CAACnF;AAAnD;AAAN,KAAhC,EAZE,CAcF;;AACA,UAAMqF,OAAO,GAAGvT,eAAe,CAAC/F,IAAhB,CAAqB;AAACuZ,SAAG,EAAE,CAAC;AAAC3Y,YAAI,EAAES,KAAK,CAACqC;AAAb,OAAD,EAAuB;AAACE,iBAAS,EAAEvC,KAAK,CAACqC;AAAlB,OAAvB;AAAN,KAArB,CAAhB;AACA,QAAG4V,OAAO,KAAKvR,SAAf,EAA0B,MAAM,kCAAN;AAE1BuR,WAAO,CAACjU,OAAR,CAAgBY,KAAK,IAAI;AACrBkD,gBAAU,CAAC,2BAAD,EAA6BlD,KAA7B,CAAV;AAEA,YAAMC,KAAK,GAAGgC,IAAI,CAACuF,KAAL,CAAWxH,KAAK,CAACC,KAAjB,CAAd;AACAiD,gBAAU,CAAC,+BAAD,EAAkCjD,KAAlC,CAAV;AAEA,YAAMsT,YAAY,GAAG1Q,WAAW,CAACH,cAAD,EAAiBC,eAAjB,EAAkC1C,KAAK,CAACuD,SAAxC,CAAhC;AACAN,gBAAU,CAAC,mBAAD,EAAqBqQ,YAArB,CAAV;AACA,YAAMtF,WAAW,GAAGhO,KAAK,CAACrB,IAA1B;AAEA,aAAOqB,KAAK,CAACrB,IAAb;AACAqB,WAAK,CAACuT,YAAN,GAAqB5V,WAAW,CAAC6V,WAAZ,EAArB;AACAxT,WAAK,CAACsT,YAAN,GAAqBA,YAArB;AACA,YAAMG,SAAS,GAAGzR,IAAI,CAACC,SAAL,CAAejC,KAAf,CAAlB;AACAiD,gBAAU,CAAC,8BAA4B9H,KAAK,CAACqC,MAAlC,GAAyC,cAA1C,EAAyDiW,SAAzD,CAAV;AAEAtB,4BAAsB,CAAC;AACnB3U,cAAM,EAAEuC,KAAK,CAACrF,IADK;AAEnBsF,aAAK,EAAEyT,SAFY;AAGnBzF,mBAAW,EAAEA,WAHM;AAInBD,YAAI,EAAEmF,UAAU,CAACnF;AAJE,OAAD,CAAtB;AAMH,KAtBD;AAuBA9K,cAAU,CAAC,sBAAD,EAAwBkQ,OAAO,CAAClP,QAAhC,CAAV;AACA,WAAOkP,OAAO,CAAClP,QAAf;AACD,GA3CD,CA2CE,OAAO/B,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,2BAAjB,EAA8CiH,SAA9C,CAAN;AACD;AACF,CA/CD;;AAnBA9I,MAAM,CAAC+I,aAAP,CAoEe6Q,YApEf,E;;;;;;;;;;;ACAA,IAAI7Z,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIuS,WAAJ;AAAgBzS,MAAM,CAACC,IAAP,CAAY,QAAZ,EAAqB;AAACwS,aAAW,CAACvS,CAAD,EAAG;AAACuS,eAAW,GAACvS,CAAZ;AAAc;;AAA9B,CAArB,EAAqD,CAArD;AAAwD,IAAIE,MAAJ;AAAWJ,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAACG,QAAM,CAACF,CAAD,EAAG;AAACE,UAAM,GAACF,CAAP;AAAS;;AAApB,CAA9C,EAAoE,CAApE;AAK/N,MAAMoa,sBAAsB,GAAG,IAAI9X,YAAJ,CAAiB;AAC9C4F,IAAE,EAAE;AACFzE,QAAI,EAAEC;AADJ;AAD0C,CAAjB,CAA/B;;AAMA,MAAM8F,gBAAgB,GAAI3H,KAAD,IAAW;AAClC,MAAI;AACF,UAAMc,QAAQ,GAAGd,KAAjB;AACAuY,0BAAsB,CAAC/Y,QAAvB,CAAgCsB,QAAhC;AACA,UAAM8H,KAAK,GAAG8H,WAAW,CAAC,EAAD,CAAX,CAAgB7B,QAAhB,CAAyB,KAAzB,CAAd;AACAxQ,UAAM,CAACgD,MAAP,CAAc;AAACM,SAAG,EAAGb,QAAQ,CAACuF;AAAhB,KAAd,EAAkC;AAAC8I,UAAI,EAAC;AAACxM,yBAAiB,EAAEiG;AAApB;AAAN,KAAlC;AACA,WAAOA,KAAP;AACD,GAND,CAME,OAAO7B,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,sCAAjB,EAAyDiH,SAAzD,CAAN;AACD;AACF,CAVD;;AAXA9I,MAAM,CAAC+I,aAAP,CAuBeW,gBAvBf,E;;;;;;;;;;;ACAA,IAAI3J,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIE,MAAJ;AAAWJ,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAACG,QAAM,CAACF,CAAD,EAAG;AAACE,UAAM,GAACF,CAAP;AAAS;;AAApB,CAA9C,EAAoE,CAApE;AAAuE,IAAI0E,UAAJ;AAAe5E,MAAM,CAACC,IAAP,CAAY,uCAAZ,EAAoD;AAAC2E,YAAU,CAAC1E,CAAD,EAAG;AAAC0E,cAAU,GAAC1E,CAAX;AAAa;;AAA5B,CAApD,EAAkF,CAAlF;AAAqF,IAAIsL,eAAJ;AAAoBxL,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsL,mBAAe,GAACtL,CAAhB;AAAkB;;AAA9B,CAA9C,EAA8E,CAA9E;AAAiF,IAAI6H,OAAJ;AAAY/H,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAAC8H,SAAO,CAAC7H,CAAD,EAAG;AAAC6H,WAAO,GAAC7H,CAAR;AAAU;;AAAtB,CAAxD,EAAgF,CAAhF;AAAmF,IAAIkT,sBAAJ;AAA2BpT,MAAM,CAACC,IAAP,CAAY,iDAAZ,EAA8D;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACkT,0BAAsB,GAAClT,CAAvB;AAAyB;;AAArC,CAA9D,EAAqG,CAArG;AAQjiB,MAAMqa,uBAAuB,GAAG,IAAI/X,YAAJ,CAAiB;AAC/C4B,QAAM,EAAE;AACNT,QAAI,EAAEC;AADA,GADuC;AAI/CuG,WAAS,EAAE;AACTxG,QAAI,EAAEC;AADG,GAJoC;AAO/C+Q,MAAI,EAAE;AACFhR,QAAI,EAAEC,MADJ;AAEFI,YAAQ,EAAE;AAFR;AAPyC,CAAjB,CAAhC;;AAcA,MAAMwW,iBAAiB,GAAI7Y,IAAD,IAAU;AAClC,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB;AACAoG,WAAO,CAAC,8BAAD,EAAgCa,IAAI,CAACC,SAAL,CAAelH,IAAf,CAAhC,CAAP;AACA4Y,2BAAuB,CAAChZ,QAAxB,CAAiCiG,OAAjC;AACA,UAAMzF,KAAK,GAAG3B,MAAM,CAACsK,OAAP,CAAe;AAACtG,YAAM,EAAEoD,OAAO,CAACpD;AAAjB,KAAf,CAAd;AACA,QAAGrC,KAAK,KAAK0G,SAAb,EAAwB,MAAM,kBAAN;AACxBV,WAAO,CAAC,8BAAD,EAAgCP,OAAO,CAACpD,MAAxC,CAAP;AAEA,UAAMrB,SAAS,GAAG6B,UAAU,CAAC8F,OAAX,CAAmB;AAAChH,SAAG,EAAE3B,KAAK,CAACgB;AAAZ,KAAnB,CAAlB;AACA,QAAGA,SAAS,KAAK0F,SAAjB,EAA4B,MAAM,qBAAN;AAC5B,UAAMuD,KAAK,GAAGjJ,SAAS,CAACsD,KAAV,CAAgB4F,KAAhB,CAAsB,GAAtB,CAAd;AACA,UAAMjC,MAAM,GAAGgC,KAAK,CAACA,KAAK,CAACE,MAAN,GAAa,CAAd,CAApB;AACA,UAAMiI,mBAAmB,GAAGf,sBAAsB,CAAC;AAACpJ,YAAM,EAACA;AAAR,KAAD,CAAlD,CAZE,CAcF;;AACA,QAAG,CAACwB,eAAe,CAAC;AAAChF,eAAS,EAAE2N,mBAAmB,CAAC3N,SAAhC;AAA2C7E,UAAI,EAAE6F,OAAO,CAACpD,MAAzD;AAAiE+F,eAAS,EAAE3C,OAAO,CAAC2C;AAApF,KAAD,CAAnB,EAAqH;AACnH,YAAM,eAAN;AACD;;AACDpC,WAAO,CAAC,+BAAD,EAAkCoM,mBAAmB,CAAC3N,SAAtD,CAAP;AAEApG,UAAM,CAACgD,MAAP,CAAc;AAACM,SAAG,EAAG3B,KAAK,CAAC2B;AAAb,KAAd,EAAgC;AAACwN,UAAI,EAAC;AAAC3M,mBAAW,EAAE,IAAIrB,IAAJ,EAAd;AAA0BsB,mBAAW,EAAEgD,OAAO,CAACmN;AAA/C;AAAN,KAAhC;AACD,GArBD,CAqBE,OAAO7L,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,wCAAjB,EAA2DiH,SAA3D,CAAN;AACD;AACF,CAzBD;;AAtBA9I,MAAM,CAAC+I,aAAP,CAiDeyR,iBAjDf,E;;;;;;;;;;;ACAA,IAAIza,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIua,aAAJ;AAAkBza,MAAM,CAACC,IAAP,CAAY,mDAAZ,EAAgE;AAACwa,eAAa,CAACva,CAAD,EAAG;AAACua,iBAAa,GAACva,CAAd;AAAgB;;AAAlC,CAAhE,EAAoG,CAApG;AAAuG,IAAIyO,QAAJ;AAAa3O,MAAM,CAACC,IAAP,CAAY,oCAAZ,EAAiD;AAAC0O,UAAQ,CAACzO,CAAD,EAAG;AAACyO,YAAQ,GAACzO,CAAT;AAAW;;AAAxB,CAAjD,EAA2E,CAA3E;AAA8E,IAAIoL,gBAAJ;AAAqBtL,MAAM,CAACC,IAAP,CAAY,+BAAZ,EAA4C;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACoL,oBAAgB,GAACpL,CAAjB;AAAmB;;AAA/B,CAA5C,EAA6E,CAA7E;AAAgF,IAAIqL,WAAJ;AAAgBvL,MAAM,CAACC,IAAP,CAAY,0BAAZ,EAAuC;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACqL,eAAW,GAACrL,CAAZ;AAAc;;AAA1B,CAAvC,EAAmE,CAAnE;AAAsE,IAAIsL,eAAJ;AAAoBxL,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsL,mBAAe,GAACtL,CAAhB;AAAkB;;AAA9B,CAA9C,EAA8E,CAA9E;AAAiF,IAAIoV,SAAJ;AAActV,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAACqV,WAAS,CAACpV,CAAD,EAAG;AAACoV,aAAS,GAACpV,CAAV;AAAY;;AAA1B,CAAxD,EAAoF,CAApF;AAAuF,IAAIkT,sBAAJ;AAA2BpT,MAAM,CAACC,IAAP,CAAY,iDAAZ,EAA8D;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACkT,0BAAsB,GAAClT,CAAvB;AAAyB;;AAArC,CAA9D,EAAqG,CAArG;AAUhwB,MAAMwa,iBAAiB,GAAG,IAAIlY,YAAJ,CAAiB;AACzC8W,gBAAc,EAAE;AACd3V,QAAI,EAAEC,MADQ;AAEdC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmB+H;AAFZ,GADyB;AAKzC0N,aAAW,EAAE;AACX5V,QAAI,EAAEC,MADK;AAEXC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmB+H;AAFf,GAL4B;AASzCF,SAAO,EAAE;AACPhI,QAAI,EAAEC;AADC,GATgC;AAYzC+W,sBAAoB,EAAE;AACpBhX,QAAI,EAAEC;AADc;AAZmB,CAAjB,CAA1B;;AAiBA,MAAMgX,WAAW,GAAIjZ,IAAD,IAAU;AAC5B,MAAI;AACF,UAAM6F,OAAO,GAAG7F,IAAhB;AACA+Y,qBAAiB,CAACnZ,QAAlB,CAA2BiG,OAA3B;AACA,UAAMb,KAAK,GAAGgI,QAAQ,CAAC8L,aAAD,EAAgBjT,OAAO,CAACmE,OAAxB,CAAtB;AACA,QAAGhF,KAAK,KAAK8B,SAAb,EAAwB,OAAO;AAACoS,iBAAW,EAAE;AAAd,KAAP;AACxB,UAAMC,SAAS,GAAGlS,IAAI,CAACuF,KAAL,CAAWxH,KAAK,CAACC,KAAjB,CAAlB;AACA,UAAMmU,UAAU,GAAGvP,eAAe,CAAC;AACjC7J,UAAI,EAAE6F,OAAO,CAAC8R,cAAR,GAAuB9R,OAAO,CAAC+R,WADJ;AAEjCpP,eAAS,EAAE2Q,SAAS,CAAC3Q,SAFY;AAGjC3D,eAAS,EAAEgB,OAAO,CAACmT;AAHc,KAAD,CAAlC;AAMA,QAAG,CAACI,UAAJ,EAAgB,OAAO;AAACC,wBAAkB,EAAE;AAArB,KAAP;AAChB,UAAMhP,KAAK,GAAGxE,OAAO,CAAC8R,cAAR,CAAuBrN,KAAvB,CAA6B,GAA7B,CAAd,CAbE,CAa+C;;AACjD,UAAMjC,MAAM,GAAGgC,KAAK,CAACA,KAAK,CAACE,MAAN,GAAa,CAAd,CAApB;AACA,UAAMiI,mBAAmB,GAAGf,sBAAsB,CAAC;AAACpJ,YAAM,EAAEA;AAAT,KAAD,CAAlD;AAEA,QAAG,CAAC8Q,SAAS,CAAC3Q,SAAX,IAAsB,CAAC2Q,SAAS,CAACZ,YAApC,EAAiD,OAAO;AAACe,wBAAkB,EAAE;AAArB,KAAP;AACjD,UAAMC,WAAW,GAAG1P,eAAe,CAAC;AAClC7J,UAAI,EAAEmZ,SAAS,CAAC3Q,SADkB;AAElCA,eAAS,EAAE2Q,SAAS,CAACZ,YAFa;AAGlC1T,eAAS,EAAE2N,mBAAmB,CAAC3N;AAHG,KAAD,CAAnC;AAMA,QAAG,CAAC0U,WAAJ,EAAiB,OAAO;AAACD,wBAAkB,EAAE;AAArB,KAAP;AACjB,WAAO,IAAP;AACD,GA1BD,CA0BE,OAAOnS,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,0BAAjB,EAA6CiH,SAA7C,CAAN;AACD;AACF,CA9BD;;AA3BA9I,MAAM,CAAC+I,aAAP,CA2De6R,WA3Df,E;;;;;;;;;;;ACAA,IAAI7a,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAI0E,UAAJ;AAAe5E,MAAM,CAACC,IAAP,CAAY,uCAAZ,EAAoD;AAAC2E,YAAU,CAAC1E,CAAD,EAAG;AAAC0E,cAAU,GAAC1E,CAAX;AAAa;;AAA5B,CAApD,EAAkF,CAAlF;AAAqF,IAAI8G,UAAJ;AAAehH,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC8G,cAAU,GAAC9G,CAAX;AAAa;;AAAzB,CAA1C,EAAqE,CAArE;AAK/P,MAAMib,kBAAkB,GAAG,IAAI3Y,YAAJ,CAAiB;AAC1C6D,OAAK,EAAE;AACL1C,QAAI,EAAEC,MADD;AAELC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmB+H;AAFrB;AADmC,CAAjB,CAA3B;;AAOA,MAAMuN,YAAY,GAAIrW,SAAD,IAAe;AAClC,MAAI;AACF,UAAMqD,YAAY,GAAGrD,SAArB;AACAoY,sBAAkB,CAAC5Z,QAAnB,CAA4B6E,YAA5B;AACA,UAAMgV,UAAU,GAAGxW,UAAU,CAAClE,IAAX,CAAgB;AAAC2F,WAAK,EAAEtD,SAAS,CAACsD;AAAlB,KAAhB,EAA0C8S,KAA1C,EAAnB;AACA,QAAGiC,UAAU,CAAClP,MAAX,GAAoB,CAAvB,EAA0B,OAAOkP,UAAU,CAAC,CAAD,CAAV,CAAc1X,GAArB;AAC1B,UAAM2X,OAAO,GAAGrU,UAAU,EAA1B;AACA,WAAOpC,UAAU,CAACjC,MAAX,CAAkB;AACvB0D,WAAK,EAAED,YAAY,CAACC,KADG;AAEvBC,gBAAU,EAAE+U,OAAO,CAAC/U,UAFG;AAGvBE,eAAS,EAAE6U,OAAO,CAAC7U;AAHI,KAAlB,CAAP;AAKD,GAXD,CAWE,OAAOsC,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,0BAAjB,EAA6CiH,SAA7C,CAAN;AACD;AACF,CAfD;;AAZA9I,MAAM,CAAC+I,aAAP,CA6BeqQ,YA7Bf,E;;;;;;;;;;;ACAA,IAAIrZ,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIwH,OAAJ;AAAY1H,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAACyH,SAAO,CAACxH,CAAD,EAAG;AAACwH,WAAO,GAACxH,CAAR;AAAU;;AAAtB,CAA9C,EAAsE,CAAtE;AAIxJ,MAAMob,eAAe,GAAG,IAAI9Y,YAAJ,CAAiB;AACvC6D,OAAK,EAAE;AACL1C,QAAI,EAAEC,MADD;AAELC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmB+H;AAFrB;AADgC,CAAjB,CAAxB;;AAOA,MAAMwN,SAAS,GAAIrW,MAAD,IAAY;AAC5B,MAAI;AACF,UAAM4E,SAAS,GAAG5E,MAAlB;AACAsY,mBAAe,CAAC/Z,QAAhB,CAAyBqG,SAAzB;AACA,UAAM2T,OAAO,GAAG7T,OAAO,CAAChH,IAAR,CAAa;AAAC2F,WAAK,EAAErD,MAAM,CAACqD;AAAf,KAAb,EAAoC8S,KAApC,EAAhB;AACA,QAAGoC,OAAO,CAACrP,MAAR,GAAiB,CAApB,EAAuB,OAAOqP,OAAO,CAAC,CAAD,CAAP,CAAW7X,GAAlB;AACvB,WAAOgE,OAAO,CAAC/E,MAAR,CAAe;AACpB0D,WAAK,EAAEuB,SAAS,CAACvB;AADG,KAAf,CAAP;AAGD,GARD,CAQE,OAAOyC,SAAP,EAAkB;AAClB,UAAM,IAAI/I,MAAM,CAAC8B,KAAX,CAAiB,uBAAjB,EAA0CiH,SAA1C,CAAN;AACD;AACF,CAZD;;AAXA9I,MAAM,CAAC+I,aAAP,CAyBesQ,SAzBf,E;;;;;;;;;;;ACAArZ,MAAM,CAACsC,MAAP,CAAc;AAACkZ,SAAO,EAAC,MAAIA,OAAb;AAAqB3O,WAAS,EAAC,MAAIA,SAAnC;AAA6CC,WAAS,EAAC,MAAIA,SAA3D;AAAqE1D,QAAM,EAAC,MAAIA;AAAhF,CAAd;AAAuG,IAAIrJ,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;;AAE3G,SAASsb,OAAT,GAAmB;AACxB,MAAGzb,MAAM,CAAC0b,QAAP,KAAoBhT,SAApB,IACA1I,MAAM,CAAC0b,QAAP,CAAgBC,GAAhB,KAAwBjT,SADxB,IAEA1I,MAAM,CAAC0b,QAAP,CAAgBC,GAAhB,CAAoBC,KAApB,KAA8BlT,SAFjC,EAE4C,OAAO1I,MAAM,CAAC0b,QAAP,CAAgBC,GAAhB,CAAoBC,KAA3B;AAC5C,SAAO,KAAP;AACD;;AAEM,SAAS9O,SAAT,GAAqB;AAC1B,MAAG9M,MAAM,CAAC0b,QAAP,KAAoBhT,SAApB,IACA1I,MAAM,CAAC0b,QAAP,CAAgBC,GAAhB,KAAwBjT,SADxB,IAEA1I,MAAM,CAAC0b,QAAP,CAAgBC,GAAhB,CAAoBE,OAApB,KAAgCnT,SAFnC,EAE8C,OAAO1I,MAAM,CAAC0b,QAAP,CAAgBC,GAAhB,CAAoBE,OAA3B;AAC9C,SAAO,KAAP;AACD;;AAEM,SAAS9O,SAAT,GAAqB;AACxB,MAAG/M,MAAM,CAAC0b,QAAP,KAAoBhT,SAApB,IACC1I,MAAM,CAAC0b,QAAP,CAAgBC,GAAhB,KAAwBjT,SADzB,IAEC1I,MAAM,CAAC0b,QAAP,CAAgBC,GAAhB,CAAoBG,OAApB,KAAgCpT,SAFpC,EAE+C,OAAO1I,MAAM,CAAC0b,QAAP,CAAgBC,GAAhB,CAAoBG,OAA3B;AAC/C,SAAO,KAAP;AACH;;AAEM,SAASzS,MAAT,GAAkB;AACvB,MAAGrJ,MAAM,CAAC0b,QAAP,KAAoBhT,SAApB,IACA1I,MAAM,CAAC0b,QAAP,CAAgBC,GAAhB,KAAwBjT,SADxB,IAEA1I,MAAM,CAAC0b,QAAP,CAAgBC,GAAhB,CAAoB/G,IAApB,KAA6BlM,SAFhC,EAE2C;AACtC,QAAIqT,IAAI,GAAG,IAAX;AACA,QAAG/b,MAAM,CAAC0b,QAAP,CAAgBC,GAAhB,CAAoBI,IAApB,KAA6BrT,SAAhC,EAA2CqT,IAAI,GAAG/b,MAAM,CAAC0b,QAAP,CAAgBC,GAAhB,CAAoBI,IAA3B;AAC3C,WAAO,YAAU/b,MAAM,CAAC0b,QAAP,CAAgBC,GAAhB,CAAoB/G,IAA9B,GAAmC,GAAnC,GAAuCmH,IAAvC,GAA4C,GAAnD;AACJ;;AACD,SAAO/b,MAAM,CAACgc,WAAP,EAAP;AACD,C;;;;;;;;;;;AChCD/b,MAAM,CAACsC,MAAP,CAAc;AAACsK,mBAAiB,EAAC,MAAIA;AAAvB,CAAd;AAAO,MAAMA,iBAAiB,GAAG,cAA1B,C;;;;;;;;;;;ACAP5M,MAAM,CAACsC,MAAP,CAAc;AAACsR,aAAW,EAAC,MAAIA,WAAjB;AAA6BvK,gBAAc,EAAC,MAAIA,cAAhD;AAA+DC,iBAAe,EAAC,MAAIA,eAAnF;AAAmGmR,eAAa,EAAC,MAAIA;AAArH,CAAd;AAAmJ,IAAIuB,QAAJ;AAAahc,MAAM,CAACC,IAAP,CAAY,UAAZ,EAAuB;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC8b,YAAQ,GAAC9b,CAAT;AAAW;;AAAvB,CAAvB,EAAgD,CAAhD;AAAmD,IAAI+b,QAAJ,EAAaC,WAAb,EAAyBC,UAAzB,EAAoCC,SAApC;AAA8Cpc,MAAM,CAACC,IAAP,CAAY,yBAAZ,EAAsC;AAACgc,UAAQ,CAAC/b,CAAD,EAAG;AAAC+b,YAAQ,GAAC/b,CAAT;AAAW,GAAxB;;AAAyBgc,aAAW,CAAChc,CAAD,EAAG;AAACgc,eAAW,GAAChc,CAAZ;AAAc,GAAtD;;AAAuDic,YAAU,CAACjc,CAAD,EAAG;AAACic,cAAU,GAACjc,CAAX;AAAa,GAAlF;;AAAmFkc,WAAS,CAAClc,CAAD,EAAG;AAACkc,aAAS,GAAClc,CAAV;AAAY;;AAA5G,CAAtC,EAAoJ,CAApJ;AAGjQ,IAAImc,YAAY,GAAGtc,MAAM,CAAC0b,QAAP,CAAgB3D,IAAnC;AACA,IAAIwE,UAAU,GAAG7T,SAAjB;;AACA,IAAG2T,SAAS,CAACH,QAAD,CAAZ,EAAwB;AACtB,MAAG,CAACI,YAAD,IAAiB,CAACA,YAAY,CAACE,QAAlC,EACE,MAAM,IAAIxc,MAAM,CAAC8B,KAAX,CAAiB,sBAAjB,EAAyC,sCAAzC,CAAN;AACFya,YAAU,GAAGE,YAAY,CAACH,YAAY,CAACE,QAAd,CAAzB;AACD;;AACM,MAAM3I,WAAW,GAAG0I,UAApB;AAEP,IAAIG,eAAe,GAAG1c,MAAM,CAAC0b,QAAP,CAAgBiB,OAAtC;AACA,IAAIC,aAAa,GAAGlU,SAApB;AACA,IAAImU,cAAc,GAAGnU,SAArB;;AACA,IAAG2T,SAAS,CAACF,WAAD,CAAZ,EAA2B;AACzB,MAAG,CAACO,eAAD,IAAoB,CAACA,eAAe,CAACF,QAAxC,EACE,MAAM,IAAIxc,MAAM,CAAC8B,KAAX,CAAiB,yBAAjB,EAA4C,yCAA5C,CAAN;AACF8a,eAAa,GAAGH,YAAY,CAACC,eAAe,CAACF,QAAjB,CAA5B;AACAK,gBAAc,GAAGH,eAAe,CAACF,QAAhB,CAAyB1V,OAA1C;AACD;;AACM,MAAMwC,cAAc,GAAGsT,aAAvB;AACA,MAAMrT,eAAe,GAAGsT,cAAxB;AAEP,IAAIC,cAAc,GAAG9c,MAAM,CAAC0b,QAAP,CAAgBvF,MAArC;AACA,IAAI4G,YAAY,GAAGrU,SAAnB;;AACA,IAAG2T,SAAS,CAACD,UAAD,CAAZ,EAA0B;AACxB,MAAG,CAACU,cAAD,IAAmB,CAACA,cAAc,CAACN,QAAtC,EACE,MAAM,IAAIxc,MAAM,CAAC8B,KAAX,CAAiB,wBAAjB,EAA2C,wCAA3C,CAAN;AACFib,cAAY,GAAGN,YAAY,CAACK,cAAc,CAACN,QAAhB,CAA3B;AACD;;AACM,MAAM9B,aAAa,GAAGqC,YAAtB;;AAEP,SAASN,YAAT,CAAsBf,QAAtB,EAAgC;AAC9B,SAAO,IAAIO,QAAQ,CAACe,MAAb,CAAoB;AACzBpI,QAAI,EAAE8G,QAAQ,CAAC9G,IADU;AAEzBmH,QAAI,EAAEL,QAAQ,CAACK,IAFU;AAGzBkB,QAAI,EAAEvB,QAAQ,CAACwB,QAHU;AAIzBC,QAAI,EAAEzB,QAAQ,CAAC0B;AAJU,GAApB,CAAP;AAMD,C;;;;;;;;;;;ACxCDnd,MAAM,CAACsC,MAAP,CAAc;AAACgU,SAAO,EAAC,MAAIA,OAAb;AAAqBxO,oBAAkB,EAAC,MAAIA,kBAA5C;AAA+D2P,6BAA2B,EAAC,MAAIA;AAA/F,CAAd;AAA2I,IAAI1X,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAI+b,QAAJ,EAAaC,WAAb,EAAyBE,SAAzB;AAAmCpc,MAAM,CAACC,IAAP,CAAY,yBAAZ,EAAsC;AAACgc,UAAQ,CAAC/b,CAAD,EAAG;AAAC+b,YAAQ,GAAC/b,CAAT;AAAW,GAAxB;;AAAyBgc,aAAW,CAAChc,CAAD,EAAG;AAACgc,eAAW,GAAChc,CAAZ;AAAc,GAAtD;;AAAuDkc,WAAS,CAAClc,CAAD,EAAG;AAACkc,aAAS,GAAClc,CAAV;AAAY;;AAAhF,CAAtC,EAAwH,CAAxH;AAA2H,IAAIkd,OAAJ;AAAYpd,MAAM,CAACC,IAAP,CAAY,SAAZ,EAAsB;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACkd,WAAO,GAACld,CAAR;AAAU;;AAAtB,CAAtB,EAA8C,CAA9C;AAAiD,IAAI2J,UAAJ;AAAe7J,MAAM,CAACC,IAAP,CAAY,qBAAZ,EAAkC;AAAC4J,YAAU,CAAC3J,CAAD,EAAG;AAAC2J,cAAU,GAAC3J,CAAX;AAAa;;AAA5B,CAAlC,EAAgE,CAAhE;AAM9a,MAAMoW,OAAO,GAAG,IAAI8G,OAAJ,CAAY,kEAAZ,CAAhB;AAEP,IAAIf,YAAY,GAAGtc,MAAM,CAAC0b,QAAP,CAAgB3D,IAAnC;AACA,IAAIuF,eAAe,GAAG5U,SAAtB;;AAEA,IAAG2T,SAAS,CAACH,QAAD,CAAZ,EAAwB;AACtB,MAAG,CAACI,YAAD,IAAiB,CAACA,YAAY,CAACgB,eAAlC,EACE,MAAM,IAAItd,MAAM,CAAC8B,KAAX,CAAiB,mBAAjB,EAAsC,oBAAtC,CAAN;AACFwb,iBAAe,GAAGhB,YAAY,CAACgB,eAA/B;AACD;;AACM,MAAMvV,kBAAkB,GAAGuV,eAA3B;AAEP,IAAIC,WAAW,GAAG7U,SAAlB;;AACA,IAAG2T,SAAS,CAACF,WAAD,CAAZ,EAA2B;AACzB,MAAIO,eAAe,GAAG1c,MAAM,CAAC0b,QAAP,CAAgBiB,OAAtC;AAEA,MAAG,CAACD,eAAD,IAAoB,CAACA,eAAe,CAACc,IAAxC,EACM,MAAM,IAAIxd,MAAM,CAAC8B,KAAX,CAAiB,qBAAjB,EAAwC,2CAAxC,CAAN;AAEN,MAAG,CAAC4a,eAAe,CAACc,IAAhB,CAAqBD,WAAzB,EACM,MAAM,IAAIvd,MAAM,CAAC8B,KAAX,CAAiB,4BAAjB,EAA+C,yCAA/C,CAAN;AAENyb,aAAW,GAAKb,eAAe,CAACc,IAAhB,CAAqBD,WAArC;AAEAzT,YAAU,CAAC,2BAAD,EAA6ByT,WAA7B,CAAV;AAEAvd,QAAM,CAACyd,OAAP,CAAe,MAAM;AAEpB,QAAGf,eAAe,CAACc,IAAhB,CAAqBN,QAArB,KAAkCxU,SAArC,EAA+C;AAC3CgV,aAAO,CAACC,GAAR,CAAYC,QAAZ,GAAuB,YACnBtT,kBAAkB,CAACoS,eAAe,CAACc,IAAhB,CAAqBK,MAAtB,CADC,GAEnB,GAFmB,GAGnBnB,eAAe,CAACc,IAAhB,CAAqBzB,IAHzB;AAIH,KALD,MAKK;AACD2B,aAAO,CAACC,GAAR,CAAYC,QAAZ,GAAuB,YACnBtT,kBAAkB,CAACoS,eAAe,CAACc,IAAhB,CAAqBN,QAAtB,CADC,GAEnB,GAFmB,GAEb5S,kBAAkB,CAACoS,eAAe,CAACc,IAAhB,CAAqBJ,QAAtB,CAFL,GAGnB,GAHmB,GAGb9S,kBAAkB,CAACoS,eAAe,CAACc,IAAhB,CAAqBK,MAAtB,CAHL,GAInB,GAJmB,GAKnBnB,eAAe,CAACc,IAAhB,CAAqBzB,IALzB;AAMH;;AAEDjS,cAAU,CAAC,iBAAD,EAAmB4T,OAAO,CAACC,GAAR,CAAYC,QAA/B,CAAV;AAEA,QAAGlB,eAAe,CAACc,IAAhB,CAAqBM,4BAArB,KAAoDpV,SAAvD,EACIgV,OAAO,CAACC,GAAR,CAAYG,4BAAZ,GAA2CpB,eAAe,CAACc,IAAhB,CAAqBM,4BAAhE,CAnBgB,CAmB8E;AAClG,GApBD;AAqBD;;AACM,MAAMpG,2BAA2B,GAAG6F,WAApC,C;;;;;;;;;;;ACtDP,IAAIvd,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIC,KAAJ;AAAUH,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAoC;AAACE,OAAK,CAACD,CAAD,EAAG;AAACC,SAAK,GAACD,CAAN;AAAQ;;AAAlB,CAApC,EAAwD,CAAxD;AAA2D,IAAIoH,IAAJ;AAAStH,MAAM,CAACC,IAAP,CAAY,wBAAZ,EAAqC;AAACqH,MAAI,CAACpH,CAAD,EAAG;AAACoH,QAAI,GAACpH,CAAL;AAAO;;AAAhB,CAArC,EAAuD,CAAvD;AAG9IH,MAAM,CAACyd,OAAP,CAAe,MAAM;AAEnB,MAAI3V,OAAO,GAACiW,MAAM,CAACC,OAAP,CAAe,cAAf,CAAZ;;AAEA,MAAGzW,IAAI,CAAC5G,IAAL,CAAU;AAAC+G,OAAG,EAAC;AAAL,GAAV,EAA2BuW,KAA3B,KAAqC,CAAxC,EAA0C;AACxC1W,QAAI,CAAC/D,MAAL,CAAY;AAACkE,SAAG,EAAC;AAAL,KAAZ;AACD;;AACAH,MAAI,CAAC3E,MAAL,CAAY;AAAC8E,OAAG,EAAC,SAAL;AAAeb,SAAK,EAACiB;AAArB,GAAZ;;AAED,MAAG9H,MAAM,CAACyM,KAAP,CAAa9L,IAAb,GAAoBsd,KAApB,OAAgC,CAAnC,EAAsC;AACpC,UAAM5V,EAAE,GAAGqD,QAAQ,CAACwS,UAAT,CAAoB;AAC7BhB,cAAQ,EAAE,OADmB;AAE7B5W,WAAK,EAAE,qBAFsB;AAG7B8W,cAAQ,EAAE;AAHmB,KAApB,CAAX;AAKAhd,SAAK,CAAC+d,eAAN,CAAsB9V,EAAtB,EAA0B,OAA1B;AACD;AACF,CAjBD,E;;;;;;;;;;;ACHApI,MAAM,CAACC,IAAP,CAAY,wBAAZ;AAAsCD,MAAM,CAACC,IAAP,CAAY,yBAAZ;AAAuCD,MAAM,CAACC,IAAP,CAAY,yBAAZ;AAAuCD,MAAM,CAACC,IAAP,CAAY,wBAAZ;AAAsCD,MAAM,CAACC,IAAP,CAAY,6BAAZ;AAA2CD,MAAM,CAACC,IAAP,CAAY,eAAZ;AAA6BD,MAAM,CAACC,IAAP,CAAY,mBAAZ;AAAiCD,MAAM,CAACC,IAAP,CAAY,iCAAZ;AAA+CD,MAAM,CAACC,IAAP,CAAY,eAAZ;AAA6BD,MAAM,CAACC,IAAP,CAAY,0BAAZ;AAAwCD,MAAM,CAACC,IAAP,CAAY,WAAZ,E;;;;;;;;;;;ACAvX,IAAIF,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAI0Y,QAAJ;AAAa5Y,MAAM,CAACC,IAAP,CAAY,kCAAZ,EAA+C;AAAC2Y,UAAQ,CAAC1Y,CAAD,EAAG;AAAC0Y,YAAQ,GAAC1Y,CAAT;AAAW;;AAAxB,CAA/C,EAAyE,CAAzE;AAA4E,IAAIgY,cAAJ;AAAmBlY,MAAM,CAACC,IAAP,CAAY,wCAAZ,EAAqD;AAACiY,gBAAc,CAAChY,CAAD,EAAG;AAACgY,kBAAc,GAAChY,CAAf;AAAiB;;AAApC,CAArD,EAA2F,CAA3F;AAA8F,IAAIuY,QAAJ;AAAazY,MAAM,CAACC,IAAP,CAAY,kCAAZ,EAA+C;AAACwY,UAAQ,CAACvY,CAAD,EAAG;AAACuY,YAAQ,GAACvY,CAAT;AAAW;;AAAxB,CAA/C,EAAyE,CAAzE;AAA4E,IAAIgc,WAAJ,EAAgBE,SAAhB;AAA0Bpc,MAAM,CAACC,IAAP,CAAY,yBAAZ,EAAsC;AAACic,aAAW,CAAChc,CAAD,EAAG;AAACgc,eAAW,GAAChc,CAAZ;AAAc,GAA9B;;AAA+Bkc,WAAS,CAAClc,CAAD,EAAG;AAACkc,aAAS,GAAClc,CAAV;AAAY;;AAAxD,CAAtC,EAAgG,CAAhG;AAAmG,IAAIiY,oCAAJ;AAAyCnY,MAAM,CAACC,IAAP,CAAY,yDAAZ,EAAsE;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACiY,wCAAoC,GAACjY,CAArC;AAAuC;;AAAnD,CAAtE,EAA2H,CAA3H;AAOzgBH,MAAM,CAACyd,OAAP,CAAe,MAAM;AACnB5E,UAAQ,CAACuF,cAAT;AACAjG,gBAAc,CAACiG,cAAf;AACA1F,UAAQ,CAAC0F,cAAT;AACA,MAAG/B,SAAS,CAACF,WAAD,CAAZ,EAA2B/D,oCAAoC;AAChE,CALD,E;;;;;;;;;;;ACPAnY,MAAM,CAACsC,MAAP,CAAc;AAAC8b,SAAO,EAAC,MAAIA,OAAb;AAAqBC,kBAAgB,EAAC,MAAIA,gBAA1C;AAA2DC,qBAAmB,EAAC,MAAIA,mBAAnF;AAAuGC,oBAAkB,EAAC,MAAIA,kBAA9H;AAAiJC,wBAAsB,EAAC,MAAIA,sBAA5K;AAAmMC,qBAAmB,EAAC,MAAIA,mBAA3N;AAA+O1W,SAAO,EAAC,MAAIA,OAA3P;AAAmQ8B,YAAU,EAAC,MAAIA,UAAlR;AAA6RyL,WAAS,EAAC,MAAIA,SAA3S;AAAqTzB,eAAa,EAAC,MAAIA,aAAvU;AAAqV6K,SAAO,EAAC,MAAIA,OAAjW;AAAyW5U,UAAQ,EAAC,MAAIA,QAAtX;AAA+X6U,aAAW,EAAC,MAAIA;AAA/Y,CAAd;AAA2a,IAAInD,OAAJ;AAAYxb,MAAM,CAACC,IAAP,CAAY,sBAAZ,EAAmC;AAACub,SAAO,CAACtb,CAAD,EAAG;AAACsb,WAAO,GAACtb,CAAR;AAAU;;AAAtB,CAAnC,EAA2D,CAA3D;;AAEvb0e,OAAO,CAAC,WAAD,CAAP;;AAEO,MAAMR,OAAO,GAAGX,OAAO,CAACW,OAAxB;AACA,MAAMC,gBAAgB,GAAG;AAACQ,KAAG,EAAG,WAAP;AAAoBC,QAAM,EAAG,CAAC,QAAD,EAAW,SAAX;AAA7B,CAAzB;AACA,MAAMR,mBAAmB,GAAG;AAACO,KAAG,EAAG,cAAP;AAAuBC,QAAM,EAAG,CAAC,MAAD,EAAS,SAAT;AAAhC,CAA5B;AACA,MAAMP,kBAAkB,GAAG;AAACM,KAAG,EAAG,aAAP;AAAsBC,QAAM,EAAG,CAAC,OAAD,EAAU,SAAV;AAA/B,CAA3B;AACA,MAAMN,sBAAsB,GAAG;AAACK,KAAG,EAAG,iBAAP;AAA0BC,QAAM,EAAG,CAAC,OAAD,EAAU,SAAV;AAAnC,CAA/B;AACA,MAAML,mBAAmB,GAAG;AAACI,KAAG,EAAG,cAAP;AAAuBC,QAAM,EAAG,CAAC,QAAD,EAAW,SAAX;AAAhC,CAA5B;;AAEA,SAAS/W,OAAT,CAAiBqD,OAAjB,EAAyB2T,KAAzB,EAAgC;AACnC,MAAGvD,OAAO,EAAV,EAAc;AAAC4C,WAAO,CAACY,IAAR,GAAeC,GAAf,CAAmBZ,gBAAnB,EAAqCa,GAArC,CAAyC9T,OAAzC,EAAiD2T,KAAK,GAACA,KAAD,GAAO,EAA7D;AAAkE;AACpF;;AAEM,SAASlV,UAAT,CAAoBuB,OAApB,EAA4B2T,KAA5B,EAAmC;AACtC,MAAGvD,OAAO,EAAV,EAAc;AAAC4C,WAAO,CAACY,IAAR,GAAeC,GAAf,CAAmBX,mBAAnB,EAAwCY,GAAxC,CAA4C9T,OAA5C,EAAqD2T,KAAK,GAACA,KAAD,GAAO,EAAjE;AAAsE;AACxF;;AAEM,SAASzJ,SAAT,CAAmBlK,OAAnB,EAA4B2T,KAA5B,EAAmC;AACtC,MAAGvD,OAAO,EAAV,EAAc;AAAC4C,WAAO,CAACY,IAAR,GAAeC,GAAf,CAAmBV,kBAAnB,EAAuCW,GAAvC,CAA2C9T,OAA3C,EAAoD2T,KAAK,GAACA,KAAD,GAAO,EAAhE;AAAqE;AACvF;;AAEM,SAASlL,aAAT,CAAuBzI,OAAvB,EAAgC2T,KAAhC,EAAuC;AAC1C,MAAGvD,OAAO,EAAV,EAAa;AAAC4C,WAAO,CAACY,IAAR,GAAeC,GAAf,CAAmBT,sBAAnB,EAA2CU,GAA3C,CAA+C9T,OAA/C,EAAwD2T,KAAK,GAACA,KAAD,GAAO,EAApE;AAAyE;AAC1F;;AAEM,SAASL,OAAT,CAAiBtT,OAAjB,EAA0B2T,KAA1B,EAAiC;AACpC,MAAGvD,OAAO,EAAV,EAAa;AAAC4C,WAAO,CAACY,IAAR,GAAeC,GAAf,CAAmBT,sBAAnB,EAA2CU,GAA3C,CAA+C9T,OAA/C,EAAwD2T,KAAK,GAACA,KAAD,GAAO,EAApE;AAAyE;AAC1F;;AAEM,SAASjV,QAAT,CAAkBsB,OAAlB,EAA2B2T,KAA3B,EAAkC;AACrC,MAAGvD,OAAO,EAAV,EAAa;AAAC4C,WAAO,CAACY,IAAR,GAAeC,GAAf,CAAmBT,sBAAnB,EAA2C5c,KAA3C,CAAiDwJ,OAAjD,EAA0D2T,KAAK,GAACA,KAAD,GAAO,EAAtE;AAA2E;AAC5F;;AAEM,SAASJ,WAAT,CAAqBvT,OAArB,EAA8B2T,KAA9B,EAAqC;AACxC,MAAGvD,OAAO,EAAV,EAAa;AAAC4C,WAAO,CAACY,IAAR,GAAeC,GAAf,CAAmBR,mBAAnB,EAAwCS,GAAxC,CAA4C9T,OAA5C,EAAqD2T,KAAK,GAACA,KAAD,GAAO,EAAjE;AAAsE;AACvF,C;;;;;;;;;;;ACrCD/e,MAAM,CAACC,IAAP,CAAY,gCAAZ;AAA8CD,MAAM,CAACC,IAAP,CAAY,+BAAZ;AAA6CD,MAAM,CAACC,IAAP,CAAY,6CAAZ;AAA2DD,MAAM,CAACC,IAAP,CAAY,8BAAZ;AAA4CD,MAAM,CAACC,IAAP,CAAY,mCAAZ;AAAiDD,MAAM,CAACC,IAAP,CAAY,0CAAZ,E;;;;;;;;;;;ACAnP,IAAIF,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIY,cAAJ;AAAmBd,MAAM,CAACC,IAAP,CAAY,yBAAZ,EAAsC;AAACa,gBAAc,CAACZ,CAAD,EAAG;AAACY,kBAAc,GAACZ,CAAf;AAAiB;;AAApC,CAAtC,EAA4E,CAA5E;;AAA+E,IAAIgB,CAAJ;;AAAMlB,MAAM,CAACC,IAAP,CAAY,mBAAZ,EAAgC;AAACiB,GAAC,CAAChB,CAAD,EAAG;AAACgB,KAAC,GAAChB,CAAF;AAAI;;AAAV,CAAhC,EAA4C,CAA5C;AAIxK;AACAH,MAAM,CAACyM,KAAP,CAAahJ,IAAb,CAAkB;AAChBJ,QAAM,GAAG;AACP,WAAO,IAAP;AACD;;AAHe,CAAlB,E,CAMA;;AACA,MAAM+b,YAAY,GAAG,CACnB,OADmB,EAEnB,QAFmB,EAGnB,oBAHmB,EAInB,aAJmB,EAKnB,mBALmB,EAMnB,uBANmB,EAOnB,gBAPmB,EAQnB,gBARmB,EASnB,eATmB,EAUnB,aAVmB,EAWnB,YAXmB,EAYnB,iBAZmB,EAanB,oBAbmB,EAcnB,2BAdmB,CAArB;;AAiBA,IAAIpf,MAAM,CAACmC,QAAX,EAAqB;AACnB;AACApB,gBAAc,CAACqB,OAAf,CAAuB;AACrBb,QAAI,CAACA,IAAD,EAAO;AACT,aAAOJ,CAAC,CAACkB,QAAF,CAAW+c,YAAX,EAAyB7d,IAAzB,CAAP;AACD,KAHoB;;AAKrB;AACAe,gBAAY,GAAG;AAAE,aAAO,IAAP;AAAc;;AANV,GAAvB,EAOG,CAPH,EAOM,IAPN;AAQD,C;;;;;;;;;;;ACvCDrC,MAAM,CAACsC,MAAP,CAAc;AAAC2Z,UAAQ,EAAC,MAAIA,QAAd;AAAuBC,aAAW,EAAC,MAAIA,WAAvC;AAAmDC,YAAU,EAAC,MAAIA,UAAlE;AAA6EC,WAAS,EAAC,MAAIA;AAA3F,CAAd;AAAqH,IAAIrc,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AACzH,MAAM+b,QAAQ,GAAG,MAAjB;AACA,MAAMC,WAAW,GAAG,SAApB;AACA,MAAMC,UAAU,GAAG,QAAnB;;AACA,SAASC,SAAT,CAAmBzY,IAAnB,EAAyB;AAC9B,MAAG5D,MAAM,CAAC0b,QAAP,KAAoBhT,SAApB,IAAiC1I,MAAM,CAAC0b,QAAP,CAAgBC,GAAhB,KAAwBjT,SAA5D,EAAuE,MAAM,oBAAN;AACvE,QAAM2W,KAAK,GAAGrf,MAAM,CAAC0b,QAAP,CAAgBC,GAAhB,CAAoB0D,KAAlC;AACA,MAAGA,KAAK,KAAK3W,SAAb,EAAwB,OAAO2W,KAAK,CAAC5U,QAAN,CAAe7G,IAAf,CAAP;AACxB,SAAO,KAAP;AACD,C;;;;;;;;;;;ACTD,IAAI8H,QAAJ;AAAazL,MAAM,CAACC,IAAP,CAAY,sBAAZ,EAAmC;AAACwL,UAAQ,CAACvL,CAAD,EAAG;AAACuL,YAAQ,GAACvL,CAAT;AAAW;;AAAxB,CAAnC,EAA6D,CAA7D;AACbuL,QAAQ,CAAC4T,MAAT,CAAgB;AACZC,uBAAqB,EAAE,IADX;AAEZC,6BAA2B,EAAE;AAFjB,CAAhB;AAOA9T,QAAQ,CAAC+T,cAAT,CAAwBja,IAAxB,GAA6B,sBAA7B,C;;;;;;;;;;;ACRA,IAAIka,GAAJ,EAAQC,sBAAR,EAA+BzW,sBAA/B;AAAsDjJ,MAAM,CAACC,IAAP,CAAY,YAAZ,EAAyB;AAACwf,KAAG,CAACvf,CAAD,EAAG;AAACuf,OAAG,GAACvf,CAAJ;AAAM,GAAd;;AAAewf,wBAAsB,CAACxf,CAAD,EAAG;AAACwf,0BAAsB,GAACxf,CAAvB;AAAyB,GAAlE;;AAAmE+I,wBAAsB,CAAC/I,CAAD,EAAG;AAAC+I,0BAAsB,GAAC/I,CAAvB;AAAyB;;AAAtH,CAAzB,EAAiJ,CAAjJ;AAAoJ,IAAI0Z,YAAJ;AAAiB5Z,MAAM,CAACC,IAAP,CAAY,uDAAZ,EAAoE;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC0Z,gBAAY,GAAC1Z,CAAb;AAAe;;AAA3B,CAApE,EAAiG,CAAjG;AAAoG,IAAI8O,mBAAJ;AAAwBhP,MAAM,CAACC,IAAP,CAAY,oEAAZ,EAAiF;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC8O,uBAAmB,GAAC9O,CAApB;AAAsB;;AAAlC,CAAjF,EAAqH,CAArH;AAAwH,IAAI2J,UAAJ;AAAe7J,MAAM,CAACC,IAAP,CAAY,sDAAZ,EAAmE;AAAC4J,YAAU,CAAC3J,CAAD,EAAG;AAAC2J,cAAU,GAAC3J,CAAX;AAAa;;AAA5B,CAAnE,EAAiG,CAAjG;AAI9d;AACAuf,GAAG,CAACE,QAAJ,CAAa1W,sBAAsB,GAAC,QAApC,EAA8C;AAAC2W,cAAY,EAAE;AAAf,CAA9C,EAAqE;AACnEC,KAAG,EAAE;AACHC,UAAM,EAAE,YAAW;AACjB,YAAMtN,IAAI,GAAG,KAAKuN,SAAL,CAAevN,IAA5B;;AACA,UAAI;AACF,YAAIwN,EAAE,GAAG,KAAKnG,OAAL,CAAa7B,OAAb,CAAqB,iBAArB,KACP,KAAK6B,OAAL,CAAaoG,UAAb,CAAwBC,aADjB,IAEP,KAAKrG,OAAL,CAAasG,MAAb,CAAoBD,aAFb,KAGN,KAAKrG,OAAL,CAAaoG,UAAb,CAAwBE,MAAxB,GAAiC,KAAKtG,OAAL,CAAaoG,UAAb,CAAwBE,MAAxB,CAA+BD,aAAhE,GAA+E,IAHzE,CAAT;AAKE,YAAGF,EAAE,CAAC1R,OAAH,CAAW,GAAX,KAAiB,CAAC,CAArB,EAAuB0R,EAAE,GAACA,EAAE,CAACzR,SAAH,CAAa,CAAb,EAAeyR,EAAE,CAAC1R,OAAH,CAAW,GAAX,CAAf,CAAH;AAEvBzE,kBAAU,CAAC,uBAAD,EAAyB;AAAC2I,cAAI,EAACA,IAAN;AAAYmC,cAAI,EAACqL;AAAjB,SAAzB,CAAV;AACA,cAAMnV,QAAQ,GAAG+O,YAAY,CAAC;AAACjF,cAAI,EAAEqL,EAAP;AAAWxN,cAAI,EAAEA;AAAjB,SAAD,CAA7B;AAEF,eAAO;AACL4N,oBAAU,EAAE,GADP;AAELpI,iBAAO,EAAE;AAAC,4BAAgB,YAAjB;AAA+B,wBAAYnN;AAA3C,WAFJ;AAGLwV,cAAI,EAAE,eAAaxV;AAHd,SAAP;AAKD,OAhBD,CAgBE,OAAMjJ,KAAN,EAAa;AACb,eAAO;AAACwe,oBAAU,EAAE,GAAb;AAAkBC,cAAI,EAAE;AAACpY,kBAAM,EAAE,MAAT;AAAiBmD,mBAAO,EAAExJ,KAAK,CAACwJ;AAAhC;AAAxB,SAAP;AACD;AACF;AAtBE;AAD8D,CAArE;AA2BAqU,GAAG,CAACE,QAAJ,CAAaD,sBAAb,EAAqC;AACjCG,KAAG,EAAE;AACDD,gBAAY,EAAE,KADb;AAEDE,UAAM,EAAE,YAAW;AACf,YAAMQ,MAAM,GAAG,KAAKC,WAApB;AACA,YAAMtR,IAAI,GAAGqR,MAAM,CAAC5Q,EAApB;;AAEA,UAAI;AACAV,2BAAmB,CAACC,IAAD,CAAnB;AACA,eAAO;AAAChH,gBAAM,EAAE,SAAT;AAAqBtG,cAAI,EAAC,UAAQsN,IAAR,GAAa;AAAvC,SAAP;AACH,OAHD,CAGE,OAAMrN,KAAN,EAAa;AACX,eAAO;AAACqG,gBAAM,EAAE,MAAT;AAAiBrG,eAAK,EAAEA,KAAK,CAACwJ;AAA9B,SAAP;AACH;AACJ;AAZA;AAD4B,CAArC,E;;;;;;;;;;;AChCA,IAAIqU,GAAJ;AAAQzf,MAAM,CAACC,IAAP,CAAY,YAAZ,EAAyB;AAACwf,KAAG,CAACvf,CAAD,EAAG;AAACuf,OAAG,GAACvf,CAAJ;AAAM;;AAAd,CAAzB,EAAyC,CAAzC;AACRuf,GAAG,CAACE,QAAJ,CAAa,YAAb,EAA2B;AAACC,cAAY,EAAE;AAAf,CAA3B,EAAkD;AAChDC,KAAG,EAAE;AACHC,UAAM,EAAE,YAAW;AACjB,YAAMne,IAAI,GAAG;AACX,gBAAQ,sBADG;AAEX,mBAAW,qCAFA;AAGX,oBAAY,uCAHD;AAIX,sBAAc,sBAJH;AAKX,mBAAU,6CACN,OADM,GAEN,2BAFM,GAGN,KAHM,GAIN,sBAJM,GAKN,wBALM,GAMN,KANM,GAON,aAPM,GAQN,gBARM,GASN,iBATM,GAUN,uBAVM,GAWN,qCAXM,GAYN,iCAZM,GAaN,KAbM,GAcN,SAdM,GAeN,wBAfM,GAgBN,oBAhBM,GAiBN,4BAjBM,GAkBN,sCAlBM,GAmBN,KAnBM,GAoBN,WApBM,GAqBN,mBArBM,GAsBN,KAtBM,GAuBN,sBAvBM,GAwBN,gBAxBM,GAyBN,iBAzBM,GA0BN,6BA1BM,GA2BN,KA3BM,GA4BN,kDA5BM,GA6BN,gCA7BM,GA8BN,iCA9BM,GA+BN,KA/BM,GAgCN,oBAhCM,GAiCN,gCAjCM,GAkCN,kBAlCM,GAmCN,KAnCM,GAoCN,uHApCM,GAqCN,2BArCM,GAsCN,KAtCM,GAuCN,cAvCM,GAwCN,gCAxCM,GAyCN,4BAzCM,GA0CN,4BA1CM,GA2CN,KA3CM,GA4CN,SA5CM,GA6CN,yBA7CM,GA8CN,eA9CM,GA+CN,kCA/CM,GAgDN,iCAhDM,GAiDN,KAjDM,GAkDN,8DAlDM,GAmDN,+BAnDM,GAoDN,gCApDM,GAqDN,2BArDM,GAsDN,sBAtDM,GAuDN,KAvDM,GAwDN,kBAxDM,GAyDN,4BAzDM,GA0DN,qBA1DM,GA2DN,2BA3DM,GA4DN,sBA5DM,GA6DN,KA7DM,GA8DN,KA9DM,GA+DN,mBA/DM,GAgEN,KAhEM,GAiEN,UAjEM,GAkEN,qBAlEM,GAmEN,0BAnEM,GAoEN,KApEM,GAqEN,gBArEM,GAsEN,oCAtEM,GAuEN,KAvEM,GAwEN,kBAxEM,GAyEN,uCAzEM,GA0EN,KA1EM,GA2EN,gBA3EM,GA4EN,gBA5EM,GA6EN,iBA7EM,GA8EN,KA9EM,GA+EN,OA/EM,GAgFN,6BAhFM,GAiFN,KAjFM,GAkFN,uCAlFM,GAmFN,8BAnFM,GAoFN,KApFM,GAqFN,UArFM,GAsFN,KAtFM,GAuFN,UAvFM,GAwFN,uBAxFM,GAyFN,kBAzFM,GA0FN,KA1FM,GA2FN,mCA3FM,GA4FN,iBA5FM,GA6FN,KA7FM,GA8FN,mCA9FM,GA+FN,iCA/FM,GAgGN,KAhGM,GAiGN,YAjGM,GAkGN,WAlGM,GAmGN,yKAnGM,GAoGN,yBApGM,GAqGN,6BArGM,GAsGN,KAtGM,GAuGN,iBAvGM,GAwGN,6BAxGM,GAyGN,8BAzGM,GA0GN,yBA1GM,GA2GN,KA3GM,GA4GN,wBA5GM,GA6GN,6BA7GM,GA8GN,KA9GM,GA+GN,yBA/GM,GAgHN,6BAhHM,GAiHN,KAjHM,GAkHN,yBAlHM,GAmHN,6BAnHM,GAoHN,gCApHM,GAqHN,6BArHM,GAsHN,mCAtHM,GAuHN,oCAvHM,GAwHN,6BAxHM,GAyHN,KAzHM,GA0HN,WA1HM,GA2HN,+BA3HM,GA4HN,4BA5HM,GA6HN,6BA7HM,GA8HN,uBA9HM,GA+HN,KA/HM,GAgIN,mBAhIM,GAiIN,gCAjIM,GAkIN,6BAlIM,GAmIN,8BAnIM,GAoIN,uBApIM,GAqIN,qCArIM,GAsIN,KAtIM,GAuIN,eAvIM,GAwIN,6BAxIM,GAyIN,kBAzIM,GA0IN,KA1IM,GA2IN,eA3IM,GA4IN,6BA5IM,GA6IN,kBA7IM,GA8IN,KA9IM,GA+IN,KA/IM,GAgJN,YAhJM,GAiJN,WAjJM,GAkJN,+CAlJM,GAmJN,mCAnJM,GAoJN,8BApJM,GAqJN,KArJM,GAsJN,mCAtJM,GAuJN,8BAvJM,GAwJN,KAxJM,GAyJN,KAzJM,GA0JN,IA1JM,GA2JN,yKA3JM,GA4JN,uCA5JM,GA6JN,6BA7JM,GA8JN,KA9JM,GA+JN,kCA/JM,GAgKN,6BAhKM,GAiKN,8BAjKM,GAkKN,KAlKM,GAmKN,yCAnKM,GAoKN,6BApKM,GAqKN,KArKM,GAsKN,0CAtKM,GAuKN,6BAvKM,GAwKN,KAxKM,GAyKN,0CAzKM,GA0KN,6BA1KM,GA2KN,gCA3KM,GA4KN,6BA5KM,GA6KN,mCA7KM,GA8KN,oCA9KM,GA+KN,6BA/KM,GAgLN,KAhLM,GAiLN,4BAjLM,GAkLN,+BAlLM,GAmLN,iBAnLM,GAoLN,kBApLM,GAqLN,uBArLM,GAsLN,KAtLM,GAuLN,mCAvLM,GAwLN,6BAxLM,GAyLN,KAzLM,GA0LN,mCA1LM,GA2LN,6BA3LM,GA4LN,KA5LM,GA6LN,KA7LM,GA8LN,IA9LM,GA+LN,kBA/LM,GAgMN,WAhMM,GAiMN,6BAjMM,GAkMN,mBAlMM,GAmMN,KAnMM,GAoMN,yBApMM,GAqMN,6BArMM,GAsMN,KAtMM,GAuMN,sBAvMM,GAwMN,6BAxMM,GAyMN,mBAzMM,GA0MN,KA1MM,GA2MN,2BA3MM,GA4MN,qBA5MM,GA6MN,KA7MM,GA8MN,wBA9MM,GA+MN,qBA/MM,GAgNN,mBAhNM,GAiNN,KAjNM,GAkNN,0BAlNM,GAmNN,8BAnNM,GAoNN,KApNM,GAqNN,uBArNM,GAsNN,8BAtNM,GAuNN,mBAvNM,GAwNN,KAxNM,GAyNN,KAzNM,GA0NN,YA1NM,GA2NN,IA3NM,GA4NN,gCA5NM,GA6NN,2BA7NM,GA8NN,6DA9NM,GA+NN,qDA/NM,GAgON,IAhOM,GAiON,mEAjOM,GAkON,iEAlOM,GAmON,IAnOM,GAoON,YApOM,GAqON,gBArOM,GAsON,IAtOM,GAuON,uBAvOM,GAwON,2BAxOM,GAyON,0DAzOM,GA0ON,8DA1OM,GA2ON,4DA3OM,GA4ON,gFA5OM,GA6ON,0EA7OM,GA8ON,8DA9OM,GA+ON,YA/OM,GAgPN,gBAhPM,GAiPN,IAjPM,GAkPN,uBAlPM,GAmPN,2BAnPM,GAoPN,eApPM,GAqPN,yCArPM,GAsPN,qCAtPM,GAuPN,qCAvPM,GAwPN,KAxPM,GAyPN,IAzPM,GA0PN,kDA1PM,GA2PN,gCA3PM,GA4PN,mCA5PM,GA6PN,YA7PM,GA8PN,gBA9PM,GA+PN,IA/PM,GAgQN,wBAhQM,GAiQN,2BAjQM,GAkQN,WAlQM,GAmQN,kBAnQM,GAoQN,2BApQM,GAqQN,KArQM,GAsQN,IAtQM,GAuQN,wBAvQM,GAwQN,0BAxQM,GAyQN,0BAzQM,GA0QN,KA1QM,GA2QN,IA3QM,GA4QN,yBA5QM,GA6QN,0BA7QM,GA8QN,2BA9QM,GA+QN,KA/QM,GAgRN,YAhRM,GAiRN,gBAjRM,GAkRN,qEAlRM,GAmRN,gBAnRM,GAoRN,wCApRM,GAqRN,2CArRM,GAsRN,2BAtRM,GAuRN,4BAvRM,GAwRN,KAxRM,GAyRN,YAzRM,GA0RN,WA1RM,GA2RN,+LA3RM,GA4RN,8IA5RM,GA6RN,sIA7RM,GA8RN,UA9RM,GA+RN,kEA/RM,GAgSN,gBAhSM,GAiSN,4BAjSM,GAkSN,yCAlSM,GAmSN,iGAnSM,GAoSN,wBApSM,GAqSN,6DArSM,GAsSN,yKAtSM,GAuSN,kCAvSM,GAwSN,yEAxSM,GAySN,8JAzSM,GA0SN,4CA1SM,GA2SN,oJA3SM,GA4SN,iCA5SM,GA6SN,gEA7SM,GA8SN,2JA9SM,GA+SN,sEA/SM,GAgTN,qTAhTM,GAiTN,uEAjTM,GAkTN,sEAlTM,GAmTN,gCAnTM,GAoTN,iCApTM,GAqTN,6CArTM,GAsTN,4CAtTM,GAuTN,qBAvTM,GAwTN,qBAxTM,GAyTN,0SAzTM,GA0TN,gCA1TM,GA2TN,0LA3TM,GA4TN,sCA5TM,GA6TN,6IA7TM,GA8TN,4CA9TM,GA+TN,yOA/TM,GAgUN,gDAhUM,GAiUN,6FAjUM,GAkUN,uDAlUM,GAmUN,6CAnUM,GAoUN,8CApUM,GAqUN,qGArUM,GAsUN,4CAtUM,GAuUN,sNAvUM,GAwUN,kDAxUM,GAyUN,6LAzUM,GA0UN,wDA1UM,GA2UN,iJA3UM,GA4UN,8DA5UM,GA6UN,0IA7UM,GA8UN,oEA9UM,GA+UN,+NA/UM,GAgVN,0EAhVM,GAiVN,mHAjVM,GAkVN,kKAlVM,GAmVN,2EAnVM,GAoVN,iFApVM,GAqVN,qEArVM,GAsVN,2EAtVM,GAuVN,+DAvVM,GAwVN,qEAxVM,GAyVN,yDAzVM,GA0VN,+DA1VM,GA2VN,mDA3VM,GA4VN,oDA5VM,GA6VN,4CA7VM,GA8VN,oHA9VM,GA+VN,4CA/VM,GAgWN,8JAhWM,GAiWN,kDAjWM,GAkWN,sJAlWM,GAmWN,wDAnWM,GAoWN,yJApWM,GAqWN,8DArWM,GAsWN,4LAtWM,GAuWN,oEAvWM,GAwWN,uIAxWM,GAyWN,0EAzWM,GA0WN,uGA1WM,GA2WN,2EA3WM,GA4WN,iFA5WM,GA6WN,qEA7WM,GA8WN,2EA9WM,GA+WN,+DA/WM,GAgXN,qEAhXM,GAiXN,yDAjXM,GAkXN,+DAlXM,GAmXN,mDAnXM,GAoXN,oDApXM,GAqXN,4CArXM,GAsXN,oHAtXM,GAuXN,4CAvXM,GAwXN,8JAxXM,GAyXN,kDAzXM,GA0XN,6LA1XM,GA2XN,wDA3XM,GA4XN,iJA5XM,GA6XN,8DA7XM,GA8XN,0IA9XM,GA+XN,oEA/XM,GAgYN,+NAhYM,GAiYN,0EAjYM,GAkYN,0QAlYM,GAmYN,WAnYM,GAoYN,2EApYM,GAqYN,iFArYM,GAsYN,qEAtYM,GAuYN,2EAvYM,GAwYN,+DAxYM,GAyYN,qEAzYM,GA0YN,yDA1YM,GA2YN,+DA3YM,GA4YN,mDA5YM,GA6YN,yDA7YM,GA8YN,6CA9YM,GA+YN,8CA/YM,GAgZN,qGAhZM,GAiZN,4CAjZM,GAkZN,yOAlZM,GAmZN,0KAnZM,GAoZN,6NApZM,GAqZN,uDArZM,GAsZN,6CAtZM,GAuZN,8CAvZM,GAwZN,0FAxZM,GAyZN,4CAzZM,GA0ZN,+MA1ZM,GA2ZN,kDA3ZM,GA4ZN,wVA5ZM,GA6ZN,wDA7ZM,GA8ZN,2TA9ZM,GA+ZN,oFA/ZM,GAgaN,yDAhaM,GAiaN,+DAjaM,GAkaN,mDAlaM,GAmaN,yDAnaM,GAoaN,6CApaM,GAqaN,8CAraM,GAsaN,sLAtaM,GAuaN,odAvaM,GAwaN,iDAxaM,GAyaN,uCAzaM,GA0aN,6CA1aM,GA2aN,iCA3aM,GA4aN,kCA5aM,GA6aN,+JA7aM,GA8aN,gCA9aM,GA+aN,0LA/aM,GAgbN,sCAhbM,GAibN,6HAjbM,GAkbN,4CAlbM,GAmbN,yOAnbM,GAobN,oKApbM,GAqbN,yEArbM,GAsbN,qEAtbM,GAubN,wFAvbM,GAwbN,uDAxbM,GAybN,6CAzbM,GA0bN,8CA1bM,GA2bN,sLA3bM,GA4bN,gKA5bM,GA6bN,2HA7bM,GA8bN,6IA9bM,GA+bN,wGA/bM,GAgcN,iDAhcM,GAicN,uCAjcM,GAkcN,6CAlcM,GAmcN,iCAncM,GAocN,uCApcM,GAqcN,2BArcM,GAscN,iCAtcM,GAucN,qBAvcM,GAwcN,sBAxcM,GAycN,kBAzcM,GA0cN,gCA1cM,GA2cN,wBA3cM,GA4cN,WA5cM,GA6cN;AAldO,OAAb;AAqdA,aAAO;AAAC,kBAAU,SAAX;AAAsB,gBAAQA;AAA9B,OAAP;AACD;AAxdE;AAD2C,CAAlD,E;;;;;;;;;;;;;;;ACDA,IAAI8d,GAAJ,EAAQzW,eAAR,EAAwBwL,6BAAxB;AAAsDxU,MAAM,CAACC,IAAP,CAAY,YAAZ,EAAyB;AAACwf,KAAG,CAACvf,CAAD,EAAG;AAACuf,OAAG,GAACvf,CAAJ;AAAM,GAAd;;AAAe8I,iBAAe,CAAC9I,CAAD,EAAG;AAAC8I,mBAAe,GAAC9I,CAAhB;AAAkB,GAApD;;AAAqDsU,+BAA6B,CAACtU,CAAD,EAAG;AAACsU,iCAA6B,GAACtU,CAA9B;AAAgC;;AAAtH,CAAzB,EAAiJ,CAAjJ;AAAoJ,IAAIiB,QAAJ;AAAanB,MAAM,CAACC,IAAP,CAAY,2EAAZ,EAAwF;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACiB,YAAQ,GAACjB,CAAT;AAAW;;AAAvB,CAAxF,EAAiH,CAAjH;AAAoH,IAAIsa,iBAAJ;AAAsBxa,MAAM,CAACC,IAAP,CAAY,6DAAZ,EAA0E;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsa,qBAAiB,GAACta,CAAlB;AAAoB;;AAAhC,CAA1E,EAA4G,CAA5G;AAA+G,IAAI6L,cAAJ;AAAmB/L,MAAM,CAACC,IAAP,CAAY,+DAAZ,EAA4E;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC6L,kBAAc,GAAC7L,CAAf;AAAiB;;AAA7B,CAA5E,EAA2G,CAA3G;AAA8G,IAAI4J,QAAJ,EAAa/B,OAAb;AAAqB/H,MAAM,CAACC,IAAP,CAAY,sDAAZ,EAAmE;AAAC6J,UAAQ,CAAC5J,CAAD,EAAG;AAAC4J,YAAQ,GAAC5J,CAAT;AAAW,GAAxB;;AAAyB6H,SAAO,CAAC7H,CAAD,EAAG;AAAC6H,WAAO,GAAC7H,CAAR;AAAU;;AAA9C,CAAnE,EAAmH,CAAnH;AAAsH,IAAIsgB,gBAAJ;AAAqBxgB,MAAM,CAACC,IAAP,CAAY,SAAZ,EAAsB;AAACugB,kBAAgB,CAACtgB,CAAD,EAAG;AAACsgB,oBAAgB,GAACtgB,CAAjB;AAAmB;;AAAxC,CAAtB,EAAgE,CAAhE;AAAmE,IAAImI,UAAJ;AAAerI,MAAM,CAACC,IAAP,CAAY,sDAAZ,EAAmE;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACmI,cAAU,GAACnI,CAAX;AAAa;;AAAzB,CAAnE,EAA8F,CAA9F;AAAiG,IAAIE,MAAJ;AAAWJ,MAAM,CAACC,IAAP,CAAY,yCAAZ,EAAsD;AAACG,QAAM,CAACF,CAAD,EAAG;AAACE,UAAM,GAACF,CAAP;AAAS;;AAApB,CAAtD,EAA4E,CAA5E;AAA+E,IAAIC,KAAJ;AAAUH,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAoC;AAACE,OAAK,CAACD,CAAD,EAAG;AAACC,SAAK,GAACD,CAAN;AAAQ;;AAAlB,CAApC,EAAwD,CAAxD;AAUxgC;AAEAuf,GAAG,CAACE,QAAJ,CAAanL,6BAAb,EAA4C;AAC1CiM,MAAI,EAAE;AACJb,gBAAY,EAAE,IADV;AAEJ;AACAE,UAAM,EAAE,YAAW;AACjB,YAAMY,OAAO,GAAG,KAAKH,WAArB;AACA,YAAMI,OAAO,GAAG,KAAKC,UAArB;AACA,UAAIN,MAAM,GAAG,EAAb;AACA,UAAGI,OAAO,KAAKjY,SAAf,EAA0B6X,MAAM,mCAAOI,OAAP,CAAN;AAC1B,UAAGC,OAAO,KAAKlY,SAAf,EAA0B6X,MAAM,mCAAOA,MAAP,EAAkBK,OAAlB,CAAN;AAE1B,YAAME,GAAG,GAAG,KAAKtgB,MAAjB;;AAEA,UAAG,CAACJ,KAAK,CAACM,YAAN,CAAmBogB,GAAnB,EAAwB,OAAxB,CAAD,IAAqC;AACnC1gB,WAAK,CAACM,YAAN,CAAmBogB,GAAnB,EAAwB,OAAxB,MAAqCP,MAAM,CAAC,SAAD,CAAN,IAAmB,IAAnB,IAA2BA,MAAM,CAAC,SAAD,CAAN,IAAmB7X,SAAnF,CADL,EACqG;AAAG;AACpG6X,cAAM,CAAC,SAAD,CAAN,GAAoBO,GAApB;AACH;;AAED9Y,aAAO,CAAC,kCAAD,EAAoCuY,MAApC,CAAP;;AACA,UAAGA,MAAM,CAAC/G,WAAP,CAAmBuH,WAAnB,KAAmCC,KAAtC,EAA4C;AAAE;AAC1C,eAAOC,YAAY,CAACV,MAAD,CAAnB;AACH,OAFD,MAEK;AACF,eAAOW,UAAU,CAACX,MAAD,CAAjB;AACF;AACF;AAvBG,GADoC;AA0B1CY,KAAG,EAAE;AACHtB,gBAAY,EAAE,KADX;AAEHE,UAAM,EAAE,YAAW;AACjB,YAAMY,OAAO,GAAG,KAAKH,WAArB;AACA,YAAMI,OAAO,GAAG,KAAKC,UAArB;AAEA7Y,aAAO,CAAC,UAAD,EAAY2Y,OAAZ,CAAP;AACA3Y,aAAO,CAAC,UAAD,EAAY4Y,OAAZ,CAAP;AAEA,UAAIL,MAAM,GAAG,EAAb;AACA,UAAGI,OAAO,KAAKjY,SAAf,EAA0B6X,MAAM,mCAAOI,OAAP,CAAN;AAC1B,UAAGC,OAAO,KAAKlY,SAAf,EAA0B6X,MAAM,mCAAOA,MAAP,EAAkBK,OAAlB,CAAN;;AAC1B,UAAI;AACF,cAAMQ,GAAG,GAAG3G,iBAAiB,CAAC8F,MAAD,CAA7B;AACAvY,eAAO,CAAC,uBAAD,EAAyBoZ,GAAzB,CAAP;AACA,eAAO;AAAClZ,gBAAM,EAAE,SAAT;AAAoBtG,cAAI,EAAE;AAACyJ,mBAAO,EAAE;AAAV;AAA1B,SAAP;AACD,OAJD,CAIE,OAAMxJ,KAAN,EAAa;AACb,eAAO;AAACwe,oBAAU,EAAE,GAAb;AAAkBC,cAAI,EAAE;AAACpY,kBAAM,EAAE,MAAT;AAAiBmD,mBAAO,EAAExJ,KAAK,CAACwJ;AAAhC;AAAxB,SAAP;AACD;AACF;AAnBE;AA1BqC,CAA5C;AAiDAqU,GAAG,CAACE,QAAJ,CAAa3W,eAAb,EAA8B;AAAC4W,cAAY,EAAE;AAAf,CAA9B,EAAqD;AACnDC,KAAG,EAAE;AACHC,UAAM,EAAE,YAAW;AACjB,YAAMQ,MAAM,GAAG,KAAKC,WAApB;;AACA,UAAI;AACAxY,eAAO,CAAC,oEAAD,EAAsEa,IAAI,CAACC,SAAL,CAAeyX,MAAf,CAAtE,CAAP;AACA,cAAM3e,IAAI,GAAGoK,cAAc,CAACuU,MAAD,CAA3B;AACAvY,eAAO,CAAC,0DAAD,EAA4D;AAACoD,iBAAO,EAACxJ,IAAI,CAACwJ,OAAd;AAAuBpI,mBAAS,EAACpB,IAAI,CAACoB;AAAtC,SAA5D,CAAP;AACF,eAAO;AAACkF,gBAAM,EAAE,SAAT;AAAoBtG;AAApB,SAAP;AACD,OALD,CAKE,OAAMC,KAAN,EAAa;AACbkI,gBAAQ,CAAC,iCAAD,EAAmClI,KAAnC,CAAR;AACA,eAAO;AAACqG,gBAAM,EAAE,MAAT;AAAiBrG,eAAK,EAAEA,KAAK,CAACwJ;AAA9B,SAAP;AACD;AACF;AAZE;AAD8C,CAArD;AAiBAqU,GAAG,CAACE,QAAJ,CAAaa,gBAAb,EAA+B;AAC3BX,KAAG,EAAE;AACDD,gBAAY,EAAE,IADb;AAED;AACAE,UAAM,EAAE,YAAW;AACf,UAAIQ,MAAM,GAAG,KAAKC,WAAlB;AACA,YAAMM,GAAG,GAAG,KAAKtgB,MAAjB;;AACA,UAAG,CAACJ,KAAK,CAACM,YAAN,CAAmBogB,GAAnB,EAAwB,OAAxB,CAAJ,EAAqC;AACjCP,cAAM,GAAG;AAACnY,gBAAM,EAAC0Y,GAAR;AAAY3Y,cAAI,EAAC;AAAjB,SAAT;AACH,OAFD,MAGI;AACAoY,cAAM,mCAAOA,MAAP;AAAcpY,cAAI,EAAC;AAAnB,UAAN;AACH;;AACD,UAAI;AACAH,eAAO,CAAC,oCAAD,EAAsCa,IAAI,CAACC,SAAL,CAAeyX,MAAf,CAAtC,CAAP;AACA,cAAM3e,IAAI,GAAG0G,UAAU,CAACiY,MAAD,CAAvB;AACAvY,eAAO,CAAC,wBAAD,EAA0Ba,IAAI,CAACC,SAAL,CAAelH,IAAf,CAA1B,CAAP;AACA,eAAO;AAACsG,gBAAM,EAAE,SAAT;AAAoBtG;AAApB,SAAP;AACH,OALD,CAKE,OAAMC,KAAN,EAAa;AACXkI,gBAAQ,CAAC,sCAAD,EAAwClI,KAAxC,CAAR;AACA,eAAO;AAACqG,gBAAM,EAAE,MAAT;AAAiBrG,eAAK,EAAEA,KAAK,CAACwJ;AAA9B,SAAP;AACH;AACJ;AArBA;AADsB,CAA/B;;AA0BA,SAAS4V,YAAT,CAAsBV,MAAtB,EAA6B;AAEzBvY,SAAO,CAAC,WAAD,EAAauY,MAAM,CAAC/G,WAApB,CAAP;AAEA,QAAMgC,OAAO,GAAG+E,MAAM,CAAC/G,WAAvB;AACA,QAAMD,cAAc,GAAGgH,MAAM,CAAChH,cAA9B;AACA,QAAM3X,IAAI,GAAG2e,MAAM,CAAC3e,IAApB;AACA,QAAMyf,OAAO,GAAGd,MAAM,CAAC3f,OAAvB;AAEA,MAAI0gB,cAAJ;AACA,MAAIC,WAAW,GAAG,EAAlB;AACA,MAAI9H,UAAJ;AACA+B,SAAO,CAACxV,OAAR,CAAgB,CAAC/C,MAAD,EAAQkB,KAAR,KAAkB;AAE9B,UAAMqd,YAAY,GAAGN,UAAU,CAAC;AAAC1H,iBAAW,EAACvW,MAAb;AAAoBsW,oBAAc,EAACA,cAAnC;AAAkD3X,UAAI,EAACA,IAAvD;AAA6D6X,gBAAU,EAACA,UAAxE;AAAoFtV,WAAK,EAAEA,KAA3F;AAAkGvD,aAAO,EAACygB;AAA1G,KAAD,CAA/B;AACArZ,WAAO,CAAC,QAAD,EAAUwZ,YAAV,CAAP;AACA,QAAGA,YAAY,CAACtZ,MAAb,KAAwBQ,SAAxB,IAAqC8Y,YAAY,CAACtZ,MAAb,KAAsB,QAA9D,EAAwE,MAAM,yBAAN;AACxEqZ,eAAW,CAACvc,IAAZ,CAAiBwc,YAAjB;AACAF,kBAAc,GAAGE,YAAY,CAAC5f,IAAb,CAAkByG,EAAnC;;AAEA,QAAGlE,KAAK,KAAG,CAAX,EACA;AACI6D,aAAO,CAAC,uBAAD,EAAyBsZ,cAAzB,CAAP;AACA,YAAMtf,KAAK,GAAG3B,MAAM,CAACsK,OAAP,CAAe;AAAChH,WAAG,EAAE2d;AAAN,OAAf,CAAd;AACA7H,gBAAU,GAAGzX,KAAK,CAACqC,MAAnB;AACA2D,aAAO,CAAC,sBAAD,EAAwByR,UAAxB,CAAP;AACH;AAEJ,GAhBD;AAkBAzR,SAAO,CAACuZ,WAAD,CAAP;AAEA,SAAOA,WAAP;AACH;;AAED,SAASL,UAAT,CAAoBX,MAApB,EAA2B;AAEvB,MAAI;AACA,UAAMa,GAAG,GAAGhgB,QAAQ,CAACmf,MAAD,CAApB;AACAvY,WAAO,CAAC,kBAAD,EAAoBoZ,GAApB,CAAP;AACA,WAAO;AAAClZ,YAAM,EAAE,SAAT;AAAoBtG,UAAI,EAAE;AAACyG,UAAE,EAAE+Y,GAAL;AAAUlZ,cAAM,EAAE,SAAlB;AAA6BmD,eAAO,EAAE;AAAtC;AAA1B,KAAP;AACH,GAJD,CAIE,OAAMxJ,KAAN,EAAa;AACX,WAAO;AAACwe,gBAAU,EAAE,GAAb;AAAkBC,UAAI,EAAE;AAACpY,cAAM,EAAE,MAAT;AAAiBmD,eAAO,EAAExJ,KAAK,CAACwJ;AAAhC;AAAxB,KAAP;AACH;AACJ,C;;;;;;;;;;;ACpJD,IAAIqU,GAAJ;AAAQzf,MAAM,CAACC,IAAP,CAAY,YAAZ,EAAyB;AAACwf,KAAG,CAACvf,CAAD,EAAG;AAACuf,OAAG,GAACvf,CAAJ;AAAM;;AAAd,CAAzB,EAAyC,CAAzC;AAA4C,IAAIshB,OAAJ;AAAYxhB,MAAM,CAACC,IAAP,CAAY,gBAAZ,EAA6B;AAACuhB,SAAO,CAACthB,CAAD,EAAG;AAACshB,WAAO,GAACthB,CAAR;AAAU;;AAAtB,CAA7B,EAAqD,CAArD;AAAwD,IAAImJ,cAAJ,EAAmBuK,WAAnB;AAA+B5T,MAAM,CAACC,IAAP,CAAY,2DAAZ,EAAwE;AAACoJ,gBAAc,CAACnJ,CAAD,EAAG;AAACmJ,kBAAc,GAACnJ,CAAf;AAAiB,GAApC;;AAAqC0T,aAAW,CAAC1T,CAAD,EAAG;AAAC0T,eAAW,GAAC1T,CAAZ;AAAc;;AAAlE,CAAxE,EAA4I,CAA5I;AAIvJuf,GAAG,CAACE,QAAJ,CAAa,QAAb,EAAuB;AAACC,cAAY,EAAE;AAAf,CAAvB,EAA8C;AAC5CC,KAAG,EAAE;AACHC,UAAM,EAAE,YAAW;AACjB,UAAI;AACF,cAAMne,IAAI,GAAG6f,OAAO,CAAC5N,WAAW,GAACA,WAAD,GAAavK,cAAzB,CAApB;AACA,eAAO;AAAC,oBAAU,SAAX;AAAsB,kBAAO1H;AAA7B,SAAP;AACD,OAHD,CAGC,OAAM8f,EAAN,EAAS;AACJ,eAAO;AAAC,oBAAU,QAAX;AAAqB,kBAAQA,EAAE,CAAC7Q,QAAH;AAA7B,SAAP;AACL;AACF;AARE;AADuC,CAA9C,E;;;;;;;;;;;;;;;ACJA,IAAI6O,GAAJ;AAAQzf,MAAM,CAACC,IAAP,CAAY,YAAZ,EAAyB;AAACwf,KAAG,CAACvf,CAAD,EAAG;AAACuf,OAAG,GAACvf,CAAJ;AAAM;;AAAd,CAAzB,EAAyC,CAAzC;AAA4C,IAAIH,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIuL,QAAJ;AAAazL,MAAM,CAACC,IAAP,CAAY,sBAAZ,EAAmC;AAACwL,UAAQ,CAACvL,CAAD,EAAG;AAACuL,YAAQ,GAACvL,CAAT;AAAW;;AAAxB,CAAnC,EAA6D,CAA7D;AAAgE,IAAIsC,YAAJ;AAAiBxC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACsC,gBAAY,GAACtC,CAAb;AAAe;;AAA3B,CAA3B,EAAwD,CAAxD;AAA2D,IAAIC,KAAJ;AAAUH,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAoC;AAACE,OAAK,CAACD,CAAD,EAAG;AAACC,SAAK,GAACD,CAAN;AAAQ;;AAAlB,CAApC,EAAwD,CAAxD;AAA2D,IAAIwe,OAAJ;AAAY1e,MAAM,CAACC,IAAP,CAAY,sDAAZ,EAAmE;AAACye,SAAO,CAACxe,CAAD,EAAG;AAACwe,WAAO,GAACxe,CAAR;AAAU;;AAAtB,CAAnE,EAA2F,CAA3F;AAO9V,MAAMwhB,kBAAkB,GAAG,IAAIlf,YAAJ,CAAiB;AACxC2I,SAAO,EAAE;AACLxH,QAAI,EAAEC,MADD;AAELI,YAAQ,EAAC;AAFJ,GAD+B;AAKxC6G,UAAQ,EAAE;AACNlH,QAAI,EAAEC,MADA;AAENC,SAAK,EAAE,2DAFD;AAGNG,YAAQ,EAAC;AAHH,GAL8B;AAUxCqH,YAAU,EAAE;AACR1H,QAAI,EAAEC,MADE;AAERC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmB+H,KAFlB;AAGR7H,YAAQ,EAAC;AAHD,GAV4B;AAexC8H,aAAW,EAAC;AACRnI,QAAI,EAAEC,MADE;AAERC,SAAK,EAAE,2DAFC;AAGRG,YAAQ,EAAC;AAHD;AAf4B,CAAjB,CAA3B;AAsBA,MAAM2d,gBAAgB,GAAG,IAAInf,YAAJ,CAAiB;AACtCya,UAAQ,EAAE;AACRtZ,QAAI,EAAEC,MADE;AAERC,SAAK,EAAE,+BAFC,CAEgC;;AAFhC,GAD4B;AAKtCwC,OAAK,EAAE;AACL1C,QAAI,EAAEC,MADD;AAELC,SAAK,EAAErB,YAAY,CAACsB,KAAb,CAAmB+H;AAFrB,GAL+B;AAStCsR,UAAQ,EAAE;AACRxZ,QAAI,EAAEC,MADE;AAERC,SAAK,EAAE,+BAFC,CAE+B;;AAF/B,GAT4B;AAatC4I,cAAY,EAAC;AACT9I,QAAI,EAAE+d,kBADG;AAET1d,YAAQ,EAAC;AAFA;AAbyB,CAAjB,CAAzB;AAkBE,MAAM4d,gBAAgB,GAAG,IAAIpf,YAAJ,CAAiB;AACxCiK,cAAY,EAAC;AACT9I,QAAI,EAAE+d;AADG;AAD2B,CAAjB,CAAzB,C,CAMF;;AACA,MAAMG,iBAAiB,GACrB;AACEC,MAAI,EAAC,OADP;AAEEC,cAAY,EACZ;AACInC,gBAAY,EAAG,IADnB,CAEI;;AAFJ,GAHF;AAOEoC,mBAAiB,EAAE,CAAC,OAAD,EAAS,WAAT,CAPrB;AAQEC,WAAS,EACT;AACIC,UAAM,EAAC;AAACC,kBAAY,EAAG;AAAhB,KADX;AAEI1B,QAAI,EACJ;AACI0B,kBAAY,EAAG,OADnB;AAEIrC,YAAM,EAAE,YAAU;AACd,cAAMY,OAAO,GAAG,KAAKH,WAArB;AACA,cAAMI,OAAO,GAAG,KAAKC,UAArB;AACA,YAAIN,MAAM,GAAG,EAAb;AACA,YAAGI,OAAO,KAAKjY,SAAf,EAA0B6X,MAAM,mCAAOI,OAAP,CAAN;AAC1B,YAAGC,OAAO,KAAKlY,SAAf,EAA0B6X,MAAM,mCAAOA,MAAP,EAAkBK,OAAlB,CAAN;;AAC1B,YAAG;AACC,cAAIpgB,MAAJ;AACAohB,0BAAgB,CAACpgB,QAAjB,CAA0B+e,MAA1B;AACA5B,iBAAO,CAAC,WAAD,EAAa4B,MAAb,CAAP;;AACA,cAAGA,MAAM,CAAC7T,YAAP,KAAwBhE,SAA3B,EAAqC;AACjClI,kBAAM,GAAGkL,QAAQ,CAACwS,UAAT,CAAoB;AAAChB,sBAAQ,EAACqD,MAAM,CAACrD,QAAjB;AACzB5W,mBAAK,EAACia,MAAM,CAACja,KADY;AAEzB8W,sBAAQ,EAACmD,MAAM,CAACnD,QAFS;AAGzBzQ,qBAAO,EAAC;AAACD,4BAAY,EAAC6T,MAAM,CAAC7T;AAArB;AAHiB,aAApB,CAAT;AAIH,WALD,MAMI;AACAlM,kBAAM,GAAGkL,QAAQ,CAACwS,UAAT,CAAoB;AAAChB,sBAAQ,EAACqD,MAAM,CAACrD,QAAjB;AAA0B5W,mBAAK,EAACia,MAAM,CAACja,KAAvC;AAA6C8W,sBAAQ,EAACmD,MAAM,CAACnD,QAA7D;AAAuEzQ,qBAAO,EAAC;AAA/E,aAApB,CAAT;AACH;;AACD,iBAAO;AAACzE,kBAAM,EAAE,SAAT;AAAoBtG,gBAAI,EAAE;AAACwG,oBAAM,EAAE5H;AAAT;AAA1B,WAAP;AACH,SAdD,CAcE,OAAMqB,KAAN,EAAa;AACb,iBAAO;AAACwe,sBAAU,EAAE,GAAb;AAAkBC,gBAAI,EAAE;AAACpY,oBAAM,EAAE,MAAT;AAAiBmD,qBAAO,EAAExJ,KAAK,CAACwJ;AAAhC;AAAxB,WAAP;AACD;AAEJ;AA1BL,KAHJ;AA+BI8V,OAAG,EACH;AACIpB,YAAM,EAAE,YAAU;AACd,cAAMY,OAAO,GAAG,KAAKH,WAArB;AACA,cAAMI,OAAO,GAAG,KAAKC,UAArB;AACA,YAAIN,MAAM,GAAG,EAAb;AACA,YAAIO,GAAG,GAAC,KAAKtgB,MAAb;AACA,cAAM6hB,OAAO,GAAC,KAAKrC,SAAL,CAAe3X,EAA7B;AACA,YAAGsY,OAAO,KAAKjY,SAAf,EAA0B6X,MAAM,mCAAOI,OAAP,CAAN;AAC1B,YAAGC,OAAO,KAAKlY,SAAf,EAA0B6X,MAAM,mCAAOA,MAAP,EAAkBK,OAAlB,CAAN;;AAE1B,YAAG;AAAE;AACD,cAAG,CAACxgB,KAAK,CAACM,YAAN,CAAmBogB,GAAnB,EAAwB,OAAxB,CAAJ,EAAqC;AACjC,gBAAGA,GAAG,KAAGuB,OAAT,EAAiB;AACb,oBAAMvgB,KAAK,CAAC,eAAD,CAAX;AACH;AACJ;;AACD+f,0BAAgB,CAACrgB,QAAjB,CAA0B+e,MAA1B;;AACA,cAAG,CAACvgB,MAAM,CAACyM,KAAP,CAAapJ,MAAb,CAAoB,KAAK2c,SAAL,CAAe3X,EAAnC,EAAsC;AAAC8I,gBAAI,EAAC;AAAC,sCAAuBoP,MAAM,CAAC7T;AAA/B;AAAN,WAAtC,CAAJ,EAA+F;AAC3F,kBAAM5K,KAAK,CAAC,uBAAD,CAAX;AACH;;AACD,iBAAO;AAACoG,kBAAM,EAAE,SAAT;AAAoBtG,gBAAI,EAAE;AAACwG,oBAAM,EAAE,KAAK4X,SAAL,CAAe3X,EAAxB;AAA4BqE,0BAAY,EAAC6T,MAAM,CAAC7T;AAAhD;AAA1B,WAAP;AACH,SAXD,CAWE,OAAM7K,KAAN,EAAa;AACb,iBAAO;AAACwe,sBAAU,EAAE,GAAb;AAAkBC,gBAAI,EAAE;AAACpY,oBAAM,EAAE,MAAT;AAAiBmD,qBAAO,EAAExJ,KAAK,CAACwJ;AAAhC;AAAxB,WAAP;AACD;AACJ;AAxBL;AAhCJ;AATF,CADF;AAsEAqU,GAAG,CAAC4C,aAAJ,CAAkBtiB,MAAM,CAACyM,KAAzB,EAA+BqV,iBAA/B,E;;;;;;;;;;;;;;;AC5HA,IAAIpC,GAAJ;AAAQzf,MAAM,CAACC,IAAP,CAAY,YAAZ,EAAyB;AAACwf,KAAG,CAACvf,CAAD,EAAG;AAACuf,OAAG,GAACvf,CAAJ;AAAM;;AAAd,CAAzB,EAAyC,CAAzC;AAA4C,IAAI0a,WAAJ;AAAgB5a,MAAM,CAACC,IAAP,CAAY,sDAAZ,EAAmE;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC0a,eAAW,GAAC1a,CAAZ;AAAc;;AAA1B,CAAnE,EAA+F,CAA/F;AAGpEuf,GAAG,CAACE,QAAJ,CAAa,eAAb,EAA8B;AAACC,cAAY,EAAE;AAAf,CAA9B,EAAoD;AAClDC,KAAG,EAAE;AACHD,gBAAY,EAAE,KADX;AAEHE,UAAM,EAAE,YAAW;AACf,YAAMY,OAAO,GAAG,KAAKH,WAArB;AACA,YAAMI,OAAO,GAAG,KAAKC,UAArB;AACA,UAAIN,MAAM,GAAG,EAAb;AACA,UAAGI,OAAO,KAAKjY,SAAf,EAA0B6X,MAAM,mCAAOI,OAAP,CAAN;AAC1B,UAAGC,OAAO,KAAKlY,SAAf,EAA0B6X,MAAM,mCAAOA,MAAP,EAAkBK,OAAlB,CAAN;;AAE5B,UAAI;AACF,cAAMQ,GAAG,GAAGvG,WAAW,CAAC0F,MAAD,CAAvB;AACA,eAAO;AAACrY,gBAAM,EAAE,SAAT;AAAoBtG,cAAI,EAAE;AAACwf;AAAD;AAA1B,SAAP;AACD,OAHD,CAGE,OAAMvf,KAAN,EAAa;AACb,eAAO;AAACwe,oBAAU,EAAE,GAAb;AAAkBC,cAAI,EAAE;AAACpY,kBAAM,EAAE,MAAT;AAAiBmD,mBAAO,EAAExJ,KAAK,CAACwJ;AAAhC;AAAxB,SAAP;AACD;AACF;AAfE;AAD6C,CAApD,E;;;;;;;;;;;ACHApL,MAAM,CAACsC,MAAP,CAAc;AAAC2G,wBAAsB,EAAC,MAAIA,sBAA5B;AAAmDuL,+BAA6B,EAAC,MAAIA,6BAArF;AAAmHkL,wBAAsB,EAAC,MAAIA,sBAA9I;AAAqK1W,iBAAe,EAAC,MAAIA,eAAzL;AAAyMwX,kBAAgB,EAAC,MAAIA,gBAA9N;AAA+OtX,UAAQ,EAAC,MAAIA,QAA5P;AAAqQC,SAAO,EAAC,MAAIA,OAAjR;AAAyRsW,KAAG,EAAC,MAAIA;AAAjS,CAAd;AAAqT,IAAI6C,QAAJ;AAAatiB,MAAM,CAACC,IAAP,CAAY,wBAAZ,EAAqC;AAACqiB,UAAQ,CAACpiB,CAAD,EAAG;AAACoiB,YAAQ,GAACpiB,CAAT;AAAW;;AAAxB,CAArC,EAA+D,CAA/D;AAAkE,IAAIsb,OAAJ;AAAYxb,MAAM,CAACC,IAAP,CAAY,uDAAZ,EAAoE;AAACub,SAAO,CAACtb,CAAD,EAAG;AAACsb,WAAO,GAACtb,CAAR;AAAU;;AAAtB,CAApE,EAA4F,CAA5F;AAA+F,IAAI+b,QAAJ,EAAaC,WAAb,EAAyBC,UAAzB,EAAoCC,SAApC;AAA8Cpc,MAAM,CAACC,IAAP,CAAY,uDAAZ,EAAoE;AAACgc,UAAQ,CAAC/b,CAAD,EAAG;AAAC+b,YAAQ,GAAC/b,CAAT;AAAW,GAAxB;;AAAyBgc,aAAW,CAAChc,CAAD,EAAG;AAACgc,eAAW,GAAChc,CAAZ;AAAc,GAAtD;;AAAuDic,YAAU,CAACjc,CAAD,EAAG;AAACic,cAAU,GAACjc,CAAX;AAAa,GAAlF;;AAAmFkc,WAAS,CAAClc,CAAD,EAAG;AAACkc,aAAS,GAAClc,CAAV;AAAY;;AAA5G,CAApE,EAAkL,CAAlL;AAIthB,MAAM+I,sBAAsB,GAAG,gBAA/B;AACA,MAAMuL,6BAA6B,GAAG,QAAtC;AACA,MAAMkL,sBAAsB,GAAG,cAA/B;AACA,MAAM1W,eAAe,GAAG,UAAxB;AACA,MAAMwX,gBAAgB,GAAG,QAAzB;AACA,MAAMtX,QAAQ,GAAG,MAAjB;AACA,MAAMC,OAAO,GAAG,IAAhB;AAEA,MAAMsW,GAAG,GAAG,IAAI6C,QAAJ,CAAa;AAC9BC,SAAO,EAAErZ,QADqB;AAE9BrB,SAAO,EAAEsB,OAFqB;AAG9BqZ,gBAAc,EAAE,IAHc;AAI9BC,YAAU,EAAE;AAJkB,CAAb,CAAZ;AAOP,IAAGjH,OAAO,EAAV,EAAcoD,OAAO,CAAC,oBAAD,CAAP;AACd,IAAGxC,SAAS,CAACH,QAAD,CAAZ,EAAwB2C,OAAO,CAAC,mBAAD,CAAP;AACxB,IAAGxC,SAAS,CAACF,WAAD,CAAZ,EAA2B0C,OAAO,CAAC,sBAAD,CAAP;AAC3B,IAAGxC,SAAS,CAACD,UAAD,CAAZ,EAA0ByC,OAAO,CAAC,qBAAD,CAAP;;AAC1BA,OAAO,CAAC,mBAAD,CAAP;;AACAA,OAAO,CAAC,qBAAD,CAAP,C;;;;;;;;;;;ACxBA5e,MAAM,CAACsC,MAAP,CAAc;AAAC4V,gBAAc,EAAC,MAAIA;AAApB,CAAd;AAAmD,IAAIwK,aAAJ,EAAkBzK,GAAlB;AAAsBjY,MAAM,CAACC,IAAP,CAAY,8BAAZ,EAA2C;AAACyiB,eAAa,CAACxiB,CAAD,EAAG;AAACwiB,iBAAa,GAACxiB,CAAd;AAAgB,GAAlC;;AAAmC+X,KAAG,CAAC/X,CAAD,EAAG;AAAC+X,OAAG,GAAC/X,CAAJ;AAAM;;AAAhD,CAA3C,EAA6F,CAA7F;AAAgG,IAAIH,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIyC,MAAJ;AAAW3C,MAAM,CAACC,IAAP,CAAY,iDAAZ,EAA8D;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACyC,UAAM,GAACzC,CAAP;AAAS;;AAArB,CAA9D,EAAqF,CAArF;AAAwF,IAAIkD,MAAJ;AAAWpD,MAAM,CAACC,IAAP,CAAY,iDAAZ,EAA8D;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACkD,UAAM,GAAClD,CAAP;AAAS;;AAArB,CAA9D,EAAqF,CAArF;AAAwF,IAAI8O,mBAAJ;AAAwBhP,MAAM,CAACC,IAAP,CAAY,iEAAZ,EAA8E;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC8O,uBAAmB,GAAC9O,CAApB;AAAsB;;AAAlC,CAA9E,EAAkH,CAAlH;AAAqH,IAAIgc,WAAJ,EAAgBE,SAAhB;AAA0Bpc,MAAM,CAACC,IAAP,CAAY,oDAAZ,EAAiE;AAACic,aAAW,CAAChc,CAAD,EAAG;AAACgc,eAAW,GAAChc,CAAZ;AAAc,GAA9B;;AAA+Bkc,WAAS,CAAClc,CAAD,EAAG;AAACkc,aAAS,GAAClc,CAAV;AAAY;;AAAxD,CAAjE,EAA2H,CAA3H;AAA8H,IAAIwe,OAAJ;AAAY1e,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAACye,SAAO,CAACxe,CAAD,EAAG;AAACwe,WAAO,GAACxe,CAAR;AAAU;;AAAtB,CAA7D,EAAqF,CAArF;AAEztB,MAAMgY,cAAc,GAAGwK,aAAa,CAAC,YAAD,CAApC;AASPxK,cAAc,CAACyK,WAAf,CAA2B,QAA3B,EAAqC;AAACC,aAAW,EAAE,KAAG;AAAjB,CAArC,EAA4D,UAAU1T,GAAV,EAAe2T,EAAf,EAAmB;AAC7E,MAAI;AACF,UAAMlc,KAAK,GAAGuI,GAAG,CAACvN,IAAlB;AACAgB,UAAM,CAACgE,KAAD,CAAN;AACAuI,OAAG,CAACY,IAAJ;AACD,GAJD,CAIE,OAAMhH,SAAN,EAAiB;AACjBoG,OAAG,CAAC4T,IAAJ;AAEE,UAAM,IAAI/iB,MAAM,CAAC8B,KAAX,CAAiB,kCAAjB,EAAqDiH,SAArD,CAAN;AACH,GARD,SAQU;AACR+Z,MAAE;AACH;AACF,CAZD;AAcA3K,cAAc,CAACyK,WAAf,CAA2B,QAA3B,EAAqC;AAACC,aAAW,EAAE,KAAG;AAAjB,CAArC,EAA4D,UAAU1T,GAAV,EAAe2T,EAAf,EAAmB;AAC7E,MAAI;AACF,UAAMlc,KAAK,GAAGuI,GAAG,CAACvN,IAAlB;AACAyB,UAAM,CAACuD,KAAD,EAAOuI,GAAP,CAAN;AACD,GAHD,CAGE,OAAMpG,SAAN,EAAiB;AACjBoG,OAAG,CAAC4T,IAAJ;AACA,UAAM,IAAI/iB,MAAM,CAAC8B,KAAX,CAAiB,kCAAjB,EAAqDiH,SAArD,CAAN;AACD,GAND,SAMU;AACR+Z,MAAE;AACH;AACF,CAVD;AAYA3K,cAAc,CAACyK,WAAf,CAA2B,qBAA3B,EAAkD;AAACC,aAAW,EAAE,KAAG;AAAjB,CAAlD,EAAyE,UAAU1T,GAAV,EAAe2T,EAAf,EAAmB;AAC1F,MAAI;AACF,QAAG,CAACzG,SAAS,CAACF,WAAD,CAAb,EAA4B;AAC1BhN,SAAG,CAAC6T,KAAJ;AACA7T,SAAG,CAACiG,MAAJ;AACAjG,SAAG,CAAC3L,MAAJ;AACD,KAJD,MAIO,CACL;AACD;AACF,GARD,CAQE,OAAMuF,SAAN,EAAiB;AACjBoG,OAAG,CAAC4T,IAAJ;AACA,UAAM,IAAI/iB,MAAM,CAAC8B,KAAX,CAAiB,gDAAjB,EAAmEiH,SAAnE,CAAN;AACD,GAXD,SAWU;AACR+Z,MAAE;AACH;AACF,CAfD;AAiBA,IAAI5K,GAAJ,CAAQC,cAAR,EAAwB,SAAxB,EAAmC,EAAnC,EACK8K,MADL,CACY;AAAEC,UAAQ,EAAE/K,cAAc,CAACgL,KAAf,CAAqB/U,KAArB,CAA2BgV,IAA3B,CAAgC,iBAAhC;AAAZ,CADZ,EAEK5K,IAFL,CAEU;AAACC,eAAa,EAAE;AAAhB,CAFV;AAIA,IAAI4K,CAAC,GAAGlL,cAAc,CAACyK,WAAf,CAA2B,SAA3B,EAAqC;AAAEU,cAAY,EAAE,KAAhB;AAAuBT,aAAW,EAAE,KAAG;AAAvC,CAArC,EAAoF,UAAU1T,GAAV,EAAe2T,EAAf,EAAmB;AAC7G,QAAMS,OAAO,GAAG,IAAIpgB,IAAJ,EAAhB;AACEogB,SAAO,CAACC,UAAR,CAAmBD,OAAO,CAACE,UAAR,KAAuB,CAA1C;AAEF,QAAMC,GAAG,GAAGvL,cAAc,CAACxX,IAAf,CAAoB;AACxBuH,UAAM,EAAE;AAACyb,SAAG,EAAEzL,GAAG,CAAC0L;AAAV,KADgB;AAExBC,WAAO,EAAE;AAACC,SAAG,EAAEP;AAAN;AAFe,GAApB,EAGJ;AAAC1iB,UAAM,EAAE;AAAE8C,SAAG,EAAE;AAAP;AAAT,GAHI,CAAZ;AAKEgb,SAAO,CAAC,mCAAD,EAAqC+E,GAArC,CAAP;AACAvL,gBAAc,CAAC4L,UAAf,CAA0BL,GAA1B;;AACA,MAAGA,GAAG,CAACvX,MAAJ,GAAa,CAAhB,EAAkB;AAChBgD,OAAG,CAACY,IAAJ,CAAS,gCAAT;AACD;;AACD+S,IAAE;AACL,CAfO,CAAR;AAiBA3K,cAAc,CAACxX,IAAf,CAAoB;AAAEiD,MAAI,EAAE,SAAR;AAAmBsE,QAAM,EAAE;AAA3B,CAApB,EACK8b,OADL,CACa;AACLC,OAAK,EAAE,YAAY;AAAEZ,KAAC,CAACa,OAAF;AAAc;AAD9B,CADb,E;;;;;;;;;;;AC3EAjkB,MAAM,CAACsC,MAAP,CAAc;AAACmW,UAAQ,EAAC,MAAIA;AAAd,CAAd;AAAuC,IAAIiK,aAAJ,EAAkBzK,GAAlB;AAAsBjY,MAAM,CAACC,IAAP,CAAY,8BAAZ,EAA2C;AAACyiB,eAAa,CAACxiB,CAAD,EAAG;AAACwiB,iBAAa,GAACxiB,CAAd;AAAgB,GAAlC;;AAAmC+X,KAAG,CAAC/X,CAAD,EAAG;AAAC+X,OAAG,GAAC/X,CAAJ;AAAM;;AAAhD,CAA3C,EAA6F,CAA7F;AAAgG,IAAI+J,gBAAJ;AAAqBjK,MAAM,CAACC,IAAP,CAAY,2DAAZ,EAAwE;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAAC+J,oBAAgB,GAAC/J,CAAjB;AAAmB;;AAA/B,CAAxE,EAAyG,CAAzG;AAA4G,IAAIH,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIwe,OAAJ;AAAY1e,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAACye,SAAO,CAACxe,CAAD,EAAG;AAACwe,WAAO,GAACxe,CAAR;AAAU;;AAAtB,CAA7D,EAAqF,CAArF;AAAwF,IAAIgY,cAAJ;AAAmBlY,MAAM,CAACC,IAAP,CAAY,mBAAZ,EAAgC;AAACiY,gBAAc,CAAChY,CAAD,EAAG;AAACgY,kBAAc,GAAChY,CAAf;AAAiB;;AAApC,CAAhC,EAAsE,CAAtE;AAM9c,MAAMuY,QAAQ,GAAGiK,aAAa,CAAC,MAAD,CAA9B;AAEPjK,QAAQ,CAACkK,WAAT,CAAqB,kBAArB,EAAyC,UAAUzT,GAAV,EAAe2T,EAAf,EAAmB;AAC1D,MAAI;AACF,UAAMlhB,IAAI,GAAGuN,GAAG,CAACvN,IAAjB;AACAsI,oBAAgB,CAACtI,IAAD,CAAhB;AACAuN,OAAG,CAACY,IAAJ;AACD,GAJD,CAIE,OAAMhH,SAAN,EAAiB;AACjBoG,OAAG,CAAC4T,IAAJ;AACA,UAAM,IAAI/iB,MAAM,CAAC8B,KAAX,CAAiB,sCAAjB,EAAyDiH,SAAzD,CAAN;AACD,GAPD,SAOU;AACR+Z,MAAE;AACH;AACF,CAXD;AAcA,IAAI5K,GAAJ,CAAQQ,QAAR,EAAkB,SAAlB,EAA6B,EAA7B,EACKuK,MADL,CACY;AAAEC,UAAQ,EAAExK,QAAQ,CAACyK,KAAT,CAAe/U,KAAf,CAAqBgV,IAArB,CAA0B,iBAA1B;AAAZ,CADZ,EAEK5K,IAFL,CAEU;AAACC,eAAa,EAAE;AAAhB,CAFV;AAIA,IAAI4K,CAAC,GAAG3K,QAAQ,CAACkK,WAAT,CAAqB,SAArB,EAA+B;AAAEU,cAAY,EAAE,KAAhB;AAAuBT,aAAW,EAAE,KAAG;AAAvC,CAA/B,EAA8E,UAAU1T,GAAV,EAAe2T,EAAf,EAAmB;AACrG,QAAMS,OAAO,GAAG,IAAIpgB,IAAJ,EAAhB;AACAogB,SAAO,CAACC,UAAR,CAAmBD,OAAO,CAACE,UAAR,KAAuB,CAA1C;AAEA,QAAMC,GAAG,GAAGhL,QAAQ,CAAC/X,IAAT,CAAc;AAClBuH,UAAM,EAAE;AAACyb,SAAG,EAAEzL,GAAG,CAAC0L;AAAV,KADU;AAElBC,WAAO,EAAE;AAACC,SAAG,EAAEP;AAAN;AAFS,GAAd,EAGR;AAAC1iB,UAAM,EAAE;AAAE8C,SAAG,EAAE;AAAP;AAAT,GAHQ,CAAZ;AAKAgb,SAAO,CAAC,mCAAD,EAAqC+E,GAArC,CAAP;AACAhL,UAAQ,CAACqL,UAAT,CAAoBL,GAApB;;AACA,MAAGA,GAAG,CAACvX,MAAJ,GAAa,CAAhB,EAAkB;AACdgD,OAAG,CAACY,IAAJ,CAAS,gCAAT;AACH;;AACD+S,IAAE;AACL,CAfO,CAAR;AAiBApK,QAAQ,CAAC/X,IAAT,CAAc;AAAEiD,MAAI,EAAE,SAAR;AAAmBsE,QAAM,EAAE;AAA3B,CAAd,EACK8b,OADL,CACa;AACLC,OAAK,EAAE,YAAY;AAAEZ,KAAC,CAACa,OAAF;AAAc;AAD9B,CADb,E;;;;;;;;;;;AC3CAjkB,MAAM,CAACsC,MAAP,CAAc;AAACqK,YAAU,EAAC,MAAIA;AAAhB,CAAd;AAA2C,IAAI5M,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIgkB,GAAJ;AAAQlkB,MAAM,CAACC,IAAP,CAAY,KAAZ,EAAkB;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACgkB,OAAG,GAAChkB,CAAJ;AAAM;;AAAlB,CAAlB,EAAsC,CAAtC;AAAyC,IAAI6H,OAAJ;AAAY/H,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAAC8H,SAAO,CAAC7H,CAAD,EAAG;AAAC6H,WAAO,GAAC7H,CAAR;AAAU;;AAAtB,CAA7D,EAAqF,CAArF;;AAIjK,SAASyM,UAAT,CAAoBlF,GAApB,EAAyBuC,MAAzB,EAAiC;AACtC,QAAMma,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBC,cAAjB,CAAjB;;AACA,MAAI;AACF,UAAMC,OAAO,GAAGH,QAAQ,CAAC1c,GAAD,EAAMuC,MAAN,CAAxB;AACA,QAAGsa,OAAO,KAAK7b,SAAf,EAA0B,OAAOA,SAAP;AAC1B,QAAI7B,KAAK,GAAG6B,SAAZ;AACA6b,WAAO,CAACve,OAAR,CAAgBwe,MAAM,IAAI;AACxB,UAAGA,MAAM,CAAC,CAAD,CAAN,CAAU5U,UAAV,CAAqBlI,GAArB,CAAH,EAA8B;AAC5B,cAAM0Z,GAAG,GAAGoD,MAAM,CAAC,CAAD,CAAN,CAAUhW,SAAV,CAAoB9G,GAAG,CAACyE,MAAJ,GAAW,CAA/B,CAAZ;AACAtF,aAAK,GAAGua,GAAG,CAACqD,IAAJ,EAAR;AAED;AACF,KAND;AAOA,WAAO5d,KAAP;AACD,GAZD,CAYE,OAAMhF,KAAN,EAAa;AACbmG,WAAO,CAAC,sCAAD,EAAwCmc,GAAG,CAACO,UAAJ,EAAxC,CAAP;AACA,QAAG7iB,KAAK,CAACwJ,OAAN,CAAcuE,UAAd,CAAyB,kBAAzB,KACC/N,KAAK,CAACwJ,OAAN,CAAcuE,UAAd,CAAyB,oBAAzB,CADJ,EACoD,OAAOlH,SAAP,CADpD,KAEK,MAAM7G,KAAN;AACN;AACF;;AAED,SAASyiB,cAAT,CAAwB5c,GAAxB,EAA6BuC,MAA7B,EAAqCpH,QAArC,EAA+C;AAC3CmF,SAAO,CAAC,+BAAD,EAAkC;AAACN,OAAG,EAACA,GAAL;AAASuC,UAAM,EAACA;AAAhB,GAAlC,CAAP;AACAka,KAAG,CAACvX,UAAJ,CAAe3C,MAAf,EAAuB,CAACqL,GAAD,EAAMiP,OAAN,KAAkB;AACzC1hB,YAAQ,CAACyS,GAAD,EAAMiP,OAAN,CAAR;AACD,GAFC;AAGH,C;;;;;;;;;;;AC/BDtkB,MAAM,CAACsC,MAAP,CAAc;AAACqL,QAAM,EAAC,MAAIA,MAAZ;AAAmB+W,uBAAqB,EAAC,MAAIA,qBAA7C;AAAmEC,eAAa,EAAC,MAAIA,aAArF;AAAmGnb,aAAW,EAAC,MAAIA,WAAnH;AAA+HmF,UAAQ,EAAC,MAAIA,QAA5I;AAAqJmF,QAAM,EAAC,MAAIA,MAAhK;AAAuKC,SAAO,EAAC,MAAIA,OAAnL;AAA2LrF,gBAAc,EAAC,MAAIA,cAA9M;AAA6N6F,gBAAc,EAAC,MAAIA,cAAhP;AAA+P3F,mBAAiB,EAAC,MAAIA,iBAArR;AAAuS3H,YAAU,EAAC,MAAIA,UAAtT;AAAiUua,SAAO,EAAC,MAAIA;AAA7U,CAAd;AAAqW,IAAIzhB,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAI2T,aAAJ,EAAkBhK,UAAlB,EAA6BC,QAA7B;AAAsC9J,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAAC4T,eAAa,CAAC3T,CAAD,EAAG;AAAC2T,iBAAa,GAAC3T,CAAd;AAAgB,GAAlC;;AAAmC2J,YAAU,CAAC3J,CAAD,EAAG;AAAC2J,cAAU,GAAC3J,CAAX;AAAa,GAA9D;;AAA+D4J,UAAQ,CAAC5J,CAAD,EAAG;AAAC4J,YAAQ,GAAC5J,CAAT;AAAW;;AAAtF,CAA7D,EAAqJ,CAArJ;AAI3c,MAAM0kB,SAAS,GAAG,IAAlB;;AAGO,SAASjX,MAAT,CAAgBkX,MAAhB,EAAwBhe,OAAxB,EAAiC;AACtC,MAAG,CAACA,OAAJ,EAAY;AACNA,WAAO,GAAG6d,qBAAqB,CAAC,EAAD,CAArB,CAA0B,CAA1B,CAAV;AACA7Q,iBAAa,CAAC,0EAAD,EAA4EhN,OAA5E,CAAb;AACL;;AACD,MAAG,CAACA,OAAJ,EAAY;AACNA,WAAO,GAAG8d,aAAa,CAAC,EAAD,CAAvB;AACA9Q,iBAAa,CAAC,0EAAD,EAA4EhN,OAA5E,CAAb;AACL;;AACD,QAAMsd,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBU,oBAAjB,CAAjB;AACA,SAAOX,QAAQ,CAACU,MAAD,EAAShe,OAAT,CAAf;AACD;;AAED,SAASie,oBAAT,CAA8BD,MAA9B,EAAsChe,OAAtC,EAA+CjE,QAA/C,EAAyD;AACvD,QAAMmiB,UAAU,GAAGle,OAAnB;AACAge,QAAM,CAACG,GAAP,CAAW,aAAX,EAA0BD,UAA1B,EAAsC,UAAS1P,GAAT,EAAc1T,IAAd,EAAoB;AACxD,QAAG0T,GAAH,EAASvL,QAAQ,CAAC,uBAAD,EAAyBuL,GAAzB,CAAR;AACTzS,YAAQ,CAACyS,GAAD,EAAM1T,IAAN,CAAR;AACD,GAHD;AAID;;AAEM,SAAS+iB,qBAAT,CAA+BG,MAA/B,EAAuCI,MAAvC,EAA+C;AAClD,QAAMd,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBc,8BAAjB,CAAjB;AACA,SAAOf,QAAQ,CAACU,MAAD,EAASI,MAAT,CAAf;AACH;;AAED,SAASC,8BAAT,CAAwCL,MAAxC,EAAgDM,OAAhD,EAAyDviB,QAAzD,EAAmE;AAC/D,QAAMwiB,UAAU,GAAGD,OAAnB;AACAN,QAAM,CAACG,GAAP,CAAW,uBAAX,EAAoCI,UAApC,EAAgD,UAAS/P,GAAT,EAAc1T,IAAd,EAAoB;AAChE,QAAG0T,GAAH,EAASvL,QAAQ,CAAC,wBAAD,EAA0BuL,GAA1B,CAAR;AACTzS,YAAQ,CAACyS,GAAD,EAAM1T,IAAN,CAAR;AACH,GAHD;AAIH;;AAEM,SAASgjB,aAAT,CAAuBE,MAAvB,EAA+BI,MAA/B,EAAuC;AAC1C,QAAMd,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBiB,sBAAjB,CAAjB;AACA,SAAOlB,QAAQ,CAACU,MAAD,EAASI,MAAT,CAAf;AACH;;AACD,SAASI,sBAAT,CAAgCR,MAAhC,EAAwCM,OAAxC,EAAiDviB,QAAjD,EAA2D;AACvD,QAAMwiB,UAAU,GAAGD,OAAnB;AACAN,QAAM,CAACG,GAAP,CAAW,gBAAX,EAA6BI,UAA7B,EAAyC,UAAS/P,GAAT,EAAc1T,IAAd,EAAoB;AACzD,QAAG0T,GAAH,EAASvL,QAAQ,CAAC,iBAAD,EAAmBuL,GAAnB,CAAR;AACTzS,YAAQ,CAACyS,GAAD,EAAM1T,IAAN,CAAR;AACH,GAHD;AAIH;;AAGM,SAAS6H,WAAT,CAAqBqb,MAArB,EAA6Bhe,OAA7B,EAAsCuE,OAAtC,EAA+C;AAClD,QAAM+Y,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBkB,oBAAjB,CAAjB;AACA,SAAOnB,QAAQ,CAACU,MAAD,EAAShe,OAAT,EAAkBuE,OAAlB,CAAf;AACH;;AAED,SAASka,oBAAT,CAA8BT,MAA9B,EAAsChe,OAAtC,EAA+CuE,OAA/C,EAAwDxI,QAAxD,EAAkE;AAC9D,QAAMmiB,UAAU,GAAGle,OAAnB;AACA,QAAM0e,UAAU,GAAGna,OAAnB;AACAyZ,QAAM,CAACG,GAAP,CAAW,aAAX,EAA0BD,UAA1B,EAAsCQ,UAAtC,EAAkD,UAASlQ,GAAT,EAAc1T,IAAd,EAAoB;AAClEiB,YAAQ,CAACyS,GAAD,EAAM1T,IAAN,CAAR;AACH,GAFD;AAGH;;AAEM,SAASgN,QAAT,CAAkBkW,MAAlB,EAA0Bzc,EAA1B,EAA8B;AACnC,QAAM+b,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBoB,iBAAjB,CAAjB;AACA,SAAOrB,QAAQ,CAACU,MAAD,EAASzc,EAAT,CAAf;AACD;;AAED,SAASod,iBAAT,CAA2BX,MAA3B,EAAmCzc,EAAnC,EAAuCxF,QAAvC,EAAiD;AAC/C,QAAM6iB,KAAK,GAAGC,OAAO,CAACtd,EAAD,CAArB;AACAyB,YAAU,CAAC,0BAAD,EAA4B4b,KAA5B,CAAV;AACAZ,QAAM,CAACG,GAAP,CAAW,WAAX,EAAwBS,KAAxB,EAA+B,UAASpQ,GAAT,EAAc1T,IAAd,EAAoB;AACjD,QAAG0T,GAAG,KAAK5M,SAAR,IAAqB4M,GAAG,KAAK,IAA7B,IAAqCA,GAAG,CAACjK,OAAJ,CAAYuE,UAAZ,CAAuB,gBAAvB,CAAxC,EAAkF;AAChF0F,SAAG,GAAG5M,SAAN,EACA9G,IAAI,GAAG8G,SADP;AAED;;AACD7F,YAAQ,CAACyS,GAAD,EAAM1T,IAAN,CAAR;AACD,GAND;AAOD;;AAEM,SAASmS,MAAT,CAAgB+Q,MAAhB,EAAwBhe,OAAxB,EAAiC;AACpC,QAAMsd,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBuB,eAAjB,CAAjB;AACA,SAAOxB,QAAQ,CAACU,MAAD,EAAShe,OAAT,CAAf;AACH;;AAED,SAAS8e,eAAT,CAAyBd,MAAzB,EAAiChe,OAAjC,EAA0CjE,QAA1C,EAAoD;AAChD,QAAMyQ,WAAW,GAAGxM,OAApB;AACAge,QAAM,CAACG,GAAP,CAAW,eAAX,EAA4B3R,WAA5B,EAAyC,MAAzC,EAAiD,UAASgC,GAAT,EAAc1T,IAAd,EAAoB;AACjEiB,YAAQ,CAACyS,GAAD,EAAM1T,IAAN,CAAR;AACH,GAFD;AAGH;;AAEM,SAASoS,OAAT,CAAiB8Q,MAAjB,EAAyBvjB,IAAzB,EAA+BsF,KAA/B,EAAsCC,OAAtC,EAA+C;AAClD,QAAMsd,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBwB,gBAAjB,CAAjB;AACA,SAAOzB,QAAQ,CAACU,MAAD,EAASvjB,IAAT,EAAesF,KAAf,EAAsBC,OAAtB,CAAf;AACH;;AAED,SAAS+e,gBAAT,CAA0Bf,MAA1B,EAAkCvjB,IAAlC,EAAwCsF,KAAxC,EAA+CC,OAA/C,EAAwDjE,QAAxD,EAAkE;AAC9D,QAAMijB,OAAO,GAAGH,OAAO,CAACpkB,IAAD,CAAvB;AACA,QAAMwkB,QAAQ,GAAGlf,KAAjB;AACA,QAAMyM,WAAW,GAAGxM,OAApB;;AACA,MAAG,CAACA,OAAJ,EAAa;AACTge,UAAM,CAACG,GAAP,CAAW,UAAX,EAAuBa,OAAvB,EAAgCC,QAAhC,EAA0C,UAAUzQ,GAAV,EAAe1T,IAAf,EAAqB;AAC3DiB,cAAQ,CAACyS,GAAD,EAAM1T,IAAN,CAAR;AACH,KAFD;AAGH,GAJD,MAIK;AACDkjB,UAAM,CAACG,GAAP,CAAW,UAAX,EAAuBa,OAAvB,EAAgCC,QAAhC,EAA0CzS,WAA1C,EAAuD,UAASgC,GAAT,EAAc1T,IAAd,EAAoB;AACvEiB,cAAQ,CAACyS,GAAD,EAAM1T,IAAN,CAAR;AACH,KAFD;AAGH;AACJ;;AAEM,SAAS+M,cAAT,CAAwBmW,MAAxB,EAAgCkB,KAAhC,EAAuC;AAC1C,QAAM5B,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiB4B,uBAAjB,CAAjB;AACA,MAAIC,QAAQ,GAAGF,KAAf;AACA,MAAGE,QAAQ,KAAKxd,SAAhB,EAA2Bwd,QAAQ,GAAG,IAAX;AAC3B,SAAO9B,QAAQ,CAACU,MAAD,EAASoB,QAAT,CAAf;AACH;;AAED,SAASD,uBAAT,CAAiCnB,MAAjC,EAAyCkB,KAAzC,EAAgDnjB,QAAhD,EAA0D;AACtD,MAAIqjB,QAAQ,GAAGF,KAAf;AACA,MAAGE,QAAQ,KAAK,IAAhB,EAAsBpB,MAAM,CAACG,GAAP,CAAW,gBAAX,EAA6B,UAAS3P,GAAT,EAAc1T,IAAd,EAAoB;AACnEiB,YAAQ,CAACyS,GAAD,EAAM1T,IAAN,CAAR;AACH,GAFqB,EAAtB,KAGKkjB,MAAM,CAACG,GAAP,CAAW,gBAAX,EAA6BiB,QAA7B,EAAuC,UAAS5Q,GAAT,EAAc1T,IAAd,EAAoB;AAC5DiB,YAAQ,CAACyS,GAAD,EAAM1T,IAAN,CAAR;AACH,GAFI;AAGR;;AAEM,SAAS4S,cAAT,CAAwBsQ,MAAxB,EAAgC5V,IAAhC,EAAsC;AACzC,QAAMkV,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiB8B,uBAAjB,CAAjB;AACA,SAAO/B,QAAQ,CAACU,MAAD,EAAS5V,IAAT,CAAf;AACH;;AAED,SAASiX,uBAAT,CAAiCrB,MAAjC,EAAyC5V,IAAzC,EAA+CrM,QAA/C,EAAyD;AACrDiH,YAAU,CAAC,0BAAD,EAA4BoF,IAA5B,CAAV;AACA4V,QAAM,CAACG,GAAP,CAAW,gBAAX,EAA6B/V,IAA7B,EAAmC,UAASoG,GAAT,EAAc1T,IAAd,EAAoB;AACnD,QAAG0T,GAAH,EAASvL,QAAQ,CAAC,0BAAD,EAA4BuL,GAA5B,CAAR;AACTzS,YAAQ,CAACyS,GAAD,EAAM1T,IAAN,CAAR;AACH,GAHD;AAIH;;AAEM,SAASiN,iBAAT,CAA2BiW,MAA3B,EAAmC5V,IAAnC,EAAyC;AAC5C,QAAMkV,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiB+B,0BAAjB,CAAjB;AACA,SAAOhC,QAAQ,CAACU,MAAD,EAAS5V,IAAT,CAAf;AACH;;AAED,SAASkX,0BAAT,CAAoCtB,MAApC,EAA4C5V,IAA5C,EAAkDrM,QAAlD,EAA4D;AACxDiR,eAAa,CAAC,6BAAD,EAA+B5E,IAA/B,CAAb;AACA4V,QAAM,CAACG,GAAP,CAAW,mBAAX,EAAgC/V,IAAhC,EAAsC,CAAtC,EAAyC,UAASoG,GAAT,EAAc1T,IAAd,EAAoB;AACzD,QAAG0T,GAAH,EAASvL,QAAQ,CAAC,6BAAD,EAA+BuL,GAA/B,CAAR;AACTzS,YAAQ,CAACyS,GAAD,EAAM1T,IAAN,CAAR;AACH,GAHD;AAIH;;AAEM,SAASsF,UAAT,CAAoB4d,MAApB,EAA4B;AAC/B,QAAMV,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBgC,mBAAjB,CAAjB;AACA,SAAOjC,QAAQ,CAACU,MAAD,CAAf;AACH;;AAED,SAASuB,mBAAT,CAA6BvB,MAA7B,EAAqCjiB,QAArC,EAA+C;AAC3CiiB,QAAM,CAACG,GAAP,CAAW,YAAX,EAAyB,UAAS3P,GAAT,EAAc1T,IAAd,EAAoB;AACzC,QAAG0T,GAAH,EAAQ;AAAEvL,cAAQ,CAAC,sBAAD,EAAwBuL,GAAxB,CAAR;AAAsC;;AAChDzS,YAAQ,CAACyS,GAAD,EAAM1T,IAAN,CAAR;AACH,GAHD;AAIH;;AAEM,SAAS6f,OAAT,CAAiBqD,MAAjB,EAAyB;AAC5B,QAAMV,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBiC,gBAAjB,CAAjB;AACA,SAAOlC,QAAQ,CAACU,MAAD,CAAf;AACH;;AAED,SAASwB,gBAAT,CAA0BxB,MAA1B,EAAkCjiB,QAAlC,EAA4C;AACxCiiB,QAAM,CAACG,GAAP,CAAW,mBAAX,EAAgC,UAAS3P,GAAT,EAAc1T,IAAd,EAAoB;AAChD,QAAG0T,GAAH,EAAQ;AAAEvL,cAAQ,CAAC,mBAAD,EAAqBuL,GAArB,CAAR;AAAmC;;AAC7CzS,YAAQ,CAACyS,GAAD,EAAM1T,IAAN,CAAR;AACH,GAHD;AAIH;;AAED,SAAS+jB,OAAT,CAAiBtd,EAAjB,EAAqB;AACjB,QAAMke,UAAU,GAAG,OAAnB;AACA,MAAIC,OAAO,GAAGne,EAAd,CAFiB,CAEC;;AAElB,MAAGA,EAAE,CAACuH,UAAH,CAAc2W,UAAd,CAAH,EAA8BC,OAAO,GAAGne,EAAE,CAACmG,SAAH,CAAa+X,UAAU,CAACpa,MAAxB,CAAV,CAJb,CAIwD;;AACzE,MAAG,CAAC9D,EAAE,CAACuH,UAAH,CAAciV,SAAd,CAAJ,EAA8B2B,OAAO,GAAG3B,SAAS,GAACxc,EAApB,CALb,CAKqC;;AACxD,SAAOme,OAAP;AACD,C;;;;;;;;;;;AC9LDvmB,MAAM,CAACsC,MAAP,CAAc;AAACiH,YAAU,EAAC,MAAIA,UAAhB;AAA2Bid,gBAAc,EAAC,MAAIA,cAA9C;AAA6DC,aAAW,EAAC,MAAIA,WAA7E;AAAyFhS,YAAU,EAAC,MAAIA;AAAxG,CAAd;AAAmI,IAAI1U,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIwmB,IAAJ;AAAS1mB,MAAM,CAACC,IAAP,CAAY,aAAZ,EAA0B;AAACymB,MAAI,CAACxmB,CAAD,EAAG;AAACwmB,QAAI,GAACxmB,CAAL;AAAO;;AAAhB,CAA1B,EAA4C,CAA5C;;AAGrM,SAASqJ,UAAT,CAAoBW,GAApB,EAAyBE,KAAzB,EAAgC;AACrC,QAAM+Z,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBuC,IAAjB,CAAjB;AACA,SAAOxC,QAAQ,CAACja,GAAD,EAAME,KAAN,CAAf;AACD;;AAEM,SAASoc,cAAT,CAAwBtc,GAAxB,EAA6BvI,IAA7B,EAAmC;AACtC,QAAMwiB,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBwC,QAAjB,CAAjB;AACA,SAAOzC,QAAQ,CAACja,GAAD,EAAMvI,IAAN,CAAf;AACH;;AAEM,SAAS8kB,WAAT,CAAqBvc,GAArB,EAA0BvI,IAA1B,EAAgC;AACnC,QAAMwiB,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiByC,KAAjB,CAAjB;AACA,SAAO1C,QAAQ,CAACja,GAAD,EAAMvI,IAAN,CAAf;AACH;;AAEM,SAAS8S,UAAT,CAAoBvK,GAApB,EAAyBvI,IAAzB,EAA+B;AAClC,QAAMwiB,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiB0C,IAAjB,CAAjB;AACA,SAAO3C,QAAQ,CAACja,GAAD,EAAMvI,IAAN,CAAf;AACH;;AAED,SAASglB,IAAT,CAAczc,GAAd,EAAmBE,KAAnB,EAA0BxH,QAA1B,EAAoC;AAClC,QAAMmkB,MAAM,GAAG7c,GAAf;AACA,QAAM8c,QAAQ,GAAG5c,KAAjB;AACAsc,MAAI,CAAC7G,GAAL,CAASkH,MAAT,EAAiB;AAAC3c,SAAK,EAAE4c;AAAR,GAAjB,EAAoC,UAAS3R,GAAT,EAAcjG,GAAd,EAAmB;AACrDxM,YAAQ,CAACyS,GAAD,EAAMjG,GAAN,CAAR;AACD,GAFD;AAGD;;AAED,SAASwX,QAAT,CAAkB1c,GAAlB,EAAuBvI,IAAvB,EAA6BiB,QAA7B,EAAuC;AACnC,QAAMmkB,MAAM,GAAG7c,GAAf;AACA,QAAM1C,OAAO,GAAG7F,IAAhB;AACA+kB,MAAI,CAAC7G,GAAL,CAASkH,MAAT,EAAiBvf,OAAjB,EAA0B,UAAS6N,GAAT,EAAcjG,GAAd,EAAmB;AACzCxM,YAAQ,CAACyS,GAAD,EAAMjG,GAAN,CAAR;AACH,GAFD;AAGH;;AAED,SAASyX,KAAT,CAAe3c,GAAf,EAAoBvI,IAApB,EAA0BiB,QAA1B,EAAoC;AAChC,QAAMmkB,MAAM,GAAG7c,GAAf;AACA,QAAM1C,OAAO,GAAI7F,IAAjB;AAEA+kB,MAAI,CAACjG,IAAL,CAAUsG,MAAV,EAAkBvf,OAAlB,EAA2B,UAAS6N,GAAT,EAAcjG,GAAd,EAAmB;AAC1CxM,YAAQ,CAACyS,GAAD,EAAMjG,GAAN,CAAR;AACH,GAFD;AAGH;;AAED,SAAS0X,IAAT,CAAc5c,GAAd,EAAmBgL,UAAnB,EAA+BtS,QAA/B,EAAyC;AACrC,QAAMmkB,MAAM,GAAG7c,GAAf;AACA,QAAM1C,OAAO,GAAG;AACZ7F,QAAI,EAAEuT;AADM,GAAhB;AAIAwR,MAAI,CAACxF,GAAL,CAAS6F,MAAT,EAAiBvf,OAAjB,EAA0B,UAAS6N,GAAT,EAAcjG,GAAd,EAAmB;AAC3CxM,YAAQ,CAACyS,GAAD,EAAMjG,GAAN,CAAR;AACD,GAFD;AAGH,C;;;;;;;;;;;ACzDDpP,MAAM,CAACC,IAAP,CAAY,gBAAZ;AAA8BD,MAAM,CAACC,IAAP,CAAY,eAAZ;AAA6BD,MAAM,CAACC,IAAP,CAAY,sBAAZ;AAAoCD,MAAM,CAACC,IAAP,CAAY,gBAAZ;AAA8BD,MAAM,CAACC,IAAP,CAAY,UAAZ;AAAwBD,MAAM,CAACC,IAAP,CAAY,gBAAZ,E;;;;;;;;;;;ACArJD,MAAM,CAACsC,MAAP,CAAc;AAACsW,UAAQ,EAAC,MAAIA;AAAd,CAAd;AAAuC,IAAI7Y,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAIwiB,aAAJ,EAAkBzK,GAAlB;AAAsBjY,MAAM,CAACC,IAAP,CAAY,8BAAZ,EAA2C;AAACyiB,eAAa,CAACxiB,CAAD,EAAG;AAACwiB,iBAAa,GAACxiB,CAAd;AAAgB,GAAlC;;AAAmC+X,KAAG,CAAC/X,CAAD,EAAG;AAAC+X,OAAG,GAAC/X,CAAJ;AAAM;;AAAhD,CAA3C,EAA6F,CAA7F;AAAgG,IAAIyX,QAAJ;AAAa3X,MAAM,CAACC,IAAP,CAAY,6CAAZ,EAA0D;AAACmB,SAAO,CAAClB,CAAD,EAAG;AAACyX,YAAQ,GAACzX,CAAT;AAAW;;AAAvB,CAA1D,EAAmF,CAAnF;AAAsF,IAAIwe,OAAJ;AAAY1e,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAACye,SAAO,CAACxe,CAAD,EAAG;AAACwe,WAAO,GAACxe,CAAR;AAAU;;AAAtB,CAA7D,EAAqF,CAArF;AAAwF,IAAIgY,cAAJ;AAAmBlY,MAAM,CAACC,IAAP,CAAY,mBAAZ,EAAgC;AAACiY,gBAAc,CAAChY,CAAD,EAAG;AAACgY,kBAAc,GAAChY,CAAf;AAAiB;;AAApC,CAAhC,EAAsE,CAAtE;AAEhb,MAAM0Y,QAAQ,GAAG8J,aAAa,CAAC,QAAD,CAA9B;AAOP9J,QAAQ,CAAC+J,WAAT,CAAqB,MAArB,EAA6B,UAAUzT,GAAV,EAAe2T,EAAf,EAAmB;AAC9C,MAAI;AACF,UAAMxc,KAAK,GAAG6I,GAAG,CAACvN,IAAlB;AACAgW,YAAQ,CAACtR,KAAD,CAAR;AACA6I,OAAG,CAACY,IAAJ;AACD,GAJD,CAIE,OAAMhH,SAAN,EAAiB;AACjBoG,OAAG,CAAC4T,IAAJ;AACA,UAAM,IAAI/iB,MAAM,CAAC8B,KAAX,CAAiB,0BAAjB,EAA6CiH,SAA7C,CAAN;AACD,GAPD,SAOU;AACR+Z,MAAE;AACH;AACF,CAXD;AAcA,IAAI5K,GAAJ,CAAQW,QAAR,EAAkB,SAAlB,EAA6B,EAA7B,EACKoK,MADL,CACY;AAAEC,UAAQ,EAAErK,QAAQ,CAACsK,KAAT,CAAe/U,KAAf,CAAqBgV,IAArB,CAA0B,iBAA1B;AAAZ,CADZ,EAEK5K,IAFL,CAEU;AAACC,eAAa,EAAE;AAAhB,CAFV;AAIA,IAAI4K,CAAC,GAAGxK,QAAQ,CAAC+J,WAAT,CAAqB,SAArB,EAA+B;AAAEU,cAAY,EAAE,KAAhB;AAAuBT,aAAW,EAAE,KAAG;AAAvC,CAA/B,EAA8E,UAAU1T,GAAV,EAAe2T,EAAf,EAAmB;AACrG,QAAMS,OAAO,GAAG,IAAIpgB,IAAJ,EAAhB;AACAogB,SAAO,CAACC,UAAR,CAAmBD,OAAO,CAACE,UAAR,KAAuB,CAA1C;AAEA,QAAMC,GAAG,GAAG7K,QAAQ,CAAClY,IAAT,CAAc;AAClBuH,UAAM,EAAE;AAACyb,SAAG,EAAEzL,GAAG,CAAC0L;AAAV,KADU;AAElBC,WAAO,EAAE;AAACC,SAAG,EAAEP;AAAN;AAFS,GAAd,EAGR;AAAC1iB,UAAM,EAAE;AAAE8C,SAAG,EAAE;AAAP;AAAT,GAHQ,CAAZ;AAKAgb,SAAO,CAAC,mCAAD,EAAqC+E,GAArC,CAAP;AACA7K,UAAQ,CAACkL,UAAT,CAAoBL,GAApB;;AACA,MAAGA,GAAG,CAACvX,MAAJ,GAAa,CAAhB,EAAkB;AACdgD,OAAG,CAACY,IAAJ,CAAS,gCAAT;AACH;;AACD+S,IAAE;AACL,CAfO,CAAR;AAiBAjK,QAAQ,CAAClY,IAAT,CAAc;AAAEiD,MAAI,EAAE,SAAR;AAAmBsE,QAAM,EAAE;AAA3B,CAAd,EACK8b,OADL,CACa;AACLC,OAAK,EAAE,YAAY;AAAEZ,KAAC,CAACa,OAAF;AAAc;AAD9B,CADb,E;;;;;;;;;;;AC5CAjkB,MAAM,CAACsC,MAAP,CAAc;AAAC2kB,OAAK,EAAC,MAAIA,KAAX;AAAiBC,YAAU,EAAC,MAAIA,UAAhC;AAA2CC,2BAAyB,EAAC,MAAIA,yBAAzE;AAAmGC,2BAAyB,EAAC,MAAIA,yBAAjI;AAA2JC,8BAA4B,EAAC,MAAIA,4BAA5L;AAAyNC,yBAAuB,EAAC,MAAIA,uBAArP;AAA6QC,aAAW,EAAC,MAAIA,WAA7R;AAAySC,WAAS,EAAC,MAAIA,SAAvT;AAAiUvJ,YAAU,EAAC,MAAIA,UAAhV;AAA2VwJ,UAAQ,EAAC,MAAIA,QAAxW;AAAiXC,WAAS,EAAC,MAAIA,SAA/X;AAAyYC,cAAY,EAAC,MAAIA,YAA1Z;AAAuaC,8BAA4B,EAAC,MAAIA,4BAAxc;AAAqeC,YAAU,EAAC,MAAIA,UAApf;AAA+fC,YAAU,EAAC,MAAIA;AAA9gB,CAAd;AAAyiB,IAAI/nB,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;AAAqD,IAAI6nB,IAAJ;AAAS/nB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAAC8nB,MAAI,CAAC7nB,CAAD,EAAG;AAAC6nB,QAAI,GAAC7nB,CAAL;AAAO;;AAAhB,CAA1C,EAA4D,CAA5D;AAA+D,IAAI8nB,qBAAJ;AAA0BhoB,MAAM,CAACC,IAAP,CAAY,oBAAZ,EAAiC;AAAC+nB,uBAAqB,CAAC9nB,CAAD,EAAG;AAAC8nB,yBAAqB,GAAC9nB,CAAtB;AAAwB;;AAAlD,CAAjC,EAAqF,CAArF;AAAwF,IAAIE,MAAJ;AAAWJ,MAAM,CAACC,IAAP,CAAY,sCAAZ,EAAmD;AAACG,QAAM,CAACF,CAAD,EAAG;AAACE,UAAM,GAACF,CAAP;AAAS;;AAApB,CAAnD,EAAyE,CAAzE;AAA4E,IAAI0E,UAAJ;AAAe5E,MAAM,CAACC,IAAP,CAAY,4CAAZ,EAAyD;AAAC2E,YAAU,CAAC1E,CAAD,EAAG;AAAC0E,cAAU,GAAC1E,CAAX;AAAa;;AAA5B,CAAzD,EAAuF,CAAvF;AAA0F,IAAIqJ,UAAJ,EAAeid,cAAf,EAA8BC,WAA9B;AAA0CzmB,MAAM,CAACC,IAAP,CAAY,0BAAZ,EAAuC;AAACsJ,YAAU,CAACrJ,CAAD,EAAG;AAACqJ,cAAU,GAACrJ,CAAX;AAAa,GAA5B;;AAA6BsmB,gBAAc,CAACtmB,CAAD,EAAG;AAACsmB,kBAAc,GAACtmB,CAAf;AAAiB,GAAhE;;AAAiEumB,aAAW,CAACvmB,CAAD,EAAG;AAACumB,eAAW,GAACvmB,CAAZ;AAAc;;AAA9F,CAAvC,EAAuI,CAAvI;AAA0I,IAAIye,WAAJ;AAAgB3e,MAAM,CAACC,IAAP,CAAY,mDAAZ,EAAgE;AAAC0e,aAAW,CAACze,CAAD,EAAG;AAACye,eAAW,GAACze,CAAZ;AAAc;;AAA9B,CAAhE,EAAgG,CAAhG;AAAmG,IAAI+nB,iBAAJ;AAAsBjoB,MAAM,CAACC,IAAP,CAAY,oBAAZ,EAAiC;AAACgoB,mBAAiB,CAAC/nB,CAAD,EAAG;AAAC+nB,qBAAiB,GAAC/nB,CAAlB;AAAoB;;AAA1C,CAAjC,EAA6E,CAA7E;AAShyC,MAAM8X,OAAO,GAAG;AAAE,kBAAe;AAAjB,CAAhB;;AACA,MAAMkQ,EAAE,GAAGtJ,OAAO,CAAC,IAAD,CAAlB;;AAGA,IAAIuJ,UAAU,GAAGvJ,OAAO,CAAC,QAAD,CAAxB;;AAEO,SAASqI,KAAT,CAAe/c,GAAf,EAAoBke,WAApB,EAAiClJ,GAAjC,EAAsC;AACzC,MAAGA,GAAH,EAAQP,WAAW,CAAC,aAAD,CAAX;AAER,QAAM0J,QAAQ,GAAGne,GAAG,GAAC,eAArB;AACA,QAAMoe,YAAY,GAAG,CAAC;AAAC,oBAAe;AAAhB,GAAD,CAArB;AACA,QAAMC,aAAa,GAAE;AAAEjI,UAAM,EAAE8H,WAAV;AAAuBpQ,WAAO,EAAEsQ;AAAhC,GAArB;AAEA,QAAMnlB,MAAM,GAAGsjB,WAAW,CAAC4B,QAAD,EAAWE,aAAX,CAA1B;AAEA,MAAGrJ,GAAH,EAAQP,WAAW,CAAC,eAAD,EAAiBxb,MAAjB,CAAX;AACR,QAAMid,UAAU,GAAGjd,MAAM,CAACid,UAA1B;AACA,QAAMoI,SAAS,GAAGrlB,MAAM,CAACxB,IAAzB;AAEA,QAAM8mB,WAAW,GAAGD,SAAS,CAACvgB,MAA9B;AACA8f,MAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB,GAAlB,EAAuBvI,UAAvB;AACA2H,MAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB,SAAlB,EAA6BF,WAA7B;AACA,SAAOD,SAAS,CAAC7mB,IAAjB;AACH;;AAEM,SAASulB,UAAT,CAAoBhd,GAApB,EAAyB0e,IAAzB,EAA+BtP,cAA/B,EAA+CC,WAA/C,EAA4D5X,IAA5D,EAAmEud,GAAnE,EAAwE;AAC3E,MAAGA,GAAH,EAAQP,WAAW,CAAC,qCAAD,CAAX;AAER,QAAMkK,QAAQ,GAAG3e,GAAG,GAAC,gBAArB;AACA,MAAI4e,SAAS,GAAG,EAAhB;;AAEA,MAAGnnB,IAAH,EAAQ;AACJmnB,aAAS,GAAG;AACR,wBAAiBxP,cADT;AAER,qBAAcC,WAFN;AAGR,cAAO3Q,IAAI,CAACC,SAAL,CAAelH,IAAf;AAHC,KAAZ;AAKH,GAND,MAMK;AACDmnB,aAAS,GAAG;AACR,wBAAiBxP,cADT;AAER,qBAAcC;AAFN,KAAZ;AAIH;;AAED,QAAMwP,YAAY,GAAG;AACjB,oBAAe,kBADE;AAEjB,iBAAYH,IAAI,CAACroB,MAFA;AAGjB,oBAAeqoB,IAAI,CAACI;AAHH,GAArB;AAMA,QAAMC,aAAa,GAAG;AAAEtnB,QAAI,EAAEmnB,SAAR;AAAmB9Q,WAAO,EAAE+Q;AAA5B,GAAtB;AACA,QAAMG,WAAW,GAAGzC,WAAW,CAACoC,QAAD,EAAWI,aAAX,CAA/B,CA1B2E,CA4B3E;;AACAlB,MAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB,GAAlB,EAAuBO,WAAW,CAAC9I,UAAnC;AACAzB,aAAW,CAAC,mBAAD,EAAqBuK,WAArB,CAAX;;AACA,MAAGnI,KAAK,CAACoI,OAAN,CAAcD,WAAW,CAACvnB,IAA1B,CAAH,EAAmC;AAC/Bgd,eAAW,CAAC,eAAD,CAAX;AACAuK,eAAW,CAACvnB,IAAZ,CAAiBoE,OAAjB,CAAyBC,OAAO,IAAI;AAChC+hB,UAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB,SAAlB,EAA6B3iB,OAAO,CAACiC,MAArC;AACH,KAFD;AAGH,GALD,MAOI;AACA0W,eAAW,CAAC,YAAD,CAAX;AACJoJ,QAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB,SAAlB,EAA8BO,WAAW,CAACvnB,IAAZ,CAAiBsG,MAA/C;AACC;;AACD,SAAOihB,WAAW,CAACvnB,IAAnB;AACH;;AAEM,SAASwlB,yBAAT,CAAmCjd,GAAnC,EAAwC0e,IAAxC,EAA8CvkB,IAA9C,EAAoD;AACvDsa,aAAW,CAAC,wCAAD,EAA0Cta,IAA1C,CAAX;AACA,QAAM8f,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBgF,6BAAjB,CAAjB;AACA,SAAOjF,QAAQ,CAACja,GAAD,EAAM0e,IAAN,EAAYvkB,IAAZ,CAAf;AACH;;AAED,SAAS+kB,6BAAT,CAAuClf,GAAvC,EAA4C0e,IAA5C,EAAkDvkB,IAAlD,EAAwDzB,QAAxD,EAAiE;AAE7D,MAAIwB,MAAM,GAAG,EAAb;AACA,MAAIilB,OAAO,GAAG,IAAd;AACA,MAAIC,OAAO,GAAG,CAAd;AACA3K,aAAW,CAAC,iCAAD,EAAmCta,IAAnC,CAAX;;AACA,GAAC,SAAeklB,IAAf;AAAA,oCAAsB;AACnB,aAAMF,OAAO,IAAI,EAAEC,OAAF,GAAU,IAA3B,EAAgC;AAAE;AAC9B,YAAG;AACK3K,qBAAW,CAAC,2BAAD,EAA6Bta,IAA7B,CAAX;AACA,gBAAMmlB,qBAAqB,GAAG;AAAC,uBAAW,KAAZ;AAAmB,kBAAK,mBAAxB;AAA6C,sBAAU,mBAAvD;AAA4E,sBAAU,CAACnlB,IAAD,EAAM,CAAN;AAAtF,WAA9B;AACA,gBAAMolB,yBAAyB,GAAG;AAAEb,gBAAI,EAAEA,IAAR;AAAcjnB,gBAAI,EAAE6nB,qBAApB;AAA2CxR,mBAAO,EAAEA;AAApD,WAAlC;AACA,gBAAM0R,uBAAuB,GAAGjD,WAAW,CAACvc,GAAD,EAAMuf,yBAAN,CAA3C;;AAEA,cAAGC,uBAAuB,CAAC/nB,IAAxB,CAA6BwB,MAA7B,CAAoC4M,IAApC,CAAyC,CAAzC,EAA4CC,YAA5C,CAAyDC,MAAzD,KAAkExH,SAArE,EAA+E;AAC3ErE,kBAAM,GAAGslB,uBAAuB,CAAC/nB,IAAxB,CAA6BwB,MAA7B,CAAoC4M,IAApC,CAAyC,CAAzC,EAA4CC,YAA5C,CAAyDC,MAAzD,CAAgE3O,IAAzE;AACH,WAFD,MAGI;AACA8C,kBAAM,GAAGslB,uBAAuB,CAAC/nB,IAAxB,CAA6BwB,MAA7B,CAAoC4M,IAApC,CAAyC,CAAzC,EAA4CC,YAA5C,CAAyDC,MAAzD,CAAgE3O,IAAzE;AACH;;AAED,cAAGooB,uBAAuB,CAAC/nB,IAAxB,CAA6BwB,MAA7B,CAAoC8L,IAApC,KAA2CxG,SAA9C,EAAwD;AACpDkW,uBAAW,CAAC,oBAAkB+K,uBAAuB,CAAC/nB,IAAxB,CAA6BwB,MAA7B,CAAoC8L,IAAvD,CAAX;AACAoa,mBAAO,GAAC,KAAR;AACH,WAhBN,CAiBK;;AACP,SAlBD,CAkBC,OAAM5H,EAAN,EAAS;AACN9C,qBAAW,CAAC,0CAAD,EAA4C2K,OAA5C,CAAX;AACA,wBAAM,IAAIK,OAAJ,CAAYC,OAAO,IAAIC,UAAU,CAACD,OAAD,EAAU,IAAV,CAAjC,CAAN;AACH;AACJ;;AACDjL,iBAAW,CAAC,mDAAD,EAAqDva,MAArD,CAAX;AACAxB,cAAQ,CAAC,IAAD,EAAMwB,MAAN,CAAR;AACH,KA3BA;AAAA,GAAD;AA4BH;;AAEM,SAASgjB,yBAAT,CAAmCld,GAAnC,EAAwC0e,IAAxC,EAA8Cne,OAA9C,EAAsDyU,GAAtD,EAA2D;AAC9D,QAAMiF,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiB0F,8BAAjB,CAAjB;AACA,SAAO3F,QAAQ,CAACja,GAAD,EAAM0e,IAAN,EAAYne,OAAZ,EAAoByU,GAApB,CAAf;AACH;;AAGD,SAAe4K,8BAAf,CAA8C5f,GAA9C,EAAmD0e,IAAnD,EAAyDne,OAAzD,EAAkEyU,GAAlE,EAAuEtc,QAAvE;AAAA,kCAAgF;AAC5E+b,eAAW,CAAC,4DAAD,CAAX;AACA,QAAGO,GAAH,EAAQP,WAAW,CAAC,4JAAD,CAAX;AACR,QAAI0K,OAAO,GAAG,IAAd;AACA,QAAIC,OAAO,GAAG,CAAd;AACA,QAAIS,SAAS,GAAG,IAAhB;AACA,QAAI3lB,MAAM,GAAG,IAAb;AACA,kBAAO,SAAemlB,IAAf;AAAA,sCAAsB;AACzB,eAAMF,OAAO,IAAI,EAAEC,OAAF,GAAU,EAA3B,EAA8B;AAAE;AAE5B3K,qBAAW,CAAC,aAAD,EAAelU,OAAf,CAAX;AACAsf,mBAAS,GAAG3pB,MAAM,CAACsK,OAAP,CAAe;AAAChH,eAAG,EAAE+G;AAAN,WAAf,CAAZ;;AACA,cAAGsf,SAAS,CAAC1lB,IAAV,KAAiBoE,SAApB,EAA8B;AAC1BkW,uBAAW,CAAC,sBAAD,EAAwBoL,SAAS,CAAC1lB,IAAlC,CAAX;AACAglB,mBAAO,GAAG,KAAV;AACH,WAHD,MAII;AACA1K,uBAAW,CAAC,qCAAD,EAAuCoL,SAAS,CAACrmB,GAAjD,CAAX;AACH;;AAED,wBAAM,IAAIimB,OAAJ,CAAYC,OAAO,IAAIC,UAAU,CAACD,OAAD,EAAU,IAAV,CAAjC,CAAN;AACH;AACJ,OAfM;AAAA,KAAD,EAAN;;AAiBA,QAAG;AAEC7B,UAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkBoB,SAAS,CAACrmB,GAA5B,EAAgC+G,OAAhC;AACA,UAAGyU,GAAH,EAAQP,WAAW,CAAC,QAAD,EAAUoL,SAAV,CAAX;AACR3lB,YAAM,GAAG+iB,yBAAyB,CAACjd,GAAD,EAAK0e,IAAL,EAAUmB,SAAS,CAAC1lB,IAApB,CAAlC;AACA0jB,UAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB,OAAKoB,SAAS,CAAC3lB,MAAjC,EAAwCA,MAAxC;AAEA,UAAG8a,GAAH,EAAQP,WAAW,CAAC,SAAD,EAAWva,MAAX,CAAX;AACR2jB,UAAI,CAACW,MAAL,CAAYsB,QAAZ,CAAqB5lB,MAArB,EAA4B,IAA5B;AACA2jB,UAAI,CAACW,MAAL,CAAYuB,OAAZ,CAAoBX,OAApB,EAA4B,EAA5B,EAA+B,+BAA/B;AACA1mB,cAAQ,CAAC,IAAD,EAAMwB,MAAN,CAAR;AACH,KAXD,CAYA,OAAMxC,KAAN,EAAY;AACRgB,cAAQ,CAAChB,KAAD,EAAOwC,MAAP,CAAR;AACH;AACJ,GAvCD;AAAA;;AAyCO,SAASijB,4BAAT,CAAsC6C,QAAtC,EAA+CpO,IAA/C,EAAoDmB,QAApD,EAA6DE,QAA7D,EAAsEgN,aAAtE,EAAoFjL,GAApF,EAAyF;AAC5F,QAAMiF,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBgG,iCAAjB,CAAjB;AACA,SAAOjG,QAAQ,CAAC+F,QAAD,EAAUpO,IAAV,EAAemB,QAAf,EAAwBE,QAAxB,EAAiCgN,aAAjC,EAA+CjL,GAA/C,CAAf;AACH;;AAED,SAASkL,iCAAT,CAA2CF,QAA3C,EAAoDpO,IAApD,EAAyDmB,QAAzD,EAAkEE,QAAlE,EAA2EgN,aAA3E,EAAyFjL,GAAzF,EAA6Ftc,QAA7F,EAAuG;AAEnG+b,aAAW,CAAC,wCAAD,CAAX,CAFmG,CAGnG;;AACA,MAAIkG,MAAM,GAAG,IAAIsD,UAAJ,CAAerM,IAAf,EAAqBoO,QAArB,EAA+B;AACxCG,WAAO,EAAE,KAD+B;AAExCC,aAAS,EAAE,KAF6B;AAGxC3O,SAAK,EAAE;AAHiC,GAA/B,CAAb;AAMAkJ,QAAM,CAAC0F,EAAP,CAAU,SAAV,EAAqB,YAAW;AAC5B5L,eAAW,CAAC,iBAAD,CAAX;AACAkG,UAAM,CAACoC,KAAP,CAAahK,QAAb,EAAuBE,QAAvB;AACA0H,UAAM,CAAC0F,EAAP,CAAU,OAAV,EAAmB,UAAStiB,MAAT,EAAiBuiB,OAAjB,EAA0B;AACzC,UAAIviB,MAAJ,EAAY;AACR0W,mBAAW,CAAC,oBAAD,CAAX;AACAkG,cAAM,CAAC4F,IAAP;AAEA5F,cAAM,CAAC0F,EAAP,CAAU,MAAV,EAAkB,UAAStiB,MAAT,EAAiByiB,QAAjB,EAA2BC,SAA3B,EAAsChpB,IAAtC,EAA4C6oB,OAA5C,EAAqD;AAEnE,cAAIviB,MAAM,KAAK,KAAf,EAAsB;AAClB,kBAAMoN,GAAG,GAAG,gBAAesV,SAA3B;AACA9F,kBAAM,CAAC+F,IAAP;AACAhoB,oBAAQ,CAACyS,GAAD,EAAM,IAAN,CAAR;AACA;AACH,WALD,MAKO;AACH,gBAAG6J,GAAH,EAAQP,WAAW,CAAC,uBAAuB+L,QAAvB,GAAkC,aAAnC,EAAiD,EAAjD,CAAX,CADL,CAGH;;AACA,gBAAIA,QAAQ,GAAG,CAAf,EAAiB;AACb7F,oBAAM,CAACgG,IAAP,CAAY,CAAZ;AACAhG,oBAAM,CAAC0F,EAAP,CAAU,MAAV,EAAkB,UAAStiB,MAAT,EAAiB0iB,SAAjB,EAA4BG,QAA5B,EAAsCN,OAAtC,EAA+C;AAE7D,oBAAIviB,MAAM,KAAK,IAAf,EAAqB;AACjB,sBAAGiX,GAAH,EAAQP,WAAW,CAAC,kBAAkBgM,SAAnB,CAAX,CADS,CAGjB;;AACA,sBAAI5S,IAAI,GAAIiQ,qBAAqB,CAAC8C,QAAD,CAAjC;;AACA,sBAAG5C,EAAE,CAACgC,QAAH,OAAgB,SAAnB,EAA6B;AAAE;AACvBnS,wBAAI,GAAGgT,UAAU,CAAChT,IAAD,EAAM,mBAAN,EAA0B,kBAA1B,CAAjB,CADqB,CAC4C;AACxE;;AACDgQ,sBAAI,CAACiD,MAAL,CAAYjT,IAAI,CAACzJ,OAAL,CAAa6b,aAAb,CAAZ,EAAyCjf,EAAzC,CAA4C+f,GAA5C,CAAgDtC,KAAhD,CAAsD,CAAC,CAAvD;AACA,wBAAMuC,QAAQ,GAAInT,IAAI,CAACxJ,SAAL,CAAewJ,IAAI,CAACzJ,OAAL,CAAa6b,aAAb,CAAf,EAA2CpS,IAAI,CAACzJ,OAAL,CAAa,GAAb,EAAiByJ,IAAI,CAACzJ,OAAL,CAAa6b,aAAb,CAAjB,CAA3C,CAAlB;AAEApC,sBAAI,CAACiD,MAAL,CAAYE,QAAZ,EAAsBhgB,EAAtB,CAAyB+f,GAAzB,CAA6BE,EAA7B,CAAgCC,IAAhC;AACA,sBAAGlM,GAAG,IAAI,EAAEA,GAAG,KAAG,IAAR,CAAV,EAAwB6I,IAAI,CAACiD,MAAL,CAAYjT,IAAI,CAACzJ,OAAL,CAAa4Q,GAAb,CAAZ,EAA+BhU,EAA/B,CAAkC+f,GAAlC,CAAsCtC,KAAtC,CAA4C,CAAC,CAA7C;AACxB,wBAAM0C,WAAW,GAAG;AAAC,gCAAWH,QAAZ;AAAqB,4BAAOnT;AAA5B,mBAApB;AAEA8M,wBAAM,CAACyG,IAAP,CAAYX,SAAZ;AACA9F,wBAAM,CAAC0F,EAAP,CAAU,MAAV,EAAkB,UAAStiB,MAAT,EAAiB0iB,SAAjB,EAA4BhpB,IAA5B,EAAkC6oB,OAAlC,EAA2C;AACzD3F,0BAAM,CAAC0G,IAAP;AAEA1G,0BAAM,CAAC2G,GAAP;AACA3G,0BAAM,GAAG,IAAT;AACAjiB,4BAAQ,CAAC,IAAD,EAAMsoB,QAAN,CAAR;AACH,mBAND;AAQH,iBAxBD,MAwBO;AACH,wBAAM7V,GAAG,GAAG,+BAA8BsV,SAA1C;AACA9F,wBAAM,CAAC+F,IAAP;AACA/F,wBAAM,CAAC2G,GAAP;AACA3G,wBAAM,GAAG,IAAT;AACAjiB,0BAAQ,CAACyS,GAAD,EAAM,IAAN,CAAR;AACA;AACH;AACJ,eAlCD;AAmCH,aArCD,MAsCI;AACA,oBAAMA,GAAG,GAAG,eAAZ;AACAzS,sBAAQ,CAACyS,GAAD,EAAM,IAAN,CAAR;AACAwP,oBAAM,CAAC0G,IAAP;AACA1G,oBAAM,CAAC2G,GAAP;AACA3G,oBAAM,GAAG,IAAT;AACA;AACH;AACJ;AACJ,SA1DD;AA4DH,OAhED,MAgEO;AACH,cAAMxP,GAAG,GAAG,mBAAZ;AACAzS,gBAAQ,CAACyS,GAAD,EAAM,IAAN,CAAR;AACAwP,cAAM,CAAC0G,IAAP;AACA1G,cAAM,CAAC2G,GAAP;AACA3G,cAAM,GAAG,IAAT;AACA;AACH;AACJ,KAzED;AA0EH,GA7ED;AA8EH;;AAED,SAASkG,UAAT,CAAoBU,GAApB,EAAyB/qB,IAAzB,EAA+B6W,OAA/B,EAAwC;AACpC,SAAOkU,GAAG,CAAClU,OAAJ,CAAY,IAAImU,MAAJ,CAAWhrB,IAAX,EAAiB,GAAjB,CAAZ,EAAmC6W,OAAnC,CAAP;AACH;;AAEM,SAAS+P,uBAAT,CAAiC4C,QAAjC,EAA0CpO,IAA1C,EAA+CmB,QAA/C,EAAwDE,QAAxD,EAAiE+B,GAAjE,EAAsE;AACzE,QAAMiF,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBuH,2BAAjB,CAAjB;AACA,SAAOxH,QAAQ,CAAC+F,QAAD,EAAUpO,IAAV,EAAemB,QAAf,EAAwBE,QAAxB,EAAiC+B,GAAjC,CAAf;AACH;;AAED,SAASyM,2BAAT,CAAqCzB,QAArC,EAA8CpO,IAA9C,EAAmDmB,QAAnD,EAA4DE,QAA5D,EAAqE+B,GAArE,EAAyEtc,QAAzE,EAAmF;AAE/E+b,aAAW,CAAC,qCAAD,CAAX,CAF+E,CAG/E;;AACA,MAAIkG,MAAM,GAAG,IAAIsD,UAAJ,CAAerM,IAAf,EAAqBoO,QAArB,EAA+B;AACxCG,WAAO,EAAE,KAD+B;AAExCC,aAAS,EAAE,KAF6B;AAGxC3O,SAAK,EAAE;AAHiC,GAA/B,CAAb;AAMAkJ,QAAM,CAAC0F,EAAP,CAAU,SAAV,EAAqB,YAAW;AAC5B5L,eAAW,CAAC,iBAAD,CAAX;AACAkG,UAAM,CAACoC,KAAP,CAAahK,QAAb,EAAuBE,QAAvB;AACA0H,UAAM,CAAC0F,EAAP,CAAU,OAAV,EAAmB,UAAStiB,MAAT,EAAiBuiB,OAAjB,EAA0B;AACzC,UAAIviB,MAAJ,EAAY;AACR0W,mBAAW,CAAC,oBAAD,CAAX;AACAkG,cAAM,CAAC4F,IAAP;AAEA5F,cAAM,CAAC0F,EAAP,CAAU,MAAV,EAAkB,UAAStiB,MAAT,EAAiByiB,QAAjB,EAA2BC,SAA3B,EAAsChpB,IAAtC,EAA4C6oB,OAA5C,EAAqD;AAEnE,cAAIviB,MAAM,KAAK,KAAf,EAAsB;AAClB,kBAAMoN,GAAG,GAAG,gBAAesV,SAA3B;AACA9F,kBAAM,CAAC+F,IAAP;AACAhoB,oBAAQ,CAACyS,GAAD,EAAM,IAAN,CAAR;AACA;AACH,WALD,MAKO;AACH,gBAAG6J,GAAH,EAAQP,WAAW,CAAC,uBAAuB+L,QAAvB,GAAkC,aAAnC,EAAiD,EAAjD,CAAX,CADL,CAGH;;AACA,gBAAIA,QAAQ,GAAG,CAAf,EAAiB;AACb,mBAAI,IAAIkB,CAAC,GAAG,CAAZ,EAAcA,CAAC,IAAElB,QAAjB,EAA0BkB,CAAC,EAA3B,EAA8B;AAC1B/G,sBAAM,CAACyG,IAAP,CAAYM,CAAC,GAAC,CAAd;AACA/G,sBAAM,CAAC0F,EAAP,CAAU,MAAV,EAAkB,UAAStiB,MAAT,EAAiB0iB,SAAjB,EAA4BhpB,IAA5B,EAAkC6oB,OAAlC,EAA2C;AACzD7L,6BAAW,CAAC,mBAAiBiN,CAAC,GAAC,CAAnB,IAAsB,UAAtB,GAAiC3jB,MAAlC,CAAX;;AACD,sBAAG2jB,CAAC,IAAElB,QAAQ,GAAC,CAAf,EAAiB;AACb7F,0BAAM,CAAC0G,IAAP;AAEA1G,0BAAM,CAAC2G,GAAP;AACA3G,0BAAM,GAAG,IAAT;AACA,wBAAG3F,GAAH,EAAQP,WAAW,CAAC,oBAAD,CAAX;AACR/b,4BAAQ,CAAC,IAAD,EAAM,oBAAN,CAAR;AACH;AACH,iBAVD;AAWH;AACJ,aAfD,MAgBI;AACA,oBAAMyS,GAAG,GAAG,eAAZ;AACAzS,sBAAQ,CAAC,IAAD,EAAOyS,GAAP,CAAR,CAFA,CAEqB;;AACrBwP,oBAAM,CAAC0G,IAAP;AACA1G,oBAAM,CAAC2G,GAAP;AACA3G,oBAAM,GAAG,IAAT;AACA;AACH;AACJ;AACJ,SApCD;AAsCH,OA1CD,MA0CO;AACH,cAAMxP,GAAG,GAAG,mBAAZ;AACAzS,gBAAQ,CAACyS,GAAD,EAAM,IAAN,CAAR;AACAwP,cAAM,CAAC0G,IAAP;AACA1G,cAAM,CAAC2G,GAAP;AACA3G,cAAM,GAAG,IAAT;AACA;AACH;AACJ,KAnDD;AAoDH,GAvDD;AAwDH;;AAEM,SAAS0C,WAAT,CAAqBA,WAArB,EAAkC;AACrC,QAAMpD,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiByH,YAAjB,CAAjB;AACA,SAAO1H,QAAQ,CAACoD,WAAD,CAAf;AACH;;AAED,SAASsE,YAAT,CAAsBtE,WAAtB,EAAkC3kB,QAAlC,EAA2C;AACvC+b,aAAW,CAAC,iBAAD,EAAmB4I,WAAnB,CAAX;AACA,QAAMuE,oBAAoB,GAAGviB,UAAU,CAACge,WAAD,EAAa,EAAb,CAAvC;;AACA,MAAG;AACHQ,QAAI,CAACiD,MAAL,CAAYc,oBAAoB,CAAC9gB,OAAjC,EAA0CE,EAA1C,CAA6C6gB,IAA7C,CAAkDC,MAAlD,CAAyD,uBAAzD;AACAjE,QAAI,CAACiD,MAAL,CAAYc,oBAAoB,CAAC9gB,OAAjC,EAA0CE,EAA1C,CAA6C6gB,IAA7C,CAAkDC,MAAlD,CAAyD,gCAAzD;AACAjE,QAAI,CAACiD,MAAL,CAAYc,oBAAoB,CAAC9gB,OAAjC,EAA0CE,EAA1C,CAA6C6gB,IAA7C,CAAkDC,MAAlD,CAAyD,iCAAzD;AACAjE,QAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB,GAAlB,EAAuBmD,oBAAoB,CAAC1L,UAA5C;AACAxd,YAAQ,CAAC,IAAD,EAAM,IAAN,CAAR;AACC,GAND,CAOA,OAAMqpB,CAAN,EAAQ;AACJrpB,YAAQ,CAACqpB,CAAD,EAAG,IAAH,CAAR;AACH;AAEJ;;AAEM,SAASzE,SAAT,CAAmB0E,OAAnB,EAA4BC,WAA5B,EAAyCC,cAAzC,EAAyDC,YAAzD,EAAuE9S,WAAvE,EAAoFD,cAApF,EAAmGlV,MAAnG,EAA2G8a,GAA3G,EAAgH;AACnH,QAAMiF,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBkI,UAAjB,CAAjB;AACA,SAAOnI,QAAQ,CAAC+H,OAAD,EAAUC,WAAV,EAAuBC,cAAvB,EAAuCC,YAAvC,EAAqD9S,WAArD,EAAkED,cAAlE,EAAiFlV,MAAjF,EAAyF8a,GAAzF,CAAf;AACH;;AAGD,SAAeoN,UAAf,CAA0BJ,OAA1B,EAAmCC,WAAnC,EAAgDC,cAAhD,EAAgEC,YAAhE,EAA8E9S,WAA9E,EAA2FD,cAA3F,EAA0GlV,MAA1G,EAAkH8a,GAAlH,EAAuHtc,QAAvH;AAAA,kCAAgI;AAC5H,QAAI2pB,kBAAkB,GAAEjT,cAAxB;;AACA,QAAGyH,KAAK,CAACoI,OAAN,CAAc7P,cAAd,CAAH,EAAiC;AAC7BiT,wBAAkB,GAACjT,cAAc,CAAC,CAAD,CAAjC;AACH;;AACD,UAAMkT,SAAS,GAAGN,OAAO,GAAC,uBAA1B;AACA,UAAMvR,oBAAoB,GAAG/V,UAAU,CAAC8F,OAAX,CAAmB;AAACrE,WAAK,EAAEkmB;AAAR,KAAnB,EAAgD/lB,SAA7E;AACA,QAAIimB,YAAY,GAAE,EAAlB;AACA,QAAIC,YAAY,GAAE,EAAlB;AAEA,UAAMC,UAAU,GAAG;AACfrT,oBAAc,EAAEiT,kBADD;AAEfhT,iBAAW,EAAEA,WAFE;AAGf5N,aAAO,EAAEvH,MAHM;AAIfuW,0BAAoB,EAAEA;AAJP,KAAnB;AAOA,UAAMiS,aAAa,GAAG;AAClB,sBAAe,kBADG;AAElB,mBAAYT,WAAW,CAAC5rB,MAFN;AAGlB,sBAAe4rB,WAAW,CAACnD;AAHT,KAAtB;AAKA,QAAIK,OAAO,GAAG,IAAd;AACA,QAAIC,OAAO,GAAG,CAAd;AAEA,kBAAO,SAAeC,IAAf;AAAA,sCAAsB;AACzB,eAAMF,OAAO,IAAI,EAAEC,OAAF,GAAU,EAA3B,EAA8B;AAAE;AAC5B,cAAG;AACC3K,uBAAW,CAAC,2BAAD,EAA8B;AAAChd,kBAAI,EAACgrB;AAAN,aAA9B,CAAX;AACA,kBAAME,cAAc,GAAG;AAAElrB,kBAAI,EAAEgrB,UAAR;AAAoB3U,qBAAO,EAAE4U;AAA7B,aAAvB;AACAH,wBAAY,GAAGjG,cAAc,CAACgG,SAAD,EAAYK,cAAZ,CAA7B;AACAlO,uBAAW,CAAC,wBAAD,EAA0B;AAAC1W,oBAAM,EAACwkB,YAAY,CAAC9qB,IAAb,CAAkBsG,MAA1B;AAAiCkZ,iBAAG,EAACsL,YAAY,CAAC9qB,IAAb,CAAkBA,IAAlB,CAAuBwf;AAA5D,aAA1B,CAAX;AACAuL,wBAAY,GAAGD,YAAY,CAACrM,UAA5B;AACA,gBAAGqM,YAAY,CAAC9qB,IAAb,CAAkBA,IAAlB,CAAuBwf,GAAvB,KAA6B,IAAhC,EAAsCkI,OAAO,GAAG,KAAV;AAEzC,WARD,CAQC,OAAM5H,EAAN,EAAU;AACP9C,uBAAW,CAAC,8CAAD,EAAgD8C,EAAhD,CAAX,CADO,CAEP;AACA;AACH,WAZD,SAaO;AACHwG,6BAAiB,CAACmE,cAAD,EAAiBC,YAAjB,EAA+BS,MAAM,CAACC,YAAtC,EAAoD,CAApD,EAAuD,IAAvD,CAAjB;AACA,0BAAM,IAAIpD,OAAJ,CAAYC,OAAO,IAAIC,UAAU,CAACD,OAAD,EAAU,IAAV,CAAjC,CAAN;AACH;AACJ;AAEJ,OArBM;AAAA,KAAD,EAAN;;AAsBI,QAAG;AACH7B,UAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB+D,YAAlB,EAA+B,GAA/B;AACA3E,UAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB8D,YAAY,CAAC9qB,IAAb,CAAkBA,IAAlB,CAAuBwf,GAAzC,EAA6C,IAA7C;AACA4G,UAAI,CAACW,MAAL,CAAYuB,OAAZ,CAAoBX,OAApB,EAA4B,EAA5B;AACA1mB,cAAQ,CAAC,IAAD,EAAM,IAAN,CAAR;AACC,KALD,CAMA,OAAMhB,KAAN,EAAY;AACZgB,cAAQ,CAAChB,KAAD,EAAO,KAAP,CAAR;AACC;AACR,GAxDD;AAAA;;AA0DO,SAASqc,UAAT,CAAoB/T,GAApB,EAAwB0e,IAAxB,EAA6B3L,QAA7B,EAAsCnR,WAAtC,EAAkDoT,GAAlD,EAAsD;AACzD,QAAM8N,WAAW,GAAG;AAChB,oBAAe,kBADC;AAEhB,iBAAYpE,IAAI,CAACroB,MAFD;AAGhB,oBAAeqoB,IAAI,CAACI;AAHJ,GAApB;AAKA,QAAMvc,YAAY,GAAG;AACjB,eAAW,gBAAcwQ,QADR;AAEjB,gBAAY,uCAFK;AAGjB,kBAAeA,QAAQ,GAAC,oBAHP;AAIjB,mBAAenR;AAJE,GAArB;AAMA,QAAMmhB,QAAQ,GAAG/iB,GAAG,GAAC,eAArB;AACA,QAAMgjB,QAAQ,GAAG;AAAC,gBAAWjQ,QAAZ;AAAqB,aAAQA,QAAQ,GAAC,oBAAtC;AAA2D,gBAAW,UAAtE;AAAiF,oBAAexQ;AAAhG,GAAjB;AAEA,QAAM0gB,YAAY,GAAE;AAAExrB,QAAI,EAAEurB,QAAR;AAAkBlV,WAAO,EAAEgV;AAA3B,GAApB;AACA,MAAG9N,GAAH,EAAQP,WAAW,CAAC,aAAD,EAAgBwO,YAAhB,CAAX;AACR,MAAIC,GAAG,GAAG3G,WAAW,CAACwG,QAAD,EAAUE,YAAV,CAArB;AACA,MAAGjO,GAAH,EAAQP,WAAW,CAAC,UAAD,EAAYyO,GAAZ,CAAX;AACRrF,MAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB,GAAlB,EAAuByE,GAAG,CAAChN,UAA3B;AACA2H,MAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkByE,GAAG,CAACzrB,IAAJ,CAASsG,MAA3B,EAAkC,SAAlC;AACA,SAAOmlB,GAAG,CAACzrB,IAAJ,CAASA,IAAT,CAAcwG,MAArB;AACH;;AAEM,SAASsf,QAAT,CAAkBlnB,MAAlB,EAAyB;AAC5B,QAAM6sB,GAAG,GAAG3hB,QAAQ,CAACe,KAAT,CAAe9B,OAAf,CAAuB;AAAChH,OAAG,EAACnD;AAAL,GAAvB,CAAZ;AACAwnB,MAAI,CAACiD,MAAL,CAAYoC,GAAZ,EAAiBliB,EAAjB,CAAoB+f,GAApB,CAAwBE,EAAxB,CAA2B1iB,SAA3B;AACA,SAAO2kB,GAAP;AACH;;AAEM,SAAS1F,SAAT,CAAmBjd,OAAnB,EAA2ByU,GAA3B,EAA+B;AAClC,QAAMkO,GAAG,GAAGhtB,MAAM,CAACsK,OAAP,CAAe;AAAChH,OAAG,EAAC+G;AAAL,GAAf,CAAZ;AACA,MAAGyU,GAAH,EAAOP,WAAW,CAACyO,GAAD,EAAK3iB,OAAL,CAAX;AACPsd,MAAI,CAACiD,MAAL,CAAYoC,GAAZ,EAAiBliB,EAAjB,CAAoB+f,GAApB,CAAwBE,EAAxB,CAA2B1iB,SAA3B;AACA,SAAO2kB,GAAP;AACH;;AAEM,SAASzF,YAAT,CAAsBzd,GAAtB,EAA0B0e,IAA1B,EAA+B1J,GAA/B,EAAmC;AACtC,QAAM8N,WAAW,GAAG;AAChB,oBAAe,kBADC;AAEhB,iBAAYpE,IAAI,CAACroB,MAFD;AAGhB,oBAAeqoB,IAAI,CAACI;AAHJ,GAApB;AAMA,QAAMqE,SAAS,GAAGnjB,GAAG,GAAC,gBAAtB;AACA,QAAMijB,YAAY,GAAE;AAACnV,WAAO,EAAEgV;AAAV,GAApB;AACA,MAAII,GAAG,GAAG5G,cAAc,CAAC6G,SAAD,EAAWF,YAAX,CAAxB;AACA,MAAGjO,GAAH,EAAQP,WAAW,CAACyO,GAAD,EAAKlO,GAAL,CAAX;AACR6I,MAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB,GAAlB,EAAuByE,GAAG,CAAChN,UAA3B;AACA2H,MAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkByE,GAAG,CAACzrB,IAAJ,CAASsG,MAA3B,EAAkC,SAAlC;AACA,SAAOmlB,GAAG,CAACzrB,IAAJ,CAASA,IAAhB;AACH;;AAGM,SAASimB,4BAAT,CAAsCwE,cAAtC,EAAqDC,YAArD,EAAmEiB,YAAnE,EAAgFC,cAAhF,EAA+FC,UAA/F,EAA0GlU,cAA1G,EAAyHC,WAAzH,EAAqIkU,YAArI,EAAkJC,sBAAlJ,EAA0KC,sBAA1K,EAAkMzO,GAAlM,EAAuM;AAC1M,QAAMiF,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBwJ,gCAAjB,CAAjB;AACA,SAAOzJ,QAAQ,CAACiI,cAAD,EAAgBC,YAAhB,EAA8BiB,YAA9B,EAA2CC,cAA3C,EAA0DC,UAA1D,EAAsElU,cAAtE,EAAqFC,WAArF,EAAiGkU,YAAjG,EAA8GC,sBAA9G,EAAsIC,sBAAtI,EAA8JzO,GAA9J,CAAf;AACH;;AAGD,SAAe0O,gCAAf,CAAgDxB,cAAhD,EAA+DC,YAA/D,EAA6EiB,YAA7E,EAA0FC,cAA1F,EACgDC,UADhD,EAC4DlU,cAD5D,EAC2EuU,cAD3E,EAC0FJ,YAD1F,EACuGC,sBADvG,EAC+HC,sBAD/H,EACuJzO,GADvJ,EAC4Jtc,QAD5J;AAAA,kCACsK;AAClK,QAAGsc,GAAH,EAAQP,WAAW,CAAC,gBAAD,EAAkByN,cAAlB,CAAX;AACR,QAAGlN,GAAH,EAAQP,WAAW,CAAC,cAAD,EAAgB0N,YAAhB,CAAX;AACR,QAAGnN,GAAH,EAAQP,WAAW,CAAC,cAAD,EAAgB2O,YAAhB,CAAX;AACR,QAAGpO,GAAH,EAAQP,WAAW,CAAC,gBAAD,EAAkB4O,cAAlB,CAAX;AACR,QAAGrO,GAAH,EAAQP,WAAW,CAAC,YAAD,EAAc6O,UAAd,CAAX;AACR,QAAGtO,GAAH,EAAQP,WAAW,CAAC,gBAAD,EAAkBrF,cAAlB,CAAX;AACR,QAAG4F,GAAH,EAAQP,WAAW,CAAC,gBAAD,EAAkBkP,cAAlB,CAAX;AACR,QAAG3O,GAAH,EAAQP,WAAW,CAAC,cAAD,EAAgB8O,YAAhB,CAAX;AACR,QAAGvO,GAAH,EAAQP,WAAW,CAAC,wBAAD,EAA0B+O,sBAA1B,CAAX;AACR,QAAGxO,GAAH,EAAQP,WAAW,CAAC,wBAAD,EAA0BgP,sBAA1B,CAAX;AAGR,QAAIpU,WAAW,GAAGsU,cAAlB;AACA,QAAG3O,GAAH,EAAQP,WAAW,CAAC,gCAAD,CAAX;AACR,QAAImP,kBAAkB,GAAG5G,UAAU,CAACoG,YAAD,EAAeC,cAAf,EAA+BjU,cAA/B,EAA+CC,WAA/C,EAA4DkU,YAA5D,EAA0E,IAA1E,CAAnC;AACA,QAAIM,eAAe,GAAGD,kBAAtB;;AAEA,QAAG/M,KAAK,CAACoI,OAAN,CAAc0E,cAAd,CAAH,EAAiC;AAAe;AAC5C,UAAG3O,GAAH,EAAQP,WAAW,CAAC,cAAD,EAAgBmP,kBAAkB,CAAC,CAAD,CAAlC,CAAX;AACRC,qBAAe,GAAGD,kBAAkB,CAAC,CAAD,CAApC;AACAvU,iBAAW,GAAGsU,cAAc,CAAC,CAAD,CAA5B;AACH,KAtBiK,CAwBlK;;;AACA5F,qBAAiB,CAACmE,cAAD,EAAiBC,YAAjB,EAA+BS,MAAM,CAACC,YAAtC,EAAoD,CAApD,EAAuD,IAAvD,CAAjB;AACA,QAAI1D,OAAO,GAAG,IAAd;AACA,QAAIC,OAAO,GAAG,CAAd;AACA,QAAI0E,aAAa,GAAG,EAApB;AACAA,iBAAa,iBAAS,SAAezE,IAAf;AAAA,sCAAsB;AACxC,eAAMF,OAAO,IAAI,EAAEC,OAAF,GAAU,EAA3B,EAA8B;AAAE;AAC5B,cAAG;AACC3K,uBAAW,CAAC,sCAAD,EAAwCuJ,EAAE,CAACgC,QAAH,EAAxC,CAAX;AACA,kBAAM+D,YAAY,GAAG5G,4BAA4B,CAAEa,EAAE,CAACgC,QAAH,MAAe,SAAhB,GAA2B,MAA3B,GAAkC,WAAnC,EAAgD,GAAhD,EAAqDwD,sBAArD,EAA6EC,sBAA7E,EAAqGH,UAArG,EAAiH,KAAjH,CAAjD;AACA7O,uBAAW,CAAC,yBAAD,EAA2BsP,YAA3B,CAAX;;AACA,gBAAGA,YAAY,IAAE,IAAjB,EAAsB;AAAC5E,qBAAO,GAAC,KAAR;AACvB9B,yBAAW,CAAC0G,YAAD,CAAX;AACAD,2BAAa,GAACC,YAAd;AACAtP,yBAAW,CAAC,WAAD,CAAX;AACA,qBAAOsP,YAAP;AACC;AACJ,WAVD,CAUC,OAAMxM,EAAN,EAAS;AACN9C,uBAAW,CAAC,0CAAD,EAA4C2K,OAA5C,CAAX;AACA,0BAAM,IAAIK,OAAJ,CAAYC,OAAO,IAAIC,UAAU,CAACD,OAAD,EAAU,IAAV,CAAjC,CAAN;AACH;AACJ;AAEJ,OAlBqB;AAAA,KAAD,EAAR,CAAb;;AAoBA,QAAG1B,EAAE,CAACgC,QAAH,OAAgB,SAAnB,EAA6B;AAAE;AACvBvL,iBAAW,CAAC,gFAAD,CAAX;AACA/b,cAAQ,CAAC,IAAD,EAAO;AAACqF,cAAM,EAAE;AAAT,OAAP,CAAR,CAFqB,CAGtB;AACN,KAJD,MAIK;AACD,UAAI7D,MAAM,GAAC,IAAX;;AACA,UAAG;AACC2jB,YAAI,CAACW,MAAL,CAAYuB,OAAZ,CAAoBX,OAApB,EAA4B,EAA5B,EADD,CAEC;;AACA,cAAMllB,MAAM,GAAGgjB,yBAAyB,CAACgF,cAAD,EAAgBC,YAAhB,EAA6B0B,eAAe,CAACpsB,IAAhB,CAAqByG,EAAlD,EAAqD,IAArD,CAAxC;AACA,YAAG8W,GAAH,EAAQP,WAAW,CAAC,YAAD,EAAcva,MAAd,CAAX;AACR6jB,yBAAiB,CAACmE,cAAD,EAAiBC,YAAjB,EAA+BS,MAAM,CAACC,YAAtC,EAAoD,CAApD,EAAuD,IAAvD,CAAjB;AACApO,mBAAW,CAAC,qBAAD,CAAX;;AAEA,YAAGoC,KAAK,CAACoI,OAAN,CAAc0E,cAAd,CAAH,EAAiC;AAC7B,eAAK,IAAI3pB,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG2pB,cAAc,CAAC3hB,MAA3C,EAAmDhI,KAAK,EAAxD,EAA4D;AACxD,gBAAIgqB,KAAK,GAAGhqB,KAAK,IAAE,CAAP,GAAWE,MAAX,GAAoBA,MAAM,GAAC,GAAP,GAAYF,KAA5C,CADwD,CACJ;;AACpDya,uBAAW,CAAC,mBAAD,EAAqBuP,KAArB,CAAX;AACJ1G,qBAAS,CAAC8F,YAAD,EAAeC,cAAf,EAA+BnB,cAA/B,EAA+CC,YAA/C,EAA6DwB,cAAc,CAAC3pB,KAAD,CAA3E,EAAoFoV,cAApF,EAAoG4U,KAApG,EAA2G,IAA3G,CAAT;AACC;AACJ,SAND,MAOI;AACA1G,mBAAS,CAAC8F,YAAD,EAAeC,cAAf,EAA+BnB,cAA/B,EAA+CC,YAA/C,EAA6D9S,WAA7D,EAA0ED,cAA1E,EAA0FlV,MAA1F,EAAkG,IAAlG,CAAT,CADA,CACkH;AACrH;;AACDua,mBAAW,CAAC,oBAAD,CAAX,CAlBD,CAmBC;;AACA/b,gBAAQ,CAAC,IAAD,EAAO;AAACb,eAAK,EAAEgsB,eAAR;AAAyB3pB,gBAAM,EAAEA,MAAjC;AAAwCmjB,qBAAW,EAAEyG;AAArD,SAAP,CAAR;AACH,OArBD,CAsBA,OAAMpsB,KAAN,EAAY;AACRgB,gBAAQ,CAAChB,KAAD,EAAQ;AAACG,eAAK,EAAEgsB,eAAR;AAAyB3pB,gBAAM,EAAEA;AAAjC,SAAR,CAAR;AACH;AACJ;AAGJ,GApFD;AAAA;;AAsFO,SAASyjB,UAAT,CAAoB3d,GAApB,EAAwB0e,IAAxB,EAA6BuF,QAA7B,EAAsC1hB,YAAtC,EAAmDyS,GAAnD,EAAuD;AAC1D,QAAM8N,WAAW,GAAG;AAChB,oBAAe,kBADC;AAEhB,iBAAYpE,IAAI,CAACroB,MAFD;AAGhB,oBAAeqoB,IAAI,CAACI;AAHJ,GAApB;AAMA,QAAMkE,QAAQ,GAAG;AAAC,oBAAezgB;AAAhB,GAAjB;AACA,MAAGyS,GAAH,EAAQP,WAAW,CAAC,MAAD,EAASzU,GAAT,CAAX;AACR,QAAM+iB,QAAQ,GAAG/iB,GAAG,GAAC,gBAAJ,GAAqBikB,QAAtC;AACA,QAAMhB,YAAY,GAAE;AAAExrB,QAAI,EAAEurB,QAAR;AAAkBlV,WAAO,EAAEgV;AAA3B,GAApB;AACA,MAAG9N,GAAH,EAAQP,WAAW,CAAC,aAAD,EAAgBwO,YAAhB,CAAX;AACR,MAAIC,GAAG,GAAG1G,IAAI,CAACxF,GAAL,CAAS+L,QAAT,EAAkBE,YAAlB,CAAV;AACA,MAAGjO,GAAH,EAAQP,WAAW,CAAC,UAAD,EAAYyO,GAAZ,CAAX;AACRrF,MAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB,GAAlB,EAAuByE,GAAG,CAAChN,UAA3B;AACA2H,MAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkByE,GAAG,CAACzrB,IAAJ,CAASsG,MAA3B,EAAkC,SAAlC;AACA,QAAMmmB,KAAK,GAAG3iB,QAAQ,CAACe,KAAT,CAAe9B,OAAf,CAAuB;AAAChH,OAAG,EAACyqB;AAAL,GAAvB,EAAuCzhB,OAAvC,CAA+CD,YAA7D;AACA,MAAGyS,GAAH,EAAQP,WAAW,CAAC,eAAD,EAAiBuO,QAAQ,CAACzgB,YAA1B,CAAX;AACR,MAAGyS,GAAH,EAAQP,WAAW,CAAC,gBAAD,EAAkByP,KAAlB,CAAX;AACRrG,MAAI,CAACiD,MAAL,CAAYoD,KAAZ,EAAmBljB,EAAnB,CAAsB+f,GAAtB,CAA0BE,EAA1B,CAA6B1iB,SAA7B;AACAsf,MAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkBuE,QAAQ,CAACzgB,YAAT,CAAsBX,WAAxC,EAAoDsiB,KAAK,CAACtiB,WAA1D;AACA,SAAOsiB,KAAP;AACH;;AAEM,SAAStG,UAAT,GAAqB;AACxBrc,UAAQ,CAACe,KAAT,CAAejJ,MAAf,CACI;AAAC,gBACD;AAAC,aAAM;AAAP;AADA,GADJ;AAKH,C;;;;;;;;;;;ACzlBDvD,MAAM,CAACsC,MAAP,CAAc;AAAC+rB,gBAAc,EAAC,MAAIA,cAApB;AAAmCC,aAAW,EAAC,MAAIA,WAAnD;AAA+DC,+BAA6B,EAAC,MAAIA,6BAAjG;AAA+HC,eAAa,EAAC,MAAIA,aAAjJ;AAA+J7J,eAAa,EAAC,MAAIA,aAAjL;AAA+LsD,mBAAiB,EAAC,MAAIA,iBAArN;AAAuOhhB,YAAU,EAAC,MAAIA,UAAtP;AAAiQwnB,sBAAoB,EAAC,MAAIA,oBAA1R;AAA+SC,6BAA2B,EAAC,MAAIA,2BAA/U;AAA2WC,cAAY,EAAC,MAAIA,YAA5X;AAAyYC,eAAa,EAAC,MAAIA,aAA3Z;AAAyaC,sBAAoB,EAAC,MAAIA,oBAAlc;AAAudC,gBAAc,EAAC,MAAIA,cAA1e;AAAyfC,iBAAe,EAAC,MAAIA,eAA7gB;AAA6hBC,iBAAe,EAAC,MAAIA,eAAjjB;AAAikBC,kBAAgB,EAAC,MAAIA,gBAAtlB;AAAumBC,YAAU,EAAC,MAAIA;AAAtnB,CAAd;AAAipB,IAAIzI,WAAJ;AAAgBzmB,MAAM,CAACC,IAAP,CAAY,0BAAZ,EAAuC;AAACwmB,aAAW,CAACvmB,CAAD,EAAG;AAACumB,eAAW,GAACvmB,CAAZ;AAAc;;AAA9B,CAAvC,EAAuE,CAAvE;AAA0E,IAAI2T,aAAJ,EAAkB8K,WAAlB;AAA8B3e,MAAM,CAACC,IAAP,CAAY,mDAAZ,EAAgE;AAAC4T,eAAa,CAAC3T,CAAD,EAAG;AAAC2T,iBAAa,GAAC3T,CAAd;AAAgB,GAAlC;;AAAmCye,aAAW,CAACze,CAAD,EAAG;AAACye,eAAW,GAACze,CAAZ;AAAc;;AAAhE,CAAhE,EAAkI,CAAlI;AAAqI,IAAI6nB,IAAJ;AAAS/nB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAAC8nB,MAAI,CAAC7nB,CAAD,EAAG;AAAC6nB,QAAI,GAAC7nB,CAAL;AAAO;;AAAhB,CAA1C,EAA4D,CAA5D;AAA+D,IAAIH,MAAJ;AAAWC,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA4B;AAACF,QAAM,CAACG,CAAD,EAAG;AAACH,UAAM,GAACG,CAAP;AAAS;;AAApB,CAA5B,EAAkD,CAAlD;;AAIj+B,MAAMgoB,EAAE,GAAGtJ,OAAO,CAAC,IAAD,CAAlB;;AACA,IAAIuQ,IAAI,GAAIjH,EAAE,CAACgC,QAAH,MAAe,SAAhB,GAA2B,OAA3B,GAAmC,EAA9C;AACA,MAAMlS,OAAO,GAAG;AAAE,kBAAe;AAAjB,CAAhB;;AACA,MAAMX,IAAI,GAAGuH,OAAO,CAAC,eAAD,CAAP,CAAyBvH,IAAtC;;AAEO,SAASgX,cAAT,CAAwBjC,cAAxB,EAAuCgD,YAAvC,EAAoDC,OAApD,EAA4DC,UAA5D,EAAuEpQ,GAAvE,EAA4E;AAAa;AAE5Fd,SAAO,CAACc,GAAR,CAAY,2BAAyBoQ,UAArC;AACAd,eAAa,CAACY,YAAD,EAAeC,OAAf,EAAwBC,UAAxB,EAAoC,IAApC,EAA0CpQ,GAA1C,CAAb;;AACA,MAAI;AACA,UAAMqQ,gBAAgB,GAAGV,oBAAoB,CAAC,OAAD,CAA7C;AACA,UAAMW,YAAY,GAAG5mB,IAAI,CAACuF,KAAL,CAAW6gB,eAAe,CAACO,gBAAD,CAA1B,CAArB;AACA1b,iBAAa,CAAC,mBAAmB2b,YAAY,CAACC,OAAjC,EAA2CC,MAAM,CAACF,YAAY,CAACC,OAAd,CAAN,GAA+B,CAA1E,CAAb;AACA5b,iBAAa,CAAC,iBAAiB2b,YAAY,CAACG,WAA/B,CAAb;;AACA,QAAID,MAAM,CAACF,YAAY,CAACG,WAAd,CAAN,IAAoC,CAAxC,EAA2C;AACvCrB,iBAAW,CAAClC,cAAD,EAAiBiD,OAAjB,EAA0BnQ,GAA1B,CAAX;AACAqP,mCAA6B,CAACa,YAAD,EAAeC,OAAf,EAAwB,OAAxB,EAAiCnQ,GAAjC,CAA7B;AACH;;AAED,QAAIwQ,MAAM,CAACF,YAAY,CAACC,OAAd,CAAN,GAA+B,CAAnC,EAAsC;AAClC5b,mBAAa,CAAC,0DAAD,CAAb;AACAiZ,YAAM,CAACC,YAAP,GAAsBpI,aAAa,CAACyH,cAAD,EAAiBiD,OAAjB,EAA0BnQ,GAA1B,CAAnC;AACA;AACH;AACJ,GAfD,CAeE,OAAOpW,SAAP,EAAkB;AAChB+K,iBAAa,CAAC,6CAAD,CAAb;AACH;;AACDiZ,QAAM,CAACC,YAAP,GAAsBpI,aAAa,CAACyH,cAAD,EAAiBiD,OAAjB,EAA0BnQ,GAA1B,CAAnC;AACA+I,mBAAiB,CAACmE,cAAD,EAAiBiD,OAAjB,EAA0BvC,MAAM,CAACC,YAAjC,EAA+C,GAA/C,CAAjB,CAvB+E,CAuBR;AAE1E;;AACD,SAAS6C,uBAAT,CAAiCC,kBAAjC,EAAoDjtB,QAApD,EAA6D;AACzD,MAAIymB,OAAO,GAAG,IAAd;AACA,MAAIC,OAAO,GAAG,CAAd,CAFyD,CAIzD;;AACA,SAAMD,OAAN,EAAc;AACV,QAAG;AACC,YAAMmG,YAAY,GAAG5mB,IAAI,CAACuF,KAAL,CAAW6gB,eAAe,CAACa,kBAAD,CAA1B,CAArB;AACAlR,iBAAW,CAAC,SAAD,EAAW6Q,YAAX,CAAX;AACA7Q,iBAAW,CAAC,aAAW6Q,YAAY,CAAC3nB,OAAzB,CAAX;AACA8W,iBAAW,CAAC,aAAW6Q,YAAY,CAACC,OAAzB,CAAX;AACA9Q,iBAAW,CAAC,iBAAe6Q,YAAY,CAACG,WAA7B,CAAX;;AACA,UAAGH,YAAY,CAACG,WAAb,KAA2B,CAA9B,EAAgC;AAC5BZ,uBAAe,CAACc,kBAAD,CAAf;AACH;;AACDxG,aAAO,GAAG,KAAV;AACH,KAVD,CAWA,OAAMznB,KAAN,EAAY;AACR+c,iBAAW,CAAC,yEAAD,EAA2E/c,KAA3E,CAAX;;AACA,UAAG;AACCqtB,wBAAgB,CAACY,kBAAD,CAAhB;AACH,OAFD,CAEC,OAAMC,MAAN,EAAa;AACVnR,mBAAW,CAAC,sBAAD,EAAwBmR,MAAxB,CAAX;AACH;;AACD,UAAGxG,OAAO,IAAE,EAAZ,EAAeD,OAAO,GAAC,KAAR;AAClB;;AACDC,WAAO;AACV;;AACD1mB,UAAQ,CAAC,IAAD,EAAOitB,kBAAP,CAAR;AACH;;AAED,SAASE,iCAAT,CAA2CntB,QAA3C,EAAoD;AAChD,QAAMotB,WAAW,GAAGnB,oBAAoB,CAAC,OAAD,CAAxC;AACAxX,MAAI,CAAC,qFAAmF2Y,WAAnF,GAA+F,QAAhG,EAA0G,CAAC/D,CAAD,EAAIgE,MAAJ,EAAYC,MAAZ,KAAsB;AAChIvR,eAAW,CAAC,uDAAD,EAAyD;AAACuR,YAAM,EAACA,MAAR;AAAeD,YAAM,EAACA;AAAtB,KAAzD,CAAX;AACA5Y,QAAI,CAAC,sBAAoB2Y,WAApB,GAAgC,+CAAjC,EAAkF,CAAC/D,CAAD,EAAIgE,MAAJ,EAAYC,MAAZ,KAAsB;AACxGvR,iBAAW,CAAC,sBAAoBqR,WAApB,GAAgC,+CAAjC,EAAiF;AAACE,cAAM,EAACA,MAAR;AAAeD,cAAM,EAACA;AAAtB,OAAjF,CAAX;AACArtB,cAAQ,CAACstB,MAAD,EAASD,MAAT,CAAR;AACH,KAHG,CAAJ;AAKH,GAPG,CAAJ;AAQH;;AAEM,SAAS3B,WAAT,CAAqBpkB,GAArB,EAA0B0e,IAA1B,EAAgC1J,GAAhC,EAAqC;AACxC,MAAGA,GAAH,EAAQP,WAAW,CAAC,2BAAD,EAA6BzU,GAA7B,CAAX;AACR,QAAMimB,kBAAkB,GAAG;AAAC,eAAW,KAAZ;AAAmB,UAAM,gBAAzB;AAA2C,cAAU,gBAArD;AAAuE,cAAU;AAAjF,GAA3B;AACA,QAAMC,sBAAsB,GAAG;AAACxH,QAAI,EAAEA,IAAP;AAAajnB,QAAI,EAAEwuB,kBAAnB;AAAuCnY,WAAO,EAAEA;AAAhD,GAA/B;AACA,QAAMqY,oBAAoB,GAAG5J,WAAW,CAACvc,GAAD,EAAMkmB,sBAAN,CAAxC;AACA,QAAME,oBAAoB,GAAGD,oBAAoB,CAACjQ,UAAlD;AACA2H,MAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB,GAAlB,EAAuB2H,oBAAvB;AACA,MAAGpR,GAAH,EACIP,WAAW,CAAC,uBAAD,EAAyB0R,oBAAzB,CAAX,CARoC,CAQuB;AAClE;;AAEM,SAAS9B,6BAAT,CAAuCrkB,GAAvC,EAA4C0e,IAA5C,EAAkDjU,IAAlD,EAAwDuK,GAAxD,EAA6D;AAChE,MAAGA,GAAH,EAAQP,WAAW,CAAC,sCAAD,CAAX;AACR2P,aAAW,CAACpkB,GAAD,EAAM0e,IAAN,EAAY1J,GAAZ,CAAX;AAEA,QAAMiR,kBAAkB,GAAG;AAAC,eAAW,KAAZ;AAAmB,UAAK,SAAxB;AAAmC,cAAU,SAA7C;AAAwD,cAAU,CAAC,OAAD,EAAS,QAAT;AAAlE,GAA3B;AACA,QAAMC,sBAAsB,GAAG;AAAExH,QAAI,EAAEA,IAAR;AAAcjnB,QAAI,EAAEwuB,kBAApB;AAAwCnY,WAAO,EAAEA;AAAjD,GAA/B;AACA,QAAMqY,oBAAoB,GAAG5J,WAAW,CAACvc,GAAD,EAAMkmB,sBAAN,CAAxC;AACA,QAAMG,aAAa,GAAGF,oBAAoB,CAACjQ,UAA3C;AACA,MAAGlB,GAAH,EAAQP,WAAW,CAAC,UAAD,EAAY4R,aAAZ,CAAX;AACRxI,MAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB,GAAlB,EAAuB4H,aAAvB;AAGA,QAAMC,eAAe,GAAG;AAAC,eAAW,KAAZ;AAAmB,UAAK,aAAxB;AAAuC,cAAU,aAAjD;AAAgE,cAAU;AAA1E,GAAxB;AACA,QAAMC,mBAAmB,GAAG;AAAE7H,QAAI,EAAEA,IAAR;AAAcjnB,QAAI,EAAE6uB,eAApB;AAAqCxY,WAAO,EAAEA;AAA9C,GAA5B;AACA,QAAM0Y,iBAAiB,GAAGjK,WAAW,CAACvc,GAAD,EAAMumB,mBAAN,CAArC;AACA,QAAME,iBAAiB,GAAGD,iBAAiB,CAACtQ,UAA5C;AACA,MAAGlB,GAAH,EAAQP,WAAW,CAAC,oBAAD,EAAsB+R,iBAAtB,CAAX;AACR3I,MAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB,GAAlB,EAAuBgI,iBAAvB;AACA5I,MAAI,CAACW,MAAL,CAAYkI,OAAZ,CAAoBF,iBAAiB,CAAC/uB,IAAlB,CAAuBwB,MAAvB,CAA8B+I,MAAlD,EAA0D,CAA1D,EAA6D,gCAA7D,EAlBgE,CAmBhE;AAEH;;AAEM,SAASsiB,aAAT,CAAuBtkB,GAAvB,EAA4B0e,IAA5B,EAAkCjW,OAAlC,EAA2Cke,MAA3C,EAAmD3R,GAAnD,EAAwD;AACvD,MAAGA,GAAH,EAAQP,WAAW,CAAC,sBAAD,EAAwB,EAAxB,CAAX;AACR,QAAMmS,kBAAkB,GAAG;AAAC,eAAW,KAAZ;AAAmB,UAAK,eAAxB;AAAyC,cAAU,eAAnD;AAAoE,cAAU,CAACne,OAAD;AAA9E,GAA3B;AACA,QAAMoe,sBAAsB,GAAG;AAAEnI,QAAI,EAAEA,IAAR;AAAcjnB,QAAI,EAAEmvB,kBAApB;AAAwC9Y,WAAO,EAAEA;AAAjD,GAA/B;AACA,QAAM7U,MAAM,GAAGsjB,WAAW,CAACvc,GAAD,EAAM6mB,sBAAN,CAA1B;AACA,MAAG7R,GAAH,EAAQP,WAAW,CAAC,SAAD,EAAWxb,MAAX,CAAX;AACf;;AAEM,SAASwhB,aAAT,CAAuBza,GAAvB,EAA4B0e,IAA5B,EAAkC1J,GAAlC,EAAuC;AAE1C,MAAGA,GAAH,EAAQP,WAAW,CAAC,sBAAD,CAAX;AACR,QAAMqS,iBAAiB,GAAG;AAAC,eAAW,KAAZ;AAAmB,UAAK,eAAxB;AAAyC,cAAU,eAAnD;AAAoE,cAAU;AAA9E,GAA1B;AACA,QAAMC,qBAAqB,GAAG;AAAErI,QAAI,EAAEA,IAAR;AAAcjnB,QAAI,EAAEqvB,iBAApB;AAAuChZ,WAAO,EAAEA;AAAhD,GAA9B;AACA,QAAMkZ,mBAAmB,GAAGzK,WAAW,CAACvc,GAAD,EAAM+mB,qBAAN,CAAvC;AACA,QAAME,wBAAwB,GAAGD,mBAAmB,CAAC9Q,UAArD;AACA,QAAMgR,UAAU,GAAIF,mBAAmB,CAACvvB,IAApB,CAAyBwB,MAA7C;AACA4kB,MAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB,GAAlB,EAAuBwI,wBAAvB;AACApJ,MAAI,CAACiD,MAAL,CAAYkG,mBAAmB,CAACvvB,IAApB,CAAyBC,KAArC,EAA4CsJ,EAA5C,CAA+CigB,EAA/C,CAAkDC,IAAlD;AACArD,MAAI,CAACiD,MAAL,CAAYoG,UAAZ,EAAwBlmB,EAAxB,CAA2B+f,GAA3B,CAA+BE,EAA/B,CAAkCC,IAAlC;AACA,MAAGlM,GAAH,EAAQP,WAAW,CAACyS,UAAD,CAAX;AACR,SAAOA,UAAP;AACH;;AAEM,SAASnJ,iBAAT,CAA2B/d,GAA3B,EAA+B0e,IAA/B,EAAoCyI,SAApC,EAA8CC,MAA9C,EAAqDpS,GAArD,EAAyD;AAC5D,QAAMqS,YAAY,GAAG;AAAC,eAAW,KAAZ;AAAmB,UAAK,mBAAxB;AAA6C,cAAU,mBAAvD;AAA4E,cAAU,CAACD,MAAD,EAAQD,SAAR;AAAtF,GAArB;AACA,QAAMG,gBAAgB,GAAG;AAAE,oBAAe;AAAjB,GAAzB;AACA,QAAMC,gBAAgB,GAAG;AAAE7I,QAAI,EAAEA,IAAR;AAAcjnB,QAAI,EAAE4vB,YAApB;AAAkCvZ,WAAO,EAAEwZ;AAA3C,GAAzB;AACA,QAAME,cAAc,GAAGjL,WAAW,CAACvc,GAAD,EAAMunB,gBAAN,CAAlC;AACA,QAAME,oBAAoB,GAAGD,cAAc,CAACtR,UAA5C;AACA,MAAGlB,GAAH,EAAOP,WAAW,CAAC,uBAAD,EAAyBgT,oBAAzB,CAAX;AACP5J,MAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB,GAAlB,EAAuBgJ,oBAAvB;AACA5J,MAAI,CAACiD,MAAL,CAAY0G,cAAc,CAAC/vB,IAAf,CAAoBC,KAAhC,EAAuCsJ,EAAvC,CAA0CigB,EAA1C,CAA6CC,IAA7C;AACArD,MAAI,CAACiD,MAAL,CAAY0G,cAAc,CAAC/vB,IAAf,CAAoBwB,MAAhC,EAAwC+H,EAAxC,CAA2C+f,GAA3C,CAA+CE,EAA/C,CAAkDC,IAAlD;AACH;;AAEM,SAASnkB,UAAT,CAAoBiD,GAApB,EAAwB0e,IAAxB,EAA6B1J,GAA7B,EAAiC;AACpC,QAAM0S,cAAc,GAAG;AAAC,eAAW,KAAZ;AAAmB,UAAK,YAAxB;AAAsC,cAAU,YAAhD;AAA8D,cAAU;AAAxE,GAAvB;AACA,QAAMC,kBAAkB,GAAG;AAAEjJ,QAAI,EAAEA,IAAR;AAAcjnB,QAAI,EAAEiwB,cAApB;AAAoC5Z,WAAO,EAAEA;AAA7C,GAA3B;AACA,QAAM8Z,gBAAgB,GAAGrL,WAAW,CAACvc,GAAD,EAAM2nB,kBAAN,CAApC;AACA,MAAG3S,GAAH,EAAOP,WAAW,CAAC,mBAAD,EAAqBmT,gBAAgB,CAACnwB,IAAjB,CAAsBwB,MAA3C,CAAX;AACP,SAAO2uB,gBAAgB,CAACnwB,IAAjB,CAAsBwB,MAA7B;AACH;;AAED,SAAS4uB,wBAAT,CAAkCzwB,IAAlC,EAAuCsB,QAAvC,EAAiD;AAC7CyU,MAAI,CAAC8X,IAAI,GAAC,2BAAL,GAAiC7tB,IAAjC,GAAsC,gCAAvC,EAAyE,CAAC2qB,CAAD,EAAIgE,MAAJ,EAAYC,MAAZ,KAAsB;AAC/F,QAAGjE,CAAC,IAAE,IAAN,EAAW;AACPtN,iBAAW,CAAC,iBAAerd,IAAf,GAAoB,QAApB,GAA6B2uB,MAA9B,EAAqCC,MAArC,CAAX;AACA,aAAO,IAAP;AACH;;AACD,UAAM8B,eAAe,GAAG/B,MAAM,CAACrf,QAAP,GAAkB4T,IAAlB,EAAxB,CAL+F,CAK7C;;AAClD5hB,YAAQ,CAACstB,MAAD,EAAS8B,eAAT,CAAR;AACH,GAPG,CAAJ;AAQH;;AAED,SAASC,eAAT,CAAyBrvB,QAAzB,EAAmC;AAC/B,QAAMovB,eAAe,GAAGnD,oBAAoB,CAAC,KAAD,CAA5C;AACAlQ,aAAW,CAAC,qCAAmCqT,eAApC,CAAX;;AACA,MAAG;AACC3a,QAAI,CAAC8X,IAAI,GAAC,cAAL,GAAoB6C,eAArB,EAAsC,CAAC/F,CAAD,EAAIgE,MAAJ,EAAYC,MAAZ,KAAsB;AAC5DvR,iBAAW,CAAC,kCAAD,EAAoC;AAACsR,cAAM,EAACA,MAAR;AAAeC,cAAM,EAACA;AAAtB,OAApC,CAAX;AACAttB,cAAQ,CAAC,IAAD,EAAOovB,eAAP,CAAR;AACH,KAHG,CAAJ;AAIH,GALD,CAKC,OAAO/F,CAAP,EAAU;AACPtN,eAAW,CAAC,wBAAD,EAA0BsN,CAA1B,CAAX;AACH;AACJ;;AAED,SAASiG,iBAAT,CAA2BlC,WAA3B,EAAuCptB,QAAvC,EAAiD;AAC7CyU,MAAI,CAAC8X,IAAI,GAAC,cAAL,GAAoBa,WAApB,GAAgC,oCAAjC,EAAuE,CAAC/D,CAAD,EAAIgE,MAAJ,EAAYC,MAAZ,KAAsB;AAC7FvR,eAAW,CAAC,SAAOqR,WAAP,GAAmB,cAApB,EAAmC;AAACC,YAAM,EAACA,MAAR;AAAeC,YAAM,EAACA;AAAtB,KAAnC,CAAX;AACAttB,YAAQ,CAACstB,MAAD,EAASD,MAAT,CAAR;AACH,GAHG,CAAJ;AAIH;;AAED,SAASkC,iBAAT,CAA2BnC,WAA3B,EAAuCptB,QAAvC,EAAiD;AAC7CiR,eAAa,CAAC,iBAAemc,WAAf,GAA2B,YAA5B,CAAb;AACA3Y,MAAI,CAAC8X,IAAI,GAAC,cAAL,GAAoBa,WAApB,GAAgC,wBAAjC,EAA2D,CAAC/D,CAAD,EAAIgE,MAAJ,EAAYC,MAAZ,KAAsB;AACjFvR,eAAW,CAAC,iBAAeqR,WAAf,GAA2B,WAA5B,EAAwC;AAACC,YAAM,EAACA,MAAR;AAAeC,YAAM,EAACA;AAAtB,KAAxC,CAAX;AACAttB,YAAQ,CAACstB,MAAD,EAASD,MAAT,CAAR;AACH,GAHG,CAAJ;AAIH;;AAED,SAASmC,gBAAT,CAA0BJ,eAA1B,EAA0CpvB,QAA1C,EAAoD;AAChDyU,MAAI,CAAC8X,IAAI,GAAC,eAAL,GAAqB6C,eAAtB,EAAuC,CAAC/F,CAAD,EAAIgE,MAAJ,EAAYC,MAAZ,KAAsB;AAC7DvR,eAAW,CAAC,8BAA4BqT,eAA7B,EAA6C;AAAC/B,YAAM,EAACA,MAAR;AAAeC,YAAM,EAACA;AAAtB,KAA7C,CAAX;AACAttB,YAAQ,CAACstB,MAAD,EAASD,MAAM,CAACrf,QAAP,GAAkB4T,IAAlB,EAAT,CAAR,CAF6D,CAEjB;AAC/C,GAHG,CAAJ;AAIH;;AAED,SAAS6N,kBAAT,CAA4BL,eAA5B,EAA6CpvB,QAA7C,EAAuD;AACnDyU,MAAI,CAAC8X,IAAI,GAAC,cAAL,GAAoB6C,eAApB,GAAoC,qDAArC,EAA4F,CAAC/F,CAAD,EAAIgE,MAAJ,EAAYC,MAAZ,KAAsB;AAClHvR,eAAW,CAAC,+DAAD,EAAiE;AAACsR,YAAM,EAACA,MAAR;AAAeC,YAAM,EAACA;AAAtB,KAAjE,CAAX;AACAttB,YAAQ,CAACstB,MAAD,EAASD,MAAT,CAAR;AACH,GAHG,CAAJ;AAIH;;AAED,SAASqC,cAAT,CAAwB1vB,QAAxB,EAAkC;AAC9ByU,MAAI,CAAC8X,IAAI,GAAC,uBAAN,EAA+B,CAAClD,CAAD,EAAIgE,MAAJ,EAAYC,MAAZ,KAAsB;AACrDvR,eAAW,CAAC,0BAAD,EAA4B;AAACsR,YAAM,EAACA,MAAR;AAAeC,YAAM,EAACA;AAAtB,KAA5B,CAAX;;AACA,QAAGA,MAAH,EAAU;AACN7Y,UAAI,CAAC8X,IAAI,GAAC,kDAAN,EAA0D,CAAClD,CAAD,EAAIgE,MAAJ,EAAYC,MAAZ,KAAsB;AAChF,cAAMqC,OAAO,GAAGtC,MAAM,CAACrf,QAAP,GAAkBrC,SAAlB,CAA4B,CAA5B,EAA8B0hB,MAAM,CAACrf,QAAP,GAAkB1E,MAAlB,GAAyB,CAAvD,CAAhB;AACAyS,mBAAW,CAAC,4CAA0C4T,OAA3C,CAAX;AACAlb,YAAI,CAAC8X,IAAI,GAAC,4BAAL,GACD,kBADC,GAED,2BAFC,GAGD,uBAHC,GAID,2BAJC,GAKD,qCALC,GAMD,kBANC,GAOD,oBAPC,GAQD,gBARC,GASD,+BATC,GAUD,mBAVC,GAWD,YAXC,GAWYoD,OAXZ,GAWoB,4BAXrB,EAWmD,CAACtG,CAAD,EAAIgE,MAAJ,EAAYC,MAAZ,KAAsB;AACzEttB,kBAAQ,CAACstB,MAAD,EAASD,MAAT,CAAR;AACH,SAbG,CAAJ;AAcH,OAjBG,CAAJ;AAkBH,KAnBD,MAmBK;AACDrtB,cAAQ,CAACstB,MAAD,EAASD,MAAT,CAAR;AACH;AACJ,GAxBG,CAAJ;AA2BH;;AAED,SAASuC,YAAT,CAAsBC,WAAtB,EAAkCC,OAAlC,EAA2C9vB,QAA3C,EAAoD;AAChD7C,QAAM,CAAC8pB,UAAP,CAAkB,YAAY;AAC1B4I,eAAW;AACX7vB,YAAQ,CAAC,IAAD,EAAM,IAAN,CAAR;AACH,GAHD,EAGG8vB,OAAO,GAAC,IAHX;AAIH;;AAEM,SAASjE,oBAAT,CAA8BuB,WAA9B,EAA2C;AAC9C,QAAM7L,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBwL,uBAAjB,CAAjB;AACA,SAAOzL,QAAQ,CAAC6L,WAAD,CAAf;AACH;;AAEM,SAAStB,2BAAT,GAAuC;AAC1C,QAAMvK,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiB2L,iCAAjB,CAAjB;AACA,SAAO5L,QAAQ,EAAf;AACH;;AAEM,SAASwK,YAAT,GAAwB;AAC3B,QAAMxK,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBkO,cAAjB,CAAjB;AACA,SAAOnO,QAAQ,EAAf;AACH;;AAEM,SAASyK,aAAT,GAAyB;AAC5B,QAAMzK,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiB6N,eAAjB,CAAjB;AACA,SAAO9N,QAAQ,EAAf;AACH;;AAEM,SAAS0K,oBAAT,CAA8BvtB,IAA9B,EAAoC;AACvC,QAAM6iB,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiB2N,wBAAjB,CAAjB;AACA,SAAO5N,QAAQ,CAAC7iB,IAAD,CAAf;AACH;;AAEM,SAASwtB,cAAT,CAAwBkB,WAAxB,EAAqC;AACxC,QAAM7L,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBgO,gBAAjB,CAAjB;AACA,SAAOjO,QAAQ,CAAC6L,WAAD,CAAf;AACH;;AAEM,SAASjB,eAAT,CAAyBiB,WAAzB,EAAsC;AACzC,QAAM7L,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiB8N,iBAAjB,CAAjB;AACA,SAAO/N,QAAQ,CAAC6L,WAAD,CAAf;AACH;;AAEM,SAAShB,eAAT,CAAyBgB,WAAzB,EAAsC;AACzC,QAAM7L,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiB+N,iBAAjB,CAAjB;AACA,SAAOhO,QAAQ,CAAC6L,WAAD,CAAf;AACH;;AAEM,SAASf,gBAAT,CAA0Be,WAA1B,EAAuC;AAC1C,QAAM7L,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBiO,kBAAjB,CAAjB;AACA,SAAOlO,QAAQ,CAAC6L,WAAD,CAAf;AACH;;AAEM,SAASd,UAAT,CAAoBuD,WAApB,EAAiCC,OAAjC,EAA0C;AAC7C,QAAMvO,QAAQ,GAAGpkB,MAAM,CAACqkB,SAAP,CAAiBoO,YAAjB,CAAjB;AACA,SAAOrO,QAAQ,CAACuO,OAAD,CAAf;AACH,C;;;;;;;;;;;ACrSD,IAAI3K,IAAJ;AAAS/nB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAAC8nB,MAAI,CAAC7nB,CAAD,EAAG;AAAC6nB,QAAI,GAAC7nB,CAAL;AAAO;;AAAhB,CAA1C,EAA4D,CAA5D;AAA+D,IAAIwuB,2BAAJ,EAAgCznB,UAAhC,EAA2ConB,cAA3C;AAA0DruB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACyuB,6BAA2B,CAACxuB,CAAD,EAAG;AAACwuB,+BAA2B,GAACxuB,CAA5B;AAA8B,GAA9D;;AAA+D+G,YAAU,CAAC/G,CAAD,EAAG;AAAC+G,cAAU,GAAC/G,CAAX;AAAa,GAA1F;;AAA2FmuB,gBAAc,CAACnuB,CAAD,EAAG;AAACmuB,kBAAc,GAACnuB,CAAf;AAAiB;;AAA9H,CAA1C,EAA0K,CAA1K;AAA6K,IAAI2T,aAAJ;AAAkB7T,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAAC4T,eAAa,CAAC3T,CAAD,EAAG;AAAC2T,iBAAa,GAAC3T,CAAd;AAAgB;;AAAlC,CAA7D,EAAiG,CAAjG;AAMjU,MAAMksB,cAAc,GAAG,0BAAvB;AACA,MAAMgD,YAAY,GAAK,0BAAvB;AACA,MAAMC,OAAO,GAAG,0BAAhB;AACA,MAAMC,UAAU,GAAG,sDAAnB;AACA,MAAMpQ,GAAG,GAAG,IAAZ;;AAEA,IAAGnf,MAAM,CAAC4yB,SAAV,EAAqB;AACjBC,UAAQ,CAAC,kBAAD,EAAqB,YAAY;AACrC,SAAKC,OAAL,CAAa,CAAb;AAEAC,UAAM,CAAC,YAAY;AACfjf,mBAAa,CAAC,oCAAD,CAAb;AACA6a,iCAA2B;AAC9B,KAHK,CAAN;AAKAqE,MAAE,CAAC,0EAAD,EAA6E,YAAY;AACvF1E,oBAAc,CAACjC,cAAD,EAAgBgD,YAAhB,EAA6BC,OAA7B,EAAqCC,UAArC,EAAgD,IAAhD,CAAd;AACA,YAAM0D,YAAY,GAAG/rB,UAAU,CAACmlB,cAAD,EAAiBiD,OAAjB,EAA0BnQ,GAA1B,CAA/B;AACA6I,UAAI,CAACW,MAAL,CAAYkI,OAAZ,CAAoBoC,YAApB,EAAkC,CAAlC,EAAqC,cAArC;AACH,KAJC,CAAF;AAKH,GAbO,CAAR;AAcH,C;;;;;;;;;;;AC3BD,IAAIjL,IAAJ;AAAS/nB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAAC8nB,MAAI,CAAC7nB,CAAD,EAAG;AAAC6nB,QAAI,GAAC7nB,CAAL;AAAO;;AAAhB,CAA1C,EAA4D,CAA5D;AAA+D,IAAI+mB,KAAJ,EAAUhJ,UAAV,EAAqBwJ,QAArB,EAA8BE,YAA9B,EAA2CC,4BAA3C,EAAwEE,UAAxE,EAAmFD,UAAnF,EAA8FP,uBAA9F,EAAsHC,WAAtH;AAAkIvnB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACgnB,OAAK,CAAC/mB,CAAD,EAAG;AAAC+mB,SAAK,GAAC/mB,CAAN;AAAQ,GAAlB;;AAAmB+d,YAAU,CAAC/d,CAAD,EAAG;AAAC+d,cAAU,GAAC/d,CAAX;AAAa,GAA9C;;AAA+CunB,UAAQ,CAACvnB,CAAD,EAAG;AAACunB,YAAQ,GAACvnB,CAAT;AAAW,GAAtE;;AAAuEynB,cAAY,CAACznB,CAAD,EAAG;AAACynB,gBAAY,GAACznB,CAAb;AAAe,GAAtG;;AAAuG0nB,8BAA4B,CAAC1nB,CAAD,EAAG;AAAC0nB,gCAA4B,GAAC1nB,CAA7B;AAA+B,GAAtK;;AAAuK4nB,YAAU,CAAC5nB,CAAD,EAAG;AAAC4nB,cAAU,GAAC5nB,CAAX;AAAa,GAAlM;;AAAmM2nB,YAAU,CAAC3nB,CAAD,EAAG;AAAC2nB,cAAU,GAAC3nB,CAAX;AAAa,GAA9N;;AAA+NonB,yBAAuB,CAACpnB,CAAD,EAAG;AAAConB,2BAAuB,GAACpnB,CAAxB;AAA0B,GAApR;;AAAqRqnB,aAAW,CAACrnB,CAAD,EAAG;AAACqnB,eAAW,GAACrnB,CAAZ;AAAc;;AAAlT,CAA1C,EAA8V,CAA9V;AAAiW,IAAI2T,aAAJ;AAAkB7T,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAAC4T,eAAa,CAAC3T,CAAD,EAAG;AAAC2T,iBAAa,GAAC3T,CAAd;AAAgB;;AAAlC,CAA7D,EAAiG,CAAjG;AAAoG,IAAIwuB,2BAAJ;AAAgC1uB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACyuB,6BAA2B,CAACxuB,CAAD,EAAG;AAACwuB,+BAA2B,GAACxuB,CAA5B;AAA8B;;AAA9D,CAA1C,EAA0G,CAA1G;AAWjsB,MAAMksB,cAAc,GAAG,0BAAvB;AAEA,MAAMC,YAAY,GAAG,0BAArB;AACA,MAAMiB,YAAY,GAAG,uBAArB;AACA,MAAME,UAAU,GAAG,wBAAnB;AACA,MAAMyF,SAAS,GAAG;AAAC,cAAW,OAAZ;AAAoB,cAAW;AAA/B,CAAlB;AAEA,MAAMC,YAAY,GAAC,0EAAnB;AACA,MAAMC,YAAY,GAAC,0EAAnB;AACA,MAAMC,WAAW,GAAG;AAAC,cAAW,SAAZ;AAAsB,cAAW;AAAjC,CAApB;AACA,MAAMC,WAAW,GAAG;AAAC,cAAW,SAAZ;AAAsB,cAAW;AAAjC,CAApB;AAEA,MAAM3F,sBAAsB,GAAG,qBAA/B;AACA,MAAMC,sBAAsB,GAAG,KAA/B;;AAEA,IAAG5tB,MAAM,CAAC4yB,SAAV,EAAqB;AACjBC,UAAQ,CAAC,mBAAD,EAAsB,YAAY;AACtC,SAAKC,OAAL,CAAa,CAAb;AAEAC,UAAM,CAAC,YAAY;AACfjf,mBAAa,CAAC,oCAAD,CAAb;AACA6a,iCAA2B;AAC3BpH,6BAAuB,CAAC,MAAD,EAAS,GAAT,EAAcoG,sBAAd,EAAsCC,sBAAtC,EAA8D,IAA9D,CAAvB;AACH,KAJK,CAAN;AAMAoF,MAAE,CAAC,sEAAD,EAAyE,UAAUjjB,IAAV,EAAgB;AACvF,YAAMwJ,cAAc,GAAG,qBAAvB,CADuF,CACzC;;AAC9C,YAAMC,WAAW,GAAG,uBAApB;AACA,YAAMgU,cAAc,GAAGtG,KAAK,CAACqG,YAAD,EAAe2F,SAAf,EAA0B,KAA1B,CAA5B,CAHuF,CAGzB;;AAC9DrL,kCAA4B,CAACwE,cAAD,EAAiBC,YAAjB,EAA+BiB,YAA/B,EAA6CC,cAA7C,EAA6DC,UAA7D,EAAyElU,cAAzE,EAAyFC,WAAzF,EAAsG;AAAC,gBAAQ;AAAT,OAAtG,EAAgI,qBAAhI,EAAuJ,KAAvJ,EAA8J,IAA9J,CAA5B;AACAzJ,UAAI;AACP,KANC,CAAF;AAQAijB,MAAE,CAAC,yEAAD,EAA4E,UAAUjjB,IAAV,EAAgB;AAC1F,YAAMwJ,cAAc,GAAG,uBAAvB,CAD0F,CAC1C;;AAChD,YAAMC,WAAW,GAAG,qBAApB,CAF0F,CAG1F;;AACA,YAAMgU,cAAc,GAAGtG,KAAK,CAACqG,YAAD,EAAe2F,SAAf,EAA0B,KAA1B,CAA5B,CAJ0F,CAI5B;;AAC9DrL,kCAA4B,CAACwE,cAAD,EAAiBC,YAAjB,EAA+BiB,YAA/B,EAA6CC,cAA7C,EAA6DC,UAA7D,EAAyElU,cAAzE,EAAyFC,WAAzF,EAAsG,IAAtG,EAA4G,uBAA5G,EAAqI,OAArI,EAA8I,IAA9I,CAA5B;AACAzJ,UAAI;AACP,KAPC,CAAF;AASAijB,MAAE,CAAC,8BAAD,EAAiC,UAAUjjB,IAAV,EAAgB;AAC/CgY,gBAAU;AACV,YAAMwL,QAAQ,GAAGrM,KAAK,CAACqG,YAAD,EAAe2F,SAAf,EAA0B,KAA1B,CAAtB;AACA,UAAIM,KAAK,GAAGtV,UAAU,CAACqP,YAAD,EAAegG,QAAf,EAAyB,SAAzB,EAAoCJ,YAApC,EAAkD,IAAlD,CAAtB;AACAnL,UAAI,CAACiD,MAAL,CAAYvD,QAAQ,CAAC8L,KAAD,CAApB,EAA6BroB,EAA7B,CAAgC+f,GAAhC,CAAoCE,EAApC,CAAuC1iB,SAAvC;AACA,UAAI+qB,KAAK,GAAGvV,UAAU,CAACqP,YAAD,EAAegG,QAAf,EAAyB,SAAzB,EAAoCH,YAApC,EAAkD,IAAlD,CAAtB;AACApL,UAAI,CAACiD,MAAL,CAAYvD,QAAQ,CAAC+L,KAAD,CAApB,EAA6BtoB,EAA7B,CAAgC+f,GAAhC,CAAoCE,EAApC,CAAuC1iB,SAAvC;AAEAqH,UAAI;AACP,KATC,CAAF;AAWAijB,MAAE,CAAC,mFAAD,EAAsF,UAAUjjB,IAAV,EAAgB;AAEpGgY,gBAAU;AACV,YAAMxO,cAAc,GAAG,qBAAvB,CAHoG,CAGtD;;AAC9C,YAAMma,mBAAmB,GAAG,yBAA5B;AACA,YAAMC,mBAAmB,GAAG,yBAA5B;AACA,YAAMJ,QAAQ,GAAGrM,KAAK,CAACqG,YAAD,EAAe2F,SAAf,EAA0B,KAA1B,CAAtB;AAEA,UAAIM,KAAK,GAAGtV,UAAU,CAACqP,YAAD,EAAegG,QAAf,EAAyB,SAAzB,EAAoCJ,YAApC,EAAkD,IAAlD,CAAtB;AACAnL,UAAI,CAACiD,MAAL,CAAYvD,QAAQ,CAAC8L,KAAD,CAApB,EAA6BroB,EAA7B,CAAgC+f,GAAhC,CAAoCE,EAApC,CAAuC1iB,SAAvC;AACA,UAAI+qB,KAAK,GAAGvV,UAAU,CAACqP,YAAD,EAAegG,QAAf,EAAyB,SAAzB,EAAoCH,YAApC,EAAkD,IAAlD,CAAtB;AACApL,UAAI,CAACiD,MAAL,CAAYvD,QAAQ,CAAC+L,KAAD,CAApB,EAA6BtoB,EAA7B,CAAgC+f,GAAhC,CAAoCE,EAApC,CAAuC1iB,SAAvC;AAEA,YAAMkrB,QAAQ,GAAG1M,KAAK,CAACqG,YAAD,EAAe8F,WAAf,EAA4B,IAA5B,CAAtB;AACA,YAAMQ,QAAQ,GAAG3M,KAAK,CAACqG,YAAD,EAAe+F,WAAf,EAA4B,IAA5B,CAAtB,CAdoG,CAgBpG;;AACAzL,kCAA4B,CAACwE,cAAD,EAAiBC,YAAjB,EAA+BiB,YAA/B,EAA6CqG,QAA7C,EAAuDnG,UAAvD,EAAmElU,cAAnE,EAAmFma,mBAAnF,EAAwG;AAAC,gBAAQ;AAAT,OAAxG,EAAkI,qBAAlI,EAAyJ,KAAzJ,EAAgK,sBAAhK,CAA5B;AACA7L,kCAA4B,CAACwE,cAAD,EAAiBC,YAAjB,EAA+BiB,YAA/B,EAA6CsG,QAA7C,EAAuDpG,UAAvD,EAAmElU,cAAnE,EAAmFoa,mBAAnF,EAAwG;AAAC,gBAAQ;AAAT,OAAxG,EAA6H,qBAA7H,EAAoJ,KAApJ,EAA2J,mBAA3J,CAA5B;AAEA5jB,UAAI;AACP,KArBC,CAAF;AAuBAijB,MAAE,CAAC,yCAAD,EAA4C,UAAUjjB,IAAV,EAAgB;AAC1D,YAAMwJ,cAAc,GAAG,qBAAvB,CAD0D,CACZ;;AAC9C,YAAMma,mBAAmB,GAAG,8BAA5B;AACA,YAAMH,QAAQ,GAAGrM,KAAK,CAACqG,YAAD,EAAe2F,SAAf,EAA0B,IAA1B,CAAtB;AACA,YAAMU,QAAQ,GAAG1M,KAAK,CAACqG,YAAD,EAAe8F,WAAf,EAA4B,IAA5B,CAAtB;AACAxL,kCAA4B,CAACwE,cAAD,EAAiBC,YAAjB,EAA+BiB,YAA/B,EAA6CqG,QAA7C,EAAuDnG,UAAvD,EAAmElU,cAAnE,EAAmFma,mBAAnF,EAAwG;AAAC,gBAAQ;AAAT,OAAxG,EAA6H,qBAA7H,EAAoJ,KAApJ,EAA2J,IAA3J,CAA5B;AACA,YAAMI,cAAc,GAAGlM,YAAY,CAAC2F,YAAD,EAAegG,QAAf,EAAyB,IAAzB,CAAnC;AACAvL,UAAI,CAACiD,MAAL,CAAY6I,cAAZ,EAA4B3oB,EAA5B,CAA+B+f,GAA/B,CAAmCE,EAAnC,CAAsC1iB,SAAtC;AACAsf,UAAI,CAACiD,MAAL,CAAY6I,cAAc,CAAC,CAAD,CAA1B,EAA+B3oB,EAA/B,CAAkC+f,GAAlC,CAAsCE,EAAtC,CAAyC1iB,SAAzC;AACAsf,UAAI,CAACiD,MAAL,CAAY6I,cAAc,CAAC,CAAD,CAAd,CAAkB5tB,cAAlB,CAAiCI,KAA7C,EAAoD6E,EAApD,CAAuDigB,EAAvD,CAA0DxC,KAA1D,CAAgErP,cAAhE;AACA,YAAMwa,eAAe,GAAGnM,YAAY,CAAC2F,YAAD,EAAeqG,QAAf,EAAyB,IAAzB,CAApC;AACAG,qBAAe,CAAC/tB,OAAhB,CAAwBC,OAAO,IAAI;AAC/B+hB,YAAI,CAACiD,MAAL,CAAYhlB,OAAO,CAACrF,OAApB,EAA6BuK,EAA7B,CAAgCigB,EAAhC,CAAmCxC,KAAnC,CAAyCgL,QAAQ,CAACpzB,MAAlD;AACH,OAFD,EAX0D,CAc1D;;AACAuP,UAAI;AACP,KAhBC,CAAF;AAmBAijB,MAAE,CAAC,+CAAD,EAAkD,YAAY;AAC5DjL,gBAAU;AACV,UAAIwL,QAAQ,GAAGrM,KAAK,CAACqG,YAAD,EAAe2F,SAAf,EAA0B,IAA1B,CAApB;AACA,YAAMc,MAAM,GAAG9V,UAAU,CAACqP,YAAD,EAAegG,QAAf,EAAyB,YAAzB,EAAuCJ,YAAvC,EAAqD,IAArD,CAAzB;AACA,YAAMc,WAAW,GAAGnM,UAAU,CAACyF,YAAD,EAAegG,QAAf,EAAyBS,MAAzB,EAAiC;AAAC,uBAAeZ;AAAhB,OAAjC,EAAgE,IAAhE,CAA9B;AACApL,UAAI,CAACiD,MAAL,CAAYgJ,WAAZ,EAAyB/I,GAAzB,CAA6BxiB,SAA7B;AACH,KANC,CAAF;AAQAsqB,MAAE,CAAC,4CAAD,EAA+C,YAAY;AACzDjL,gBAAU;AACV,UAAIwL,QAAQ,GAAGrM,KAAK,CAACqG,YAAD,EAAe2F,SAAf,EAA0B,IAA1B,CAApB;AACA,YAAMc,MAAM,GAAG9V,UAAU,CAACqP,YAAD,EAAegG,QAAf,EAAyB,YAAzB,EAAuCJ,YAAvC,EAAqD,IAArD,CAAzB;AACA,YAAMe,SAAS,GAAGhN,KAAK,CAACqG,YAAD,EAAe;AAAC,oBAAY,YAAb;AAA2B,oBAAY;AAAvC,OAAf,EAAmE,IAAnE,CAAvB;AACA,YAAM0G,WAAW,GAAGnM,UAAU,CAACyF,YAAD,EAAe2G,SAAf,EAA0BF,MAA1B,EAAkC;AAAC,uBAAeZ;AAAhB,OAAlC,EAAiE,IAAjE,CAA9B;AACApL,UAAI,CAACiD,MAAL,CAAYgJ,WAAZ,EAAyB/I,GAAzB,CAA6BxiB,SAA7B;AACH,KAPC,CAAF;AASAsqB,MAAE,CAAC,4BAAD,EAA+B,YAAY;AACzC,YAAMmB,SAAS,GAAG,CAAC,wBAAD,EAA2B,wBAA3B,EAAqD,wBAArD,CAAlB;AACA,YAAM5a,cAAc,GAAG,qBAAvB;AACA,YAAMC,WAAW,GAAG2a,SAApB;AACA,UAAIZ,QAAQ,GAAGrM,KAAK,CAACqG,YAAD,EAAe2F,SAAf,EAA0B,IAA1B,CAApB;AACA,YAAMkB,MAAM,GAAGvM,4BAA4B,CAACwE,cAAD,EAAiBC,YAAjB,EAA+BiB,YAA/B,EAA6CgG,QAA7C,EAAuD9F,UAAvD,EAAmElU,cAAnE,EAAmFC,WAAnF,EAAgG;AAAC,gBAAQ;AAAT,OAAhG,EAA0H,qBAA1H,EAAiJ,KAAjJ,EAAwJ,IAAxJ,CAA3C;AACH,KANC,CAAF;AAQAwZ,MAAE,CAAC,mCAAD,EAAsC,UAAUjjB,IAAV,EAAgB;AACpD,YAAMwJ,cAAc,GAAG,qBAAvB,CADoD,CACN;;AAC9C,YAAMC,WAAW,GAAG,8BAApB;AACA,YAAM6a,KAAK,GAAGnN,KAAK,CAACqG,YAAD,EAAe2F,SAAf,EAA0B,KAA1B,CAAnB;AACApL,gBAAU,CAACyF,YAAD,EAAe8G,KAAf,EAAsBA,KAAK,CAAC7zB,MAA5B,EAAoC;AAAC,mBAAW,YAAZ;AAA0B,uBAAe4yB;AAAzC,OAApC,CAAV;AACAvL,kCAA4B,CAACwE,cAAD,EAAiBC,YAAjB,EAA+BiB,YAA/B,EAA6C8G,KAA7C,EAAoD5G,UAApD,EAAgElU,cAAhE,EAAgFC,WAAhF,EAA6F;AAAC,gBAAQ;AAAT,OAA7F,EAAuH,qBAAvH,EAA8I,KAA9I,EAAqJ,IAArJ,CAA5B;AACAzJ,UAAI;AACP,KAPC,CAAF;AASAijB,MAAE,CAAC,uDAAD,EAAyD,YAAU;AACjE,WAAK,IAAI7uB,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG,CAA5B,EAA+BA,KAAK,EAApC,EAAwC;AACpC,cAAMoV,cAAc,GAAG,qBAAvB,CADoC,CACU;;AAC9C,cAAMC,WAAW,GAAG,WAASrV,KAAT,GAAe,kBAAnC;AACA,cAAMqpB,cAAc,GAAGtG,KAAK,CAACqG,YAAD,EAAe2F,SAAf,EAA0B,KAA1B,CAA5B,CAHoC,CAG0B;;AAC9D,YAAIoB,YAAY,GAAGzM,4BAA4B,CAACwE,cAAD,EAAiBC,YAAjB,EAA+BiB,YAA/B,EAA6CC,cAA7C,EAA6DC,UAA7D,EAAyElU,cAAzE,EAAyFC,WAAzF,EAAsG;AAAC,kBAAQ;AAAT,SAAtG,EAAgI,qBAAhI,EAAuJ,KAAvJ,EAA8J,IAA9J,CAA/C;AACAwO,YAAI,CAACW,MAAL,CAAYC,KAAZ,CAAkB,IAAlB,EAAuBpB,WAAW,CAAC8M,YAAY,CAAC9M,WAAd,CAAlC;AACH;AAEJ,KATC,CAAF;AAUH,GA3HO,CAAR;AA4HH,C;;;;;;;;;;;ACvJD,IAAIQ,IAAJ;AAAS/nB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAAC8nB,MAAI,CAAC7nB,CAAD,EAAG;AAAC6nB,QAAI,GAAC7nB,CAAL;AAAO;;AAAhB,CAA1C,EAA4D,CAA5D;AAA+D,IAAIqnB,WAAJ,EAAgBD,uBAAhB,EAAwCD,4BAAxC,EAAqED,yBAArE,EAA+FH,KAA/F,EAAqGC,UAArG,EAAgHM,SAAhH;AAA0HxnB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACsnB,aAAW,CAACrnB,CAAD,EAAG;AAACqnB,eAAW,GAACrnB,CAAZ;AAAc,GAA9B;;AAA+BonB,yBAAuB,CAACpnB,CAAD,EAAG;AAAConB,2BAAuB,GAACpnB,CAAxB;AAA0B,GAApF;;AAAqFmnB,8BAA4B,CAACnnB,CAAD,EAAG;AAACmnB,gCAA4B,GAACnnB,CAA7B;AAA+B,GAApJ;;AAAqJknB,2BAAyB,CAAClnB,CAAD,EAAG;AAACknB,6BAAyB,GAAClnB,CAA1B;AAA4B,GAA9M;;AAA+M+mB,OAAK,CAAC/mB,CAAD,EAAG;AAAC+mB,SAAK,GAAC/mB,CAAN;AAAQ,GAAhO;;AAAiOgnB,YAAU,CAAChnB,CAAD,EAAG;AAACgnB,cAAU,GAAChnB,CAAX;AAAa,GAA5P;;AAA6PsnB,WAAS,CAACtnB,CAAD,EAAG;AAACsnB,aAAS,GAACtnB,CAAV;AAAY;;AAAtR,CAA1C,EAAkU,CAAlU;AAAqU,IAAIye,WAAJ;AAAgB3e,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAAC0e,aAAW,CAACze,CAAD,EAAG;AAACye,eAAW,GAACze,CAAZ;AAAc;;AAA9B,CAA7D,EAA6F,CAA7F;AAAgG,IAAIwuB,2BAAJ,EAAgCzG,iBAAhC,EAAkDtD,aAAlD,EAAgEgK,YAAhE,EAA6EG,cAA7E,EAA4FF,aAA5F,EAA0GH,oBAA1G;AAA+HzuB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACyuB,6BAA2B,CAACxuB,CAAD,EAAG;AAACwuB,+BAA2B,GAACxuB,CAA5B;AAA8B,GAA9D;;AAA+D+nB,mBAAiB,CAAC/nB,CAAD,EAAG;AAAC+nB,qBAAiB,GAAC/nB,CAAlB;AAAoB,GAAxG;;AAAyGykB,eAAa,CAACzkB,CAAD,EAAG;AAACykB,iBAAa,GAACzkB,CAAd;AAAgB,GAA1I;;AAA2IyuB,cAAY,CAACzuB,CAAD,EAAG;AAACyuB,gBAAY,GAACzuB,CAAb;AAAe,GAA1K;;AAA2K4uB,gBAAc,CAAC5uB,CAAD,EAAG;AAAC4uB,kBAAc,GAAC5uB,CAAf;AAAiB,GAA9M;;AAA+M0uB,eAAa,CAAC1uB,CAAD,EAAG;AAAC0uB,iBAAa,GAAC1uB,CAAd;AAAgB,GAAhP;;AAAiPuuB,sBAAoB,CAACvuB,CAAD,EAAG;AAACuuB,wBAAoB,GAACvuB,CAArB;AAAuB;;AAAhS,CAA1C,EAA4U,CAA5U;;AAiBtvB,MAAMmX,IAAI,GAAGuH,OAAO,CAAC,eAAD,CAAP,CAAyBvH,IAAtC;;AACA,MAAM+U,cAAc,GAAG,0BAAvB;AACA,MAAMsB,sBAAsB,GAAG,qBAA/B;AACA,MAAMC,sBAAsB,GAAG,KAA/B;AAEA,MAAM0B,OAAO,GAAG,0BAAhB;AACA,MAAM/B,YAAY,GAAG,uBAArB;AACA,MAAME,UAAU,GAAG,wBAAnB;AACA,MAAMyF,SAAS,GAAG;AAAC,cAAW,OAAZ;AAAoB,cAAW;AAA/B,CAAlB;AACA,MAAM/T,GAAG,GAAG,IAAZ;;AAEA,IAAGnf,MAAM,CAAC4yB,SAAV,EAAqB;AACjBC,UAAQ,CAAC,wCAAD,EAA2C,YAAY;AAE3DE,UAAM,CAAC,YAAY;AACfpE,iCAA2B;AAC3BpH,6BAAuB,CAAC,MAAD,EAAS,GAAT,EAAcoG,sBAAd,EAAsCC,sBAAtC,EAA8D,IAA9D,CAAvB;AACAtW,UAAI,CAAC,yBAAD,EAA4B,CAAC4U,CAAD,EAAIqI,OAAJ,EAAaC,OAAb,KAAyB;AACrD5V,mBAAW,CAAC,mBAAD,EAAsB;AAACsR,gBAAM,EAAEqE,OAAT;AAAkBpE,gBAAM,EAAEqE;AAA1B,SAAtB,CAAX;AACH,OAFG,CAAJ;;AAIA,UAAI;AACAld,YAAI,CAAC,2BAAD,EAA8B,CAAC4U,CAAD,EAAIgE,MAAJ,EAAYC,MAAZ,KAAuB;AACrDvR,qBAAW,CAAC,mBAAD,EAAsB;AAACsR,kBAAM,EAAEA,MAAT;AAAiBC,kBAAM,EAAEA;AAAzB,WAAtB,CAAX;AACA7Y,cAAI,CAAC,yBAAD,EAA4B,CAAC4U,CAAD,EAAIgE,MAAJ,EAAYC,MAAZ,KAAuB;AACnDvR,uBAAW,CAAC,mBAAD,EAAsB;AAACsR,oBAAM,EAAEA,MAAT;AAAiBC,oBAAM,EAAEA;AAAzB,aAAtB,CAAX;AACH,WAFG,CAAJ;AAGH,SALG,CAAJ;AAMH,OAPD,CAOE,OAAOzO,EAAP,EAAW;AACT9C,mBAAW,CAAC,yBAAD,CAAX;AACH,OAhBc,CAiBf;;AACH,KAlBK,CAAN;AAoBAmU,UAAM,CAAC,YAAY;AACf,UAAI;AACAzb,YAAI,CAAC,2BAAD,EAA8B,CAAC4U,CAAD,EAAIgE,MAAJ,EAAYC,MAAZ,KAAuB;AACrDvR,qBAAW,CAAC,mBAAD,EAAsB;AAACsR,kBAAM,EAAEA,MAAT;AAAiBC,kBAAM,EAAEA;AAAzB,WAAtB,CAAX;AACA7Y,cAAI,CAAC,yBAAD,EAA4B,CAAC4U,CAAD,EAAIgE,MAAJ,EAAYC,MAAZ,KAAuB;AACnDvR,uBAAW,CAAC,mBAAD,EAAsB;AAACsR,oBAAM,EAAEA,MAAT;AAAiBC,oBAAM,EAAEA;AAAzB,aAAtB,CAAX;AACH,WAFG,CAAJ;AAGH,SALG,CAAJ;AAMH,OAPD,CAOE,OAAOzO,EAAP,EAAW;AACT9C,mBAAW,CAAC,yBAAD,CAAX;AACH;AACJ,KAXK,CAAN;AAaAoU,MAAE,CAAC,yFAAD,EAA4F,UAAUjjB,IAAV,EAAgB;AAC1G,WAAK+iB,OAAL,CAAa,CAAb;AACA/F,YAAM,CAACC,YAAP,GAAsBpI,aAAa,CAACyH,cAAD,EAAiBiD,OAAjB,EAA0B,KAA1B,CAAnC,CAF0G,CAG1G;;AACAV,kBAAY;AACZ,UAAIqB,WAAW,GAAGpB,aAAa,EAA/B;AACA,YAAMtV,cAAc,GAAG,qBAAvB;AACA,YAAMC,WAAW,GAAG,uCAApB,CAP0G,CAQ1G;;AACA,UAAI2F,GAAJ,EAASP,WAAW,CAAC,gCAAD,CAAX;AACT,UAAI4O,cAAc,GAAGtG,KAAK,CAACqG,YAAD,EAAe2F,SAAf,EAA0B,KAA1B,CAA1B,CAV0G,CAU9C;;AAC5D,UAAIlF,eAAe,GAAG7G,UAAU,CAACoG,YAAD,EAAeC,cAAf,EAA+BjU,cAA/B,EAA+CC,WAA/C,EAA4D,IAA5D,EAAkE,IAAlE,CAAhC;AAEA,YAAMnV,MAAM,GAAGgjB,yBAAyB,CAACgF,cAAD,EAAiBiD,OAAjB,EAA0BtB,eAAe,CAACpsB,IAAhB,CAAqByG,EAA/C,EAAmD,IAAnD,CAAxC;AACA,UAAI8W,GAAJ,EAASP,WAAW,CAAC,YAAD,EAAeva,MAAf,CAAX;AACT,UAAIyrB,kBAAkB,GAAGf,cAAc,CAACkB,WAAD,CAAvC;AACArR,iBAAW,CAAC,qCAAD,EAAwCkR,kBAAxC,CAAX;AACA9H,UAAI,CAACiD,MAAL,CAAY6E,kBAAZ,EAAgC3kB,EAAhC,CAAmC+f,GAAnC,CAAuCE,EAAvC,CAA0CC,IAA1C;AACAqD,0BAAoB,CAACoB,kBAAD,CAApB,CAlB0G,CAoB1G;;AACA5H,uBAAiB,CAACmE,cAAD,EAAiBiD,OAAjB,EAA0BvC,MAAM,CAACC,YAAjC,EAA+C,CAA/C,EAAkD,IAAlD,CAAjB;AACA,UAAI1D,OAAO,GAAG,IAAd;AACA,UAAIC,OAAO,GAAG,CAAd;;AACA,OAAC,SAAeC,IAAf;AAAA,wCAAsB;AACnB,iBAAOF,OAAO,IAAI,EAAEC,OAAF,GAAY,EAA9B,EAAkC;AAAE;AAChC,gBAAI;AACA;AACA3K,yBAAW,CAAC,wBAAD,CAAX;AACA,oBAAMsP,YAAY,GAAG5G,4BAA4B,CAAC,MAAD,EAAS,GAAT,EAAcqG,sBAAd,EAAsCC,sBAAtC,EAA8DH,UAA9D,EAA0E,KAA1E,CAAjD;AACA7O,yBAAW,CAAC,yBAAD,EAA4BsP,YAA5B,CAAX;AACA,kBAAIA,YAAY,IAAI,IAApB,EAA0B5E,OAAO,GAAG,KAAV;AAC1B9B,yBAAW,CAAC0G,YAAD,CAAX;AACAtP,yBAAW,CAAC,WAAD,CAAX;AACH,aARD,CAQE,OAAO8C,EAAP,EAAW;AACT9C,yBAAW,CAAC,0CAAD,EAA6C2K,OAA7C,CAAX;AACA,4BAAM,IAAIK,OAAJ,CAAYC,OAAO,IAAIC,UAAU,CAACD,OAAD,EAAU,IAAV,CAAjC,CAAN;AACH;AACJ;AACA,SAfJ;AAAA,OAAD;;AAgBI3B,uBAAiB,CAACmE,cAAD,EAAiBiD,OAAjB,EAA0BvC,MAAM,CAACC,YAAjC,EAA+C,CAA/C,EAAkD,IAAlD,CAAjB;AACAvF,eAAS,CAAC8F,YAAD,EAAeC,cAAf,EAA+BnB,cAA/B,EAA+CiD,OAA/C,EAAwD9V,WAAxD,EAAqED,cAArE,EAAqFlV,MAArF,EAA6F8a,GAA7F,CAAT,CAzCsG,CAyCM;;AAC5GP,iBAAW,CAAC,mDAAD,EAAsDva,MAAtD,CAAX;;AACA,UAAI;AACAiT,YAAI,CAAC,2BAAD,EAA8B,CAAC4U,CAAD,EAAIgE,MAAJ,EAAYC,MAAZ,KAAuB;AACrDvR,qBAAW,CAAC,mBAAD,EAAsB;AAACsR,kBAAM,EAAEA,MAAT;AAAiBC,kBAAM,EAAEA;AAAzB,WAAtB,CAAX;AACA7Y,cAAI,CAAC,yBAAD,EAA4B,CAAC4U,CAAD,EAAIgE,MAAJ,EAAYC,MAAZ,KAAuB;AACnDvR,uBAAW,CAAC,mBAAD,EAAsB;AAACsR,oBAAM,EAAEA,MAAT;AAAiBC,oBAAM,EAAEA;AAAzB,aAAtB,CAAX;AACH,WAFG,CAAJ;AAGH,SALG,CAAJ;AAMH,OAPD,CAOE,OAAOzO,EAAP,EAAW;AACT9C,mBAAW,CAAC,yBAAD,CAAX;AACH;;AACD7O,UAAI,GArDkG,CAsD1G;AACH,KAvDC,CAAF,CAnC2D,CA0FvD;AACP,GA3FO,CAAR;AA4FH,C;;;;;;;;;;;ACzHD,IAAIiY,IAAJ;AAAS/nB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAAC8nB,MAAI,CAAC7nB,CAAD,EAAG;AAAC6nB,QAAI,GAAC7nB,CAAL;AAAO;;AAAhB,CAA1C,EAA4D,CAA5D;AAA+D,IAAIonB,uBAAJ,EAA4BI,SAA5B,EAAsCT,KAAtC,EAA4CW,4BAA5C,EAAyEV,UAAzE;AAAoFlnB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACqnB,yBAAuB,CAACpnB,CAAD,EAAG;AAAConB,2BAAuB,GAACpnB,CAAxB;AAA0B,GAAtD;;AAAuDwnB,WAAS,CAACxnB,CAAD,EAAG;AAACwnB,aAAS,GAACxnB,CAAV;AAAY,GAAhF;;AAAiF+mB,OAAK,CAAC/mB,CAAD,EAAG;AAAC+mB,SAAK,GAAC/mB,CAAN;AAAQ,GAAlG;;AAAmG0nB,8BAA4B,CAAC1nB,CAAD,EAAG;AAAC0nB,gCAA4B,GAAC1nB,CAA7B;AAA+B,GAAlK;;AAAmKgnB,YAAU,CAAChnB,CAAD,EAAG;AAACgnB,cAAU,GAAChnB,CAAX;AAAa;;AAA9L,CAA1C,EAA0O,CAA1O;AAA6O,IAAI2T,aAAJ;AAAkB7T,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAAC4T,eAAa,CAAC3T,CAAD,EAAG;AAAC2T,iBAAa,GAAC3T,CAAd;AAAgB;;AAAlC,CAA7D,EAAiG,CAAjG;AAAoG,IAAIwuB,2BAAJ,EAAgCzG,iBAAhC,EAAkDtD,aAAlD;AAAgE3kB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACyuB,6BAA2B,CAACxuB,CAAD,EAAG;AAACwuB,+BAA2B,GAACxuB,CAA5B;AAA8B,GAA9D;;AAA+D+nB,mBAAiB,CAAC/nB,CAAD,EAAG;AAAC+nB,qBAAiB,GAAC/nB,CAAlB;AAAoB,GAAxG;;AAAyGykB,eAAa,CAACzkB,CAAD,EAAG;AAACykB,iBAAa,GAACzkB,CAAd;AAAgB;;AAA1I,CAA1C,EAAsL,CAAtL;AAS/jB,MAAMksB,cAAc,GAAG,0BAAvB;AACA,MAAMC,YAAY,GAAG,0BAArB;AACA,MAAMiB,YAAY,GAAG,uBAArB;AACA,MAAME,UAAU,GAAG,wBAAnB;AACA,MAAMyF,SAAS,GAAG;AAAC,cAAW,OAAZ;AAAoB,cAAW;AAA/B,CAAlB;AACA,MAAMvF,sBAAsB,GAAG,qBAA/B;AACA,MAAMC,sBAAsB,GAAG,KAA/B;;AAEA,IAAG5tB,MAAM,CAAC4yB,SAAV,EAAqB;AACjBC,UAAQ,CAAC,sBAAD,EAAyB,YAAY;AAEzCE,UAAM,CAAC,YAAY;AACfjf,mBAAa,CAAC,oCAAD,CAAb;AACA6a,iCAA2B;AAC3BpH,6BAAuB,CAAC,MAAD,EAAS,GAAT,EAAcoG,sBAAd,EAAsCC,sBAAtC,EAA8D,IAA9D,CAAvB;AACH,KAJK,CAAN;AAMAoF,MAAE,CAAC,wDAAD,EAA2D,UAAUjjB,IAAV,EAAgB;AACzE,WAAK+iB,OAAL,CAAa,CAAb;AAEA,YAAMtF,cAAc,GAAGtG,KAAK,CAACqG,YAAD,EAAe2F,SAAf,EAA0B,KAA1B,CAA5B,CAHyE,CAGX;;AAC9DnG,YAAM,CAACC,YAAP,GAAsBpI,aAAa,CAACyH,cAAD,EAAiBC,YAAjB,EAA+B,KAA/B,CAAnC;;AACA,WAAK,IAAIT,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AACzB,cAAMtS,cAAc,GAAG,qBAAvB,CADyB,CACqB;;AAC9C,cAAMC,WAAW,GAAG,WAAWqS,CAAX,GAAe,kBAAnC;AACAhE,oCAA4B,CAACwE,cAAD,EAAiBC,YAAjB,EAA+BiB,YAA/B,EAA6CC,cAA7C,EAA6DC,UAA7D,EAAyElU,cAAzE,EAAyFC,WAAzF,EAAsG;AAAC,kBAAQ,kBAAkBqS;AAA3B,SAAtG,EAAqI,qBAArI,EAA4J,KAA5J,EAAmK,IAAnK,CAA5B;AACH;;AACD9b,UAAI;AACP,KAXC,CAAF;AAaAijB,MAAE,CAAC,+FAAD,EAAkG,UAAUjjB,IAAV,EAAgB;AAChH,WAAK+iB,OAAL,CAAa,CAAb;AACAvL,6BAAuB,CAAC,MAAD,EAAS,GAAT,EAAcoG,sBAAd,EAAsCC,sBAAtC,EAA8D,IAA9D,CAAvB;AACA,YAAMJ,cAAc,GAAGtG,KAAK,CAACqG,YAAD,EAAe2F,SAAf,EAA0B,KAA1B,CAA5B,CAHgH,CAGlD;;AAC9DnG,YAAM,CAACC,YAAP,GAAsBpI,aAAa,CAACyH,cAAD,EAAiBC,YAAjB,EAA+B,KAA/B,CAAnC;;AACA,WAAK,IAAIT,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AACzB,cAAMtS,cAAc,GAAG,qBAAvB,CADyB,CACqB;;AAC9C,cAAMC,WAAW,GAAG,WAAWqS,CAAX,GAAe,kBAAnC;AACA,cAAMmC,eAAe,GAAG7G,UAAU,CAACoG,YAAD,EAAeC,cAAf,EAA+BjU,cAA/B,EAA+CC,WAA/C,EAA4D,IAA5D,EAAkE,IAAlE,CAAlC;AACAwO,YAAI,CAACiD,MAAL,CAAYtD,SAAS,CAACqG,eAAe,CAACpsB,IAAhB,CAAqByG,EAAtB,EAA0B,IAA1B,CAArB,EAAsD8C,EAAtD,CAAyD+f,GAAzD,CAA6DE,EAA7D,CAAgE1iB,SAAhE;AACH;;AACDqH,UAAI;AACP,KAZC,CAAF;AAcAijB,MAAE,CAAC,qGAAD,EAAwG,UAAUjjB,IAAV,EAAgB;AACtH,WAAK+iB,OAAL,CAAa,CAAb;AACAvL,6BAAuB,CAAC,MAAD,EAAS,GAAT,EAAcoG,sBAAd,EAAsCC,sBAAtC,EAA8D,IAA9D,CAAvB;AACA,YAAMJ,cAAc,GAAGtG,KAAK,CAACqG,YAAD,EAAe2F,SAAf,EAA0B,KAA1B,CAA5B,CAHsH,CAGxD;;AAC9DnG,YAAM,CAACC,YAAP,GAAsBpI,aAAa,CAACyH,cAAD,EAAiBC,YAAjB,EAA+B,KAA/B,CAAnC;;AACA,WAAK,IAAIT,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,GAApB,EAAyBA,CAAC,EAA1B,EAA8B;AAC1B,cAAMtS,cAAc,GAAG,qBAAvB,CAD0B,CACoB;;AAC9C,cAAMC,WAAW,GAAG,WAAWqS,CAAX,GAAe,kBAAnC;AACA,cAAMmC,eAAe,GAAG7G,UAAU,CAACoG,YAAD,EAAeC,cAAf,EAA+BjU,cAA/B,EAA+CC,WAA/C,EAA4D,IAA5D,EAAkE,IAAlE,CAAlC;AACAwO,YAAI,CAACiD,MAAL,CAAYtD,SAAS,CAACqG,eAAe,CAACpsB,IAAhB,CAAqByG,EAAtB,EAA0B,IAA1B,CAArB,EAAsD8C,EAAtD,CAAyD+f,GAAzD,CAA6DE,EAA7D,CAAgE1iB,SAAhE;AACA,YAAImjB,CAAC,GAAG,GAAJ,KAAY,CAAhB,EAAmB3D,iBAAiB,CAACmE,cAAD,EAAiBC,YAAjB,EAA+BS,MAAM,CAACC,YAAtC,EAAoD,CAApD,EAAuD,IAAvD,CAAjB;AACtB;;AACDjd,UAAI;AACP,KAbC,CAAF;AAcH,GAjDO,CAAR;AAkDH,C;;;;;;;;;;;ACpED,IAAG/P,MAAM,CAAC4yB,SAAP,IAAoB5yB,MAAM,CAACy0B,MAA9B,EAAsC;AAElC5B,UAAQ,CAAC,sBAAD,EAAyB,YAAY;AAEzC,SAAKC,OAAL,CAAa,KAAb;AACA4B,cAAU,CAAC,YAAY,CAEtB,CAFS,CAAV;AAKH,GARO,CAAR;AASH,C;;;;;;;;;;;ACXD,IAAI1M,IAAJ;AAAS/nB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAAC8nB,MAAI,CAAC7nB,CAAD,EAAG;AAAC6nB,QAAI,GAAC7nB,CAAL;AAAO;;AAAhB,CAA1C,EAA4D,CAA5D;AAA+D,IAAI2T,aAAJ;AAAkB7T,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAAC4T,eAAa,CAAC3T,CAAD,EAAG;AAAC2T,iBAAa,GAAC3T,CAAd;AAAgB;;AAAlC,CAA7D,EAAiG,CAAjG;AAAoG,IAAIwuB,2BAAJ,EAAgCznB,UAAhC,EAA2ConB,cAA3C;AAA0DruB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACyuB,6BAA2B,CAACxuB,CAAD,EAAG;AAACwuB,+BAA2B,GAACxuB,CAA5B;AAA8B,GAA9D;;AAA+D+G,YAAU,CAAC/G,CAAD,EAAG;AAAC+G,cAAU,GAAC/G,CAAX;AAAa,GAA1F;;AAA2FmuB,gBAAc,CAACnuB,CAAD,EAAG;AAACmuB,kBAAc,GAACnuB,CAAf;AAAiB;;AAA9H,CAA1C,EAA0K,CAA1K;AAA6K,IAAI+mB,KAAJ,EAAUW,4BAAV;AAAuC5nB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACgnB,OAAK,CAAC/mB,CAAD,EAAG;AAAC+mB,SAAK,GAAC/mB,CAAN;AAAQ,GAAlB;;AAAmB0nB,8BAA4B,CAAC1nB,CAAD,EAAG;AAAC0nB,gCAA4B,GAAC1nB,CAA7B;AAA+B;;AAAlF,CAA1C,EAA8H,CAA9H;AAI5c,MAAMksB,cAAc,GAAG,0BAAvB;AACA,MAAMgD,YAAY,GAAK,0BAAvB;AACA,MAAMC,OAAO,GAAG,0BAAhB;AACA,MAAMC,UAAU,GAAG,sDAAnB;AACA,MAAMpQ,GAAG,GAAG,IAAZ;AAGA,MAAMmN,YAAY,GAAG,0BAArB;AACA,MAAMiB,YAAY,GAAG,uBAArB;AACA,MAAME,UAAU,GAAG,wBAAnB;AACA,MAAMyF,SAAS,GAAG;AAAC,cAAW,OAAZ;AAAoB,cAAW;AAA/B,CAAlB;;AAGA,IAAGlzB,MAAM,CAACy0B,MAAP,IAAiBz0B,MAAM,CAAC4yB,SAA3B,EAAsC;AAElC+B,WAAS,CAAC,qBAAD,EAAwB,YAAY;AACzC,SAAK7B,OAAL,CAAa,MAAb;AAEAC,UAAM,CAAC,YAAY;AACfjf,mBAAa,CAAC,oCAAD,CAAb;AACA6a,iCAA2B;AAC9B,KAHK,CAAN;AAKAiG,OAAG,CAAC,0EAAD,EAA6E,YAAY;AACxFtG,oBAAc,CAACjC,cAAD,EAAgBgD,YAAhB,EAA6BC,OAA7B,EAAqCC,UAArC,EAAgD,IAAhD,CAAd;AACA,YAAM0D,YAAY,GAAG/rB,UAAU,CAACmlB,cAAD,EAAiBiD,OAAjB,EAA0BnQ,GAA1B,CAA/B;AACA6I,UAAI,CAACW,MAAL,CAAYkI,OAAZ,CAAoBoC,YAApB,EAAkC,CAAlC,EAAqC,cAArC;AACH,KAJE,CAAH;AAMA2B,OAAG,CAAC,sEAAD,EAAyE,UAAU7kB,IAAV,EAAgB;AACxF,YAAMwJ,cAAc,GAAG,uBAAvB,CADwF,CACxC;;AAChD,YAAMC,WAAW,GAAG,uBAApB;AACA,YAAMgU,cAAc,GAAGtG,KAAK,CAACqG,YAAD,EAAe2F,SAAf,EAA0B,KAA1B,CAA5B,CAHwF,CAG1B;;AAC9DrL,kCAA4B,CAACwE,cAAD,EAAiBC,YAAjB,EAA+BiB,YAA/B,EAA6CC,cAA7C,EAA6DC,UAA7D,EAAyElU,cAAzE,EAAyFC,WAAzF,EAAsG;AAAC,gBAAQ;AAAT,OAAtG,EAAgI,qBAAhI,EAAuJ,KAAvJ,EAA8J,IAA9J,CAA5B;AACAzJ,UAAI;AACP,KANE,CAAH;AAOH,GArBQ,CAAT;AAuBA4kB,WAAS,CAAC,qBAAD,EAAwB,YAAY;AAGzC;;;;;;;;;;;;;;AAaA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDH,GAzEQ,CAAT;AA0EH,C;;;;;;;;;;;ACpHD,IAAI3M,IAAJ;AAAS/nB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAAC8nB,MAAI,CAAC7nB,CAAD,EAAG;AAAC6nB,QAAI,GAAC7nB,CAAL;AAAO;;AAAhB,CAA1C,EAA4D,CAA5D;;AACT,IAAGH,MAAM,CAACy0B,MAAV,EAAkB;AAEd5B,UAAQ,CAAC,oBAAD,EAAuB,YAAY,CAC1C,CADO,CAAR;AAEH,C;;;;;;;;;;;ACLD5yB,MAAM,CAACC,IAAP,CAAY,yBAAZ;AAAuCD,MAAM,CAACC,IAAP,CAAY,gBAAZ,E","file":"/app.js","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Roles } from 'meteor/alanning:roles';\n\nimport { OptIns } from '../opt-ins.js';\n\nMeteor.publish('opt-ins.all', function OptInsAll() {\n  if(!this.userId) {\n    return this.ready();\n  }\n  if(!Roles.userIsInRole(this.userId, ['admin'])){\n    return OptIns.find({ownerId:this.userId}, {\n      fields: OptIns.publicFields,\n    });\n  }\n  \n\n  return OptIns.find({}, {\n    fields: OptIns.publicFields,\n  });\n});\n","import { Meteor } from 'meteor/meteor';\nimport { DDPRateLimiter } from 'meteor/ddp-rate-limiter';\nimport { _i18n as i18n } from 'meteor/universe:i18n';\nimport { ValidatedMethod } from 'meteor/mdg:validated-method';\nimport { Roles } from 'meteor/alanning:roles';\nimport { _ } from 'meteor/underscore';\nimport addOptIn from '../../modules/server/opt-ins/add_and_write_to_blockchain.js';\n\nconst add = new ValidatedMethod({\n  name: 'opt-ins.add',\n  validate: null,\n  run({ recipientMail, senderMail, data }) {\n    if(!this.userId || !Roles.userIsInRole(this.userId, ['admin'])) {\n      const error = \"api.opt-ins.add.accessDenied\";\n      throw new Meteor.Error(error, i18n.__(error));\n    }\n\n    const optIn = {\n      \"recipient_mail\": recipientMail,\n      \"sender_mail\": senderMail,\n      data\n    }\n\n    addOptIn(optIn)\n  },\n});\n\n// Get list of all method names on opt-ins\nconst OPTIONS_METHODS = _.pluck([\n  add\n], 'name');\n\nif (Meteor.isServer) {\n  // Only allow 5 opt-in operations per connection per second\n  DDPRateLimiter.addRule({\n    name(name) {\n      return _.contains(OPTIONS_METHODS, name);\n    },\n\n    // Rate limit per connection ID\n    connectionId() { return true; },\n  }, 5, 1000);\n}\n","import { Mongo } from 'meteor/mongo';\nimport SimpleSchema from 'simpl-schema';\n\nclass OptInsCollection extends Mongo.Collection {\n  insert(optIn, callback) {\n    const ourOptIn = optIn;\n    ourOptIn.recipient_sender = ourOptIn.recipient+ourOptIn.sender;\n    ourOptIn.createdAt = ourOptIn.createdAt || new Date();\n    const result = super.insert(ourOptIn, callback);\n    return result;\n  }\n  update(selector, modifier) {\n    const result = super.update(selector, modifier);\n    return result;\n  }\n  remove(selector) {\n    const result = super.remove(selector);\n    return result;\n  }\n}\n\nexport const OptIns = new OptInsCollection('opt-ins');\n\n// Deny all client-side updates since we will be using methods to manage this collection\nOptIns.deny({\n  insert() { return true; },\n  update() { return true; },\n  remove() { return true; },\n});\n\nOptIns.schema = new SimpleSchema({\n  _id: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n  },\n  recipient: {\n    type: String,\n    optional: true,\n    denyUpdate: true,\n  },\n  sender: {\n    type: String,\n    optional: true,\n    denyUpdate: true,\n  },\n  data: {\n    type: String,\n    optional: true,\n    denyUpdate: false,\n  },\n  index: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    denyUpdate: false,\n  },\n  nameId: {\n    type: String,\n    optional: true,\n    denyUpdate: false,\n  },\n  txId: {\n      type: String,\n      optional: true,\n      denyUpdate: false,\n  },\n  masterDoi: {\n      type: String,\n      optional: true,\n      denyUpdate: false,\n  },\n  createdAt: {\n    type: Date,\n    denyUpdate: true,\n  },\n  confirmedAt: {\n    type: Date,\n    optional: true,\n    denyUpdate: false,\n  },\n  confirmedBy: {\n    type: String,\n    regEx: SimpleSchema.RegEx.IP,\n    optional: true,\n    denyUpdate: false\n  },\n  confirmationToken: {\n    type: String,\n    optional: true,\n    denyUpdate: false\n  },\n  ownerId:{\n    type: String,\n    optional: true,\n    regEx: SimpleSchema.RegEx.Id\n  },\n  error:{\n      type: String,\n      optional: true,\n      denyUpdate: false\n  }\n});\n\nOptIns.attachSchema(OptIns.schema);\n\n// This represents the keys from Opt-In objects that should be published\n// to the client. If we add secret properties to Opt-In objects, don't list\n// them here to keep them private to the server.\nOptIns.publicFields = {\n  _id: 1,\n  recipient: 1,\n  sender: 1,\n  data: 1,\n  index: 1,\n  nameId: 1,\n  txId: 1,\n  masterDoi: 1,\n  createdAt: 1,\n  confirmedAt: 1,\n  confirmedBy: 1,\n  ownerId: 1,\n  error: 1\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Roles } from 'meteor/alanning:roles';\n\nimport { Recipients } from '../recipients.js';\nimport { OptIns} from '../../opt-ins/opt-ins.js'\nMeteor.publish('recipients.byOwner',function recipientGet(){\n  let pipeline=[];\n  if(!Roles.userIsInRole(this.userId, ['admin'])){\n    pipeline.push(\n      {$redact:{\n      $cond: {\n        if: { $cmp: [ \"$ownerId\", this.userId ] },\n        then: \"$$PRUNE\",\n        else: \"$$KEEP\" }}});\n      }\n      pipeline.push({ $lookup: { from: \"recipients\", localField: \"recipient\", foreignField: \"_id\", as: \"RecipientEmail\" } });\n      pipeline.push({ $unwind: \"$RecipientEmail\"});\n      pipeline.push({ $project: {\"RecipientEmail._id\":1}});\n\n      const result = OptIns.aggregate(pipeline);\n      let rIds=[];\n      result.forEach(element => {\n        rIds.push(element.RecipientEmail._id);\n      });\n  return Recipients.find({\"_id\":{\"$in\":rIds}},{fields:Recipients.publicFields});\n});\nMeteor.publish('recipients.all', function recipientsAll() {\n  if(!this.userId || !Roles.userIsInRole(this.userId, ['admin'])) {\n    return this.ready();\n  }\n\n  return Recipients.find({}, {\n    fields: Recipients.publicFields,\n  });\n});\n","import { Mongo } from 'meteor/mongo';\nimport SimpleSchema from 'simpl-schema';\n\nclass RecipientsCollection extends Mongo.Collection {\n  insert(recipient, callback) {\n    const ourRecipient = recipient;\n    ourRecipient.createdAt = ourRecipient.createdAt || new Date();\n    const result = super.insert(ourRecipient, callback);\n    return result;\n  }\n  update(selector, modifier) {\n    const result = super.update(selector, modifier);\n    return result;\n  }\n  remove(selector) {\n    const result = super.remove(selector);\n    return result;\n  }\n}\n\nexport const Recipients = new RecipientsCollection('recipients');\n\n// Deny all client-side updates since we will be using methods to manage this collection\nRecipients.deny({\n  insert() { return true; },\n  update() { return true; },\n  remove() { return true; },\n});\n\nRecipients.schema = new SimpleSchema({\n  _id: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n  },\n  email: {\n    type: String,\n    index: true,\n    denyUpdate: true,\n  },\n  privateKey: {\n    type: String,\n    unique: true,\n    denyUpdate: true,\n  },\n  publicKey: {\n    type: String,\n    unique: true,\n    denyUpdate: true,\n  },\n  createdAt: {\n    type: Date,\n    denyUpdate: true,\n  }\n});\n\nRecipients.attachSchema(Recipients.schema);\n\n// This represents the keys from Recipient objects that should be published\n// to the client. If we add secret properties to Recipient objects, don't list\n// them here to keep them private to the server.\nRecipients.publicFields = {\n  _id: 1,\n  email: 1,\n  publicKey: 1,\n  createdAt: 1\n};\n","import { Mongo } from 'meteor/mongo';\nimport SimpleSchema from 'simpl-schema';\n\nclass DoichainEntriesCollection extends Mongo.Collection {\n  insert(entry, callback) {\n    const result = super.insert(entry, callback);\n    return result;\n  }\n  update(selector, modifier) {\n    const result = super.update(selector, modifier);\n    return result;\n  }\n  remove(selector) {\n    const result = super.remove(selector);\n    return result;\n  }\n}\n\nexport const DoichainEntries = new DoichainEntriesCollection('doichain-entries');\n\n// Deny all client-side updates since we will be using methods to manage this collection\nDoichainEntries.deny({\n  insert() { return true; },\n  update() { return true; },\n  remove() { return true; },\n});\n\nDoichainEntries.schema = new SimpleSchema({\n  _id: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n  },\n  name: {\n    type: String,\n    index: true,\n    denyUpdate: true\n  },\n  value: {\n    type: String,\n    denyUpdate: false\n  },\n  address: {\n    type: String,\n    denyUpdate: false\n  },\n  masterDoi: {\n        type: String,\n        optional: true,\n        index: true,\n        denyUpdate: true\n  },\n  index: {\n        type: SimpleSchema.Integer,\n        optional: true,\n        denyUpdate: true\n  },\n  txId: {\n    type: String,\n    denyUpdate: false\n  }\n});\n\nDoichainEntries.attachSchema(DoichainEntries.schema);\n\n// This represents the keys from Entry objects that should be published\n// to the client. If we add secret properties to Entry objects, don't list\n// them here to keep them private to the server.\nDoichainEntries.publicFields = {\n  _id: 1,\n  name: 1,\n  value: 1,\n  address: 1,\n  masterDoi: 1,\n  index: 1,\n  txId: 1\n};\n","import { ValidatedMethod } from 'meteor/mdg:validated-method';\nimport { Meteor } from 'meteor/meteor';\nimport { DDPRateLimiter } from 'meteor/ddp-rate-limiter';\nimport getKeyPairM from '../../modules/server/doichain/get_key-pair.js';\nimport getBalanceM from '../../modules/server/doichain/get_balance.js';\n\n\nconst getKeyPair = new ValidatedMethod({\n  name: 'doichain.getKeyPair',\n  validate: null,\n  run() {\n    return getKeyPairM();\n  },\n});\n\nconst getBalance = new ValidatedMethod({\n  name: 'doichain.getBalance',\n  validate: null,\n  run() {\n    const logVal = getBalanceM();\n    return logVal;\n  },\n});\n\n\n// Get list of all method names on doichain\nconst OPTINS_METHODS = _.pluck([\n  getKeyPair\n,getBalance], 'name');\n\nif (Meteor.isServer) {\n  // Only allow 5 opt-in operations per connection per second\n  DDPRateLimiter.addRule({\n    name(name) {\n      return _.contains(OPTINS_METHODS, name);\n    },\n\n    // Rate limit per connection ID\n    connectionId() { return true; },\n  }, 5, 1000);\n}\n","import { Meteor} from 'meteor/meteor';\nimport { DDPRateLimiter } from 'meteor/ddp-rate-limiter';\nimport { ValidatedMethod } from 'meteor/mdg:validated-method';\nimport getLanguages from '../../modules/server/languages/get.js';\n\nconst getAllLanguages = new ValidatedMethod({\n  name: 'languages.getAll',\n  validate: null,\n  run() {\n    return getLanguages();\n  },\n});\n\n// Get list of all method names on languages\nconst OPTINS_METHODS = _.pluck([\n  getAllLanguages\n], 'name');\n\nif (Meteor.isServer) {\n  // Only allow 5 opt-in operations per connection per second\n  DDPRateLimiter.addRule({\n    name(name) {\n      return _.contains(OPTINS_METHODS, name);\n    },\n\n    // Rate limit per connection ID\n    connectionId() { return true; },\n  }, 5, 1000);\n}\n","import { Mongo } from 'meteor/mongo';\nimport SimpleSchema from 'simpl-schema';\n\nclass MetaCollection extends Mongo.Collection {\n  insert(data, callback) {\n    const ourData = data;\n    const result = super.insert(ourData, callback);\n    return result;\n  }\n  update(selector, modifier) {\n    const result = super.update(selector, modifier);\n    return result;\n  }\n  remove(selector) {\n    const result = super.remove(selector);\n    return result;\n  }\n}\n\nexport const Meta = new MetaCollection('meta');\n\n// Deny all client-side updates since we will be using methods to manage this collection\nMeta.deny({\n  insert() { return true; },\n  update() { return true; },\n  remove() { return true; },\n});\n\nMeta.schema = new SimpleSchema({\n  _id: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n  },\n  key: {\n    type: String,\n    index: true,\n    denyUpdate: true\n  },\n  value: {\n    type: String\n  }\n});\n\nMeta.attachSchema(Meta.schema);\n\n// This represents the keys from Meta objects that should be published\n// to the client. If we add secret properties to Meta objects, don't list\n// them here to keep them private to the server.\nMeta.publicFields = {\n};\n","import { Mongo } from 'meteor/mongo';\nimport SimpleSchema from 'simpl-schema';\n\nclass SendersCollection extends Mongo.Collection {\n  insert(sender, callback) {\n    const ourSender = sender;\n    ourSender.createdAt = ourSender.createdAt || new Date();\n    const result = super.insert(ourSender, callback);\n    return result;\n  }\n  update(selector, modifier) {\n    const result = super.update(selector, modifier);\n    return result;\n  }\n  remove(selector) {\n    const result = super.remove(selector);\n    return result;\n  }\n}\n\nexport const Senders = new SendersCollection('senders');\n\n// Deny all client-side updates since we will be using methods to manage this collection\nSenders.deny({\n  insert() { return true; },\n  update() { return true; },\n  remove() { return true; },\n});\n\nSenders.schema = new SimpleSchema({\n  _id: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n  },\n  email: {\n    type: String,\n    index: true,\n    denyUpdate: true,\n  },\n  createdAt: {\n    type: Date,\n    denyUpdate: true,\n  }\n});\n\nSenders.attachSchema(Senders.schema);\n\n// This represents the keys from Sender objects that should be published\n// to the client. If we add secret properties to Sender objects, don't list\n// them here to keep them private to the server.\nSenders.publicFields = {\n  email: 1,\n  createdAt: 1\n};\n","import { Meteor} from 'meteor/meteor';\nimport { Meta } from '../meta/meta';\n\n\nMeteor.publish('version', function version() {\n    return Meta.find({});\n});","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { DOI_MAIL_FETCH_URL } from '../../../startup/server/email-configuration.js';\nimport {logSend} from \"../../../startup/server/log-configuration\";\nimport {OptIns} from \"../../../api/opt-ins/opt-ins\";\n\nconst ExportDoisDataSchema = new SimpleSchema({\n  status: {\n    type: String,\n    optional: true,\n  },\n  role:{\n    type:String\n  },\n  userid:{\n    type: String,\n    regEx: SimpleSchema.RegEx.id,\n    optional:true \n  }\n});\n\n//TODO add sender and recipient email address to export\n\nconst exportDois = (data) => {\n  try {\n    const ourData = data;\n    ExportDoisDataSchema.validate(ourData);\n    let pipeline=[{ $match: {\"confirmedAt\":{ $exists: true, $ne: null }} }];\n    \n    if(ourData.role!='admin'||ourData.userid!=undefined){\n      pipeline.push({ $redact:{\n        $cond: {\n          if: { $cmp: [ \"$ownerId\", ourData.userid ] },\n          then: \"$$PRUNE\",\n          else: \"$$KEEP\" }}});\n    }\n    pipeline=[...pipeline,\n        { $lookup: { from: \"recipients\", localField: \"recipient\", foreignField: \"_id\", as: \"RecipientEmail\" } },\n        { $lookup: { from: \"senders\", localField: \"sender\", foreignField: \"_id\", as: \"SenderEmail\" } },\n        { $unwind: \"$SenderEmail\"},\n        { $unwind: \"$RecipientEmail\"},\n        { $project: {_id:1,ownerId:1, createdAt:1, confirmedAt:1,nameId:1, 'SenderEmail.email':1,'RecipientEmail.email':1}\n      }\n    ];\n    //if(ourData.status==1) query = {\"confirmedAt\": { $exists: true, $ne: null }}\n\n    let optIns =  OptIns.aggregate(pipeline);\n    let exportDoiData;\n    try {\n        exportDoiData = optIns;\n        logSend('exportDoi url:',DOI_MAIL_FETCH_URL,JSON.stringify(exportDoiData));\n      return exportDoiData\n\n    } catch(error) {\n      throw \"Error while exporting dois: \"+error;\n    }\n\n  } catch (exception) {\n    throw new Meteor.Error('dapps.exportDoi.exception', exception);\n  }\n};\n\nexport default exportDois;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { DOI_FETCH_ROUTE, DOI_CONFIRMATION_ROUTE, API_PATH, VERSION } from '../../../../server/api/rest/rest.js';\nimport { getUrl } from '../../../startup/server/dapp-configuration.js';\nimport { CONFIRM_CLIENT, CONFIRM_ADDRESS } from '../../../startup/server/doichain-configuration.js';\nimport { getHttpGET } from '../../../../server/api/http.js';\nimport { signMessage } from '../../../../server/api/doichain.js';\nimport { OptIns } from '../../../../imports/api/opt-ins/opt-ins.js';\nimport parseTemplate from '../emails/parse_template.js';\nimport generateDoiToken from '../opt-ins/generate_doi-token.js';\nimport generateDoiHash from '../emails/generate_doi-hash.js';\nimport addOptIn from '../opt-ins/add.js';\nimport addSendMailJob from '../jobs/add_send_mail.js';\nimport {logConfirm, logError} from \"../../../startup/server/log-configuration\";\n\nconst FetchDoiMailDataSchema = new SimpleSchema({\n  name: {\n    type: String\n  },\n  domain: {\n    type: String\n  }\n});\n\n\nconst fetchDoiMailData = (data) => {\n  try {\n    const ourData = data;\n    FetchDoiMailDataSchema.validate(ourData);\n    const url = ourData.domain+API_PATH+VERSION+\"/\"+DOI_FETCH_ROUTE;\n    const signature = signMessage(CONFIRM_CLIENT, CONFIRM_ADDRESS, ourData.name);\n    const query = \"name_id=\"+encodeURIComponent(ourData.name)+\"&signature=\"+encodeURIComponent(signature);\n    logConfirm('calling for doi-email-template:'+url+' query:', query);\n\n    /**\n      TODO when running Send-dApp in Testnet behind NAT this URL will not be accessible from the internet\n      but even when we use the URL from localhost verify andn others will fails.\n     */\n    const response = getHttpGET(url, query);\n    if(response === undefined || response.data === undefined) throw \"Bad response\";\n    const responseData = response.data;\n    logConfirm('response while getting getting email template from URL:',response.data.status);\n\n    if(responseData.status !== \"success\") {\n      if(responseData.error === undefined) throw \"Bad response\";\n      if(responseData.error.includes(\"Opt-In not found\")) {\n        //Do nothing and don't throw error so job is done\n          logError('response data from Send-dApp:',responseData.error);\n        return;\n      }\n      throw responseData.error;\n    }\n    logConfirm('DOI Mail data fetched.');\n\n    const optInId = addOptIn({name: ourData.name});\n    const optIn = OptIns.findOne({_id: optInId});\n    logConfirm('opt-in found:',optIn);\n    if(optIn.confirmationToken !== undefined) return;\n\n    const token = generateDoiToken({id: optIn._id});\n    logConfirm('generated confirmationToken:',token);\n    const confirmationHash = generateDoiHash({id: optIn._id, token: token, redirect: responseData.data.redirect});\n    logConfirm('generated confirmationHash:',confirmationHash);\n    const confirmationUrl = getUrl()+API_PATH+VERSION+\"/\"+DOI_CONFIRMATION_ROUTE+\"/\"+encodeURIComponent(confirmationHash);\n    logConfirm('confirmationUrl:'+confirmationUrl);\n\n    const template = parseTemplate({template: responseData.data.content, data: {\n      confirmation_url: confirmationUrl\n    }});\n\n    //logConfirm('we are using this template:',template);\n\n    logConfirm('sending email to peter for confirmation over bobs dApp');\n    addSendMailJob({\n      to: responseData.data.recipient,\n      subject: responseData.data.subject,\n      message: template,\n      returnPath: responseData.data.returnPath\n    });\n  } catch (exception) {\n    throw new Meteor.Error('dapps.fetchDoiMailData.exception', exception);\n  }\n};\n\nexport default fetchDoiMailData;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { OptIns } from '../../../api/opt-ins/opt-ins.js';\nimport { Recipients } from '../../../api/recipients/recipients.js';\nimport getOptInProvider from '../dns/get_opt-in-provider.js';\nimport getOptInKey from '../dns/get_opt-in-key.js';\nimport verifySignature from '../doichain/verify_signature.js';\nimport { getHttpGET } from '../../../../server/api/http.js';\nimport { DOI_MAIL_FETCH_URL } from '../../../startup/server/email-configuration.js';\nimport { logSend } from \"../../../startup/server/log-configuration\";\nimport { Accounts } from 'meteor/accounts-base'\n\nconst GetDoiMailDataSchema = new SimpleSchema({\n  name_id: {\n    type: String\n  },\n  signature: {\n    type: String\n  }\n});\n\nconst userProfileSchema = new SimpleSchema({\n  subject: {\n    type: String,\n    optional:true\n  },\n  redirect: {\n    type: String,\n    regEx: \"@(https?|ftp)://(-\\\\.)?([^\\\\s/?\\\\.#-]+\\\\.?)+(/[^\\\\s]*)?$@\",\n    optional:true\n  },\n  returnPath: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email,\n    optional:true\n  },\n  templateURL: {\n    type: String,\n    regEx: \"@(https?|ftp)://(-\\\\.)?([^\\\\s/?\\\\.#-]+\\\\.?)+(/[^\\\\s]*)?$@\",\n    optional:true\n  }\n});\n\nconst getDoiMailData = (data) => {\n  try {\n    const ourData = data;\n    GetDoiMailDataSchema.validate(ourData);\n    const optIn = OptIns.findOne({nameId: ourData.name_id});\n    if(optIn === undefined) throw \"Opt-In with name_id: \"+ourData.name_id+\" not found\";\n    logSend('Opt-In found',optIn);\n\n    const recipient = Recipients.findOne({_id: optIn.recipient});\n    if(recipient === undefined) throw \"Recipient not found\";\n    logSend('Recipient found', recipient);\n\n    const parts = recipient.email.split(\"@\");\n    const domain = parts[parts.length-1];\n\n    let publicKey = getOptInKey({ domain: domain});\n\n    if(!publicKey){\n      const provider = getOptInProvider({domain: ourData.domain });\n      logSend(\"using doichain provider instead of directly configured publicKey:\", { provider: provider });\n      publicKey = getOptInKey({ domain: provider}); //get public key from provider or fallback if publickey was not set in dns\n    }\n\n    logSend('queried data: (parts, domain, provider, publicKey)', '('+parts+','+domain+','+publicKey+')');\n\n    //TODO: Only allow access one time\n    // Possible solution:\n    // 1. Provider (confirm dApp) request the data\n    // 2. Provider receive the data\n    // 3. Provider sends confirmation \"I got the data\"\n    // 4. Send dApp lock the data for this opt in\n    logSend('verifying signature...');\n    if(!verifySignature({publicKey: publicKey, data: ourData.name_id, signature: ourData.signature})) {\n      throw \"signature incorrect - access denied\";\n    }\n    \n    logSend('signature verified');\n\n    //TODO: Query for language\n    let doiMailData;\n    try {\n\n      doiMailData = getHttpGET(DOI_MAIL_FETCH_URL, \"\").data;\n      let defaultReturnData = {\n        \"recipient\": recipient.email,\n        \"content\": doiMailData.data.content,\n        \"redirect\": doiMailData.data.redirect,\n        \"subject\": doiMailData.data.subject,\n        \"returnPath\": doiMailData.data.returnPath\n      }\n\n    let returnData = defaultReturnData;\n\n    try{\n      let owner = Accounts.users.findOne({_id: optIn.ownerId});\n      let mailTemplate = owner.profile.mailTemplate;\n      userProfileSchema.validate(mailTemplate);\n\n      returnData[\"redirect\"] = mailTemplate[\"redirect\"] || defaultReturnData[\"redirect\"];\n      returnData[\"subject\"] = mailTemplate[\"subject\"] || defaultReturnData[\"subject\"];\n      returnData[\"returnPath\"] = mailTemplate[\"returnPath\"] || defaultReturnData[\"returnPath\"];\n      returnData[\"content\"] = mailTemplate[\"templateURL\"] ? (getHttpGET(mailTemplate[\"templateURL\"], \"\").content || defaultReturnData[\"content\"]) : defaultReturnData[\"content\"];\n      \n    }\n    catch(error) {\n      returnData=defaultReturnData;\n    }\n\n      logSend('doiMailData and url:', DOI_MAIL_FETCH_URL, returnData);\n\n      return returnData\n\n    } catch(error) {\n      throw \"Error while fetching mail content: \"+error;\n    }\n\n  } catch(exception) {\n    throw new Meteor.Error('dapps.getDoiMailData.exception', exception);\n  }\n};\n\nexport default getDoiMailData;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { resolveTxt } from '../../../../server/api/dns.js';\nimport { FALLBACK_PROVIDER } from '../../../startup/server/dns-configuration.js';\nimport {isRegtest, isTestnet} from \"../../../startup/server/dapp-configuration\";\nimport {logSend} from \"../../../startup/server/log-configuration\";\n\nconst OPT_IN_KEY = \"doichain-opt-in-key\";\nconst OPT_IN_KEY_TESTNET = \"doichain-testnet-opt-in-key\";\n\nconst GetOptInKeySchema = new SimpleSchema({\n  domain: {\n    type: String\n  }\n});\n\n\nconst getOptInKey = (data) => {\n  try {\n    const ourData = data;\n    GetOptInKeySchema.validate(ourData);\n\n    let ourOPT_IN_KEY=OPT_IN_KEY;\n\n    if(isRegtest() || isTestnet()){\n        ourOPT_IN_KEY = OPT_IN_KEY_TESTNET;\n        logSend('Using RegTest:'+isRegtest()+\" Testnet: \"+isTestnet()+\" ourOPT_IN_KEY\",ourOPT_IN_KEY);\n    }\n    const key = resolveTxt(ourOPT_IN_KEY, ourData.domain);\n    logSend('DNS TXT configured public key of recipient email domain and confirmation dapp',{foundKey:key, domain:ourData.domain, dnskey:ourOPT_IN_KEY});\n\n    if(key === undefined) return useFallback(ourData.domain);\n    return key;\n  } catch (exception) {\n    throw new Meteor.Error('dns.getOptInKey.exception', exception);\n  }\n};\n\nconst useFallback = (domain) => {\n  if(domain === FALLBACK_PROVIDER) throw new Meteor.Error(\"Fallback has no key defined!\");\n    logSend(\"Key not defined. Using fallback: \",FALLBACK_PROVIDER);\n  return getOptInKey({domain: FALLBACK_PROVIDER});\n};\n\nexport default getOptInKey;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { resolveTxt } from '../../../../server/api/dns.js';\nimport { FALLBACK_PROVIDER } from '../../../startup/server/dns-configuration.js';\nimport {logSend} from \"../../../startup/server/log-configuration\";\nimport {isRegtest, isTestnet} from \"../../../startup/server/dapp-configuration\";\n\nconst PROVIDER_KEY = \"doichain-opt-in-provider\";\nconst PROVIDER_KEY_TESTNET = \"doichain-testnet-opt-in-provider\";\n\nconst GetOptInProviderSchema = new SimpleSchema({\n  domain: {\n    type: String\n  }\n});\n\n\nconst getOptInProvider = (data) => {\n  try {\n    const ourData = data;\n    GetOptInProviderSchema.validate(ourData);\n\n    let ourPROVIDER_KEY=PROVIDER_KEY;\n    if(isRegtest() || isTestnet()){\n        ourPROVIDER_KEY = PROVIDER_KEY_TESTNET;\n        logSend('Using RegTest:'+isRegtest()+\" : Testnet:\"+isTestnet()+\" PROVIDER_KEY\",{providerKey:ourPROVIDER_KEY, domain:ourData.domain});\n    }\n\n    const provider = resolveTxt(ourPROVIDER_KEY, ourData.domain);\n    if(provider === undefined) return useFallback();\n\n    logSend('opt-in-provider from dns - server of mail recipient: (TXT):',provider);\n    return provider;\n  } catch (exception) {\n    throw new Meteor.Error('dns.getOptInProvider.exception', exception);\n  }\n};\n\nconst useFallback = () => {\n  logSend('Provider not defined. Fallback '+FALLBACK_PROVIDER+' is used');\n  return FALLBACK_PROVIDER;\n};\n\nexport default getOptInProvider;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { CONFIRM_CLIENT, CONFIRM_ADDRESS } from '../../../startup/server/doichain-configuration.js';\nimport { getWif } from '../../../../server/api/doichain.js';\nimport { DoichainEntries } from '../../../api/doichain/entries.js';\nimport addFetchDoiMailDataJob from '../jobs/add_fetch-doi-mail-data.js';\nimport getPrivateKeyFromWif from './get_private-key_from_wif.js';\nimport decryptMessage from './decrypt_message.js';\nimport {logConfirm, logSend} from \"../../../startup/server/log-configuration\";\n\nconst AddDoichainEntrySchema = new SimpleSchema({\n  name: {\n    type: String\n  },\n  value: {\n    type: String\n  },\n  address: {\n    type: String\n  },\n  txId: {\n    type: String\n  }\n});\n\n/**\n * Inserts\n *\n * @param entry\n * @returns {*}\n */\nconst addDoichainEntry = (entry) => {\n  try {\n\n    const ourEntry = entry;\n    logConfirm('adding DoichainEntry on Bob...',ourEntry.name);\n    AddDoichainEntrySchema.validate(ourEntry);\n\n    const ety = DoichainEntries.findOne({name: ourEntry.name});\n    if(ety !== undefined){\n        logSend('returning locally saved entry with _id:'+ety._id);\n        return ety._id;\n    }\n\n    const value = JSON.parse(ourEntry.value);\n    //logSend(\"value:\",value);\n    if(value.from === undefined) throw \"Wrong blockchain entry\"; //TODO if from is missing but value is there, it is probably allready handeled correctly anyways this is not so cool as it seems.\n    const wif = getWif(CONFIRM_CLIENT, CONFIRM_ADDRESS);\n    const privateKey = getPrivateKeyFromWif({wif: wif});\n    logSend('got private key (will not show it here)');\n\n    const domain = decryptMessage({privateKey: privateKey, message: value.from});\n    logSend('decrypted message from domain: ',domain);\n\n    const namePos = ourEntry.name.indexOf('-'); //if this is not a co-registration fetch mail.\n    logSend('namePos:',namePos);\n    const masterDoi = (namePos!=-1)?ourEntry.name.substring(0,namePos):undefined;\n    logSend('masterDoi:',masterDoi);\n    const index = masterDoi?ourEntry.name.substring(namePos+1):undefined;\n    logSend('index:',index);\n\n    const id = DoichainEntries.insert({\n        name: ourEntry.name,\n        value: ourEntry.value,\n        address: ourEntry.address,\n        masterDoi: masterDoi,\n        index: index,\n        txId: ourEntry.txId,\n        expiresIn: ourEntry.expiresIn,\n        expired: ourEntry.expired\n    });\n\n    logSend('DoichainEntry added on Bob:', {id:id,name:ourEntry.name,masterDoi:masterDoi,index:index});\n\n    if(!masterDoi){\n        addFetchDoiMailDataJob({\n            name: ourEntry.name,\n            domain: domain\n        });\n        logSend('New entry added: \\n'+\n            'NameId='+ourEntry.name+\"\\n\"+\n            'Address='+ourEntry.address+\"\\n\"+\n            'TxId='+ourEntry.txId+\"\\n\"+\n            'Value='+ourEntry.value);\n\n    }else{\n        logSend('This transaction belongs to co-registration', masterDoi);\n    }\n\n    return id;\n  } catch (exception) {\n    throw new Meteor.Error('doichain.addEntryAndFetchData.exception', exception);\n  }\n};\n\nexport default addDoichainEntry;\n","import { Meteor } from 'meteor/meteor';\nimport { listSinceBlock, nameShow, getRawTransaction} from '../../../../server/api/doichain.js';\nimport { CONFIRM_CLIENT, CONFIRM_ADDRESS } from '../../../startup/server/doichain-configuration.js';\nimport addDoichainEntry from './add_entry_and_fetch_data.js'\nimport { Meta } from '../../../api/meta/meta.js';\nimport addOrUpdateMeta from '../meta/addOrUpdate.js';\nimport {logConfirm} from \"../../../startup/server/log-configuration\";\n\nconst TX_NAME_START = \"e/\";\nconst LAST_CHECKED_BLOCK_KEY = \"lastCheckedBlock\";\n\nconst checkNewTransaction = (txid, job) => {\n  try {\n\n      if(!txid){\n          logConfirm(\"checkNewTransaction triggered when starting node - checking all confirmed blocks since last check for doichain address\",CONFIRM_ADDRESS);\n\n          try {\n              var lastCheckedBlock = Meta.findOne({key: LAST_CHECKED_BLOCK_KEY});\n              if(lastCheckedBlock !== undefined) lastCheckedBlock = lastCheckedBlock.value;\n              logConfirm(\"lastCheckedBlock\",lastCheckedBlock);\n              const ret = listSinceBlock(CONFIRM_CLIENT, lastCheckedBlock);\n              if(ret === undefined || ret.transactions === undefined) return;\n\n              const txs = ret.transactions;\n              lastCheckedBlock = ret.lastblock;\n              if(!ret || !txs || !txs.length===0){\n                  logConfirm(\"transactions do not contain nameOp transaction details or transaction not found.\", lastCheckedBlock);\n                  addOrUpdateMeta({key: LAST_CHECKED_BLOCK_KEY, value: lastCheckedBlock});\n                  return;\n              }\n\n              logConfirm(\"listSinceBlock\",ret);\n\n              const addressTxs = txs.filter(tx =>\n                  tx.address === CONFIRM_ADDRESS\n                  && tx.name !== undefined //since name_show cannot be read without confirmations\n                  && tx.name.startsWith(\"doi: \"+TX_NAME_START)  //here 'doi: e/xxxx' is already written in the block\n              );\n              addressTxs.forEach(tx => {\n                  logConfirm(\"tx:\",tx);\n                  var txName = tx.name.substring((\"doi: \"+TX_NAME_START).length);\n                  logConfirm(\"excuting name_show in order to get value of nameId:\", txName);\n                  const ety = nameShow(CONFIRM_CLIENT, txName);\n                  logConfirm(\"nameShow: value\",ety);\n                  if(!ety){\n                      logConfirm(\"couldn't find name - obviously not (yet?!) confirmed in blockchain:\", ety);\n                      return;\n                  }\n                  addTx(txName, ety.value,tx.address,tx.txid); //TODO ety.value.from is maybe NOT existing because of this its  (maybe) ont working...\n              });\n              addOrUpdateMeta({key: LAST_CHECKED_BLOCK_KEY, value: lastCheckedBlock});\n              logConfirm(\"Transactions updated - lastCheckedBlock:\",lastCheckedBlock);\n              job.done();\n          } catch(exception) {\n              throw new Meteor.Error('namecoin.checkNewTransactions.exception', exception);\n          }\n\n      }else{\n          logConfirm(\"txid: \"+txid+\" was triggered by walletnotify for address:\",CONFIRM_ADDRESS);\n\n          const ret = getRawTransaction(CONFIRM_CLIENT, txid);\n          const txs = ret.vout;\n\n          if(!ret || !txs || !txs.length===0){\n              logConfirm(\"txid \"+txid+' does not contain transaction details or transaction not found.');\n              return;\n          }\n         // logConfirm('now checking raw transactions with filter:',txs);\n\n          const addressTxs = txs.filter(tx =>\n              tx.scriptPubKey !== undefined\n              && tx.scriptPubKey.nameOp !== undefined\n              && tx.scriptPubKey.nameOp.op === \"name_doi\"\n            //  && tx.scriptPubKey.addresses[0] === CONFIRM_ADDRESS //only own transaction should arrive here. - so check on own address unneccesary\n              && tx.scriptPubKey.nameOp.name !== undefined\n              && tx.scriptPubKey.nameOp.name.startsWith(TX_NAME_START)\n          );\n\n          //logConfirm(\"found name_op transactions:\", addressTxs);\n          addressTxs.forEach(tx => {\n              addTx(tx.scriptPubKey.nameOp.name, tx.scriptPubKey.nameOp.value,tx.scriptPubKey.addresses[0],txid);\n          });\n      }\n  } catch(exception) {\n    throw new Meteor.Error('doichain.checkNewTransactions.exception', exception);\n  }\n  return true;\n};\n\n\nfunction addTx(name, value, address, txid) {\n    const txName = name.substring(TX_NAME_START.length);\n\n    addDoichainEntry({\n        name: txName,\n        value: value,\n        address: address,\n        txId: txid\n    });\n}\n\nexport default checkNewTransaction;\n\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport crypto from 'crypto';\nimport ecies from 'standard-ecies';\n\nconst DecryptMessageSchema = new SimpleSchema({\n  privateKey: {\n    type: String\n  },\n  message: {\n    type: String\n  }\n});\n\nconst decryptMessage = (data) => {\n  try {\n    const ourData = data;\n    DecryptMessageSchema.validate(ourData);\n    const privateKey = Buffer.from(ourData.privateKey, 'hex');\n    const ecdh = crypto.createECDH('secp256k1');\n    ecdh.setPrivateKey(privateKey);\n    const message = Buffer.from(ourData.message, 'hex');\n    return ecies.decrypt(ecdh, message).toString('utf8');\n  } catch(exception) {\n    throw new Meteor.Error('doichain.decryptMessage.exception', exception);\n  }\n};\n\nexport default decryptMessage;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport ecies from 'standard-ecies';\n\nconst EncryptMessageSchema = new SimpleSchema({\n  publicKey: {\n    type: String\n  },\n  message: {\n    type: String\n  }\n});\n\nconst encryptMessage = (data) => {\n  try {\n    const ourData = data;\n    EncryptMessageSchema.validate(ourData);\n    const publicKey = Buffer.from(ourData.publicKey, 'hex');\n    const message = Buffer.from(ourData.message);\n    return ecies.encrypt(publicKey, message).toString('hex');\n  } catch(exception) {\n    throw new Meteor.Error('doichain.encryptMessage.exception', exception);\n  }\n};\n\nexport default encryptMessage;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { OptIns } from '../../../api/opt-ins/opt-ins.js';\nimport getKeyPair from './get_key-pair.js';\nimport {logSend} from \"../../../startup/server/log-configuration\";\n\nconst GenerateNameIdSchema = new SimpleSchema({\n  id: {\n    type: String\n  },\n  masterDoi: {\n      type: String,\n      optional: true\n  },\n  index: {\n      type: SimpleSchema.Integer,\n      optional: true\n  }\n});\n\nconst generateNameId = (optIn) => {\n  try {\n    const ourOptIn = optIn;\n    GenerateNameIdSchema.validate(ourOptIn);\n    let nameId;\n    if(optIn.masterDoi){\n        nameId = ourOptIn.masterDoi+\"-\"+ourOptIn.index;\n        logSend(\"used master_doi as nameId index \"+optIn.index+\"storage:\",nameId);\n    }\n    else{\n        nameId = getKeyPair().privateKey;\n        logSend(\"generated nameId for doichain storage:\",nameId);\n    }\n\n    OptIns.update({_id : ourOptIn.id}, {$set:{nameId: nameId}});\n\n    return nameId;\n  } catch(exception) {\n    throw new Meteor.Error('doichain.generateNameId.exception', exception);\n  }\n};\n\nexport default generateNameId;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport CryptoJS from 'crypto-js';\nimport Base58 from 'bs58';\nimport { isRegtest } from '../../../startup/server/dapp-configuration.js';\nimport {isTestnet} from \"../../../startup/server/dapp-configuration\";\n\nconst VERSION_BYTE = 0x34;\nconst VERSION_BYTE_REGTEST = 0x6f;\nconst GetAddressSchema = new SimpleSchema({\n  publicKey: {\n    type: String\n  }\n});\n\nconst getAddress = (data) => {\n  try {\n    const ourData = data;\n    GetAddressSchema.validate(ourData);\n    return _getAddress(ourData.publicKey);\n  } catch(exception) {\n    throw new Meteor.Error('doichain.getAddress.exception', exception);\n  }\n};\n\nfunction _getAddress(publicKey) {\n  const pubKey = CryptoJS.lib.WordArray.create(Buffer.from(publicKey, 'hex'));\n  let key = CryptoJS.SHA256(pubKey);\n  key = CryptoJS.RIPEMD160(key);\n  let versionByte = VERSION_BYTE;\n  if(isRegtest() || isTestnet()) versionByte = VERSION_BYTE_REGTEST;\n  let address = Buffer.concat([Buffer.from([versionByte]), Buffer.from(key.toString(), 'hex')]);\n  key = CryptoJS.SHA256(CryptoJS.lib.WordArray.create(address));\n  key = CryptoJS.SHA256(key);\n  let checksum = key.toString().substring(0, 8);\n  address = new Buffer(address.toString('hex')+checksum,'hex');\n  address = Base58.encode(address);\n  return address;\n}\n\nexport default getAddress;\n","import { Meteor } from 'meteor/meteor';\nimport { getBalance } from '../../../../server/api/doichain.js';\nimport { CONFIRM_CLIENT} from '../../../startup/server/doichain-configuration.js';\n\n\nconst get_Balance = () => {\n    \n  try {\n    const bal=getBalance(CONFIRM_CLIENT);\n    return bal;\n    \n  } catch(exception) {\n    throw new Meteor.Error('doichain.getBalance.exception', exception);\n  }\n  return true;\n};\n\nexport default get_Balance;\n\n","import { Meteor } from 'meteor/meteor';\nimport CryptoJS from 'crypto-js';\nimport SimpleSchema from 'simpl-schema';\n\nconst GetDataHashSchema = new SimpleSchema({\n  data: {\n    type: String\n  }\n});\n\nconst getDataHash = (data) => {\n  try {\n    const ourData = data;\n      GetDataHashSchema.validate(ourData);\n    const hash = CryptoJS.SHA256(ourData).toString();\n    return hash;\n  } catch(exception) {\n    throw new Meteor.Error('doichain.getDataHash.exception', exception);\n  }\n};\n\nexport default getDataHash;\n","import { Meteor } from 'meteor/meteor';\nimport { randomBytes } from 'crypto';\nimport secp256k1 from 'secp256k1';\n\nconst getKeyPair = () => {\n  try {\n    let privKey\n    do {privKey = randomBytes(32)} while(!secp256k1.privateKeyVerify(privKey))\n    const privateKey = privKey;\n    const publicKey = secp256k1.publicKeyCreate(privateKey);\n    return {\n      privateKey: privateKey.toString('hex').toUpperCase(),\n      publicKey: publicKey.toString('hex').toUpperCase()\n    }\n  } catch(exception) {\n    throw new Meteor.Error('doichain.getKeyPair.exception', exception);\n  }\n};\n\nexport default getKeyPair;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport Base58 from 'bs58';\n\nconst GetPrivateKeyFromWifSchema = new SimpleSchema({\n  wif: {\n    type: String\n  }\n});\n\nconst getPrivateKeyFromWif = (data) => {\n  try {\n    const ourData = data;\n    GetPrivateKeyFromWifSchema.validate(ourData);\n    return _getPrivateKeyFromWif(ourData.wif);\n  } catch(exception) {\n    throw new Meteor.Error('doichain.getPrivateKeyFromWif.exception', exception);\n  }\n};\n\nfunction _getPrivateKeyFromWif(wif) {\n  var privateKey = Base58.decode(wif).toString('hex');\n  privateKey = privateKey.substring(2, privateKey.length - 8);\n  if(privateKey.length === 66 && privateKey.endsWith(\"01\")) {\n    privateKey = privateKey.substring(0, privateKey.length - 2);\n  }\n  return privateKey;\n}\n\nexport default getPrivateKeyFromWif;\n","import SimpleSchema from 'simpl-schema';\nimport {logSend} from \"../../../startup/server/log-configuration\";\n\nimport getOptInKey from \"../dns/get_opt-in-key\";\nimport getOptInProvider from \"../dns/get_opt-in-provider\";\nimport getAddress from \"./get_address\";\n\nconst GetPublicKeySchema = new SimpleSchema({\n    domain: {\n        type: String\n    }\n});\n\nconst getPublicKeyAndAddress = (data) => {\n\n    const ourData = data;\n    GetPublicKeySchema.validate(ourData);\n\n    let publicKey = getOptInKey({domain: ourData.domain});\n    if(!publicKey){\n        const provider = getOptInProvider({domain: ourData.domain});\n        logSend(\"using doichain provider instead of directly configured publicKey:\",{provider:provider});\n        publicKey = getOptInKey({domain: provider}); //get public key from provider or fallback if publickey was not set in dns\n    }\n    const destAddress =  getAddress({publicKey: publicKey});\n    logSend('publicKey and destAddress ', {publicKey:publicKey,destAddress:destAddress});\n    return {publicKey:publicKey,destAddress:destAddress};\n};\n\nexport default getPublicKeyAndAddress;","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport bitcore from 'bitcore-lib';\nimport Message from 'bitcore-message';\n\nconst GetSignatureSchema = new SimpleSchema({\n  message: {\n    type: String\n  },\n  privateKey: {\n    type: String\n  }\n});\n\nconst getSignature = (data) => {\n  try {\n    const ourData = data;\n    GetSignatureSchema.validate(ourData);\n    const signature = Message(ourData.message).sign(new bitcore.PrivateKey(ourData.privateKey));\n    return signature;\n  } catch(exception) {\n    throw new Meteor.Error('doichain.getSignature.exception', exception);\n  }\n};\n\nexport default getSignature;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { SEND_CLIENT } from '../../../startup/server/doichain-configuration.js';\nimport encryptMessage from \"./encrypt_message\";\nimport {getUrl} from \"../../../startup/server/dapp-configuration\";\nimport {logBlockchain, logSend} from \"../../../startup/server/log-configuration\";\nimport {feeDoi,nameDoi} from \"../../../../server/api/doichain\";\nimport {OptIns} from \"../../../api/opt-ins/opt-ins\";\nimport getPublicKeyAndAddress from \"./get_publickey_and_address_by_domain\";\n\n\nconst InsertSchema = new SimpleSchema({\n  nameId: {\n    type: String\n  },\n  signature: {\n    type: String\n  },\n  dataHash: {\n    type: String\n  },\n  domain: {\n    type: String\n  },\n  soiDate: {\n    type: Date\n  }\n});\n\nconst insert = (data) => {\n  const ourData = data;\n  try {\n    InsertSchema.validate(ourData);\n    logSend(\"domain:\",ourData.domain);\n\n    const publicKeyAndAddress = getPublicKeyAndAddress({domain:ourData.domain});\n    const from = encryptMessage({publicKey: publicKeyAndAddress.publicKey, message: getUrl()});\n    logSend('encrypted url for use ad from in doichain value:',getUrl(),from);\n\n    const nameValue = JSON.stringify({\n        signature: ourData.signature,\n        dataHash: ourData.dataHash,\n        from: from\n    });\n\n    //TODO (!) this must be replaced in future by \"atomic name trading example\" https://wiki.namecoin.info/?title=Atomic_Name-Trading\n    logBlockchain('sending a fee to bob so he can pay the doi storage (destAddress):', publicKeyAndAddress.destAddress);\n    const feeDoiTx = feeDoi(SEND_CLIENT, publicKeyAndAddress.destAddress);\n    logBlockchain('fee send txid to destaddress', feeDoiTx, publicKeyAndAddress.destAddress);\n\n    logBlockchain('adding data to blockchain via name_doi (nameId,value,destAddress):', ourData.nameId,nameValue,publicKeyAndAddress.destAddress);\n    const nameDoiTx = nameDoi(SEND_CLIENT, ourData.nameId, nameValue, publicKeyAndAddress.destAddress);\n    logBlockchain('name_doi added blockchain. txid:', nameDoiTx);\n\n    OptIns.update({nameId: ourData.nameId}, {$set: {txId:nameDoiTx}});\n    logBlockchain('updating OptIn locally with:', {nameId: ourData.nameId, txId: nameDoiTx});\n\n  } catch(exception) {\n      OptIns.update({nameId: ourData.nameId}, {$set: {error:JSON.stringify(exception.message)}});\n    throw new Meteor.Error('doichain.insert.exception', exception); //TODO update opt-in in local db to inform user about the error! e.g. Insufficient funds etc.\n  }\n};\n\nexport default insert;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { CONFIRM_CLIENT } from '../../../startup/server/doichain-configuration.js';\nimport {getWif, signMessage, getTransaction, nameDoi, nameShow} from \"../../../../server/api/doichain\";\nimport {API_PATH, DOI_CONFIRMATION_NOTIFY_ROUTE, VERSION} from \"../../../../server/api/rest/rest\";\nimport {CONFIRM_ADDRESS} from \"../../../startup/server/doichain-configuration\";\nimport {getHttpPUT} from \"../../../../server/api/http\";\nimport {logConfirm} from \"../../../startup/server/log-configuration\";\nimport getPrivateKeyFromWif from \"./get_private-key_from_wif\";\nimport decryptMessage from \"./decrypt_message\";\nimport {OptIns} from \"../../../api/opt-ins/opt-ins\";\n\nconst UpdateSchema = new SimpleSchema({\n  nameId: {\n    type: String\n  },\n  value: {\n    type: String\n  },\n  host : {\n      type: String,\n      optional: true,\n  },\n  fromHostUrl : {\n      type: String\n  }\n});\n\nconst update = (data, job) => {\n  try {\n    const ourData = data;\n\n    UpdateSchema.validate(ourData);\n\n    //stop this update until this name as at least 1 confirmation\n    const name_data = nameShow(CONFIRM_CLIENT,ourData.nameId);\n    if(name_data === undefined){\n        rerun(job);\n        logConfirm('name not visible - delaying name update',ourData.nameId);\n        return;\n    }\n    const our_transaction = getTransaction(CONFIRM_CLIENT,name_data.txid);\n    if(our_transaction.confirmations===0){\n        rerun(job);\n        logConfirm('transaction has 0 confirmations - delaying name update',JSON.parse(ourData.value));\n        return;\n    }\n    logConfirm('updating blockchain with doiSignature:',JSON.parse(ourData.value));\n    const wif = getWif(CONFIRM_CLIENT, CONFIRM_ADDRESS);\n    const privateKey = getPrivateKeyFromWif({wif: wif});\n    logConfirm('got private key (will not show it here) in order to decrypt Send-dApp host url from value:',ourData.fromHostUrl);\n    const ourfromHostUrl = decryptMessage({privateKey: privateKey, message: ourData.fromHostUrl});\n    logConfirm('decrypted fromHostUrl',ourfromHostUrl);\n    const url = ourfromHostUrl+API_PATH+VERSION+\"/\"+DOI_CONFIRMATION_NOTIFY_ROUTE;\n\n    logConfirm('creating signature with ADDRESS'+CONFIRM_ADDRESS+\" nameId:\",ourData.value);\n    const signature = signMessage(CONFIRM_CLIENT, CONFIRM_ADDRESS, ourData.nameId); //TODO why here over nameID?\n    logConfirm('signature created:',signature);\n\n    const updateData = {\n        nameId: ourData.nameId,\n        signature: signature,\n        host: ourData.host\n    };\n\n    try {\n        const txid = nameDoi(CONFIRM_CLIENT, ourData.nameId, ourData.value, null);\n        logConfirm('update transaction txid:',txid);\n    }catch(exception){\n        //\n        logConfirm('this nameDOI doesnÂ´t have a block yet and will be updated with the next block and with the next queue start:',ourData.nameId);\n        if(exception.toString().indexOf(\"there is already a registration for this doi name\")==-1) {\n            OptIns.update({nameId: ourData.nameId}, {$set: {error: JSON.stringify(exception.message)}});\n        }\n        throw new Meteor.Error('doichain.update.exception', exception);\n        //}else{\n        //    logConfirm('this nameDOI doesnÂ´t have a block yet and will be updated with the next block and with the next queue start:',ourData.nameId);\n        //}\n    }\n\n    const response = getHttpPUT(url, updateData);\n    logConfirm('informed send dApp about confirmed doi on url:'+url+' with updateData'+JSON.stringify(updateData)+\" response:\",response.data);\n    job.done();\n  } catch(exception) {\n    throw new Meteor.Error('doichain.update.exception', exception);\n  }\n};\n\nfunction rerun(job){\n    logConfirm('rerunning txid in 10sec - canceling old job','');\n    job.cancel();\n    logConfirm('restart blockchain doi update','');\n    job.restart(\n        {\n            //repeats: 600,   // Only repeat this once\n            // This is the default\n           // wait: 10000   // Wait 10 sec between repeats\n                          // Default is previous setting\n        },\n        function (err, result) {\n            if (result) {\n                logConfirm('rerunning txid in 10sec:',result);\n            }\n        }\n    );\n}\n\nexport default update;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport bitcore from 'bitcore-lib';\nimport Message from 'bitcore-message';\nimport {logError, logVerify} from \"../../../startup/server/log-configuration\";\nconst NETWORK = bitcore.Networks.add({\n  name: 'doichain',\n  alias: 'doichain',\n  pubkeyhash: 0x34,\n  privatekey: 0xB4,\n  scripthash: 13,\n  networkMagic: 0xf9beb4fe,\n});\n\nconst VerifySignatureSchema = new SimpleSchema({\n  data: {\n    type: String\n  },\n  publicKey: {\n    type: String\n  },\n  signature: {\n    type: String\n  }\n});\n\nconst verifySignature = (data) => {\n  try {\n    const ourData = data;\n    logVerify('verifySignature:',ourData);\n    VerifySignatureSchema.validate(ourData);\n    const address = bitcore.Address.fromPublicKey(new bitcore.PublicKey(ourData.publicKey), NETWORK);\n    try {\n      return Message(ourData.data).verify(address, ourData.signature);\n    } catch(error) { logError(error)}\n    return false;\n  } catch(exception) {\n    throw new Meteor.Error('doichain.verifySignature.exception', exception);\n  }\n};\n\nexport default verifySignature;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { OptIns } from '../../../api/opt-ins/opt-ins.js';\nimport { Senders } from '../../../api/senders/senders.js';\nimport { Recipients } from '../../../api/recipients/recipients.js';\nimport generateNameId from './generate_name-id.js';\nimport getSignature from './get_signature.js';\nimport getDataHash from './get_data-hash.js';\nimport addInsertBlockchainJob from '../jobs/add_insert_blockchain.js';\nimport {logSend} from \"../../../startup/server/log-configuration\";\n\nconst WriteToBlockchainSchema = new SimpleSchema({\n  id: {\n    type: String\n  }\n});\n\nconst writeToBlockchain = (data) => {\n  try {\n    const ourData = data;\n    WriteToBlockchainSchema.validate(ourData);\n\n    const optIn = OptIns.findOne({_id: data.id});\n    const recipient = Recipients.findOne({_id: optIn.recipient});\n    const sender = Senders.findOne({_id: optIn.sender});\n    logSend(\"optIn data:\",{index:ourData.index, optIn:optIn,recipient:recipient,sender: sender});\n\n\n    const nameId = generateNameId({id: data.id,index:optIn.index,masterDoi:optIn.masterDoi });\n    const signature = getSignature({message: recipient.email+sender.email, privateKey: recipient.privateKey});\n    logSend(\"generated signature from email recipient and sender:\",signature);\n\n    let dataHash = \"\";\n\n    if(optIn.data) {\n      dataHash = getDataHash({data: optIn.data});\n      logSend(\"generated datahash from given data:\",dataHash);\n    }\n\n    const parts = recipient.email.split(\"@\");\n    const domain = parts[parts.length-1];\n    logSend(\"email domain for publicKey request is:\",domain);\n    addInsertBlockchainJob({\n      nameId: nameId,\n      signature: signature,\n      dataHash: dataHash,\n      domain: domain,\n      soiDate: optIn.createdAt\n    })\n  } catch (exception) {\n    throw new Meteor.Error('doichain.writeToBlockchain.exception', exception);\n  }\n};\n\nexport default writeToBlockchain\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { HashIds } from '../../../startup/server/email-configuration.js';\n\nconst DecodeDoiHashSchema = new SimpleSchema({\n  hash: {\n    type: String\n  }\n});\n\nconst decodeDoiHash = (hash) => {\n  try {\n    const ourHash = hash;\n    DecodeDoiHashSchema.validate(ourHash);\n    const hex = HashIds.decodeHex(ourHash.hash);\n    if(!hex || hex === '') throw \"Wrong hash\";\n    try {\n      const obj = JSON.parse(Buffer(hex, 'hex').toString('ascii'));\n      return obj;\n    } catch(exception) {throw \"Wrong hash\";}\n  } catch (exception) {\n    throw new Meteor.Error('emails.decode_doi-hash.exception', exception);\n  }\n};\n\nexport default decodeDoiHash;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { HashIds } from '../../../startup/server/email-configuration.js';\n\nconst GenerateDoiHashSchema = new SimpleSchema({\n  id: {\n    type: String\n  },\n  token: {\n    type: String\n  },\n  redirect: {\n    type: String\n  }\n});\n\nconst generateDoiHash = (optIn) => {\n  try {\n    const ourOptIn = optIn;\n    GenerateDoiHashSchema.validate(ourOptIn);\n\n    const json = JSON.stringify({\n      id: ourOptIn.id,\n      token: ourOptIn.token,\n      redirect: ourOptIn.redirect\n    });\n\n    const hex = Buffer(json).toString('hex');\n    const hash = HashIds.encodeHex(hex);\n    return hash;\n  } catch (exception) {\n    throw new Meteor.Error('emails.generate_doi-hash.exception', exception);\n  }\n};\n\nexport default generateDoiHash;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport {logConfirm} from \"../../../startup/server/log-configuration\";\n\nconst PLACEHOLDER_REGEX = /\\${([\\w]*)}/g;\nconst ParseTemplateSchema = new SimpleSchema({\n  template: {\n    type: String,\n  },\n  data: {\n    type: Object,\n    blackbox: true\n  }\n});\n\nconst parseTemplate = (data) => {\n  try {\n    const ourData = data;\n    //logConfirm('parseTemplate:',ourData);\n\n    ParseTemplateSchema.validate(ourData);\n    logConfirm('ParseTemplateSchema validated');\n\n    var _match;\n    var template = ourData.template;\n   //logConfirm('doing some regex with template:',template);\n\n    do {\n      _match = PLACEHOLDER_REGEX.exec(template);\n      if(_match) template = _replacePlaceholder(template, _match, ourData.data[_match[1]]);\n    } while (_match);\n    return template;\n  } catch (exception) {\n    throw new Meteor.Error('emails.parseTemplate.exception', exception);\n  }\n};\n\nfunction _replacePlaceholder(template, _match, replace) {\n  var rep = replace;\n  if(replace === undefined) rep = \"\";\n  return template.substring(0, _match.index)+rep+template.substring(_match.index+_match[0].length);\n}\n\nexport default parseTemplate;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport {logConfirm} from \"../../../startup/server/log-configuration\";\nimport { DOI_MAIL_DEFAULT_EMAIL_FROM } from '../../../startup/server/email-configuration.js';\n\nconst SendMailSchema = new SimpleSchema({\n  from: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  to: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  subject: {\n    type: String,\n  },\n  message: {\n    type: String,\n  },\n  returnPath: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  }\n});\n\nconst sendMail = (mail) => {\n  try {\n\n    mail.from = DOI_MAIL_DEFAULT_EMAIL_FROM;\n\n    const ourMail = mail;\n    logConfirm('sending email with data:',{to:mail.to, subject:mail.subject});\n    SendMailSchema.validate(ourMail);\n    //TODO: Text fallback\n    Email.send({\n      from: mail.from,\n      to: mail.to,\n      subject: mail.subject,\n      html: mail.message,\n      headers: {\n        'Return-Path': mail.returnPath,\n      }\n    });\n\n  } catch (exception) {\n    throw new Meteor.Error('emails.send.exception', exception);\n  }\n};\n\nexport default sendMail;\n","import { Meteor } from 'meteor/meteor';\nimport { Job } from 'meteor/vsivsi:job-collection';\nimport { BlockchainJobs } from '../../../../server/api/blockchain_jobs.js';\n\nconst addCheckNewTransactionsBlockchainJob = () => {\n  try {\n    const job = new Job(BlockchainJobs, 'checkNewTransaction', {});\n    job.retry({retries: 60, wait: 15*1000 }).save({cancelRepeats: true});\n  } catch (exception) {\n    throw new Meteor.Error('jobs.addCheckNewTransactionsBlockchain.exception', exception);\n  }\n};\n\nexport default addCheckNewTransactionsBlockchainJob;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { Job } from 'meteor/vsivsi:job-collection';\nimport { DAppJobs } from '../../../../server/api/dapp_jobs.js';\n\nconst AddFetchDoiMailDataJobSchema = new SimpleSchema({\n  name: {\n    type: String\n  },\n  domain: {\n    type: String\n  }\n});\n\nconst addFetchDoiMailDataJob = (data) => {\n  try {\n    const ourData = data;\n    AddFetchDoiMailDataJobSchema.validate(ourData);\n    const job = new Job(DAppJobs, 'fetchDoiMailData', ourData);\n    job.retry({retries: 5, wait: 1*10*1000 }).save(); //check every 10 secs 5 times\n  } catch (exception) {\n    throw new Meteor.Error('jobs.addFetchDoiMailData.exception', exception);\n  }\n};\n\nexport default addFetchDoiMailDataJob;\n","import { Meteor } from 'meteor/meteor';\nimport { Job } from 'meteor/vsivsi:job-collection';\nimport SimpleSchema from 'simpl-schema';\nimport { BlockchainJobs } from '../../../../server/api/blockchain_jobs.js';\n\nconst AddInsertBlockchainJobSchema = new SimpleSchema({\n  nameId: {\n    type: String\n  },\n  signature: {\n    type: String\n  },\n  dataHash: {\n    type: String,\n    optional:true\n  },\n  domain: {\n    type: String\n  },\n  soiDate: {\n    type: Date\n  }\n});\n\nconst addInsertBlockchainJob = (entry) => {\n  try {\n    const ourEntry = entry;\n    AddInsertBlockchainJobSchema.validate(ourEntry);\n    const job = new Job(BlockchainJobs, 'insert', ourEntry);\n    job.retry({retries: 10, wait: 3*60*1000 }).save(); //check every 10sec for 1h\n  } catch (exception) {\n    throw new Meteor.Error('jobs.addInsertBlockchain.exception', exception);\n  }\n};\n\nexport default addInsertBlockchainJob;\n","import { Meteor } from 'meteor/meteor';\nimport { Job } from 'meteor/vsivsi:job-collection';\nimport SimpleSchema from 'simpl-schema';\nimport { MailJobs } from '../../../../server/api/mail_jobs.js';\n\nconst AddSendMailJobSchema = new SimpleSchema({\n  /*from: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },*/\n  to: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  subject: {\n    type: String,\n  },\n  message: {\n    type: String,\n  },\n  returnPath: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  }\n});\n\nconst addSendMailJob = (mail) => {\n  try {\n    const ourMail = mail;\n    AddSendMailJobSchema.validate(ourMail);\n    const job = new Job(MailJobs, 'send', ourMail);\n    job.retry({retries: 5, wait: 60*1000 }).save();\n  } catch (exception) {\n    throw new Meteor.Error('jobs.addSendMail.exception', exception);\n  }\n};\n\nexport default addSendMailJob;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { Job } from 'meteor/vsivsi:job-collection';\nimport { BlockchainJobs } from '../../../../server/api/blockchain_jobs.js';\n\nconst AddUpdateBlockchainJobSchema = new SimpleSchema({\n  nameId: {\n    type: String\n  },\n  value: {\n    type: String\n  },\n  fromHostUrl: {\n    type: String\n  },\n  host: {\n      type: String\n  }\n});\n\nconst addUpdateBlockchainJob = (entry) => {\n  try {\n    const ourEntry = entry;\n    AddUpdateBlockchainJobSchema.validate(ourEntry);\n    const job = new Job(BlockchainJobs, 'update', ourEntry);\n    job.retry({retries: 360, wait: 1*10*1000 }).save();\n  } catch (exception) {\n    throw new Meteor.Error('jobs.addUpdateBlockchain.exception', exception);\n  }\n};\n\nexport default addUpdateBlockchainJob;\n","import { Meteor } from 'meteor/meteor';\nimport i18n from 'meteor/universe:i18n';\n\n// universe:i18n only bundles the default language on the client side.\n// To get a list of all avialble languages with at least one translation,\n// i18n.getLanguages() must be called server side.\nconst getLanguages = () => {\n  try {\n    return i18n.getLanguages();\n  } catch (exception) {\n    throw new Meteor.Error('languages.get.exception', exception);\n  }\n};\n\nexport default getLanguages;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { Meta } from '../../../api/meta/meta.js';\n\nconst AddOrUpdateMetaSchema = new SimpleSchema({\n  key: {\n    type: String\n  },\n  value: {\n    type: String\n  }\n});\n\nconst addOrUpdateMeta = (data) => {\n  try {\n    const ourData = data;\n    AddOrUpdateMetaSchema.validate(ourData);\n    const meta = Meta.findOne({key: ourData.key});\n    if(meta !== undefined) Meta.update({_id : meta._id}, {$set: {\n      value: ourData.value\n    }});\n    else return Meta.insert({\n      key: ourData.key,\n      value: ourData.value\n    })\n  } catch (exception) {\n    throw new Meteor.Error('meta.addOrUpdate.exception', exception);\n  }\n};\n\nexport default addOrUpdateMeta;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { OptIns } from '../../../api/opt-ins/opt-ins.js';\n\nconst AddOptInSchema = new SimpleSchema({\n  name: {\n    type: String\n  }\n});\n\nconst addOptIn = (optIn) => {\n  try {\n    const ourOptIn = optIn;\n    AddOptInSchema.validate(ourOptIn);\n    const optIns = OptIns.find({nameId: ourOptIn.name}).fetch();\n    if(optIns.length > 0) return optIns[0]._id;\n    const optInId = OptIns.insert({\n      nameId: ourOptIn.name\n    });\n    return optInId;\n  } catch (exception) {\n    throw new Meteor.Error('opt-ins.add.exception', exception);\n  }\n};\n\nexport default addOptIn;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport addRecipient from '../recipients/add.js';\nimport addSender from '../senders/add.js';\nimport { OptIns } from '../../../api/opt-ins/opt-ins.js';\nimport writeToBlockchain from '../doichain/write_to_blockchain.js';\nimport {logError, logSend} from \"../../../startup/server/log-configuration\";\n\n\nconst AddOptInSchema = new SimpleSchema({\n  recipient_mail: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  sender_mail: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  data: {\n    type: String,\n    optional: true\n  },\n  master_doi: {\n      type: String,\n      optional: true\n  },\n  index: {\n      type: SimpleSchema.Integer,\n      optional: true\n  },\n  ownerId: {\n    type: String,\n    regEx: SimpleSchema.RegEx.id\n  }\n});\n\nconst addOptIn = (optIn) => {\n  try {\n    const ourOptIn = optIn;\n    AddOptInSchema.validate(ourOptIn);\n\n    const recipient = {\n      email: ourOptIn.recipient_mail\n    }\n    const recipientId = addRecipient(recipient);\n    const sender = {\n      email: ourOptIn.sender_mail\n    }\n    const senderId = addSender(sender);\n    \n    const optIns = OptIns.find({recipient: recipientId, sender: senderId}).fetch();\n    if(optIns.length > 0) return optIns[0]._id; //TODO when SOI already exists resend email?\n\n    if(ourOptIn.data !== undefined) {\n      try {\n        JSON.parse(ourOptIn.data);\n      } catch(error) {\n        logError(\"ourOptIn.data:\",ourOptIn.data);\n        throw \"Invalid data json \";\n      }\n    }\n    \n    const optInId = OptIns.insert({\n      recipient: recipientId,\n      sender: senderId,\n      index: ourOptIn.index,\n      masterDoi : ourOptIn.master_doi,\n      data: ourOptIn.data,\n      ownerId: ourOptIn.ownerId\n    });\n    logSend(\"optIn (index:\"+ourOptIn.index+\" added to local db with optInId\",optInId);\n\n    writeToBlockchain({id: optInId});\n    return optInId;\n  } catch (exception) {\n    throw new Meteor.Error('opt-ins.addAndWriteToBlockchain.exception', exception);\n  }\n};\n\nexport default addOptIn;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { CONFIRM_CLIENT, CONFIRM_ADDRESS } from '../../../startup/server/doichain-configuration.js';\nimport { OptIns } from '../../../api/opt-ins/opt-ins.js';\nimport { DoichainEntries } from '../../../api/doichain/entries.js';\nimport decodeDoiHash from '../emails/decode_doi-hash.js';\nimport { signMessage } from '../../../../server/api/doichain.js';\nimport addUpdateBlockchainJob from '../jobs/add_update_blockchain.js';\nimport {logConfirm} from \"../../../startup/server/log-configuration\";\n\nconst ConfirmOptInSchema = new SimpleSchema({\n  host: {\n    type: String\n  },\n  hash: {\n    type: String\n  }\n});\n\nconst confirmOptIn = (request) => {\n  try {\n    const ourRequest = request;\n    ConfirmOptInSchema.validate(ourRequest);\n    const decoded = decodeDoiHash({hash: request.hash});\n    const optIn = OptIns.findOne({_id: decoded.id});\n    if(optIn === undefined || optIn.confirmationToken !== decoded.token) throw \"Invalid hash\";\n    if(optIn.confirmationToken === decoded.token && optIn.confirmedAt != undefined){ // Opt-In was already confirmed on email click\n      logConfirm(\"OptIn already confirmed: \",optIn); \n      return decoded.redirect; \n    }\n    const confirmedAt = new Date();\n//TODO after confirmation we deleted the confonfirmationtoken, now we keep it. can this be a security problem?\n    OptIns.update({_id : optIn._id},{$set:{confirmedAt: confirmedAt, confirmedBy: ourRequest.host}});\n\n    //TODO here find all DoichainEntries in the local database  and blockchain with the same masterDoi\n    const entries = DoichainEntries.find({$or: [{name: optIn.nameId}, {masterDoi: optIn.nameId}]});\n    if(entries === undefined) throw \"Doichain entry/entries not found\";\n\n    entries.forEach(entry => {\n        logConfirm('confirming DoiChainEntry:',entry);\n\n        const value = JSON.parse(entry.value);\n        logConfirm('getSignature (only of value!)', value);\n\n        const doiSignature = signMessage(CONFIRM_CLIENT, CONFIRM_ADDRESS, value.signature);\n        logConfirm('got doiSignature:',doiSignature);\n        const fromHostUrl = value.from;\n\n        delete value.from;\n        value.doiTimestamp = confirmedAt.toISOString();\n        value.doiSignature = doiSignature;\n        const jsonValue = JSON.stringify(value);\n        logConfirm('updating Doichain nameId:'+optIn.nameId+' with value:',jsonValue);\n\n        addUpdateBlockchainJob({\n            nameId: entry.name,\n            value: jsonValue,\n            fromHostUrl: fromHostUrl,\n            host: ourRequest.host\n        });\n    });\n    logConfirm('redirecting user to:',decoded.redirect);\n    return decoded.redirect;\n  } catch (exception) {\n    throw new Meteor.Error('opt-ins.confirm.exception', exception);\n  }\n};\n\nexport default confirmOptIn\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { randomBytes } from 'crypto';\nimport { OptIns } from '../../../api/opt-ins/opt-ins.js';\n\nconst GenerateDoiTokenSchema = new SimpleSchema({\n  id: {\n    type: String\n  }\n});\n\nconst generateDoiToken = (optIn) => {\n  try {\n    const ourOptIn = optIn;\n    GenerateDoiTokenSchema.validate(ourOptIn);\n    const token = randomBytes(32).toString('hex');\n    OptIns.update({_id : ourOptIn.id},{$set:{confirmationToken: token}});\n    return token;\n  } catch (exception) {\n    throw new Meteor.Error('opt-ins.generate_doi-token.exception', exception);\n  }\n};\n\nexport default generateDoiToken\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { OptIns } from '../../../api/opt-ins/opt-ins.js';\nimport { Recipients } from '../../../api/recipients/recipients.js';\nimport verifySignature from '../doichain/verify_signature.js';\nimport {logSend} from \"../../../startup/server/log-configuration\";\nimport getPublicKeyAndAddress from \"../doichain/get_publickey_and_address_by_domain\";\n\nconst UpdateOptInStatusSchema = new SimpleSchema({\n  nameId: {\n    type: String\n  },\n  signature: {\n    type: String\n  },\n  host: {\n      type: String,\n      optional: true\n  }\n});\n\n\nconst updateOptInStatus = (data) => {\n  try {\n    const ourData = data;\n    logSend('confirm dApp confirms optIn:',JSON.stringify(data));\n    UpdateOptInStatusSchema.validate(ourData);\n    const optIn = OptIns.findOne({nameId: ourData.nameId});\n    if(optIn === undefined) throw \"Opt-In not found\";\n    logSend('confirm dApp confirms optIn:',ourData.nameId);\n\n    const recipient = Recipients.findOne({_id: optIn.recipient});\n    if(recipient === undefined) throw \"Recipient not found\";\n    const parts = recipient.email.split(\"@\");\n    const domain = parts[parts.length-1];\n    const publicKeyAndAddress = getPublicKeyAndAddress({domain:domain});\n\n    //TODO getting information from Bob that a certain nameId (DOI) got confirmed.\n    if(!verifySignature({publicKey: publicKeyAndAddress.publicKey, data: ourData.nameId, signature: ourData.signature})) {\n      throw \"Access denied\";\n    }\n    logSend('signature valid for publicKey', publicKeyAndAddress.publicKey);\n\n    OptIns.update({_id : optIn._id},{$set:{confirmedAt: new Date(), confirmedBy: ourData.host}});\n  } catch (exception) {\n    throw new Meteor.Error('dapps.send.updateOptInStatus.exception', exception);\n  }\n};\n\nexport default updateOptInStatus;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { VERIFY_CLIENT } from '../../../startup/server/doichain-configuration.js';\nimport { nameShow } from '../../../../server/api/doichain.js';\nimport getOptInProvider from '../dns/get_opt-in-provider.js';\nimport getOptInKey from '../dns/get_opt-in-key.js';\nimport verifySignature from '../doichain/verify_signature.js';\nimport {logVerify} from \"../../../startup/server/log-configuration\";\nimport getPublicKeyAndAddress from \"../doichain/get_publickey_and_address_by_domain\";\n\nconst VerifyOptInSchema = new SimpleSchema({\n  recipient_mail: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  sender_mail: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  name_id: {\n    type: String\n  },\n  recipient_public_key: {\n    type: String\n  }\n});\n\nconst verifyOptIn = (data) => {\n  try {\n    const ourData = data;\n    VerifyOptInSchema.validate(ourData);\n    const entry = nameShow(VERIFY_CLIENT, ourData.name_id);\n    if(entry === undefined) return {nameIdFound: \"failed\"};\n    const entryData = JSON.parse(entry.value);\n    const firstCheck = verifySignature({\n      data: ourData.recipient_mail+ourData.sender_mail,\n      signature: entryData.signature,\n      publicKey: ourData.recipient_public_key\n    });\n\n    if(!firstCheck) return {soiSignatureStatus: \"failed\"};\n    const parts = ourData.recipient_mail.split(\"@\"); //TODO put this into getPublicKeyAndAddress\n    const domain = parts[parts.length-1];\n    const publicKeyAndAddress = getPublicKeyAndAddress({domain: domain});\n\n    if(!entryData.signature||!entryData.doiSignature)return {doiSignatureStatus: \"missing\"};\n    const secondCheck = verifySignature({\n      data: entryData.signature,\n      signature: entryData.doiSignature,\n      publicKey: publicKeyAndAddress.publicKey\n    })\n\n    if(!secondCheck) return {doiSignatureStatus: \"failed\"};\n    return true;\n  } catch (exception) {\n    throw new Meteor.Error('opt-ins.verify.exception', exception);\n  }\n};\n\nexport default verifyOptIn\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { Recipients } from '../../../api/recipients/recipients.js';\nimport getKeyPair from '../doichain/get_key-pair.js';\n\nconst AddRecipientSchema = new SimpleSchema({\n  email: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  }\n});\n\nconst addRecipient = (recipient) => {\n  try {\n    const ourRecipient = recipient;\n    AddRecipientSchema.validate(ourRecipient);\n    const recipients = Recipients.find({email: recipient.email}).fetch();\n    if(recipients.length > 0) return recipients[0]._id;\n    const keyPair = getKeyPair();\n    return Recipients.insert({\n      email: ourRecipient.email,\n      privateKey: keyPair.privateKey,\n      publicKey: keyPair.publicKey\n    })\n  } catch (exception) {\n    throw new Meteor.Error('recipients.add.exception', exception);\n  }\n};\n\nexport default addRecipient;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { Senders } from '../../../api/senders/senders.js';\n\nconst AddSenderSchema = new SimpleSchema({\n  email: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  }\n});\n\nconst addSender = (sender) => {\n  try {\n    const ourSender = sender;\n    AddSenderSchema.validate(ourSender);\n    const senders = Senders.find({email: sender.email}).fetch();\n    if(senders.length > 0) return senders[0]._id;\n    return Senders.insert({\n      email: ourSender.email\n    })\n  } catch (exception) {\n    throw new Meteor.Error('senders.add.exception', exception);\n  }\n};\n\nexport default addSender;\n","import { Meteor } from 'meteor/meteor';\n\nexport function isDebug() {\n  if(Meteor.settings !== undefined &&\n     Meteor.settings.app !== undefined &&\n     Meteor.settings.app.debug !== undefined) return Meteor.settings.app.debug\n  return false;\n}\n\nexport function isRegtest() {\n  if(Meteor.settings !== undefined &&\n     Meteor.settings.app !== undefined &&\n     Meteor.settings.app.regtest !== undefined) return Meteor.settings.app.regtest\n  return false;\n}\n\nexport function isTestnet() {\n    if(Meteor.settings !== undefined &&\n        Meteor.settings.app !== undefined &&\n        Meteor.settings.app.testnet !== undefined) return Meteor.settings.app.testnet\n    return false;\n}\n\nexport function getUrl() {\n  if(Meteor.settings !== undefined &&\n     Meteor.settings.app !== undefined &&\n     Meteor.settings.app.host !== undefined) {\n       let port = 3000;\n       if(Meteor.settings.app.port !== undefined) port = Meteor.settings.app.port\n       return \"http://\"+Meteor.settings.app.host+\":\"+port+\"/\";\n  }\n  return Meteor.absoluteUrl();\n}\n","export const FALLBACK_PROVIDER = \"doichain.org\";\n","import namecoin from 'namecoin';\nimport { SEND_APP, CONFIRM_APP, VERIFY_APP, isAppType } from './type-configuration.js';\n\nvar sendSettings = Meteor.settings.send;\nvar sendClient = undefined;\nif(isAppType(SEND_APP)) {\n  if(!sendSettings || !sendSettings.doichain)\n    throw new Meteor.Error(\"config.send.doichain\", \"Send app doichain settings not found\")\n  sendClient = createClient(sendSettings.doichain);\n}\nexport const SEND_CLIENT = sendClient;\n\nvar confirmSettings = Meteor.settings.confirm;\nvar confirmClient = undefined;\nvar confirmAddress = undefined;\nif(isAppType(CONFIRM_APP)) {\n  if(!confirmSettings || !confirmSettings.doichain)\n    throw new Meteor.Error(\"config.confirm.doichain\", \"Confirm app doichain settings not found\")\n  confirmClient = createClient(confirmSettings.doichain);\n  confirmAddress = confirmSettings.doichain.address;\n}\nexport const CONFIRM_CLIENT = confirmClient;\nexport const CONFIRM_ADDRESS = confirmAddress;\n\nvar verifySettings = Meteor.settings.verify;\nvar verifyClient = undefined;\nif(isAppType(VERIFY_APP)) {\n  if(!verifySettings || !verifySettings.doichain)\n    throw new Meteor.Error(\"config.verify.doichain\", \"Verify app doichain settings not found\")\n  verifyClient = createClient(verifySettings.doichain);\n}\nexport const VERIFY_CLIENT = verifyClient;\n\nfunction createClient(settings) {\n  return new namecoin.Client({\n    host: settings.host,\n    port: settings.port,\n    user: settings.username,\n    pass: settings.password\n  });\n}\n","import { Meteor } from 'meteor/meteor';\nimport { SEND_APP, CONFIRM_APP, isAppType } from './type-configuration.js';\nimport Hashids from 'hashids';\n//const Hashids = require('hashids').default;\nimport {logConfirm} from \"./log-configuration\";\n\nexport const HashIds = new Hashids('0xugmLe7Nyee6vk1iF88(6CmwpqoG4hQ*-T74tjYw^O2vOO(Xl-91wA8*nCg_lX$');\n\nvar sendSettings = Meteor.settings.send;\nvar doiMailFetchUrl = undefined;\n\nif(isAppType(SEND_APP)) {\n  if(!sendSettings || !sendSettings.doiMailFetchUrl)\n    throw new Meteor.Error(\"config.send.email\", \"Settings not found\");\n  doiMailFetchUrl = sendSettings.doiMailFetchUrl;\n}\nexport const DOI_MAIL_FETCH_URL = doiMailFetchUrl;\n\nvar defaultFrom = undefined;\nif(isAppType(CONFIRM_APP)) {\n  var confirmSettings = Meteor.settings.confirm;\n\n  if(!confirmSettings || !confirmSettings.smtp)\n        throw new Meteor.Error(\"config.confirm.smtp\", \"Confirm app email smtp settings not found\")\n\n  if(!confirmSettings.smtp.defaultFrom)\n        throw new Meteor.Error(\"config.confirm.defaultFrom\", \"Confirm app email defaultFrom not found\")\n\n  defaultFrom  =  confirmSettings.smtp.defaultFrom;\n\n  logConfirm('sending with defaultFrom:',defaultFrom);\n\n  Meteor.startup(() => {\n\n   if(confirmSettings.smtp.username === undefined){\n       process.env.MAIL_URL = 'smtp://' +\n           encodeURIComponent(confirmSettings.smtp.server) +\n           ':' +\n           confirmSettings.smtp.port;\n   }else{\n       process.env.MAIL_URL = 'smtp://' +\n           encodeURIComponent(confirmSettings.smtp.username) +\n           ':' + encodeURIComponent(confirmSettings.smtp.password) +\n           '@' + encodeURIComponent(confirmSettings.smtp.server) +\n           ':' +\n           confirmSettings.smtp.port;\n   }\n\n   logConfirm('using MAIL_URL:',process.env.MAIL_URL);\n\n   if(confirmSettings.smtp.NODE_TLS_REJECT_UNAUTHORIZED!==undefined)\n       process.env.NODE_TLS_REJECT_UNAUTHORIZED = confirmSettings.smtp.NODE_TLS_REJECT_UNAUTHORIZED; //0\n  });\n}\nexport const DOI_MAIL_DEFAULT_EMAIL_FROM = defaultFrom;\n","import { Meteor } from 'meteor/meteor';\nimport { Roles } from 'meteor/alanning:roles';\nimport {Meta} from '../../api/meta/meta.js'\nMeteor.startup(() => {\n\n  let version=Assets.getText(\"version.json\");\n\n  if(Meta.find({key:\"version\"}).count() > 0){\n    Meta.remove({key:\"version\"});\n  }\n   Meta.insert({key:\"version\",value:version});\n  \n  if(Meteor.users.find().count() === 0) {\n    const id = Accounts.createUser({\n      username: 'admin',\n      email: 'admin@sendeffect.de',\n      password: 'password'\n    });\n    Roles.addUsersToRoles(id, 'admin');\n  }\n});\n","import './log-configuration.js';\nimport './dapp-configuration.js';\nimport './type-configuration.js';\nimport './dns-configuration.js';\nimport './doichain-configuration.js';\nimport './fixtures.js';\nimport './register-api.js';\nimport './useraccounts-configuration.js';\nimport './security.js';\nimport './email-configuration.js';\nimport './jobs.js';\n","import { Meteor } from 'meteor/meteor';\nimport { MailJobs } from '../../../server/api/mail_jobs.js';\nimport { BlockchainJobs } from '../../../server/api/blockchain_jobs.js';\nimport { DAppJobs } from '../../../server/api/dapp_jobs.js';\nimport { CONFIRM_APP, isAppType } from './type-configuration.js';\nimport addCheckNewTransactionsBlockchainJob from '../../modules/server/jobs/add_check_new_transactions.js';\n\nMeteor.startup(() => {\n  MailJobs.startJobServer();\n  BlockchainJobs.startJobServer();\n  DAppJobs.startJobServer();\n  if(isAppType(CONFIRM_APP)) addCheckNewTransactionsBlockchainJob();\n});\n","import {isDebug} from \"./dapp-configuration\";\n\nrequire('scribe-js')();\n\nexport const console = process.console;\nexport const sendModeTagColor = {msg : 'send-mode', colors : ['yellow', 'inverse']};\nexport const confirmModeTagColor = {msg : 'confirm-mode', colors : ['blue', 'inverse']};\nexport const verifyModeTagColor = {msg : 'verify-mode', colors : ['green', 'inverse']};\nexport const blockchainModeTagColor = {msg : 'blockchain-mode', colors : ['white', 'inverse']};\nexport const testingModeTagColor = {msg : 'testing-mode', colors : ['orange', 'inverse']};\n\nexport function logSend(message,param) {\n    if(isDebug()) {console.time().tag(sendModeTagColor).log(message,param?param:'');}\n}\n\nexport function logConfirm(message,param) {\n    if(isDebug()) {console.time().tag(confirmModeTagColor).log(message, param?param:'');}\n}\n\nexport function logVerify(message, param) {\n    if(isDebug()) {console.time().tag(verifyModeTagColor).log(message, param?param:'');}\n}\n\nexport function logBlockchain(message, param) {\n    if(isDebug()){console.time().tag(blockchainModeTagColor).log(message, param?param:'');}\n}\n\nexport function logMain(message, param) {\n    if(isDebug()){console.time().tag(blockchainModeTagColor).log(message, param?param:'');}\n}\n\nexport function logError(message, param) {\n    if(isDebug()){console.time().tag(blockchainModeTagColor).error(message, param?param:'');}\n}\n\nexport function testLogging(message, param) {\n    if(isDebug()){console.time().tag(testingModeTagColor).log(message, param?param:'');}\n}","import '../../api/languages/methods.js';\nimport '../../api/doichain/methods.js';\nimport '../../api/recipients/server/publications.js';\nimport '../../api/opt-ins/methods.js';\nimport '../../api/version/publications.js';\nimport '../../api/opt-ins/server/publications.js';\n\n","import { Meteor } from 'meteor/meteor';\nimport { DDPRateLimiter } from 'meteor/ddp-rate-limiter';\nimport { _ } from 'meteor/underscore';\n\n// Don't let people write arbitrary data to their 'profile' field from the client\nMeteor.users.deny({\n  update() {\n    return true;\n  },\n});\n\n// Get a list of all accounts methods by running `Meteor.server.method_handlers` in meteor shell\nconst AUTH_METHODS = [\n  'login',\n  'logout',\n  'logoutOtherClients',\n  'getNewToken',\n  'removeOtherTokens',\n  'configureLoginService',\n  'changePassword',\n  'forgotPassword',\n  'resetPassword',\n  'verifyEmail',\n  'createUser',\n  'ATRemoveService',\n  'ATCreateUserServer',\n  'ATResendVerificationEmail',\n];\n\nif (Meteor.isServer) {\n  // Only allow 2 login attempts per connection per 5 seconds\n  DDPRateLimiter.addRule({\n    name(name) {\n      return _.contains(AUTH_METHODS, name);\n    },\n\n    // Rate limit per connection ID\n    connectionId() { return true; },\n  }, 2, 5000);\n}\n","import { Meteor } from 'meteor/meteor';\nexport const SEND_APP = \"send\";\nexport const CONFIRM_APP = \"confirm\";\nexport const VERIFY_APP = \"verify\";\nexport function isAppType(type) {\n  if(Meteor.settings === undefined || Meteor.settings.app === undefined) throw \"No settings found!\"\n  const types = Meteor.settings.app.types;\n  if(types !== undefined) return types.includes(type);\n  return false;\n}\n","import { Accounts } from 'meteor/accounts-base';\nAccounts.config({\n    sendVerificationEmail: true,\n    forbidClientAccountCreation: true\n});\n\n\n\nAccounts.emailTemplates.from='doichain@le-space.de';","import { Api, DOI_WALLETNOTIFY_ROUTE, DOI_CONFIRMATION_ROUTE } from '../rest.js';\nimport confirmOptIn from '../../../../imports/modules/server/opt-ins/confirm.js'\nimport checkNewTransaction from \"../../../../imports/modules/server/doichain/check_new_transactions\";\nimport {logConfirm} from \"../../../../imports/startup/server/log-configuration\";\n//doku of meteor-restivus https://github.com/kahmali/meteor-restivus\nApi.addRoute(DOI_CONFIRMATION_ROUTE+'/:hash', {authRequired: false}, {\n  get: {\n    action: function() {\n      const hash = this.urlParams.hash;\n      try {\n        let ip = this.request.headers['x-forwarded-for'] ||\n          this.request.connection.remoteAddress ||\n          this.request.socket.remoteAddress ||\n          (this.request.connection.socket ? this.request.connection.socket.remoteAddress: null);\n\n          if(ip.indexOf(',')!=-1)ip=ip.substring(0,ip.indexOf(','));\n\n          logConfirm('REST opt-in/confirm :',{hash:hash, host:ip});\n          const redirect = confirmOptIn({host: ip, hash: hash});\n\n        return {\n          statusCode: 303,\n          headers: {'Content-Type': 'text/plain', 'Location': redirect},\n          body: 'Location: '+redirect\n        };\n      } catch(error) {\n        return {statusCode: 500, body: {status: 'fail', message: error.message}};\n      }\n    }\n  }\n});\n\nApi.addRoute(DOI_WALLETNOTIFY_ROUTE, {\n    get: {\n        authRequired: false,\n        action: function() {\n            const params = this.queryParams;\n            const txid = params.tx;\n\n            try {\n                checkNewTransaction(txid);\n                return {status: 'success',  data:'txid:'+txid+' was read from blockchain'};\n            } catch(error) {\n                return {status: 'fail', error: error.message};\n            }\n        }\n    }\n});\n","import { Api } from '../rest.js';\nApi.addRoute('debug/mail', {authRequired: false}, {\n  get: {\n    action: function() {\n      const data = {\n        \"from\": \"noreply@doichain.org\",\n        \"subject\": \"Doichain.org Newsletter BestÃ¤tigung\",\n        \"redirect\": \"https://www.doichain.org/vielen-dank/\",\n        \"returnPath\": \"noreply@doichain.org\",\n        \"content\":\"<style type='text/css' media='screen'>\\n\" +\n            \"* {\\n\" +\n            \"\\tline-height: inherit;\\n\" +\n            \"}\\n\" +\n            \".ExternalClass * {\\n\" +\n            \"\\tline-height: 100%;\\n\" +\n            \"}\\n\" +\n            \"body, p {\\n\" +\n            \"\\tmargin: 0;\\n\" +\n            \"\\tpadding: 0;\\n\" +\n            \"\\tmargin-bottom: 0;\\n\" +\n            \"\\t-webkit-text-size-adjust: none;\\n\" +\n            \"\\t-ms-text-size-adjust: none;\\n\" +\n            \"}\\n\" +\n            \"img {\\n\" +\n            \"\\tline-height: 100%;\\n\" +\n            \"\\toutline: none;\\n\" +\n            \"\\ttext-decoration: none;\\n\" +\n            \"\\t-ms-interpolation-mode: bicubic;\\n\" +\n            \"}\\n\" +\n            \"a img {\\n\" +\n            \"\\tborder: none;\\n\" +\n            \"}\\n\" +\n            \"#backgroundTable {\\n\" +\n            \"\\tmargin: 0;\\n\" +\n            \"\\tpadding: 0;\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \"a, a:link, .no-detect-local a, .appleLinks a {\\n\" +\n            \"\\tcolor: #5555ff !important;\\n\" +\n            \"\\ttext-decoration: underline;\\n\" +\n            \"}\\n\" +\n            \".ExternalClass {\\n\" +\n            \"\\tdisplay: block !important;\\n\" +\n            \"\\twidth: 100%;\\n\" +\n            \"}\\n\" +\n            \".ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div {\\n\" +\n            \"\\tline-height: inherit;\\n\" +\n            \"}\\n\" +\n            \"table td {\\n\" +\n            \"\\tborder-collapse: collapse;\\n\" +\n            \"\\tmso-table-lspace: 0pt;\\n\" +\n            \"\\tmso-table-rspace: 0pt;\\n\" +\n            \"}\\n\" +\n            \"sup {\\n\" +\n            \"\\tposition: relative;\\n\" +\n            \"\\ttop: 4px;\\n\" +\n            \"\\tline-height: 7px !important;\\n\" +\n            \"\\tfont-size: 11px !important;\\n\" +\n            \"}\\n\" +\n            \".mobile_link a[href^='tel'], .mobile_link a[href^='sms'] {\\n\" +\n            \"\\ttext-decoration: default;\\n\" +\n            \"\\tcolor: #5555ff !important;\\n\" +\n            \"\\tpointer-events: auto;\\n\" +\n            \"\\tcursor: default;\\n\" +\n            \"}\\n\" +\n            \".no-detect a {\\n\" +\n            \"\\ttext-decoration: none;\\n\" +\n            \"\\tcolor: #5555ff;\\n\" +\n            \"\\tpointer-events: auto;\\n\" +\n            \"\\tcursor: default;\\n\" +\n            \"}\\n\" +\n            \"{\\n\" +\n            \"color: #5555ff;\\n\" +\n            \"}\\n\" +\n            \"span {\\n\" +\n            \"\\tcolor: inherit;\\n\" +\n            \"\\tborder-bottom: none;\\n\" +\n            \"}\\n\" +\n            \"span:hover {\\n\" +\n            \"\\tbackground-color: transparent;\\n\" +\n            \"}\\n\" +\n            \".nounderline {\\n\" +\n            \"\\ttext-decoration: none !important;\\n\" +\n            \"}\\n\" +\n            \"h1, h2, h3 {\\n\" +\n            \"\\tmargin: 0;\\n\" +\n            \"\\tpadding: 0;\\n\" +\n            \"}\\n\" +\n            \"p {\\n\" +\n            \"\\tMargin: 0px !important;\\n\" +\n            \"}\\n\" +\n            \"table[class='email-root-wrapper'] {\\n\" +\n            \"\\twidth: 600px !important;\\n\" +\n            \"}\\n\" +\n            \"body {\\n\" +\n            \"}\\n\" +\n            \"body {\\n\" +\n            \"\\tmin-width: 280px;\\n\" +\n            \"\\twidth: 100%;\\n\" +\n            \"}\\n\" +\n            \"td[class='pattern'] .c112p20r {\\n\" +\n            \"\\twidth: 20%;\\n\" +\n            \"}\\n\" +\n            \"td[class='pattern'] .c336p60r {\\n\" +\n            \"\\twidth: 60.000000000000256%;\\n\" +\n            \"}\\n\" +\n            \"</style>\\n\" +\n            \"<style>\\n\" +\n            \"@media only screen and (max-width: 599px), only screen and (max-device-width: 599px), only screen and (max-width: 400px), only screen and (max-device-width: 400px) {\\n\" +\n            \".email-root-wrapper {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \".full-width {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"\\theight: auto !important;\\n\" +\n            \"\\ttext-align: center;\\n\" +\n            \"}\\n\" +\n            \".fullwidthhalfleft {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \".fullwidthhalfright {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \".fullwidthhalfinner {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"\\tmargin: 0 auto !important;\\n\" +\n            \"\\tfloat: none !important;\\n\" +\n            \"\\tmargin-left: auto !important;\\n\" +\n            \"\\tmargin-right: auto !important;\\n\" +\n            \"\\tclear: both !important;\\n\" +\n            \"}\\n\" +\n            \".hide {\\n\" +\n            \"\\tdisplay: none !important;\\n\" +\n            \"\\twidth: 0px !important;\\n\" +\n            \"\\theight: 0px !important;\\n\" +\n            \"\\toverflow: hidden;\\n\" +\n            \"}\\n\" +\n            \".desktop-hide {\\n\" +\n            \"\\tdisplay: block !important;\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"\\theight: auto !important;\\n\" +\n            \"\\toverflow: hidden;\\n\" +\n            \"\\tmax-height: inherit !important;\\n\" +\n            \"}\\n\" +\n            \".c112p20r {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"\\tfloat: none;\\n\" +\n            \"}\\n\" +\n            \".c336p60r {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"\\tfloat: none;\\n\" +\n            \"}\\n\" +\n            \"}\\n\" +\n            \"</style>\\n\" +\n            \"<style>\\n\" +\n            \"@media only screen and (min-width: 600px) {\\n\" +\n            \"td[class='pattern'] .c112p20r {\\n\" +\n            \"\\twidth: 112px !important;\\n\" +\n            \"}\\n\" +\n            \"td[class='pattern'] .c336p60r {\\n\" +\n            \"\\twidth: 336px !important;\\n\" +\n            \"}\\n\" +\n            \"}\\n\" +\n            \"\\n\" +\n            \"@media only screen and (max-width: 599px), only screen and (max-device-width: 599px), only screen and (max-width: 400px), only screen and (max-device-width: 400px) {\\n\" +\n            \"table[class='email-root-wrapper'] {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \"td[class='wrap'] .full-width {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"\\theight: auto !important;\\n\" +\n            \"}\\n\" +\n            \"td[class='wrap'] .fullwidthhalfleft {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \"td[class='wrap'] .fullwidthhalfright {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \"td[class='wrap'] .fullwidthhalfinner {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"\\tmargin: 0 auto !important;\\n\" +\n            \"\\tfloat: none !important;\\n\" +\n            \"\\tmargin-left: auto !important;\\n\" +\n            \"\\tmargin-right: auto !important;\\n\" +\n            \"\\tclear: both !important;\\n\" +\n            \"}\\n\" +\n            \"td[class='wrap'] .hide {\\n\" +\n            \"\\tdisplay: none !important;\\n\" +\n            \"\\twidth: 0px;\\n\" +\n            \"\\theight: 0px;\\n\" +\n            \"\\toverflow: hidden;\\n\" +\n            \"}\\n\" +\n            \"td[class='pattern'] .c112p20r {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \"td[class='pattern'] .c336p60r {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \"}\\n\" +\n            \"\\n\" +\n            \"@media yahoo {\\n\" +\n            \"table {\\n\" +\n            \"\\tfloat: none !important;\\n\" +\n            \"\\theight: auto;\\n\" +\n            \"}\\n\" +\n            \"table[align='left'] {\\n\" +\n            \"\\tfloat: left !important;\\n\" +\n            \"}\\n\" +\n            \"td[align='left'] {\\n\" +\n            \"\\tfloat: left !important;\\n\" +\n            \"\\theight: auto;\\n\" +\n            \"}\\n\" +\n            \"table[align='center'] {\\n\" +\n            \"\\tmargin: 0 auto;\\n\" +\n            \"}\\n\" +\n            \"td[align='center'] {\\n\" +\n            \"\\tmargin: 0 auto;\\n\" +\n            \"\\theight: auto;\\n\" +\n            \"}\\n\" +\n            \"table[align='right'] {\\n\" +\n            \"\\tfloat: right !important;\\n\" +\n            \"}\\n\" +\n            \"td[align='right'] {\\n\" +\n            \"\\tfloat: right !important;\\n\" +\n            \"\\theight: auto;\\n\" +\n            \"}\\n\" +\n            \"}\\n\" +\n            \"</style>\\n\" +\n            \"\\n\" +\n            \"<!--[if (gte IE 7) & (vml)]>\\n\" +\n            \"<style type='text/css'>\\n\" +\n            \"html, body {margin:0 !important; padding:0px !important;}\\n\" +\n            \"img.full-width { position: relative !important; }\\n\" +\n            \"\\n\" +\n            \".img240x30 { width: 240px !important; height: 30px !important;}\\n\" +\n            \".img20x20 { width: 20px !important; height: 20px !important;}\\n\" +\n            \"\\n\" +\n            \"</style>\\n\" +\n            \"<![endif]-->\\n\" +\n            \"\\n\" +\n            \"<!--[if gte mso 9]>\\n\" +\n            \"<style type='text/css'>\\n\" +\n            \".mso-font-fix-arial { font-family: Arial, sans-serif;}\\n\" +\n            \".mso-font-fix-georgia { font-family: Georgia, sans-serif;}\\n\" +\n            \".mso-font-fix-tahoma { font-family: Tahoma, sans-serif;}\\n\" +\n            \".mso-font-fix-times_new_roman { font-family: 'Times New Roman', sans-serif;}\\n\" +\n            \".mso-font-fix-trebuchet_ms { font-family: 'Trebuchet MS', sans-serif;}\\n\" +\n            \".mso-font-fix-verdana { font-family: Verdana, sans-serif;}\\n\" +\n            \"</style>\\n\" +\n            \"<![endif]-->\\n\" +\n            \"\\n\" +\n            \"<!--[if gte mso 9]>\\n\" +\n            \"<style type='text/css'>\\n\" +\n            \"table, td {\\n\" +\n            \"border-collapse: collapse !important;\\n\" +\n            \"mso-table-lspace: 0px !important;\\n\" +\n            \"mso-table-rspace: 0px !important;\\n\" +\n            \"}\\n\" +\n            \"\\n\" +\n            \".email-root-wrapper { width 600px !important;}\\n\" +\n            \".imglink { font-size: 0px; }\\n\" +\n            \".edm_button { font-size: 0px; }\\n\" +\n            \"</style>\\n\" +\n            \"<![endif]-->\\n\" +\n            \"\\n\" +\n            \"<!--[if gte mso 15]>\\n\" +\n            \"<style type='text/css'>\\n\" +\n            \"table {\\n\" +\n            \"font-size:0px;\\n\" +\n            \"mso-margin-top-alt:0px;\\n\" +\n            \"}\\n\" +\n            \"\\n\" +\n            \".fullwidthhalfleft {\\n\" +\n            \"width: 49% !important;\\n\" +\n            \"float:left !important;\\n\" +\n            \"}\\n\" +\n            \"\\n\" +\n            \".fullwidthhalfright {\\n\" +\n            \"width: 50% !important;\\n\" +\n            \"float:right !important;\\n\" +\n            \"}\\n\" +\n            \"</style>\\n\" +\n            \"<![endif]-->\\n\" +\n            \"<style type='text/css' media='(pointer) and (min-color-index:0)'>\\n\" +\n            \"html, body {\\n\" +\n            \"\\tbackground-image: none !important;\\n\" +\n            \"\\tbackground-color: #ebebeb !important;\\n\" +\n            \"\\tmargin: 0 !important;\\n\" +\n            \"\\tpadding: 0 !important;\\n\" +\n            \"}\\n\" +\n            \"</style>\\n\" +\n            \"</head>\\n\" +\n            \"<body leftmargin='0' marginwidth='0' topmargin='0' marginheight='0' offset='0' background=\\\"\\\" bgcolor='#ebebeb' style='font-family:Arial, sans-serif; font-size:0px;margin:0;padding:0; '>\\n\" +\n            \"<!--[if t]><![endif]--><!--[if t]><![endif]--><!--[if t]><![endif]--><!--[if t]><![endif]--><!--[if t]><![endif]--><!--[if t]><![endif]-->\\n\" +\n            \"<table align='center' border='0' cellpadding='0' cellspacing='0' background=\\\"\\\"  height='100%' width='100%' id='backgroundTable'>\\n\" +\n            \"  <tr>\\n\" +\n            \"    <td class='wrap' align='center' valign='top' width='100%'>\\n\" +\n            \"\\t\\t<center>\\n\" +\n            \"        <!-- content -->\\n\" +\n            \"        \\t<div style='padding: 0px;'>\\n\" +\n            \"        \\t  <table cellpadding='0' cellspacing='0' border='0' width='100%' bgcolor='#ebebeb'>\\n\" +\n            \"           \\t\\t <tr>\\n\" +\n            \"            \\t\\t  <td valign='top' style='padding: 0px;'>\\n\" +\n            \"\\t\\t\\t\\t\\t\\t  <table cellpadding='0' cellspacing='0' width='600' align='center' style='max-width: 600px;min-width: 240px;margin: 0 auto;' class='email-root-wrapper'>\\n\" +\n            \"                 \\t\\t \\t\\t<tr>\\n\" +\n            \"                   \\t\\t\\t\\t\\t <td valign='top' style='padding: 0px;'>\\n\" +\n            \"\\t\\t\\t\\t\\t\\t\\t\\t \\t\\t<table cellpadding='0' cellspacing='0' border='0' width='100%' bgcolor='#FFFFFF' style='border: 0px none;background-color: #FFFFFF;'>\\n\" +\n            \"                       \\t\\t\\t\\t\\t\\t <tr>\\n\" +\n            \"                       \\t\\t\\t  \\t\\t\\t\\t <td valign='top' style='padding-top: 30px;padding-right: 20px;padding-bottom: 35px;padding-left: 20px;'>\\n\" +\n            \"\\t\\t\\t\\t\\t\\t\\t\\t\\t   \\t\\t\\t\\t\\n\" +\n            \"\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table cellpadding='0'\\n\" +\n            \"\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcellspacing='0' border='0' align='center' width='240'  style='border: 0px none;height: auto;' class='full-width'>\\n\" +\n            \"                                         \\t \\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\n\" +\n            \"                                            \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td valign='top' style='padding: 0px;'><img src='https://sf26.sendsfx.com/admin/temp/user/17/doichain_100h.png' width='240' height='30' alt=\\\"\\\" border='0' style='display: block;width: 100%;height: auto;' class='full-width img240x30' /></td>\\n\" +\n            \"                                         \\t \\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\n\" +\n            \"                                        \\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\n\" +\n            \"\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\n\" +\n            \"\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\n\" +\n            \"                      \\t\\t  \\t\\t\\t\\t</tr>\\n\" +\n            \"                      \\t\\t\\t\\t\\t</table>\\n\" +\n            \"\\t\\t\\t\\t\\t\\t\\t\\t \\n\" +\n            \"\\t\\t\\t\\t\\t\\t\\t\\t \\n\" +\n            \"                      <table cellpadding='0' cellspacing='0' border='0' width='100%' bgcolor='#0071aa' style='border: 0px none;background-color: #0071aa;background-image: url('https://sf26.sendsfx.com/admin/temp/user/17/blue-bg.jpg');background-repeat: no-repeat ;background-position: center;'>\\n\" +\n            \"                        <tr>\\n\" +\n            \"                          <td valign='top' style='padding-top: 40px;padding-right: 20px;padding-bottom: 45px;padding-left: 20px;'><table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                              <tr>\\n\" +\n            \"                                <td style='padding: 0px;' class='pattern'><table cellpadding='0' cellspacing='0' border='0' width='100%'>\\n\" +\n            \"                                    <tr>\\n\" +\n            \"                                      <td valign='top' style='padding-bottom: 10px;'><div style='text-align: left;font-family: arial;font-size: 20px;color: #ffffff;line-height: 30px;mso-line-height: exactly;mso-text-raise: 5px;'>\\n\" +\n            \"                                          <p\\n\" +\n            \"style='padding: 0; margin: 0;text-align: center;'>Bitte bestÃ¤tigen Sie Ihre Anmeldung</p>\\n\" +\n            \"                                        </div></td>\\n\" +\n            \"                                    </tr>\\n\" +\n            \"                                  </table>\\n\" +\n            \"                                  <table cellpadding='0' cellspacing='0' border='0' width='100%'>\\n\" +\n            \"                                    <tr>\\n\" +\n            \"                                      <td valign='top' style='padding: 0;mso-cellspacing: 0in;'><table cellpadding='0' cellspacing='0' border='0' align='left' width='112'  style='float: left;' class='c112p20r'>\\n\" +\n            \"                                          <tr>\\n\" +\n            \"                                            <td valign='top' style='padding: 0px;'><table cellpadding='0' cellspacing='0' border='0' width='100%' style='border: 0px none;' class='hide'>\\n\" +\n            \"                                                <tr>\\n\" +\n            \"                                                  <td valign='top' style='padding: 0px;'><table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                                                      <tr>\\n\" +\n            \"                                                        <td style='padding: 0px;'><table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                                                            <tr>\\n\" +\n            \"                                                              <td align='center' style='padding: 0px;'><table cellpadding='0' cellspacing='0' border='0' align='center' width='20'  style='border: 0px none;height: auto;'>\\n\" +\n            \"                                                                  <tr>\\n\" +\n            \"                                                                    <td valign='top' style='padding: 0px;'><img\\n\" +\n            \"src='https://sf26.sendsfx.com/admin/temp/user/17/img_89837318.png' width='20' height='20' alt=\\\"\\\" border='0' style='display: block;' class='img20x20' /></td>\\n\" +\n            \"                                                                  </tr>\\n\" +\n            \"                                                                </table></td>\\n\" +\n            \"                                                            </tr>\\n\" +\n            \"                                                          </table></td>\\n\" +\n            \"                                                      </tr>\\n\" +\n            \"                                                    </table></td>\\n\" +\n            \"                                                </tr>\\n\" +\n            \"                                              </table></td>\\n\" +\n            \"                                          </tr>\\n\" +\n            \"                                        </table>\\n\" +\n            \"                                        \\n\" +\n            \"                                        <!--[if gte mso 9]></td><td valign='top' style='padding:0;'><![endif]-->\\n\" +\n            \"                                        \\n\" +\n            \"                                        <table cellpadding='0' cellspacing='0' border='0' align='left' width='336'  style='float: left;' class='c336p60r'>\\n\" +\n            \"                                          <tr>\\n\" +\n            \"                                            <td valign='top' style='padding: 0px;'><table cellpadding='0' cellspacing='0' border='0' width='100%'>\\n\" +\n            \"                                                <tr>\\n\" +\n            \"                                                  <td valign='top' style='padding-bottom: 30px;'><table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                                                      <tr>\\n\" +\n            \"                                                        <td style='padding: 0px;'><table cellpadding='0' cellspacing='0' border='0' width='100%' style='border-top: 2px solid #ffffff;'>\\n\" +\n            \"                                                            <tr>\\n\" +\n            \"                                                              <td valign='top'><table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                                                                  <tr>\\n\" +\n            \"                                                                    <td style='padding: 0px;'></td>\\n\" +\n            \"                                                                  </tr>\\n\" +\n            \"                                                                </table></td>\\n\" +\n            \"                                                            </tr>\\n\" +\n            \"                                                          </table></td>\\n\" +\n            \"                                                      </tr>\\n\" +\n            \"                                                    </table></td>\\n\" +\n            \"                                                </tr>\\n\" +\n            \"                                              </table></td>\\n\" +\n            \"                                          </tr>\\n\" +\n            \"                                        </table>\\n\" +\n            \"                                        \\n\" +\n            \"                                        <!--[if gte mso 9]></td><td valign='top' style='padding:0;'><![endif]-->\\n\" +\n            \"                                        \\n\" +\n            \"                                        <table cellpadding='0' cellspacing='0' border='0' align='left' width='112'  style='float: left;' class='c112p20r'>\\n\" +\n            \"                                          <tr>\\n\" +\n            \"                                            <td valign='top' style='padding: 0px;'><table cellpadding='0' cellspacing='0' border='0' width='100%' style='border: 0px none;' class='hide'>\\n\" +\n            \"                                                <tr>\\n\" +\n            \"                                                  <td valign='top' style='padding: 0px;'><table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                                                      <tr>\\n\" +\n            \"                                                        <td style='padding: 0px;'><table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                                                            <tr>\\n\" +\n            \"                                                              <td align='center' style='padding: 0px;'><table cellpadding='0' cellspacing='0' border='0' align='center' width='20'  style='border: 0px none;height: auto;'>\\n\" +\n            \"                                                                  <tr>\\n\" +\n            \"                                                                    <td valign='top' style='padding: 0px;'><img src='https://sf26.sendsfx.com/admin/temp/user/17/img_89837318.png' width='20' height='20' alt=\\\"\\\" border='0' style='display: block;' class='img20x20'\\n\" +\n            \"/></td>\\n\" +\n            \"                                                                  </tr>\\n\" +\n            \"                                                                </table></td>\\n\" +\n            \"                                                            </tr>\\n\" +\n            \"                                                          </table></td>\\n\" +\n            \"                                                      </tr>\\n\" +\n            \"                                                    </table></td>\\n\" +\n            \"                                                </tr>\\n\" +\n            \"                                              </table></td>\\n\" +\n            \"                                          </tr>\\n\" +\n            \"                                        </table></td>\\n\" +\n            \"                                    </tr>\\n\" +\n            \"                                  </table>\\n\" +\n            \"                                  <table cellpadding='0' cellspacing='0' border='0' width='100%'>\\n\" +\n            \"                                    <tr>\\n\" +\n            \"                                      <td valign='top' style='padding-bottom: 20px;'><div style='text-align: left;font-family: arial;font-size: 16px;color: #ffffff;line-height: 26px;mso-line-height: exactly;mso-text-raise: 5px;'>\\n\" +\n            \"                                          <p style='padding: 0; margin: 0;text-align: center;'>Vielen Dank, dass Sie sich fÃ¼r unseren Newsletter angemeldet haben.</p>\\n\" +\n            \"                                          <p style='padding: 0; margin: 0;text-align: center;'>Um diese E-Mail-Adresse und Ihre kostenlose Anmeldung zu bestÃ¤tigen, klicken Sie bitte jetzt auf den folgenden Button:</p>\\n\" +\n            \"                                        </div></td>\\n\" +\n            \"                                    </tr>\\n\" +\n            \"                                  </table>\\n\" +\n            \"                                  <table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                                    <tr>\\n\" +\n            \"                                      <td align='center' style='padding: 0px;'><table cellpadding='0' cellspacing='0' border='0' align='center' style='text-align: center;color: #000;' class='full-width'>\\n\" +\n            \"                                          <tr>\\n\" +\n            \"                                            <td valign='top' align='center' style='padding-right: 10px;padding-bottom: 30px;padding-left: 10px;'><table cellpadding='0' cellspacing='0' border='0' bgcolor='#85ac1c' style='border: 0px none;border-radius: 5px;border-collapse: separate !important;background-color: #85ac1c;' class='full-width'>\\n\" +\n            \"                                                <tr>\\n\" +\n            \"                                                  <td valign='top' align='center' style='padding: 12px;'><a href='${confirmation_url}' target='_blank' style='text-decoration: none;' class='edm_button'><span style='font-family: arial;font-size: 18px;color: #ffffff;line-height: 28px;text-decoration: none;'><span\\n\" +\n            \"style='font-size: 18px;'>Jetzt Anmeldung best&auml;tigen</span></span> </a></td>\\n\" +\n            \"                                                </tr>\\n\" +\n            \"                                              </table></td>\\n\" +\n            \"                                          </tr>\\n\" +\n            \"                                        </table></td>\\n\" +\n            \"                                    </tr>\\n\" +\n            \"                                  </table>\\n\" +\n            \"                                  <div style='text-align: left;font-family: arial;font-size: 12px;color: #ffffff;line-height: 22px;mso-line-height: exactly;mso-text-raise: 5px;'>\\n\" +\n            \"                                    <p style='padding: 0; margin: 0;text-align: center;'>Wenn Sie ihre E-Mail-Adresse nicht bestÃ¤tigen, kÃ¶nnen keine Newsletter zugestellt werden. Ihr EinverstÃ¤ndnis kÃ¶nnen Sie selbstverstÃ¤ndlich jederzeit widerrufen. Sollte es sich bei der Anmeldung um ein Versehen handeln oder wurde der Newsletter nicht in Ihrem Namen bestellt, kÃ¶nnen Sie diese E-Mail einfach ignorieren. Ihnen werden keine weiteren Nachrichten zugeschickt.</p>\\n\" +\n            \"                                  </div></td>\\n\" +\n            \"                              </tr>\\n\" +\n            \"                            </table></td>\\n\" +\n            \"                        </tr>\\n\" +\n            \"                      </table>\\n\" +\n            \"                      <table cellpadding='0' cellspacing='0' border='0' width='100%' bgcolor='#ffffff' style='border: 0px none;background-color: #ffffff;'>\\n\" +\n            \"                        <tr>\\n\" +\n            \"                          <td valign='top' style='padding-top: 30px;padding-right: 20px;padding-bottom: 35px;padding-left: 20px;'><table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                              <tr>\\n\" +\n            \"                                <td style='padding: 0px;'><table cellpadding='0' cellspacing='0' border='0' width='100%'>\\n\" +\n            \"                                    <tr>\\n\" +\n            \"                                      <td valign='top' style='padding-bottom: 25px;'><div style='text-align: left;font-family: arial;font-size: 12px;color: #333333;line-height: 22px;mso-line-height: exactly;mso-text-raise: 5px;'>\\n\" +\n            \"                                          <p style='padding: 0; margin: 0;text-align: center;'><span style='line-height: 3;'><strong>Kontakt</strong></span><br>\\n\" +\n            \"                                            service@sendeffect.de<br>\\n\" +\n            \"                                            www.sendeffect.de<br>\\n\" +\n            \"                                            Telefon: +49 (0) 8571 - 97 39 - 69-0</p>\\n\" +\n            \"                                        </div></td>\\n\" +\n            \"                                    </tr>\\n\" +\n            \"                                  </table>\\n\" +\n            \"                                  <div style='text-align: left;font-family: arial;font-size: 12px;color: #333333;line-height: 22px;mso-line-height: exactly;mso-text-raise: 5px;'>\\n\" +\n            \"                                    <p style='padding: 0; margin: 0;text-align: center;'><span style='line-height: 3;'><strong>Impressum</strong></span><br>\\n\" +\n            \"                                      Anschrift: Schulgasse 5, D-84359 Simbach am Inn, eMail: service@sendeffect.de<br>\\n\" +\n            \"                                      Betreiber: WEBanizer AG, Registergericht: Amtsgericht Landshut HRB 5177, UstId.: DE 2068 62 070<br>\\n\" +\n            \"                                      Vorstand: Ottmar Neuburger, Aufsichtsrat: Tobias Neuburger</p>\\n\" +\n            \"                                  </div></td>\\n\" +\n            \"                              </tr>\\n\" +\n            \"                            </table></td>\\n\" +\n            \"                        </tr>\\n\" +\n            \"                      </table></td>\\n\" +\n            \"                  </tr>\\n\" +\n            \"                </table></td>\\n\" +\n            \"            </tr>\\n\" +\n            \"          </table>\\n\" +\n            \"        </div>\\n\" +\n            \"        <!-- content end -->\\n\" +\n            \"      </center></td>\\n\" +\n            \"  </tr>\\n\" +\n            \"</table>\"\n      }\n\n      return {\"status\": \"success\", \"data\": data};\n    }\n  }\n});\n","import { Api, DOI_FETCH_ROUTE, DOI_CONFIRMATION_NOTIFY_ROUTE } from '../rest.js';\nimport addOptIn from '../../../../imports/modules/server/opt-ins/add_and_write_to_blockchain.js';\nimport updateOptInStatus from '../../../../imports/modules/server/opt-ins/update_status.js';\nimport getDoiMailData from '../../../../imports/modules/server/dapps/get_doi-mail-data.js';\nimport {logError, logSend} from \"../../../../imports/startup/server/log-configuration\";\nimport {DOI_EXPORT_ROUTE} from \"../rest\";\nimport exportDois from \"../../../../imports/modules/server/dapps/export_dois\";\nimport {OptIns} from \"../../../../imports/api/opt-ins/opt-ins\";\nimport {Roles} from \"meteor/alanning:roles\";\n\n//doku of meteor-restivus https://github.com/kahmali/meteor-restivus\n\nApi.addRoute(DOI_CONFIRMATION_NOTIFY_ROUTE, {\n  post: {\n    authRequired: true,\n    //roleRequired: ['admin'],\n    action: function() {\n      const qParams = this.queryParams;\n      const bParams = this.bodyParams;\n      let params = {}\n      if(qParams !== undefined) params = {...qParams}\n      if(bParams !== undefined) params = {...params, ...bParams}\n\n      const uid = this.userId;\n\n      if(!Roles.userIsInRole(uid, 'admin') || //if its not an admin always use uid as ownerId\n          (Roles.userIsInRole(uid, 'admin') && (params[\"ownerId\"]==null || params[\"ownerId\"]==undefined))) {  //if its an admin only use uid in case no ownerId was given\n          params[\"ownerId\"] = uid;\n      }\n\n      logSend('parameter received from browser:',params);\n      if(params.sender_mail.constructor === Array){ //this is a SOI with co-sponsors first email is main sponsor\n          return prepareCoDOI(params);\n      }else{\n         return prepareAdd(params);\n      }\n    }\n  },\n  put: {\n    authRequired: false,\n    action: function() {\n      const qParams = this.queryParams;\n      const bParams = this.bodyParams;\n\n      logSend('qParams:',qParams);\n      logSend('bParams:',bParams);\n\n      let params = {}\n      if(qParams !== undefined) params = {...qParams}\n      if(bParams !== undefined) params = {...params, ...bParams}\n      try {\n        const val = updateOptInStatus(params);\n        logSend('opt-In status updated',val);\n        return {status: 'success', data: {message: 'Opt-In status updated'}};\n      } catch(error) {\n        return {statusCode: 500, body: {status: 'fail', message: error.message}};\n      }\n    }\n  }\n});\n\nApi.addRoute(DOI_FETCH_ROUTE, {authRequired: false}, {\n  get: {\n    action: function() {\n      const params = this.queryParams;\n      try {\n          logSend('rest api - DOI_FETCH_ROUTE called by bob to request email template',JSON.stringify(params));\n          const data = getDoiMailData(params);\n          logSend('got doi-mail-data (including templalte) returning to bob',{subject:data.subject, recipient:data.recipient});\n        return {status: 'success', data};\n      } catch(error) {\n        logError('error while getting DoiMailData',error);\n        return {status: 'fail', error: error.message};\n      }\n    }\n  }\n});\n\nApi.addRoute(DOI_EXPORT_ROUTE, {\n    get: {\n        authRequired: true,\n        //roleRequired: ['admin'],\n        action: function() {\n            let params = this.queryParams;\n            const uid = this.userId;\n            if(!Roles.userIsInRole(uid, 'admin')){\n                params = {userid:uid,role:'user'};\n            }\n            else{\n                params = {...params,role:'admin'}\n            }\n            try {\n                logSend('rest api - DOI_EXPORT_ROUTE called',JSON.stringify(params));\n                const data = exportDois(params);\n                logSend('got dois from database',JSON.stringify(data));\n                return {status: 'success', data};\n            } catch(error) {\n                logError('error while exporting confirmed dois',error);\n                return {status: 'fail', error: error.message};\n            }\n        }\n    }\n});\n\nfunction prepareCoDOI(params){\n\n    logSend('is array ',params.sender_mail);\n\n    const senders = params.sender_mail;\n    const recipient_mail = params.recipient_mail;\n    const data = params.data;\n    const ownerID = params.ownerId;\n\n    let currentOptInId;\n    let retResponse = [];\n    let master_doi;\n    senders.forEach((sender,index) => {\n\n        const ret_response = prepareAdd({sender_mail:sender,recipient_mail:recipient_mail,data:data, master_doi:master_doi, index: index, ownerId:ownerID});\n        logSend('CoDOI:',ret_response);\n        if(ret_response.status === undefined || ret_response.status===\"failed\") throw \"could not add co-opt-in\";\n        retResponse.push(ret_response);\n        currentOptInId = ret_response.data.id;\n\n        if(index===0)\n        {\n            logSend('main sponsor optInId:',currentOptInId);\n            const optIn = OptIns.findOne({_id: currentOptInId});\n            master_doi = optIn.nameId;\n            logSend('main sponsor nameId:',master_doi);\n        }\n\n    });\n\n    logSend(retResponse);\n\n    return retResponse;\n}\n\nfunction prepareAdd(params){\n\n    try {\n        const val = addOptIn(params);\n        logSend('opt-In added ID:',val);\n        return {status: 'success', data: {id: val, status: 'success', message: 'Opt-In added.'}};\n    } catch(error) {\n        return {statusCode: 500, body: {status: 'fail', message: error.message}};\n    }\n}","import { Api } from '../rest.js';\nimport {getInfo} from \"../../doichain\";\nimport { CONFIRM_CLIENT,SEND_CLIENT} from \"../../../../imports/startup/server/doichain-configuration\";\n\nApi.addRoute('status', {authRequired: false}, {\n  get: {\n    action: function() {\n      try {\n        const data = getInfo(SEND_CLIENT?SEND_CLIENT:CONFIRM_CLIENT);\n        return {\"status\": \"success\", \"data\":data};\n      }catch(ex){\n            return {\"status\": \"failed\", \"data\": ex.toString()};\n      }\n    }\n  }\n});\n","import { Api } from '../rest.js';\nimport {Meteor} from 'meteor/meteor';\nimport {Accounts} from 'meteor/accounts-base'\nimport SimpleSchema from 'simpl-schema';\nimport {Roles} from \"meteor/alanning:roles\";\nimport {logMain} from \"../../../../imports/startup/server/log-configuration\";\n\nconst mailTemplateSchema = new SimpleSchema({\n    subject: {\n        type: String,\n        optional:true \n    },\n    redirect: {\n        type: String,\n        regEx: \"@(https?|ftp)://(-\\\\.)?([^\\\\s/?\\\\.#-]+\\\\.?)+(/[^\\\\s]*)?$@\",\n        optional:true \n    },\n    returnPath: {\n        type: String,\n        regEx: SimpleSchema.RegEx.Email,\n        optional:true \n    },\n    templateURL:{\n        type: String,\n        regEx: \"@(https?|ftp)://(-\\\\.)?([^\\\\s/?\\\\.#-]+\\\\.?)+(/[^\\\\s]*)?$@\",\n        optional:true \n    }\n});\n\nconst createUserSchema = new SimpleSchema({\n    username: {\n      type: String,\n      regEx: \"^[A-Z,a-z,0-9,!,_,$,#]{4,24}$\"  //Only usernames between 4-24 characters from A-Z,a-z,0-9,!,_,$,# allowed\n    },\n    email: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Email\n    },\n    password: {\n      type: String,\n      regEx: \"^[A-Z,a-z,0-9,!,_,$,#]{8,24}$\" //Only passwords between 8-24 characters from A-Z,a-z,0-9,!,_,$,# allowed\n    },\n    mailTemplate:{\n        type: mailTemplateSchema,\n        optional:true \n    }\n  });\n  const updateUserSchema = new SimpleSchema({\n    mailTemplate:{\n        type: mailTemplateSchema\n    }\n});\n\n//TODO: collection options separate\nconst collectionOptions =\n  {\n    path:\"users\",\n    routeOptions:\n    {\n        authRequired : true\n        //,roleRequired : \"admin\"\n    },\n    excludedEndpoints: ['patch','deleteAll'],\n    endpoints:\n    {\n        delete:{roleRequired : \"admin\"},\n        post:\n        {\n            roleRequired : \"admin\",\n            action: function(){\n                const qParams = this.queryParams;\n                const bParams = this.bodyParams;\n                let params = {};\n                if(qParams !== undefined) params = {...qParams}\n                if(bParams !== undefined) params = {...params, ...bParams}\n                try{\n                    let userId;\n                    createUserSchema.validate(params);\n                    logMain('validated',params);\n                    if(params.mailTemplate !== undefined){\n                        userId = Accounts.createUser({username:params.username,\n                            email:params.email,\n                            password:params.password,\n                            profile:{mailTemplate:params.mailTemplate}});\n                    }\n                    else{\n                        userId = Accounts.createUser({username:params.username,email:params.email,password:params.password, profile:{}});\n                    }    \n                    return {status: 'success', data: {userid: userId}};\n                } catch(error) {\n                  return {statusCode: 400, body: {status: 'fail', message: error.message}};\n                }\n                \n            }\n        },\n        put:\n        {\n            action: function(){      \n                const qParams = this.queryParams;\n                const bParams = this.bodyParams;\n                let params = {};\n                let uid=this.userId;\n                const paramId=this.urlParams.id;\n                if(qParams !== undefined) params = {...qParams}\n                if(bParams !== undefined) params = {...params, ...bParams}\n\n                try{ //TODO this is not necessary here and can probably go right into the definition of the REST METHOD next to put (!?!)\n                    if(!Roles.userIsInRole(uid, 'admin')){\n                        if(uid!==paramId){\n                            throw Error(\"No Permission\");\n                        }\n                    }\n                    updateUserSchema.validate(params);\n                    if(!Meteor.users.update(this.urlParams.id,{$set:{\"profile.mailTemplate\":params.mailTemplate}})){\n                        throw Error(\"Failed to update user\");\n                    }\n                    return {status: 'success', data: {userid: this.urlParams.id, mailTemplate:params.mailTemplate}};\n                } catch(error) {\n                  return {statusCode: 400, body: {status: 'fail', message: error.message}};\n                }\n            }\n        }\n    }\n}\nApi.addCollection(Meteor.users,collectionOptions);","import { Api } from '../rest.js';\nimport verifyOptIn from '../../../../imports/modules/server/opt-ins/verify.js';\n\nApi.addRoute('opt-in/verify', {authRequired: true}, {\n  get: {\n    authRequired: false,\n    action: function() {\n        const qParams = this.queryParams;\n        const bParams = this.bodyParams;\n        let params = {}\n        if(qParams !== undefined) params = {...qParams}\n        if(bParams !== undefined) params = {...params, ...bParams}\n\n      try {\n        const val = verifyOptIn(params);\n        return {status: \"success\", data: {val}};\n      } catch(error) {\n        return {statusCode: 500, body: {status: 'fail', message: error.message}};\n      }\n    }\n  }\n});\n","import { Restivus } from 'meteor/nimble:restivus';\nimport { isDebug } from '../../../imports/startup/server/dapp-configuration.js';\nimport { SEND_APP, CONFIRM_APP, VERIFY_APP, isAppType } from '../../../imports/startup/server/type-configuration.js';\n\nexport const DOI_CONFIRMATION_ROUTE = \"opt-in/confirm\";\nexport const DOI_CONFIRMATION_NOTIFY_ROUTE = \"opt-in\";\nexport const DOI_WALLETNOTIFY_ROUTE = \"walletnotify\";\nexport const DOI_FETCH_ROUTE = \"doi-mail\";\nexport const DOI_EXPORT_ROUTE = \"export\";\nexport const API_PATH = \"api/\";\nexport const VERSION = \"v1\";\n\nexport const Api = new Restivus({\n  apiPath: API_PATH,\n  version: VERSION,\n  useDefaultAuth: true,\n  prettyJson: true\n});\n\nif(isDebug()) require('./imports/debug.js');\nif(isAppType(SEND_APP)) require('./imports/send.js');\nif(isAppType(CONFIRM_APP)) require('./imports/confirm.js');\nif(isAppType(VERIFY_APP)) require('./imports/verify.js');\nrequire('./imports/user.js');\nrequire('./imports/status.js');\n","\nimport { JobCollection,Job } from 'meteor/vsivsi:job-collection';\nexport const BlockchainJobs = JobCollection('blockchain');\nimport { Meteor } from 'meteor/meteor';\nimport insert from '../../imports/modules/server/doichain/insert.js';\nimport update from '../../imports/modules/server/doichain/update.js';\n/* eslint-disable no-unused-vars */ //TODO re-enable this!\nimport checkNewTransaction from '../../imports/modules/server/doichain/check_new_transactions.js';\nimport { CONFIRM_APP, isAppType } from '../../imports/startup/server/type-configuration.js';\nimport {logMain} from \"../../imports/startup/server/log-configuration\";\n\nBlockchainJobs.processJobs('insert', {workTimeout: 30*1000},function (job, cb) {\n  try {\n    const entry = job.data;\n    insert(entry);\n    job.done();\n  } catch(exception) {\n    job.fail();\n\n      throw new Meteor.Error('jobs.blockchain.insert.exception', exception);\n  } finally {\n    cb();\n  }\n});\n\nBlockchainJobs.processJobs('update', {workTimeout: 30*1000},function (job, cb) {\n  try {\n    const entry = job.data;\n    update(entry,job);\n  } catch(exception) {\n    job.fail();\n    throw new Meteor.Error('jobs.blockchain.update.exception', exception);\n  } finally {\n    cb();\n  }\n});\n\nBlockchainJobs.processJobs('checkNewTransaction', {workTimeout: 30*1000},function (job, cb) {\n  try {\n    if(!isAppType(CONFIRM_APP)) {\n      job.pause();\n      job.cancel();\n      job.remove();\n    } else {\n      //checkNewTransaction(null,job);\n    }\n  } catch(exception) {\n    job.fail();\n    throw new Meteor.Error('jobs.blockchain.checkNewTransactions.exception', exception);\n  } finally {\n    cb();\n  }\n});\n\nnew Job(BlockchainJobs, 'cleanup', {})\n    .repeat({ schedule: BlockchainJobs.later.parse.text(\"every 5 minutes\") })\n    .save({cancelRepeats: true});\n\nlet q = BlockchainJobs.processJobs('cleanup',{ pollInterval: false, workTimeout: 60*1000 } ,function (job, cb) {\n  const current = new Date()\n    current.setMinutes(current.getMinutes() - 5);\n\n  const ids = BlockchainJobs.find({\n          status: {$in: Job.jobStatusRemovable},\n          updated: {$lt: current}},\n          {fields: { _id: 1 }});\n\n    logMain('found  removable blockchain jobs:',ids);\n    BlockchainJobs.removeJobs(ids);\n    if(ids.length > 0){\n      job.done(\"Removed #{ids.length} old jobs\");\n    }\n    cb();\n});\n\nBlockchainJobs.find({ type: 'jobType', status: 'ready' })\n    .observe({\n        added: function () { q.trigger(); }\n    });\n","import { JobCollection, Job } from 'meteor/vsivsi:job-collection';\nimport fetchDoiMailData from '../../imports/modules/server/dapps/fetch_doi-mail-data.js';\nimport { Meteor } from 'meteor/meteor';\nimport {logMain} from \"../../imports/startup/server/log-configuration\";\nimport {BlockchainJobs} from \"./blockchain_jobs\";\n\nexport const DAppJobs = JobCollection('dapp');\n\nDAppJobs.processJobs('fetchDoiMailData', function (job, cb) {\n  try {\n    const data = job.data;\n    fetchDoiMailData(data);\n    job.done();\n  } catch(exception) {\n    job.fail();\n    throw new Meteor.Error('jobs.dapp.fetchDoiMailData.exception', exception);\n  } finally {\n    cb();\n  }\n});\n\n\nnew Job(DAppJobs, 'cleanup', {})\n    .repeat({ schedule: DAppJobs.later.parse.text(\"every 5 minutes\") })\n    .save({cancelRepeats: true});\n\nlet q = DAppJobs.processJobs('cleanup',{ pollInterval: false, workTimeout: 60*1000 } ,function (job, cb) {\n    const current = new Date()\n    current.setMinutes(current.getMinutes() - 5);\n\n    const ids = DAppJobs.find({\n            status: {$in: Job.jobStatusRemovable},\n            updated: {$lt: current}},\n        {fields: { _id: 1 }});\n\n    logMain('found  removable blockchain jobs:',ids);\n    DAppJobs.removeJobs(ids);\n    if(ids.length > 0){\n        job.done(\"Removed #{ids.length} old jobs\");\n    }\n    cb();\n});\n\nDAppJobs.find({ type: 'jobType', status: 'ready' })\n    .observe({\n        added: function () { q.trigger(); }\n    });\n","import { Meteor } from 'meteor/meteor';\nimport dns from 'dns';\nimport {logSend} from \"../../imports/startup/server/log-configuration\";\n\nexport function resolveTxt(key, domain) {\n  const syncFunc = Meteor.wrapAsync(dns_resolveTxt);\n  try {\n    const records = syncFunc(key, domain);\n    if(records === undefined) return undefined;\n    let value = undefined;\n    records.forEach(record => {\n      if(record[0].startsWith(key)) {\n        const val = record[0].substring(key.length+1);\n        value = val.trim();\n\n      }\n    });\n    return value;\n  } catch(error) {\n    logSend(\"error while asking dns servers from \",dns.getServers());\n    if(error.message.startsWith(\"queryTxt ENODATA\") ||\n        error.message.startsWith(\"queryTxt ENOTFOUND\")) return undefined;\n    else throw error;\n  }\n}\n\nfunction dns_resolveTxt(key, domain, callback) {\n    logSend(\"resolving dns txt attribute: \", {key:key,domain:domain});\n    dns.resolveTxt(domain, (err, records) => {\n    callback(err, records);\n  });\n}\n","import { Meteor } from 'meteor/meteor';\nimport {logBlockchain, logConfirm, logError} from \"../../imports/startup/server/log-configuration\";\n\n\nconst NAMESPACE = 'e/';\n\n\nexport function getWif(client, address) {\n  if(!address){\n        address = getAddressesByAccount(\"\")[0];\n        logBlockchain('address was not defined so getting the first existing one of the wallet:',address);\n  }\n  if(!address){\n        address = getNewAddress(\"\");\n        logBlockchain('address was never defined  at all generated new address for this wallet:',address);\n  }\n  const syncFunc = Meteor.wrapAsync(doichain_dumpprivkey);\n  return syncFunc(client, address);\n}\n\nfunction doichain_dumpprivkey(client, address, callback) {\n  const ourAddress = address;\n  client.cmd('dumpprivkey', ourAddress, function(err, data) {\n    if(err)  logError('doichain_dumpprivkey:',err);\n    callback(err, data);\n  });\n}\n\nexport function getAddressesByAccount(client, accout) {\n    const syncFunc = Meteor.wrapAsync(doichain_getaddressesbyaccount);\n    return syncFunc(client, accout);\n}\n\nfunction doichain_getaddressesbyaccount(client, account, callback) {\n    const ourAccount = account;\n    client.cmd('getaddressesbyaccount', ourAccount, function(err, data) {\n        if(err)  logError('getaddressesbyaccount:',err);\n        callback(err, data);\n    });\n}\n\nexport function getNewAddress(client, accout) {\n    const syncFunc = Meteor.wrapAsync(doichain_getnewaddress);\n    return syncFunc(client, accout);\n}\nfunction doichain_getnewaddress(client, account, callback) {\n    const ourAccount = account;\n    client.cmd('getnewaddresss', ourAccount, function(err, data) {\n        if(err)  logError('getnewaddresss:',err);\n        callback(err, data);\n    });\n}\n\n\nexport function signMessage(client, address, message) {\n    const syncFunc = Meteor.wrapAsync(doichain_signMessage);\n    return syncFunc(client, address, message);\n}\n\nfunction doichain_signMessage(client, address, message, callback) {\n    const ourAddress = address;\n    const ourMessage = message;\n    client.cmd('signmessage', ourAddress, ourMessage, function(err, data) {\n        callback(err, data);\n    });\n}\n\nexport function nameShow(client, id) {\n  const syncFunc = Meteor.wrapAsync(doichain_nameShow);\n  return syncFunc(client, id);\n}\n\nfunction doichain_nameShow(client, id, callback) {\n  const ourId = checkId(id);\n  logConfirm('doichain-cli name_show :',ourId);\n  client.cmd('name_show', ourId, function(err, data) {\n    if(err !== undefined && err !== null && err.message.startsWith(\"name not found\")) {\n      err = undefined,\n      data = undefined\n    }\n    callback(err, data);\n  });\n}\n\nexport function feeDoi(client, address) {\n    const syncFunc = Meteor.wrapAsync(doichain_feeDoi);\n    return syncFunc(client, address);\n}\n\nfunction doichain_feeDoi(client, address, callback) {\n    const destAddress = address;\n    client.cmd('sendtoaddress', destAddress, '0.02', function(err, data) {\n        callback(err, data);\n    });\n}\n\nexport function nameDoi(client, name, value, address) {\n    const syncFunc = Meteor.wrapAsync(doichain_nameDoi);\n    return syncFunc(client, name, value, address);\n}\n\nfunction doichain_nameDoi(client, name, value, address, callback) {\n    const ourName = checkId(name);\n    const ourValue = value;\n    const destAddress = address;\n    if(!address) {\n        client.cmd('name_doi', ourName, ourValue, function (err, data) {\n            callback(err, data);\n        });\n    }else{\n        client.cmd('name_doi', ourName, ourValue, destAddress, function(err, data) {\n            callback(err, data);\n        });\n    }\n}\n\nexport function listSinceBlock(client, block) {\n    const syncFunc = Meteor.wrapAsync(doichain_listSinceBlock);\n    var ourBlock = block;\n    if(ourBlock === undefined) ourBlock = null;\n    return syncFunc(client, ourBlock);\n}\n\nfunction doichain_listSinceBlock(client, block, callback) {\n    var ourBlock = block;\n    if(ourBlock === null) client.cmd('listsinceblock', function(err, data) {\n        callback(err, data);\n    });\n    else client.cmd('listsinceblock', ourBlock, function(err, data) {\n        callback(err, data);\n    });\n}\n\nexport function getTransaction(client, txid) {\n    const syncFunc = Meteor.wrapAsync(doichain_gettransaction);\n    return syncFunc(client, txid);\n}\n\nfunction doichain_gettransaction(client, txid, callback) {\n    logConfirm('doichain_gettransaction:',txid);\n    client.cmd('gettransaction', txid, function(err, data) {\n        if(err)  logError('doichain_gettransaction:',err);\n        callback(err, data);\n    });\n}\n\nexport function getRawTransaction(client, txid) {\n    const syncFunc = Meteor.wrapAsync(doichain_getrawtransaction);\n    return syncFunc(client, txid);\n}\n\nfunction doichain_getrawtransaction(client, txid, callback) {\n    logBlockchain('doichain_getrawtransaction:',txid);\n    client.cmd('getrawtransaction', txid, 1, function(err, data) {\n        if(err)  logError('doichain_getrawtransaction:',err);\n        callback(err, data);\n    });\n}\n\nexport function getBalance(client) {\n    const syncFunc = Meteor.wrapAsync(doichain_getbalance);\n    return syncFunc(client);\n}\n\nfunction doichain_getbalance(client, callback) {\n    client.cmd('getbalance', function(err, data) {\n        if(err) { logError('doichain_getbalance:',err);}\n        callback(err, data);\n    });\n}\n\nexport function getInfo(client) {\n    const syncFunc = Meteor.wrapAsync(doichain_getinfo);\n    return syncFunc(client);\n}\n\nfunction doichain_getinfo(client, callback) {\n    client.cmd('getblockchaininfo', function(err, data) {\n        if(err) { logError('doichain-getinfo:',err);}\n        callback(err, data);\n    });\n}\n\nfunction checkId(id) {\n    const DOI_PREFIX = \"doi: \";\n    let ret_val = id; //default value\n\n    if(id.startsWith(DOI_PREFIX)) ret_val = id.substring(DOI_PREFIX.length); //in case it starts with doi: cut  this away\n    if(!id.startsWith(NAMESPACE)) ret_val = NAMESPACE+id; //in case it doesn't start with e/ put it in front now.\n  return ret_val;\n}\n","import { Meteor } from 'meteor/meteor';\nimport { HTTP } from 'meteor/http'\n\nexport function getHttpGET(url, query) {\n  const syncFunc = Meteor.wrapAsync(_get);\n  return syncFunc(url, query);\n}\n\nexport function getHttpGETdata(url, data) {\n    const syncFunc = Meteor.wrapAsync(_getData);\n    return syncFunc(url, data);\n}\n\nexport function getHttpPOST(url, data) {\n    const syncFunc = Meteor.wrapAsync(_post);\n    return syncFunc(url, data);\n}\n\nexport function getHttpPUT(url, data) {\n    const syncFunc = Meteor.wrapAsync(_put);\n    return syncFunc(url, data);\n}\n\nfunction _get(url, query, callback) {\n  const ourUrl = url;\n  const ourQuery = query;\n  HTTP.get(ourUrl, {query: ourQuery}, function(err, ret) {\n    callback(err, ret);\n  });\n}\n\nfunction _getData(url, data, callback) {\n    const ourUrl = url;\n    const ourData = data;\n    HTTP.get(ourUrl, ourData, function(err, ret) {\n        callback(err, ret);\n    });\n}\n\nfunction _post(url, data, callback) {\n    const ourUrl = url;\n    const ourData =  data;\n\n    HTTP.post(ourUrl, ourData, function(err, ret) {\n        callback(err, ret);\n    });\n}\n\nfunction _put(url, updateData, callback) {\n    const ourUrl = url;\n    const ourData = {\n        data: updateData\n    }\n\n    HTTP.put(ourUrl, ourData, function(err, ret) {\n      callback(err, ret);\n    });\n}\n","import './mail_jobs.js';\nimport './doichain.js';\nimport './blockchain_jobs.js';\nimport './dapp_jobs.js';\nimport './dns.js';\nimport './rest/rest.js';\n","import { Meteor } from 'meteor/meteor';\nimport { JobCollection, Job } from 'meteor/vsivsi:job-collection';\nexport const MailJobs = JobCollection('emails');\nimport sendMail from '../../imports/modules/server/emails/send.js';\nimport {logMain} from \"../../imports/startup/server/log-configuration\";\nimport {BlockchainJobs} from \"./blockchain_jobs\";\n\n\n\nMailJobs.processJobs('send', function (job, cb) {\n  try {\n    const email = job.data;\n    sendMail(email);\n    job.done();\n  } catch(exception) {\n    job.fail();\n    throw new Meteor.Error('jobs.mail.send.exception', exception);\n  } finally {\n    cb();\n  }\n});\n\n\nnew Job(MailJobs, 'cleanup', {})\n    .repeat({ schedule: MailJobs.later.parse.text(\"every 5 minutes\") })\n    .save({cancelRepeats: true})\n\nlet q = MailJobs.processJobs('cleanup',{ pollInterval: false, workTimeout: 60*1000 } ,function (job, cb) {\n    const current = new Date()\n    current.setMinutes(current.getMinutes() - 5);\n\n    const ids = MailJobs.find({\n            status: {$in: Job.jobStatusRemovable},\n            updated: {$lt: current}},\n        {fields: { _id: 1 }});\n\n    logMain('found  removable blockchain jobs:',ids);\n    MailJobs.removeJobs(ids);\n    if(ids.length > 0){\n        job.done(\"Removed #{ids.length} old jobs\");\n    }\n    cb();\n});\n\nMailJobs.find({ type: 'jobType', status: 'ready' })\n    .observe({\n        added: function () { q.trigger(); }\n    });\n\n","import {Meteor} from \"meteor/meteor\";\nimport {chai} from 'meteor/practicalmeteor:chai';\nimport {quotedPrintableDecode} from \"emailjs-mime-codec\";\nimport {OptIns} from \"../../../imports/api/opt-ins/opt-ins\";\nimport {Recipients} from \"../../../imports/api/recipients/recipients\";\nimport {getHttpGET, getHttpGETdata, getHttpPOST} from \"../../../server/api/http\";\nimport {testLogging} from \"../../../imports/startup/server/log-configuration\";\nimport {generatetoaddress} from \"./test-api-on-node\";\n\nconst headers = { 'Content-Type':'text/plain'  };\nconst os = require('os');\n\n\nvar POP3Client = require(\"poplib\");\n\nexport function login(url, paramsLogin, log) {\n    if(log) testLogging('dApp login.');\n\n    const urlLogin = url+'/api/v1/login';\n    const headersLogin = [{'Content-Type':'application/json'}];\n    const realDataLogin= { params: paramsLogin, headers: headersLogin };\n\n    const result = getHttpPOST(urlLogin, realDataLogin);\n\n    if(log) testLogging('result login:',result);\n    const statusCode = result.statusCode;\n    const dataLogin = result.data;\n\n    const statusLogin = dataLogin.status;\n    chai.assert.equal(200, statusCode);\n    chai.assert.equal('success', statusLogin);\n    return dataLogin.data;\n}\n\nexport function requestDOI(url, auth, recipient_mail, sender_mail, data,  log) {\n    if(log) testLogging('step 1 - requestDOI called via REST');\n\n    const urlOptIn = url+'/api/v1/opt-in';\n    let dataOptIn = {};\n\n    if(data){\n        dataOptIn = {\n            \"recipient_mail\":recipient_mail,\n            \"sender_mail\":sender_mail,\n            \"data\":JSON.stringify(data)\n        }\n    }else{\n        dataOptIn = {\n            \"recipient_mail\":recipient_mail,\n            \"sender_mail\":sender_mail\n        }\n    }\n\n    const headersOptIn = {\n        'Content-Type':'application/json',\n        'X-User-Id':auth.userId,\n        'X-Auth-Token':auth.authToken\n    };\n\n    const realDataOptIn = { data: dataOptIn, headers: headersOptIn};\n    const resultOptIn = getHttpPOST(urlOptIn, realDataOptIn);\n\n    //logBlockchain(\"resultOptIn\",resultOptIn);\n    chai.assert.equal(200, resultOptIn.statusCode);\n    testLogging(\"RETURNED VALUES: \",resultOptIn);\n    if(Array.isArray(resultOptIn.data)){\n        testLogging('adding coDOIs');\n        resultOptIn.data.forEach(element => {\n            chai.assert.equal('success', element.status);\n        });\n    }\n\n    else{\n        testLogging('adding DOI');\n    chai.assert.equal('success',  resultOptIn.data.status);\n    }\n    return resultOptIn.data;\n}\n\nexport function getNameIdOfRawTransaction(url, auth, txId) {\n    testLogging('pre-start of getNameIdOfRawTransaction',txId);\n    const syncFunc = Meteor.wrapAsync(get_nameid_of_raw_transaction);\n    return syncFunc(url, auth, txId);\n}\n\nfunction get_nameid_of_raw_transaction(url, auth, txId, callback){\n\n    let nameId = '';\n    let running = true;\n    let counter = 0;\n    testLogging('start getNameIdOfRawTransaction',txId);\n    (async function loop() {\n        while(running && ++counter<1500){ //trying 50x to get email from bobs mailbox\n            try{\n                    testLogging('trying to get transaction',txId);\n                    const dataGetRawTransaction = {\"jsonrpc\": \"1.0\", \"id\":\"getrawtransaction\", \"method\": \"getrawtransaction\", \"params\": [txId,1] };\n                    const realdataGetRawTransaction = { auth: auth, data: dataGetRawTransaction, headers: headers };\n                    const resultGetRawTransaction = getHttpPOST(url, realdataGetRawTransaction);\n\n                    if(resultGetRawTransaction.data.result.vout[1].scriptPubKey.nameOp!==undefined){\n                        nameId = resultGetRawTransaction.data.result.vout[1].scriptPubKey.nameOp.name;\n                    }\n                    else{\n                        nameId = resultGetRawTransaction.data.result.vout[0].scriptPubKey.nameOp.name;\n                    }\n\n                    if(resultGetRawTransaction.data.result.txid!==undefined){\n                        testLogging('confirmed txid:'+resultGetRawTransaction.data.result.txid);\n                        running=false;\n                    }\n                    //chai.assert.equal(txId, resultGetRawTransaction.data.result.txid);\n            }catch(ex){\n                testLogging('trying to get email - so far no success:',counter);\n                await new Promise(resolve => setTimeout(resolve, 2000));\n            }\n        }\n        testLogging('end of getNameIdOfRawTransaction returning nameId',nameId);\n        callback(null,nameId);\n    })();\n}\n\nexport function getNameIdOfOptInFromRawTx(url, auth, optInId,log) {\n    const syncFunc = Meteor.wrapAsync(get_nameid_of_optin_from_rawtx);\n    return syncFunc(url, auth, optInId,log);\n}\n\n\nasync function get_nameid_of_optin_from_rawtx(url, auth, optInId, log, callback){\n    testLogging('step 2 - getting nameId of raw transaction from blockchain');\n    if(log) testLogging('the txId will be added a bit later as soon as the schedule picks up the job and inserts it into the blockchain. it does not happen immediately. waiting...');\n    let running = true;\n    let counter = 0;\n    let our_optIn = null;\n    let nameId = null;\n    await (async function loop() {\n        while(running && ++counter<50){ //trying 50x to get opt-in\n\n            testLogging('find opt-In',optInId);\n            our_optIn = OptIns.findOne({_id: optInId});\n            if(our_optIn.txId!==undefined){\n                testLogging('found txId of opt-In',our_optIn.txId);\n                running = false;\n            }\n            else{\n                testLogging('did not find txId yet for opt-In-Id',our_optIn._id);\n            }\n\n            await new Promise(resolve => setTimeout(resolve, 3000));\n        }\n    })();\n\n    try{\n\n        chai.assert.equal(our_optIn._id,optInId);\n        if(log) testLogging('optIn:',our_optIn);\n        nameId = getNameIdOfRawTransaction(url,auth,our_optIn.txId);\n        chai.assert.equal(\"e/\"+our_optIn.nameId,nameId);\n\n        if(log) testLogging('nameId:',nameId);\n        chai.assert.notEqual(nameId,null);\n        chai.assert.isBelow(counter,50,\"OptIn not found after retries\");\n        callback(null,nameId);\n    }\n    catch(error){\n        callback(error,nameId);\n    }\n}\n\nexport function fetchConfirmLinkFromPop3Mail(hostname,port,username,password,alicedapp_url,log) {\n    const syncFunc = Meteor.wrapAsync(fetch_confirm_link_from_pop3_mail);\n    return syncFunc(hostname,port,username,password,alicedapp_url,log);\n}\n\nfunction fetch_confirm_link_from_pop3_mail(hostname,port,username,password,alicedapp_url,log,callback) {\n\n    testLogging(\"step 3 - getting email from bobs inbox\");\n    //https://github.com/ditesh/node-poplib/blob/master/demos/retrieve-all.js\n    var client = new POP3Client(port, hostname, {\n        tlserrs: false,\n        enabletls: false,\n        debug: false\n    });\n\n    client.on(\"connect\", function() {\n        testLogging(\"CONNECT success\");\n        client.login(username, password);\n        client.on(\"login\", function(status, rawdata) {\n            if (status) {\n                testLogging(\"LOGIN/PASS success\");\n                client.list();\n\n                client.on(\"list\", function(status, msgcount, msgnumber, data, rawdata) {\n\n                    if (status === false) {\n                        const err = \"LIST failed\"+ msgnumber;\n                        client.rset();\n                        callback(err, null);\n                        return;\n                    } else {\n                        if(log) testLogging(\"LIST success with \" + msgcount + \" element(s)\",'');\n\n                        //chai.expect(msgcount).to.be.above(0, 'no email in bobs inbox');\n                        if (msgcount > 0){\n                            client.retr(1);\n                            client.on(\"retr\", function(status, msgnumber, maildata, rawdata) {\n\n                                if (status === true) {\n                                    if(log) testLogging(\"RETR success \" + msgnumber);\n\n                                    //https://github.com/emailjs/emailjs-mime-codec\n                                    let html  = quotedPrintableDecode(maildata);\n                                    if(os.hostname()!=='regtest'){ //this is probably a selenium test from outside docker  - so replace URL so it can be confirmed\n                                            html = replaceAll(html,'http://172.20.0.8','http://localhost');  //TODO put this IP inside a config\n                                    }\n                                    chai.expect(html.indexOf(alicedapp_url)).to.not.equal(-1);\n                                    const linkdata =  html.substring(html.indexOf(alicedapp_url),html.indexOf(\"'\",html.indexOf(alicedapp_url)));\n\n                                    chai.expect(linkdata).to.not.be.null;\n                                    if(log && !(log===true))chai.expect(html.indexOf(log)).to.not.equal(-1);\n                                    const requestData = {\"linkdata\":linkdata,\"html\":html}\n\n                                    client.dele(msgnumber);\n                                    client.on(\"dele\", function(status, msgnumber, data, rawdata) {\n                                        client.quit();\n\n                                        client.end();\n                                        client = null;\n                                        callback(null,linkdata);\n                                    });\n\n                                } else {\n                                    const err = \"RETR failed for msgnumber \"+ msgnumber;\n                                    client.rset();\n                                    client.end();\n                                    client = null;\n                                    callback(err, null);\n                                    return;\n                                }\n                            });\n                        }\n                        else{\n                            const err = \"empty mailbox\";\n                            callback(err, null);\n                            client.quit();\n                            client.end();\n                            client = null;\n                            return;\n                        }\n                    }\n                });\n\n            } else {\n                const err = \"LOGIN/PASS failed\";\n                callback(err, null);\n                client.quit();\n                client.end();\n                client = null;\n                return;\n            }\n        });\n    });\n}\n\nfunction replaceAll(str, find, replace) {\n    return str.replace(new RegExp(find, 'g'), replace);\n}\n\nexport function deleteAllEmailsFromPop3(hostname,port,username,password,log) {\n    const syncFunc = Meteor.wrapAsync(delete_all_emails_from_pop3);\n    return syncFunc(hostname,port,username,password,log);\n}\n\nfunction delete_all_emails_from_pop3(hostname,port,username,password,log,callback) {\n\n    testLogging(\"deleting all emails from bobs inbox\");\n    //https://github.com/ditesh/node-poplib/blob/master/demos/retrieve-all.js\n    var client = new POP3Client(port, hostname, {\n        tlserrs: false,\n        enabletls: false,\n        debug: false\n    });\n\n    client.on(\"connect\", function() {\n        testLogging(\"CONNECT success\");\n        client.login(username, password);\n        client.on(\"login\", function(status, rawdata) {\n            if (status) {\n                testLogging(\"LOGIN/PASS success\");\n                client.list();\n\n                client.on(\"list\", function(status, msgcount, msgnumber, data, rawdata) {\n\n                    if (status === false) {\n                        const err = \"LIST failed\"+ msgnumber;\n                        client.rset();\n                        callback(err, null);\n                        return;\n                    } else {\n                        if(log) testLogging(\"LIST success with \" + msgcount + \" element(s)\",'');\n\n                        //chai.expect(msgcount).to.be.above(0, 'no email in bobs inbox');\n                        if (msgcount > 0){\n                            for(let i = 0;i<=msgcount;i++){\n                                client.dele(i+1);\n                                client.on(\"dele\", function(status, msgnumber, data, rawdata) {\n                                    testLogging(\"deleted email\"+(i+1)+\" status:\"+status);\n                                   if(i==msgcount-1){\n                                       client.quit();\n\n                                       client.end();\n                                       client = null;\n                                       if(log) testLogging(\"all emails deleted\");\n                                       callback(null,'all emails deleted');\n                                   }\n                                });\n                            }\n                        }\n                        else{\n                            const err = \"empty mailbox\";\n                            callback(null, err); //we do not send an error here when inbox is empty\n                            client.quit();\n                            client.end();\n                            client = null;\n                            return;\n                        }\n                    }\n                });\n\n            } else {\n                const err = \"LOGIN/PASS failed\";\n                callback(err, null);\n                client.quit();\n                client.end();\n                client = null;\n                return;\n            }\n        });\n    });\n}\n\nexport function confirmLink(confirmLink) {\n    const syncFunc = Meteor.wrapAsync(confirm_link);\n    return syncFunc(confirmLink);\n}\n\nfunction confirm_link(confirmLink,callback){\n    testLogging(\"clickable link:\",confirmLink);\n    const doiConfirmlinkResult = getHttpGET(confirmLink,'');\n    try{\n    chai.expect(doiConfirmlinkResult.content).to.have.string('ANMELDUNG ERFOLGREICH');\n    chai.expect(doiConfirmlinkResult.content).to.have.string('Vielen Dank fÃ¼r Ihre Anmeldung');\n    chai.expect(doiConfirmlinkResult.content).to.have.string('Ihre Anmeldung war erfolgreich.');\n    chai.assert.equal(200, doiConfirmlinkResult.statusCode);\n    callback(null,true);\n    }\n    catch(e){\n        callback(e,null);\n    }\n    \n}\n\nexport function verifyDOI(dAppUrl, dAppUrlAuth, node_url_alice, rpcAuthAlice, sender_mail, recipient_mail,nameId, log ){\n    const syncFunc = Meteor.wrapAsync(verify_doi);\n    return syncFunc(dAppUrl, dAppUrlAuth, node_url_alice, rpcAuthAlice, sender_mail, recipient_mail,nameId, log );\n}\n\n\nasync function verify_doi(dAppUrl, dAppUrlAuth, node_url_alice, rpcAuthAlice, sender_mail, recipient_mail,nameId, log, callback){\n    let our_recipient_mail =recipient_mail;\n    if(Array.isArray(recipient_mail)){\n        our_recipient_mail=recipient_mail[0];\n    }\n    const urlVerify = dAppUrl+'/api/v1/opt-in/verify';\n    const recipient_public_key = Recipients.findOne({email: our_recipient_mail}).publicKey;\n    let resultVerify ={};\n    let statusVerify ={};\n\n    const dataVerify = {\n        recipient_mail: our_recipient_mail,\n        sender_mail: sender_mail,\n        name_id: nameId,\n        recipient_public_key: recipient_public_key\n    };\n\n    const headersVerify = {\n        'Content-Type':'application/json',\n        'X-User-Id':dAppUrlAuth.userId,\n        'X-Auth-Token':dAppUrlAuth.authToken\n    };\n    let running = true;\n    let counter = 0;\n\n    await (async function loop() {\n        while(running && ++counter<50){ //trying 50x to get email from bobs mailbox\n            try{\n                testLogging('Step 5: verifying opt-in:', {data:dataVerify});\n                const realdataVerify = { data: dataVerify, headers: headersVerify };\n                resultVerify = getHttpGETdata(urlVerify, realdataVerify);\n                testLogging('result /opt-in/verify:',{status:resultVerify.data.status,val:resultVerify.data.data.val} );\n                statusVerify = resultVerify.statusCode;\n                if(resultVerify.data.data.val===true) running = false;\n\n            }catch(ex) {\n                testLogging('trying to verify opt-in - so far no success:',ex);\n                //generatetoaddress(node_url_alice, rpcAuthAlice, global.aliceAddress, 1, true);\n                //await new Promise(resolve => setTimeout(resolve, 2000));\n            }\n            finally{\n                generatetoaddress(node_url_alice, rpcAuthAlice, global.aliceAddress, 1, true);\n                await new Promise(resolve => setTimeout(resolve, 2000)); \n            }\n        }\n\n    })();\n        try{\n        chai.assert.equal(statusVerify,200);\n        chai.assert.equal(resultVerify.data.data.val,true);\n        chai.assert.isBelow(counter,50);\n        callback(null,true);\n        }\n        catch(error){\n        callback(error,false);\n        }\n}\n\nexport function createUser(url,auth,username,templateURL,log){\n    const headersUser = {\n        'Content-Type':'application/json',\n        'X-User-Id':auth.userId,\n        'X-Auth-Token':auth.authToken\n    }\n    const mailTemplate = {\n        \"subject\": \"Hello i am \"+username,\n        \"redirect\": \"https://www.doichain.org/vielen-dank/\",\n        \"returnPath\":  username+\"-test@doichain.org\",\n        \"templateURL\": templateURL\n    }\n    const urlUsers = url+'/api/v1/users';\n    const dataUser = {\"username\":username,\"email\":username+\"-test@doichain.org\",\"password\":\"password\",\"mailTemplate\":mailTemplate}\n\n    const realDataUser= { data: dataUser, headers: headersUser};\n    if(log) testLogging('createUser:', realDataUser);\n    let res = getHttpPOST(urlUsers,realDataUser);\n    if(log) testLogging(\"response\",res);\n    chai.assert.equal(200, res.statusCode);\n    chai.assert.equal(res.data.status,\"success\");\n    return res.data.data.userid;\n}\n\nexport function findUser(userId){\n    const res = Accounts.users.findOne({_id:userId});\n    chai.expect(res).to.not.be.undefined;\n    return res;\n}\n\nexport function findOptIn(optInId,log){\n    const res = OptIns.findOne({_id:optInId});\n    if(log)testLogging(res,optInId);\n    chai.expect(res).to.not.be.undefined;\n    return res;\n}\n\nexport function exportOptIns(url,auth,log){\n    const headersUser = {\n        'Content-Type':'application/json',\n        'X-User-Id':auth.userId,\n        'X-Auth-Token':auth.authToken\n    };\n\n    const urlExport = url+'/api/v1/export';\n    const realDataUser= {headers: headersUser};\n    let res = getHttpGETdata(urlExport,realDataUser);\n    if(log) testLogging(res,log);\n    chai.assert.equal(200, res.statusCode);\n    chai.assert.equal(res.data.status,\"success\");\n    return res.data.data;\n}\n\n\nexport function requestConfirmVerifyBasicDoi(node_url_alice,rpcAuthAlice, dappUrlAlice,dataLoginAlice,dappUrlBob,recipient_mail,sender_mail,optionalData,recipient_pop3username, recipient_pop3password, log) {\n    const syncFunc = Meteor.wrapAsync(request_confirm_verify_basic_doi);\n    return syncFunc(node_url_alice,rpcAuthAlice, dappUrlAlice,dataLoginAlice,dappUrlBob, recipient_mail,sender_mail,optionalData,recipient_pop3username, recipient_pop3password, log);\n}\n\n\nasync function request_confirm_verify_basic_doi(node_url_alice,rpcAuthAlice, dappUrlAlice,dataLoginAlice,\n                                                dappUrlBob, recipient_mail,sender_mail_in,optionalData,recipient_pop3username, recipient_pop3password, log, callback) {\n    if(log) testLogging('node_url_alice',node_url_alice);\n    if(log) testLogging('rpcAuthAlice',rpcAuthAlice);\n    if(log) testLogging('dappUrlAlice',dappUrlAlice);\n    if(log) testLogging('dataLoginAlice',dataLoginAlice);\n    if(log) testLogging('dappUrlBob',dappUrlBob);\n    if(log) testLogging('recipient_mail',recipient_mail);\n    if(log) testLogging('sender_mail_in',sender_mail_in);\n    if(log) testLogging('optionalData',optionalData);\n    if(log) testLogging('recipient_pop3username',recipient_pop3username);\n    if(log) testLogging('recipient_pop3password',recipient_pop3password);\n\n\n    let sender_mail = sender_mail_in;\n    if(log) testLogging('log into alice and request DOI');\n    let resultDataOptInTmp = requestDOI(dappUrlAlice, dataLoginAlice, recipient_mail, sender_mail, optionalData, true);\n    let resultDataOptIn = resultDataOptInTmp;\n\n    if(Array.isArray(sender_mail_in)){              //Select master doi from senders and result\n        if(log) testLogging('MASTER DOI: ',resultDataOptInTmp[0]);\n        resultDataOptIn = resultDataOptInTmp[0];\n        sender_mail = sender_mail_in[0];\n    }\n\n    //generating a block so transaction gets confirmed and delivered to bob.\n    generatetoaddress(node_url_alice, rpcAuthAlice, global.aliceAddress, 1, true);\n    let running = true;\n    let counter = 0;\n    let confirmedLink = \"\";\n    confirmedLink = await(async function loop() {\n        while(running && ++counter<50){ //trying 50x to get email from bobs mailbox\n            try{\n                testLogging('step 3: getting email from hostname!',os.hostname());\n                const link2Confirm = fetchConfirmLinkFromPop3Mail((os.hostname()=='regtest')?'mail':'localhost', 110, recipient_pop3username, recipient_pop3password, dappUrlBob, false);\n                testLogging('step 4: confirming link',link2Confirm);\n                if(link2Confirm!=null){running=false;\n                confirmLink(link2Confirm);\n                confirmedLink=link2Confirm;\n                testLogging('confirmed')\n                return link2Confirm;\n                }\n            }catch(ex){\n                testLogging('trying to get email - so far no success:',counter);\n                await new Promise(resolve => setTimeout(resolve, 3000));\n            }\n        }\n\n    })();\n\n    if(os.hostname()!=='regtest'){ //if this is a selenium test from outside docker - don't verify DOI here for simplicity \n            testLogging('returning to test without DOI-verification while doing selenium outside docker');\n            callback(null, {status: \"DOI confirmed\"});\n           // return;\n    }else{\n        let nameId=null;\n        try{\n            chai.assert.isBelow(counter,50);\n            //confirmLink(confirmedLink);\n            const nameId = getNameIdOfOptInFromRawTx(node_url_alice,rpcAuthAlice,resultDataOptIn.data.id,true);\n            if(log) testLogging('got nameId',nameId);\n            generatetoaddress(node_url_alice, rpcAuthAlice, global.aliceAddress, 1, true);\n            testLogging('before verification');\n            \n            if(Array.isArray(sender_mail_in)){\n                for (let index = 0; index < sender_mail_in.length; index++) {\n                    let tmpId = index==0 ? nameId : nameId+\"-\"+(index); //get nameid of coDOIs based on master\n                    testLogging(\"NameId of coDoi: \",tmpId);\n                verifyDOI(dappUrlAlice, dataLoginAlice, node_url_alice, rpcAuthAlice, sender_mail_in[index], recipient_mail, tmpId, true);\n                }\n            }\n            else{\n                verifyDOI(dappUrlAlice, dataLoginAlice, node_url_alice, rpcAuthAlice, sender_mail, recipient_mail, nameId, true); //need to generate two blocks to make block visible on alice\n            }\n            testLogging('after verification');\n            //confirmLink(confirmedLink);\n            callback(null, {optIn: resultDataOptIn, nameId: nameId,confirmLink: confirmedLink});\n        }\n        catch(error){\n            callback(error, {optIn: resultDataOptIn, nameId: nameId});\n        }\n    }\n\n\n}\n\nexport function updateUser(url,auth,updateId,mailTemplate,log){\n    const headersUser = {\n        'Content-Type':'application/json',\n        'X-User-Id':auth.userId,\n        'X-Auth-Token':auth.authToken\n    }\n\n    const dataUser = {\"mailTemplate\":mailTemplate};\n    if(log) testLogging('url:', url);\n    const urlUsers = url+'/api/v1/users/'+updateId;\n    const realDataUser= { data: dataUser, headers: headersUser};\n    if(log) testLogging('updateUser:', realDataUser);\n    let res = HTTP.put(urlUsers,realDataUser);\n    if(log) testLogging(\"response\",res);\n    chai.assert.equal(200, res.statusCode);\n    chai.assert.equal(res.data.status,\"success\");\n    const usDat = Accounts.users.findOne({_id:updateId}).profile.mailTemplate;\n    if(log) testLogging(\"InputTemplate\",dataUser.mailTemplate);\n    if(log) testLogging(\"ResultTemplate\",usDat);\n    chai.expect(usDat).to.not.be.undefined;\n    chai.assert.equal(dataUser.mailTemplate.templateURL,usDat.templateURL);\n    return usDat;\n}\n\nexport function resetUsers(){\n    Accounts.users.remove(\n        {\"username\":\n        {\"$ne\":\"admin\"}\n        }\n    );\n}\n","import {getHttpPOST} from \"../../../server/api/http\";\nimport {logBlockchain, testLogging} from \"../../../imports/startup/server/log-configuration\";\nimport {chai} from 'meteor/practicalmeteor:chai';\nimport {Meteor} from \"meteor/meteor\";\nconst os = require('os');\nlet sudo = (os.hostname()=='regtest')?'sudo ':''\nconst headers = { 'Content-Type':'text/plain'  };\nconst exec = require('child_process').exec;\n\nexport function initBlockchain(node_url_alice,node_url_bob,rpcAuth,privKeyBob,log) {            //connect nodes (alice & bob) and generate DOI (only if not connected)\n\n    console.log(\"importing private key:\"+privKeyBob);\n    importPrivKey(node_url_bob, rpcAuth, privKeyBob, true, log);\n    try {\n        const aliceContainerId = getContainerIdOfName('alice');\n        const statusDocker = JSON.parse(getDockerStatus(aliceContainerId));\n        logBlockchain(\"real balance :\" + statusDocker.balance, (Number(statusDocker.balance) > 0));\n        logBlockchain(\"connections:\" + statusDocker.connections);\n        if (Number(statusDocker.connections) == 0) {\n            isNodeAlive(node_url_alice, rpcAuth, log);\n            isNodeAliveAndConnectedToHost(node_url_bob, rpcAuth, 'alice', log);\n        }\n\n        if (Number(statusDocker.balance) > 0) {\n            logBlockchain(\"enough founding for alice - blockchain already connected\");\n            global.aliceAddress = getNewAddress(node_url_alice, rpcAuth, log);\n            return;\n        }\n    } catch (exception) {\n        logBlockchain(\"connecting blockchain and mining some coins\");\n    }\n    global.aliceAddress = getNewAddress(node_url_alice, rpcAuth, log);\n    generatetoaddress(node_url_alice, rpcAuth, global.aliceAddress, 210);  //110 blocks to new address! 110 blÃ¶cke *25 coins\n\n}\nfunction wait_to_start_container(startedContainerId,callback){\n    let running = true;\n    let counter = 0;\n\n    //here we make sure bob gets started and connected again in probably all possible sitautions\n    while(running){\n        try{\n            const statusDocker = JSON.parse(getDockerStatus(startedContainerId));\n            testLogging(\"getinfo\",statusDocker);\n            testLogging(\"version:\"+statusDocker.version);\n            testLogging(\"balance:\"+statusDocker.balance);\n            testLogging(\"connections:\"+statusDocker.connections);\n            if(statusDocker.connections===0){\n                doichainAddNode(startedContainerId);\n            }\n            running = false;\n        }\n        catch(error){\n            testLogging(\"statusDocker problem trying to start Bobs node inside docker container:\",error);\n            try{\n                connectDockerBob(startedContainerId);\n            }catch(error2){\n                testLogging(\"could not start bob:\",error2);\n            }\n            if(counter==50)running=false;\n        }\n        counter++;\n    }\n    callback(null, startedContainerId);\n}\n\nfunction delete_options_from_alice_and_bob(callback){\n    const containerId = getContainerIdOfName('mongo');\n    exec('sudo docker cp /home/doichain/dapp/contrib/scripts/meteor/delete_collections.sh '+containerId+':/tmp/', (e, stdout, stderr)=> {\n        testLogging('copied delete_collections into mongo docker container',{stderr:stderr,stdout:stdout});\n        exec('sudo docker exec '+containerId+' bash -c \"mongo < /tmp/delete_collections.sh\"', (e, stdout, stderr)=> {\n            testLogging('sudo docker exec '+containerId+' bash -c \"mongo < /tmp/delete_collections.sh\"',{stderr:stderr,stdout:stdout});\n            callback(stderr, stdout);\n        });\n\n    });\n}\n\nexport function isNodeAlive(url, auth, log) {\n    if(log) testLogging('isNodeAlive called to url',url);\n    const dataGetNetworkInfo = {\"jsonrpc\": \"1.0\", \"id\": \"getnetworkinfo\", \"method\": \"getnetworkinfo\", \"params\": []};\n    const realdataGetNetworkInfo = {auth: auth, data: dataGetNetworkInfo, headers: headers};\n    const resultGetNetworkInfo = getHttpPOST(url, realdataGetNetworkInfo);\n    const statusGetNetworkInfo = resultGetNetworkInfo.statusCode;\n    chai.assert.equal(200, statusGetNetworkInfo);\n    if(log)\n        testLogging('resultGetNetworkInfo:',resultGetNetworkInfo); // getnetworkinfo | jq '.localaddresses[0].address'\n}\n\nexport function isNodeAliveAndConnectedToHost(url, auth, host, log) {\n    if(log) testLogging('isNodeAliveAndConnectedToHost called');\n    isNodeAlive(url, auth, log);\n\n    const dataGetNetworkInfo = {\"jsonrpc\": \"1.0\", \"id\":\"addnode\", \"method\": \"addnode\", \"params\": ['alice','onetry'] };\n    const realdataGetNetworkInfo = { auth: auth, data: dataGetNetworkInfo, headers: headers };\n    const resultGetNetworkInfo = getHttpPOST(url, realdataGetNetworkInfo);\n    const statusAddNode = resultGetNetworkInfo.statusCode;\n    if(log) testLogging('addnode:',statusAddNode);\n    chai.assert.equal(200, statusAddNode);\n\n\n    const dataGetPeerInfo = {\"jsonrpc\": \"1.0\", \"id\":\"getpeerinfo\", \"method\": \"getpeerinfo\", \"params\": [] };\n    const realdataGetPeerInfo = { auth: auth, data: dataGetPeerInfo, headers: headers };\n    const resultGetPeerInfo = getHttpPOST(url, realdataGetPeerInfo);\n    const statusGetPeerInfo = resultGetPeerInfo.statusCode;\n    if(log) testLogging('resultGetPeerInfo:',resultGetPeerInfo);\n    chai.assert.equal(200, statusGetPeerInfo);\n    chai.assert.isAbove(resultGetPeerInfo.data.result.length, 0, 'no connection to other nodes! ');\n    //chai.expect(resultGetPeerInfo.data.result).to.have.lengthOf.at.least(1);\n\n}\n\nexport function importPrivKey(url, auth, privKey, rescan, log) {\n        if(log) testLogging('importPrivKey called','');\n        const data_importprivkey = {\"jsonrpc\": \"1.0\", \"id\":\"importprivkey\", \"method\": \"importprivkey\", \"params\": [privKey] };\n        const realdata_importprivkey = { auth: auth, data: data_importprivkey, headers: headers };\n        const result = getHttpPOST(url, realdata_importprivkey);\n        if(log) testLogging('result:',result);\n}\n\nexport function getNewAddress(url, auth, log) {\n\n    if(log) testLogging('getNewAddress called');\n    const dataGetNewAddress = {\"jsonrpc\": \"1.0\", \"id\":\"getnewaddress\", \"method\": \"getnewaddress\", \"params\": [] };\n    const realdataGetNewAddress = { auth: auth, data: dataGetNewAddress, headers: headers };\n    const resultGetNewAddress = getHttpPOST(url, realdataGetNewAddress);\n    const statusOptInGetNewAddress = resultGetNewAddress.statusCode;\n    const newAddress  = resultGetNewAddress.data.result;\n    chai.assert.equal(200, statusOptInGetNewAddress);\n    chai.expect(resultGetNewAddress.data.error).to.be.null;\n    chai.expect(newAddress).to.not.be.null;\n    if(log) testLogging(newAddress);\n    return newAddress;\n}\n\nexport function generatetoaddress(url,auth,toaddress,amount,log){\n    const dataGenerate = {\"jsonrpc\": \"1.0\", \"id\":\"generatetoaddress\", \"method\": \"generatetoaddress\", \"params\": [amount,toaddress] };\n    const headersGenerates = { 'Content-Type':'text/plain'  };\n    const realdataGenerate = { auth: auth, data: dataGenerate, headers: headersGenerates };\n    const resultGenerate = getHttpPOST(url, realdataGenerate);\n    const statusResultGenerate = resultGenerate.statusCode;\n    if(log)testLogging('statusResultGenerate:',statusResultGenerate);\n    chai.assert.equal(200, statusResultGenerate);\n    chai.expect(resultGenerate.data.error).to.be.null;\n    chai.expect(resultGenerate.data.result).to.not.be.null;\n}\n\nexport function getBalance(url,auth,log){\n    const dataGetBalance = {\"jsonrpc\": \"1.0\", \"id\":\"getbalance\", \"method\": \"getbalance\", \"params\": [] };\n    const realdataGetBalance = { auth: auth, data: dataGetBalance, headers: headers };\n    const resultGetBalance = getHttpPOST(url, realdataGetBalance);\n    if(log)testLogging('resultGetBalance:',resultGetBalance.data.result);\n    return resultGetBalance.data.result;\n}\n\nfunction get_container_id_of_name(name,callback) {\n    exec(sudo+'docker ps --filter \"name='+name+'\" | cut -f1 -d\" \" | sed \\'1d\\'', (e, stdout, stderr)=> {\n        if(e!=null){\n            testLogging('cannot find '+name+' node '+stdout,stderr);\n            return null;\n        }\n        const bobsContainerId = stdout.toString().trim(); //.substring(0,stdout.toString().length-1); //remove last char since ins a line break\n        callback(stderr, bobsContainerId);\n    });\n}\n\nfunction stop_docker_bob(callback) {\n    const bobsContainerId = getContainerIdOfName('bob');\n    testLogging('stopping Bob with container-id: '+bobsContainerId);\n    try{\n        exec(sudo+'docker stop '+bobsContainerId, (e, stdout, stderr)=> {\n            testLogging('stopping Bob with container-id: ',{stdout:stdout,stderr:stderr});\n            callback(null, bobsContainerId);\n        });\n    }catch (e) {\n        testLogging('couldnt stop bobs node',e);\n    }\n}\n\nfunction doichain_add_node(containerId,callback) {\n    exec(sudo+'docker exec '+containerId+' doichain-cli addnode alice onetry', (e, stdout, stderr)=> {\n        testLogging('bob '+containerId+' connected? ',{stdout:stdout,stderr:stderr});\n        callback(stderr, stdout);\n    });\n}\n\nfunction get_docker_status(containerId,callback) {\n    logBlockchain('containerId '+containerId+' running? ');\n    exec(sudo+'docker exec '+containerId+' doichain-cli -getinfo', (e, stdout, stderr)=> {\n        testLogging('containerId '+containerId+' status: ',{stdout:stdout,stderr:stderr});\n        callback(stderr, stdout);\n    });\n}\n\nfunction start_docker_bob(bobsContainerId,callback) {\n    exec(sudo+'docker start '+bobsContainerId, (e, stdout, stderr)=> {\n        testLogging('started bobs node again: '+bobsContainerId,{stdout:stdout,stderr:stderr});\n        callback(stderr, stdout.toString().trim()); //remove line break from the end\n    });\n}\n\nfunction connect_docker_bob(bobsContainerId, callback) {\n    exec(sudo+'docker exec '+bobsContainerId+' doichaind -regtest -daemon -reindex -addnode=alice', (e, stdout, stderr)=> {\n        testLogging('restarting doichaind on bobs node and connecting with alice: ',{stdout:stdout,stderr:stderr});\n        callback(stderr, stdout);\n    });\n}\n\nfunction start_3rd_node(callback) {\n    exec(sudo+'docker start 3rd_node', (e, stdout, stderr)=> {\n        testLogging('trying to start 3rd_node',{stdout:stdout,stderr:stderr});\n        if(stderr){\n            exec(sudo+'docker network ls |grep doichain | cut -f9 -d\" \"', (e, stdout, stderr)=> {\n                const network = stdout.toString().substring(0,stdout.toString().length-1);\n                testLogging('connecting 3rd node to docker network: '+network);\n                exec(sudo+'docker run --expose=18332 ' +\n                    '-e REGTEST=true ' +\n                    '-e DOICHAIN_VER=0.16.3.2 ' +\n                    '-e RPC_ALLOW_IP=::/0 ' +\n                    '-e CONNECTION_NODE=alice '+\n                    '-e RPC_PASSWORD=generated-password ' +\n                    '--name=3rd_node '+\n                    '--dns=172.20.0.5  ' +\n                    '--dns=8.8.8.8 ' +\n                    '--dns-search=ci-doichain.org ' +\n                    '--ip=172.20.0.10 ' +\n                    '--network='+network+' -d doichain/core:0.16.3.2', (e, stdout, stderr)=> {\n                    callback(stderr, stdout);\n                });\n            });\n        }else{\n            callback(stderr, stdout);\n        }\n    });\n\n\n}\n\nfunction run_and_wait(runfunction,seconds, callback){\n    Meteor.setTimeout(function () {\n        runfunction();\n        callback(null,true);\n    }, seconds+1000);\n}\n\nexport function waitToStartContainer(containerId) {\n    const syncFunc = Meteor.wrapAsync(wait_to_start_container);\n    return syncFunc(containerId);\n}\n\nexport function deleteOptInsFromAliceAndBob() {\n    const syncFunc = Meteor.wrapAsync(delete_options_from_alice_and_bob);\n    return syncFunc();\n}\n\nexport function start3rdNode() {\n    const syncFunc = Meteor.wrapAsync(start_3rd_node);\n    return syncFunc();\n}\n\nexport function stopDockerBob() {\n    const syncFunc = Meteor.wrapAsync(stop_docker_bob);\n    return syncFunc();\n}\n\nexport function getContainerIdOfName(name) {\n    const syncFunc = Meteor.wrapAsync(get_container_id_of_name);\n    return syncFunc(name);\n}\n\nexport function startDockerBob(containerId) {\n    const syncFunc = Meteor.wrapAsync(start_docker_bob);\n    return syncFunc(containerId);\n}\n\nexport function doichainAddNode(containerId) {\n    const syncFunc = Meteor.wrapAsync(doichain_add_node);\n    return syncFunc(containerId);\n}\n\nexport function getDockerStatus(containerId) {\n    const syncFunc = Meteor.wrapAsync(get_docker_status);\n    return syncFunc(containerId);\n}\n\nexport function connectDockerBob(containerId) {\n    const syncFunc = Meteor.wrapAsync(connect_docker_bob);\n    return syncFunc(containerId);\n}\n\nexport function runAndWait(runfunction, seconds) {\n    const syncFunc = Meteor.wrapAsync(run_and_wait);\n    return syncFunc(seconds);\n}","import {chai} from 'meteor/practicalmeteor:chai';\nimport {\n    deleteOptInsFromAliceAndBob, getBalance, initBlockchain\n} from \"./test-api/test-api-on-node\";\n\nimport {logBlockchain} from \"../../imports/startup/server/log-configuration\";\nconst node_url_alice = 'http://172.20.0.6:18332/';\nconst node_url_bob =   'http://172.20.0.7:18332/';\nconst rpcAuth = \"admin:generated-password\";\nconst privKeyBob = \"cP3EigkzsWuyKEmxk8cC6qXYb4ZjwUo5vzvZpAPmDQ83RCgXQruj\";\nconst log = true;\n\nif(Meteor.isAppTest) {\n    describe('basic-doi-test-0', function () {\n        this.timeout(0);\n\n        before(function () {\n            logBlockchain(\"removing OptIns,Recipients,Senders\");\n            deleteOptInsFromAliceAndBob();\n        });\n\n        it('should create a RegTest Doichain with alice and bob and some Doi - coins', function () {\n            initBlockchain(node_url_alice,node_url_bob,rpcAuth,privKeyBob,true);\n            const aliceBalance = getBalance(node_url_alice, rpcAuth, log);\n            chai.assert.isAbove(aliceBalance, 0, 'no funding! ');\n        });\n    });\n}\n","import {chai} from 'meteor/practicalmeteor:chai';\nimport {\n    login,\n    createUser,\n    findUser,\n    exportOptIns,\n    requestConfirmVerifyBasicDoi, resetUsers, updateUser, deleteAllEmailsFromPop3, confirmLink\n} from \"./test-api/test-api-on-dapp\";\nimport {logBlockchain} from \"../../imports/startup/server/log-configuration\";\nimport {deleteOptInsFromAliceAndBob} from \"./test-api/test-api-on-node\";\n\nconst node_url_alice = 'http://172.20.0.6:18332/';\n\nconst rpcAuthAlice = \"admin:generated-password\";\nconst dappUrlAlice = \"http://localhost:3000\";\nconst dappUrlBob = \"http://172.20.0.8:4000\";\nconst dAppLogin = {\"username\":\"admin\",\"password\":\"password\"};\n\nconst templateUrlA=\"http://172.20.0.8:4000/templates/emails/doichain-anmeldung-final-DE.html\";\nconst templateUrlB=\"http://172.20.0.8:4000/templates/emails/doichain-anmeldung-final-EN.html\";\nconst aliceALogin = {\"username\":\"alice-a\",\"password\":\"password\"};\nconst aliceBLogin = {\"username\":\"alice-a\",\"password\":\"password\"};\n\nconst recipient_pop3username = \"bob@ci-doichain.org\";\nconst recipient_pop3password = \"bob\";\n\nif(Meteor.isAppTest) {\n    describe('basic-doi-test-01', function () {\n        this.timeout(0);\n\n        before(function () {\n            logBlockchain(\"removing OptIns,Recipients,Senders\");\n            deleteOptInsFromAliceAndBob();\n            deleteAllEmailsFromPop3(\"mail\", 110, recipient_pop3username, recipient_pop3password, true);\n        });\n\n        it('should test if basic Doichain workflow is working with optional data', function (done) {\n            const recipient_mail = \"bob@ci-doichain.org\"; //please use this as standard to not confuse people!\n            const sender_mail = \"alice@ci-doichain.org\";\n            const dataLoginAlice = login(dappUrlAlice, dAppLogin, false); //log into dApp\n            requestConfirmVerifyBasicDoi(node_url_alice, rpcAuthAlice, dappUrlAlice, dataLoginAlice, dappUrlBob, recipient_mail, sender_mail, {'city': 'Ekaterinburg'}, \"bob@ci-doichain.org\", \"bob\", true);\n            done();\n        });\n\n        it('should test if basic Doichain workflow is working without optional data', function (done) {\n            const recipient_mail = \"alice@ci-doichain.org\"; //please use this as an alernative when above standard is not possible\n            const sender_mail = \"bob@ci-doichain.org\";\n            //login to dApp & request DOI on alice via bob\n            const dataLoginAlice = login(dappUrlAlice, dAppLogin, false); //log into dApp\n            requestConfirmVerifyBasicDoi(node_url_alice, rpcAuthAlice, dappUrlAlice, dataLoginAlice, dappUrlBob, recipient_mail, sender_mail, null, \"alice@ci-doichain.org\", \"alice\", true);\n            done();\n        });\n\n        it('should create two more users', function (done) {\n            resetUsers();\n            const logAdmin = login(dappUrlAlice, dAppLogin, false);\n            let userA = createUser(dappUrlAlice, logAdmin, \"alice-a\", templateUrlA, true);\n            chai.expect(findUser(userA)).to.not.be.undefined;\n            let userB = createUser(dappUrlAlice, logAdmin, \"alice-b\", templateUrlB, true);\n            chai.expect(findUser(userB)).to.not.be.undefined;\n\n            done();\n        });\n\n        it('should test if Doichain workflow is using different templates for different users', function (done) {\n\n            resetUsers();\n            const recipient_mail = \"bob@ci-doichain.org\"; //\n            const sender_mail_alice_a = \"alice-a@ci-doichain.org\";\n            const sender_mail_alice_b = \"alice-b@ci-doichain.org\";\n            const logAdmin = login(dappUrlAlice, dAppLogin, false);\n\n            let userA = createUser(dappUrlAlice, logAdmin, \"alice-a\", templateUrlA, true);\n            chai.expect(findUser(userA)).to.not.be.undefined;\n            let userB = createUser(dappUrlAlice, logAdmin, \"alice-b\", templateUrlB, true);\n            chai.expect(findUser(userB)).to.not.be.undefined;\n\n            const logUserA = login(dappUrlAlice, aliceALogin, true);\n            const logUserB = login(dappUrlAlice, aliceBLogin, true);\n\n            //requestConfirmVerifyBasicDoi checks if the \"log\" value (if it is a String) is in the mail-text\n            requestConfirmVerifyBasicDoi(node_url_alice, rpcAuthAlice, dappUrlAlice, logUserA, dappUrlBob, recipient_mail, sender_mail_alice_a, {'city': 'Ekaterinburg'}, \"bob@ci-doichain.org\", \"bob\", \"kostenlose Anmeldung\");\n            requestConfirmVerifyBasicDoi(node_url_alice, rpcAuthAlice, dappUrlAlice, logUserB, dappUrlBob, recipient_mail, sender_mail_alice_b, {'city': 'Simbach'}, \"bob@ci-doichain.org\", \"bob\", \"free registration\");\n\n            done();\n        });\n\n        it('should test if users can export OptIns ', function (done) {\n            const recipient_mail = \"bob@ci-doichain.org\"; //\n            const sender_mail_alice_a = \"alice-export@ci-doichain.org\";\n            const logAdmin = login(dappUrlAlice, dAppLogin, true);\n            const logUserA = login(dappUrlAlice, aliceALogin, true);\n            requestConfirmVerifyBasicDoi(node_url_alice, rpcAuthAlice, dappUrlAlice, logUserA, dappUrlBob, recipient_mail, sender_mail_alice_a, {'city': 'MÃ¼nchen'}, \"bob@ci-doichain.org\", \"bob\", true);\n            const exportedOptIns = exportOptIns(dappUrlAlice, logAdmin, true);\n            chai.expect(exportedOptIns).to.not.be.undefined;\n            chai.expect(exportedOptIns[0]).to.not.be.undefined;\n            chai.expect(exportedOptIns[0].RecipientEmail.email).to.be.equal(recipient_mail);\n            const exportedOptInsA = exportOptIns(dappUrlAlice, logUserA, true);\n            exportedOptInsA.forEach(element => {\n                chai.expect(element.ownerId).to.be.equal(logUserA.userId);\n            });\n            //chai.expect(findOptIn(resultDataOptIn._id)).to.not.be.undefined;\n            done();\n        });\n\n\n        it('should test if admin can update user profiles', function () {\n            resetUsers();\n            let logAdmin = login(dappUrlAlice, dAppLogin, true);\n            const userUp = createUser(dappUrlAlice, logAdmin, \"updateUser\", templateUrlA, true);\n            const changedData = updateUser(dappUrlAlice, logAdmin, userUp, {\"templateURL\": templateUrlB}, true);\n            chai.expect(changedData).not.undefined;\n        });\n\n        it('should test if user can update own profile', function () {\n            resetUsers();\n            let logAdmin = login(dappUrlAlice, dAppLogin, true);\n            const userUp = createUser(dappUrlAlice, logAdmin, \"updateUser\", templateUrlA, true);\n            const logUserUp = login(dappUrlAlice, {\"username\": \"updateUser\", \"password\": \"password\"}, true);\n            const changedData = updateUser(dappUrlAlice, logUserUp, userUp, {\"templateURL\": templateUrlB}, true);\n            chai.expect(changedData).not.undefined;\n        });\n\n        it('should test if coDoi works', function () {\n            const coDoiList = [\"alice1@doichain-ci.com\", \"alice2@doichain-ci.com\", \"alice3@doichain-ci.com\"];\n            const recipient_mail = \"bob@ci-doichain.org\";\n            const sender_mail = coDoiList;\n            let logAdmin = login(dappUrlAlice, dAppLogin, true);\n            const coDois = requestConfirmVerifyBasicDoi(node_url_alice, rpcAuthAlice, dappUrlAlice, logAdmin, dappUrlBob, recipient_mail, sender_mail, {'city': 'Ekaterinburg'}, \"bob@ci-doichain.org\", \"bob\", true);\n        });\n\n        it('should find updated Data in email', function (done) {\n            const recipient_mail = \"bob@ci-doichain.org\"; //please use this as standard to not confuse people!\n            const sender_mail = \"alice-update@ci-doichain.org\";\n            const adLog = login(dappUrlAlice, dAppLogin, false);\n            updateUser(dappUrlAlice, adLog, adLog.userId, {\"subject\": \"updateTest\", \"templateURL\": templateUrlB});\n            requestConfirmVerifyBasicDoi(node_url_alice, rpcAuthAlice, dappUrlAlice, adLog, dappUrlBob, recipient_mail, sender_mail, {'city': 'Ekaterinburg'}, \"bob@ci-doichain.org\", \"bob\", true);\n            done();\n        });\n\n        it('should redirect if confirmation-link is clicked again',function(){\n            for (let index = 0; index < 3; index++) {\n                const recipient_mail = \"bob@ci-doichain.org\"; //please use this as standard to not confuse people!\n                const sender_mail = \"alice_\"+index+\"@ci-doichain.org\";\n                const dataLoginAlice = login(dappUrlAlice, dAppLogin, false); //log into dApp\n                let returnedData = requestConfirmVerifyBasicDoi(node_url_alice, rpcAuthAlice, dappUrlAlice, dataLoginAlice, dappUrlBob, recipient_mail, sender_mail, {'city': 'Ekaterinburg'}, \"bob@ci-doichain.org\", \"bob\", true);    \n                chai.assert.equal(true,confirmLink(returnedData.confirmLink));\n            }\n\n        });\n    });\n}\n","import {chai} from 'meteor/practicalmeteor:chai';\nimport {\n    confirmLink, deleteAllEmailsFromPop3,\n    fetchConfirmLinkFromPop3Mail,\n    getNameIdOfOptInFromRawTx,\n    login,\n    requestDOI, verifyDOI\n} from \"./test-api/test-api-on-dapp\";\nimport {testLogging} from \"../../imports/startup/server/log-configuration\";\nimport {\n    deleteOptInsFromAliceAndBob,\n    generatetoaddress,\n    getNewAddress,\n    start3rdNode,\n    startDockerBob,\n    stopDockerBob, waitToStartContainer\n} from \"./test-api/test-api-on-node\";\nconst exec = require('child_process').exec;\nconst node_url_alice = 'http://172.20.0.6:18332/';\nconst recipient_pop3username = \"bob@ci-doichain.org\";\nconst recipient_pop3password = \"bob\";\n\nconst rpcAuth = \"admin:generated-password\";\nconst dappUrlAlice = \"http://localhost:3000\";\nconst dappUrlBob = \"http://172.20.0.8:4000\";\nconst dAppLogin = {\"username\":\"admin\",\"password\":\"password\"};\nconst log = true;\n\nif(Meteor.isAppTest) {\n    describe('02-basic-doi-test-with-offline-node-02', function () {\n\n        before(function () {\n            deleteOptInsFromAliceAndBob();\n            deleteAllEmailsFromPop3(\"mail\", 110, recipient_pop3username, recipient_pop3password, true);\n            exec('sudo docker rm 3rd_node', (e, stdout2, stderr2) => {\n                testLogging('deleted 3rd_node:', {stdout: stdout2, stderr: stderr2});\n            });\n\n            try {\n                exec('sudo docker stop 3rd_node', (e, stdout, stderr) => {\n                    testLogging('stopped 3rd_node:', {stdout: stdout, stderr: stderr});\n                    exec('sudo docker rm 3rd_node', (e, stdout, stderr) => {\n                        testLogging('removed 3rd_node:', {stdout: stdout, stderr: stderr});\n                    });\n                });\n            } catch (ex) {\n                testLogging('could not stop 3rd_node',);\n            }\n            //importPrivKey(node_url_bob, rpcAuth, privKeyBob, true, false);\n        });\n\n        before(function () {\n            try {\n                exec('sudo docker stop 3rd_node', (e, stdout, stderr) => {\n                    testLogging('stopped 3rd_node:', {stdout: stdout, stderr: stderr});\n                    exec('sudo docker rm 3rd_node', (e, stdout, stderr) => {\n                        testLogging('removed 3rd_node:', {stdout: stdout, stderr: stderr});\n                    });\n                });\n            } catch (ex) {\n                testLogging('could not stop 3rd_node',);\n            }\n        });\n\n        it('should test if basic Doichain workflow is working when Bobs node is temporarily offline', function (done) {\n            this.timeout(0);\n            global.aliceAddress = getNewAddress(node_url_alice, rpcAuth, false);\n            //start another 3rd node before shutdown Bob\n            start3rdNode();\n            var containerId = stopDockerBob();\n            const recipient_mail = \"bob@ci-doichain.org\";\n            const sender_mail = \"alice-to-offline-node@ci-doichain.org\";\n            //login to dApp & request DOI on alice via bob\n            if (log) testLogging('log into alice and request DOI');\n            let dataLoginAlice = login(dappUrlAlice, dAppLogin, false); //log into dApp\n            let resultDataOptIn = requestDOI(dappUrlAlice, dataLoginAlice, recipient_mail, sender_mail, null, true);\n\n            const nameId = getNameIdOfOptInFromRawTx(node_url_alice, rpcAuth, resultDataOptIn.data.id, true);\n            if (log) testLogging('got nameId', nameId);\n            var startedContainerId = startDockerBob(containerId);\n            testLogging(\"started bob's node with containerId\", startedContainerId);\n            chai.expect(startedContainerId).to.not.be.null;\n            waitToStartContainer(startedContainerId);\n\n            //generating a block so transaction gets confirmed and delivered to bob.\n            generatetoaddress(node_url_alice, rpcAuth, global.aliceAddress, 1, true);\n            let running = true;\n            let counter = 0;\n            (async function loop() {\n                while (running && ++counter < 50) { //trying 50x to get email from bobs mailbox\n                    try {\n                        //  generatetoaddress(node_url_alice, rpcAuth, global.aliceAddress, 1, true);\n                        testLogging('step 3: getting email!');\n                        const link2Confirm = fetchConfirmLinkFromPop3Mail(\"mail\", 110, recipient_pop3username, recipient_pop3password, dappUrlBob, false);\n                        testLogging('step 4: confirming link', link2Confirm);\n                        if (link2Confirm != null) running = false;\n                        confirmLink(link2Confirm);\n                        testLogging('confirmed');\n                    } catch (ex) {\n                        testLogging('trying to get email - so far no success:', counter);\n                        await new Promise(resolve => setTimeout(resolve, 2000));\n                    }\n                }\n                })();\n                generatetoaddress(node_url_alice, rpcAuth, global.aliceAddress, 1, true);\n                verifyDOI(dappUrlAlice, dataLoginAlice, node_url_alice, rpcAuth, sender_mail, recipient_mail, nameId, log); //need to generate two blocks to make block visible on alice\n                testLogging('end of getNameIdOfRawTransaction returning nameId', nameId);\n                try {\n                    exec('sudo docker stop 3rd_node', (e, stdout, stderr) => {\n                        testLogging('stopped 3rd_node:', {stdout: stdout, stderr: stderr});\n                        exec('sudo docker rm 3rd_node', (e, stdout, stderr) => {\n                            testLogging('removed 3rd_node:', {stdout: stdout, stderr: stderr});\n                        });\n                    });\n                } catch (ex) {\n                    testLogging('could not stop 3rd_node',);\n                }\n                done();\n            //done();\n        }); //it\n    });\n}\n","import {chai} from 'meteor/practicalmeteor:chai';\nimport {\n    deleteAllEmailsFromPop3, findOptIn,\n    login,\n    requestConfirmVerifyBasicDoi, requestDOI\n} from \"./test-api/test-api-on-dapp\";\nimport {logBlockchain} from \"../../imports/startup/server/log-configuration\";\nimport {deleteOptInsFromAliceAndBob, generatetoaddress, getNewAddress} from \"./test-api/test-api-on-node\";\n\nconst node_url_alice = 'http://172.20.0.6:18332/';\nconst rpcAuthAlice = \"admin:generated-password\";\nconst dappUrlAlice = \"http://localhost:3000\";\nconst dappUrlBob = \"http://172.20.0.8:4000\";\nconst dAppLogin = {\"username\":\"admin\",\"password\":\"password\"};\nconst recipient_pop3username = \"bob@ci-doichain.org\";\nconst recipient_pop3password = \"bob\";\n\nif(Meteor.isAppTest) {\n    describe('03-basic-doi-test-03', function () {\n\n        before(function () {\n            logBlockchain(\"removing OptIns,Recipients,Senders\");\n            deleteOptInsFromAliceAndBob();\n            deleteAllEmailsFromPop3(\"mail\", 110, recipient_pop3username, recipient_pop3password, true);\n        });\n\n        it('should test if basic Doichain workflow running 5 times', function (done) {\n            this.timeout(0);\n\n            const dataLoginAlice = login(dappUrlAlice, dAppLogin, false); //log into dApp\n            global.aliceAddress = getNewAddress(node_url_alice, rpcAuthAlice, false);\n            for (let i = 0; i < 20; i++) {\n                const recipient_mail = \"bob@ci-doichain.org\"; //please use this as standard to not confuse people!\n                const sender_mail = \"alice_\" + i + \"@ci-doichain.org\";\n                requestConfirmVerifyBasicDoi(node_url_alice, rpcAuthAlice, dappUrlAlice, dataLoginAlice, dappUrlBob, recipient_mail, sender_mail, {'city': 'Ekaterinburg_' + i}, \"bob@ci-doichain.org\", \"bob\", true);\n            }\n            done();\n        });\n\n        it('should test if basic Doichain workflow running 20 times without confirmation and verification', function (done) {\n            this.timeout(0);\n            deleteAllEmailsFromPop3(\"mail\", 110, recipient_pop3username, recipient_pop3password, true);\n            const dataLoginAlice = login(dappUrlAlice, dAppLogin, false); //log into dApp\n            global.aliceAddress = getNewAddress(node_url_alice, rpcAuthAlice, false);\n            for (let i = 0; i < 20; i++) {\n                const recipient_mail = \"bob@ci-doichain.org\"; //please use this as standard to not confuse people!\n                const sender_mail = \"alice_\" + i + \"@ci-doichain.org\";\n                const resultDataOptIn = requestDOI(dappUrlAlice, dataLoginAlice, recipient_mail, sender_mail, null, true);\n                chai.expect(findOptIn(resultDataOptIn.data.id, true)).to.not.be.undefined;\n            }\n            done();\n        });\n\n        it('should test if basic Doichain workflow running 100 times with without confirmation and verification', function (done) {\n            this.timeout(0);\n            deleteAllEmailsFromPop3(\"mail\", 110, recipient_pop3username, recipient_pop3password, true);\n            const dataLoginAlice = login(dappUrlAlice, dAppLogin, false); //log into dApp\n            global.aliceAddress = getNewAddress(node_url_alice, rpcAuthAlice, false);\n            for (let i = 0; i < 100; i++) {\n                const recipient_mail = \"bob@ci-doichain.org\"; //please use this as standard to not confuse people!\n                const sender_mail = \"alice_\" + i + \"@ci-doichain.org\";\n                const resultDataOptIn = requestDOI(dappUrlAlice, dataLoginAlice, recipient_mail, sender_mail, null, true);\n                chai.expect(findOptIn(resultDataOptIn.data.id, true)).to.not.be.undefined;\n                if (i % 100 === 0) generatetoaddress(node_url_alice, rpcAuthAlice, global.aliceAddress, 1, true);\n            }\n            done();\n        });\n    });\n}","if(Meteor.isAppTest || Meteor.isTest) {\n\n    describe('simple-selenium-test', function () {\n\n        this.timeout(10000);\n        beforeEach(function () {\n\n        });\n\n\n    });\n}\n","import {chai} from 'meteor/practicalmeteor:chai';\nimport {logBlockchain} from \"../../imports/startup/server/log-configuration\";\nimport {deleteOptInsFromAliceAndBob, getBalance, initBlockchain} from \"./test-api/test-api-on-node\";\nimport {login, requestConfirmVerifyBasicDoi} from \"./test-api/test-api-on-dapp\";\nconst node_url_alice = 'http://172.20.0.6:18332/';\nconst node_url_bob =   'http://172.20.0.7:18332/';\nconst rpcAuth = \"admin:generated-password\";\nconst privKeyBob = \"cP3EigkzsWuyKEmxk8cC6qXYb4ZjwUo5vzvZpAPmDQ83RCgXQruj\";\nconst log = true;\n\n\nconst rpcAuthAlice = \"admin:generated-password\";\nconst dappUrlAlice = \"http://localhost:3000\";\nconst dappUrlBob = \"http://172.20.0.8:4000\";\nconst dAppLogin = {\"username\":\"admin\",\"password\":\"password\"};\n\n\nif(Meteor.isTest || Meteor.isAppTest) {\n\n    xdescribe('basic-doi-test-nico', function () {\n        this.timeout(600000);\n\n        before(function () {\n            logBlockchain(\"removing OptIns,Recipients,Senders\");\n            deleteOptInsFromAliceAndBob();\n        });\n\n        xit('should create a RegTest Doichain with alice and bob and some Doi - coins', function () {\n            initBlockchain(node_url_alice,node_url_bob,rpcAuth,privKeyBob,true);\n            const aliceBalance = getBalance(node_url_alice, rpcAuth, log);\n            chai.assert.isAbove(aliceBalance, 0, 'no funding! ');\n        });\n\n        xit('should test if basic Doichain workflow is working with optional data', function (done) {\n            const recipient_mail = \"bob+1@ci-doichain.org\"; //please use this as standard to not confuse people!\n            const sender_mail = \"alice@ci-doichain.org\";\n            const dataLoginAlice = login(dappUrlAlice, dAppLogin, false); //log into dApp\n            requestConfirmVerifyBasicDoi(node_url_alice, rpcAuthAlice, dappUrlAlice, dataLoginAlice, dappUrlBob, recipient_mail, sender_mail, {'city': 'Ekaterinburg'}, \"bob@ci-doichain.org\", \"bob\", true);\n            done();\n        });\n    });\n\n    xdescribe('basic-doi-test-nico', function () {\n\n\n        /**\n         * Information regarding to event loop node.js\n         * - https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/\n         *\n         * Promises:\n         * - https://developers.google.com/web/fundamentals/primers/promises\n         *\n         * Promise loops and async wait\n         * - https://stackoverflow.com/questions/40328932/javascript-es6-promise-for-loop\n         *\n         * Asynchronous loops with mocha:\n         * - https://whitfin.io/asynchronous-test-loops-with-mocha/\n         */\n        /*  it('should test a timeout with a promise', function (done) {\n              logBlockchain(\"truying a promise\");\n              for (let i = 0; i < 10; i++) {\n                  const promise = new Promise((resolve, reject) => {\n                      const timeout = Math.random() * 1000;\n                      setTimeout(() => {\n                          console.log('promise:'+i);\n                      }, timeout);\n                  });\n                  // TODO: Chain this promise to the previous one (maybe without having it running?)\n              }\n              done();\n          });\n\n          it('should run a loop with async wait', function (done) {\n              logBlockchain(\"trying asycn wait\");\n              (async function loop() {\n                  for (let i = 0; i < 10; i++) {\n                      await new Promise(resolve => setTimeout(resolve, Math.random() * 1000));\n                      console.log('async wait'+i);\n                  }\n                  done()\n              })();\n          });\n\n          xit('should safely stop and start bobs doichain node container', function (done) {\n              var containerId = stopDockerBob();\n\n              logBlockchain(\"stopped bob's node with containerId\",containerId);\n              chai.expect(containerId).to.not.be.null;\n\n              var startedContainerId = startDockerBob(containerId);\n              logBlockchain(\"started bob's node with containerId\",startedContainerId);\n              chai.expect(startedContainerId).to.not.be.null;\n\n              let running = true;\n              while(running){\n                  runAndWait(function () {\n                      try{\n                          const statusDocker = JSON.parse(getDockerStatus(containerId));\n                          logBlockchain(\"getinfo\",statusDocker);\n                          logBlockchain(\"version:\"+statusDocker.version);\n                          logBlockchain(\"balance:\"+statusDocker.balance);\n                          logBlockchain(\"balance:\"+statusDocker.connections);\n                          if(statusDocker.connections===0){\n                              doichainAddNode(containerId);\n                          }\n                          running = false;\n                      }\n                      catch(error){\n                          logBlockchain(\"statusDocker problem:\",error);\n                      }\n                  },2);\n              }\n\n              done();\n          });*/\n    });\n}","import {chai} from 'meteor/practicalmeteor:chai';\nif(Meteor.isTest) {\n\n    describe('basic-doi-test-flo', function () {\n    });\n}\n\n\n","import '/imports/startup/server';\nimport './api/index.js';\n"]}