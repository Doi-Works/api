{"version":3,"sources":["meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/doichain-server-api.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/api/doichain/entries.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/api/doichain/methods.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/api/languages/methods.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/api/meta/meta.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/api/opt-ins/methods.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/api/opt-ins/opt-ins.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/api/opt-ins/server/publications.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/api/recipients/recipients.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/api/recipients/server/publications.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/api/senders/senders.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/dapps/export_dois.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/dapps/fetch_doi-mail-data.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/dapps/get_doi-mail-data.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/dns/get_opt-in-key.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/dns/get_opt-in-provider.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/doichain/add_entry_and_fetch_data.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/doichain/check_new_transactions.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/doichain/decrypt_message.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/doichain/encrypt_message.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/doichain/generate_name-id.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/doichain/get_address.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/doichain/get_balance.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/doichain/get_data-hash.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/doichain/get_key-pair.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/doichain/get_private-key_from_wif.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/doichain/get_publickey_and_address_by_domain.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/doichain/get_signature.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/doichain/insert.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/doichain/update.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/doichain/verify_signature.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/doichain/write_to_blockchain.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/emails/decode_doi-hash.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/emails/generate_doi-hash.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/emails/parse_template.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/emails/send.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/jobs/add_check_new_transactions.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/jobs/add_fetch-doi-mail-data.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/jobs/add_insert_blockchain.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/jobs/add_send_mail.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/jobs/add_update_blockchain.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/languages/get.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/meta/addOrUpdate.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/opt-ins/add.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/opt-ins/add_and_write_to_blockchain.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/opt-ins/confirm.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/opt-ins/generate_doi-token.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/opt-ins/update_status.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/opt-ins/verify.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/recipients/add.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/modules/server/senders/add.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/startup/server/dapp-configuration.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/startup/server/dns-configuration.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/startup/server/doichain-configuration.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/startup/server/email-configuration.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/startup/server/fixtures.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/startup/server/index.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/startup/server/jobs.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/startup/server/log-configuration.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/startup/server/register-api.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/startup/server/security.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/startup/server/type-configuration.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/imports/startup/server/useraccounts-configuration.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/server/main.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/server/api/blockchain_jobs.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/server/api/dapp_jobs.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/server/api/dns.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/server/api/doichain.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/server/api/http.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/server/api/index.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/server/api/mail_jobs.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/server/api/rest/rest.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/server/api/rest/imports/confirm.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/server/api/rest/imports/debug.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/server/api/rest/imports/send.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/server/api/rest/imports/status.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/server/api/rest/imports/user.js","meteor://ðŸ’»app/packages/doichain:doichain-meteor-api/server/api/rest/imports/verify.js"],"names":["module","export","name","OptInsCollection","RecipientsCollection","httpGET","httpGETdata","httpPOST","testLog","testvar1","link","OptIns","v","Recipients","getHttpGET","getHttpGETdata","getHttpPOST","testLogging","DoichainEntries","Mongo","SimpleSchema","default","DoichainEntriesCollection","Collection","insert","entry","callback","result","update","selector","modifier","remove","deny","schema","_id","type","String","regEx","RegEx","Id","value","address","masterDoi","optional","index","Integer","txId","attachSchema","publicFields","ValidatedMethod","Meteor","DDPRateLimiter","getKeyPairM","getBalanceM","getKeyPair","validate","run","getBalance","logVal","OPTINS_METHODS","_","pluck","isServer","addRule","contains","connectionId","getLanguages","getAllLanguages","Meta","MetaCollection","data","ourData","key","i18n","_i18n","Roles","addOptIn","add","recipientMail","senderMail","userId","userIsInRole","error","Error","__","optIn","OPTIONS_METHODS","ourOptIn","recipient_sender","recipient","sender","createdAt","Date","nameId","confirmedAt","confirmedBy","IP","confirmationToken","ownerId","publish","OptInsAll","ready","find","fields","ourRecipient","email","privateKey","publicKey","recipientGet","pipeline","push","$redact","$cond","if","$cmp","then","else","$lookup","from","localField","foreignField","as","$unwind","$project","aggregate","rIds","forEach","element","RecipientEmail","recipientsAll","Senders","SendersCollection","ourSender","DOI_MAIL_FETCH_URL","logSend","ExportDoisDataSchema","status","role","userid","id","exportDois","$match","$exists","$ne","undefined","concat","optIns","exportDoiData","JSON","stringify","exception","exportDefault","DOI_FETCH_ROUTE","DOI_CONFIRMATION_ROUTE","API_PATH","VERSION","getUrl","CONFIRM_CLIENT","CONFIRM_ADDRESS","signMessage","parseTemplate","generateDoiToken","generateDoiHash","addSendMailJob","logConfirm","logError","FetchDoiMailDataSchema","domain","fetchDoiMailData","url","signature","query","encodeURIComponent","response","responseData","includes","optInId","findOne","token","confirmationHash","redirect","confirmationUrl","template","content","confirmation_url","to","subject","message","returnPath","getOptInProvider","getOptInKey","verifySignature","Accounts","GetDoiMailDataSchema","name_id","userProfileSchema","Email","templateURL","getDoiMailData","parts","split","length","provider","doiMailData","defaultReturnData","returnData","owner","users","mailTemplate","profile","resolveTxt","FALLBACK_PROVIDER","isRegtest","isTestnet","OPT_IN_KEY","OPT_IN_KEY_TESTNET","GetOptInKeySchema","ourOPT_IN_KEY","foundKey","dnskey","useFallback","PROVIDER_KEY","PROVIDER_KEY_TESTNET","GetOptInProviderSchema","ourPROVIDER_KEY","providerKey","getWif","addFetchDoiMailDataJob","getPrivateKeyFromWif","decryptMessage","AddDoichainEntrySchema","addDoichainEntry","ourEntry","ety","parse","wif","namePos","indexOf","substring","expiresIn","expired","listSinceBlock","nameShow","getRawTransaction","addOrUpdateMeta","TX_NAME_START","LAST_CHECKED_BLOCK_KEY","checkNewTransaction","txid","job","lastCheckedBlock","ret","transactions","txs","lastblock","addressTxs","filter","tx","startsWith","txName","addTx","done","vout","scriptPubKey","nameOp","op","addresses","crypto","ecies","DecryptMessageSchema","Buffer","ecdh","createECDH","setPrivateKey","decrypt","toString","EncryptMessageSchema","encryptMessage","encrypt","GenerateNameIdSchema","generateNameId","$set","CryptoJS","Base58","VERSION_BYTE","VERSION_BYTE_REGTEST","GetAddressSchema","getAddress","_getAddress","pubKey","lib","WordArray","create","SHA256","RIPEMD160","versionByte","checksum","encode","get_Balance","bal","GetDataHashSchema","getDataHash","hash","randomBytes","secp256k1","privKey","privateKeyVerify","publicKeyCreate","toUpperCase","GetPrivateKeyFromWifSchema","_getPrivateKeyFromWif","decode","endsWith","GetPublicKeySchema","getPublicKeyAndAddress","destAddress","bitcore","Message","GetSignatureSchema","getSignature","sign","PrivateKey","SEND_CLIENT","logBlockchain","feeDoi","nameDoi","InsertSchema","dataHash","soiDate","publicKeyAndAddress","nameValue","feeDoiTx","nameDoiTx","getTransaction","DOI_CONFIRMATION_NOTIFY_ROUTE","getHttpPUT","UpdateSchema","host","fromHostUrl","name_data","rerun","our_transaction","confirmations","ourfromHostUrl","updateData","cancel","restart","err","logVerify","NETWORK","Networks","alias","pubkeyhash","privatekey","scripthash","networkMagic","VerifySignatureSchema","Address","fromPublicKey","PublicKey","verify","addInsertBlockchainJob","WriteToBlockchainSchema","writeToBlockchain","HashIds","DecodeDoiHashSchema","decodeDoiHash","ourHash","hex","decodeHex","obj","GenerateDoiHashSchema","json","encodeHex","PLACEHOLDER_REGEX","ParseTemplateSchema","Object","blackbox","_match","exec","_replacePlaceholder","replace","rep","DOI_MAIL_DEFAULT_EMAIL_FROM","SendMailSchema","sendMail","mail","ourMail","send","html","headers","Job","BlockchainJobs","addCheckNewTransactionsBlockchainJob","retry","retries","wait","save","cancelRepeats","DAppJobs","AddFetchDoiMailDataJobSchema","AddInsertBlockchainJobSchema","MailJobs","AddSendMailJobSchema","AddUpdateBlockchainJobSchema","addUpdateBlockchainJob","AddOrUpdateMetaSchema","meta","AddOptInSchema","fetch","addRecipient","addSender","recipient_mail","sender_mail","master_doi","recipientId","senderId","ConfirmOptInSchema","confirmOptIn","request","ourRequest","decoded","$unset","entries","$or","doiSignature","doiTimestamp","toISOString","jsonValue","GenerateDoiTokenSchema","UpdateOptInStatusSchema","updateOptInStatus","VERIFY_CLIENT","VerifyOptInSchema","recipient_public_key","verifyOptIn","entryData","firstCheck","secondCheck","AddRecipientSchema","recipients","keyPair","AddSenderSchema","senders","isDebug","settings","app","debug","regtest","testnet","port","absoluteUrl","namecoin","SEND_APP","CONFIRM_APP","VERIFY_APP","isAppType","sendSettings","sendClient","doichain","createClient","confirmSettings","confirm","confirmClient","confirmAddress","verifySettings","verifyClient","Client","user","username","pass","password","Hashids","doiMailFetchUrl","defaultFrom","smtp","startup","process","env","MAIL_URL","server","NODE_TLS_REJECT_UNAUTHORIZED","version","Assets","getText","count","createUser","addUsersToRoles","startJobServer","console","sendModeTagColor","confirmModeTagColor","verifyModeTagColor","blockchainModeTagColor","testingModeTagColor","logMain","require","msg","colors","param","time","tag","log","AUTH_METHODS","types","config","sendVerificationEmail","forbidClientAccountCreation","emailTemplates","JobCollection","processJobs","workTimeout","cb","fail","pause","repeat","schedule","later","text","q","pollInterval","current","setMinutes","getMinutes","ids","$in","jobStatusRemovable","updated","$lt","removeJobs","observe","added","trigger","dns","syncFunc","wrapAsync","dns_resolveTxt","records","record","val","trim","getServers","getAddressesByAccount","getNewAddress","getInfo","NAMESPACE","client","doichain_dumpprivkey","ourAddress","cmd","accout","doichain_getaddressesbyaccount","account","ourAccount","doichain_getnewaddress","doichain_signMessage","ourMessage","doichain_nameShow","ourId","checkId","doichain_feeDoi","doichain_nameDoi","ourName","ourValue","block","doichain_listSinceBlock","ourBlock","doichain_gettransaction","doichain_getrawtransaction","doichain_getbalance","doichain_getinfo","DOI_PREFIX","ret_val","HTTP","_get","_getData","_post","_put","ourUrl","ourQuery","get","post","put","DOI_WALLETNOTIFY_ROUTE","DOI_EXPORT_ROUTE","Api","Restivus","apiPath","useDefaultAuth","prettyJson","addRoute","authRequired","action","urlParams","ip","connection","remoteAddress","socket","statusCode","body","params","queryParams","qParams","bParams","bodyParams","uid","constructor","Array","prepareCoDOI","prepareAdd","ownerID","currentOptInId","retResponse","ret_response","ex","mailTemplateSchema","createUserSchema","updateUserSchema","collectionOptions","path","routeOptions","excludedEndpoints","endpoints","delete","roleRequired","paramId","addCollection"],"mappings":"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","file":"/packages/doichain_doichain-meteor-api.js","sourcesContent":["import './server/main.js';\nexport const name = 'doichain-meteor-api';\n\nimport {OptIns} from \"./imports/api/opt-ins/opt-ins\";\nimport {Recipients} from \"./imports/api/recipients/recipients\";\nimport {getHttpGET, getHttpGETdata, getHttpPOST} from \"./server/api/http\";\nimport {testLogging} from \"./imports/startup/server/log-configuration\";\n\nexport let OptInsCollection = OptIns;\nexport let RecipientsCollection = Recipients;\nexport let httpGET = getHttpGET;\nexport let httpGETdata = getHttpGETdata;\nexport let httpPOST = getHttpPOST;\nexport let testLog = testLogging;\nexport let testvar1=\"i am alive\";","import { Mongo } from 'meteor/mongo';\nimport SimpleSchema from 'simpl-schema';\n\nclass DoichainEntriesCollection extends Mongo.Collection {\n  insert(entry, callback) {\n    const result = super.insert(entry, callback);\n    return result;\n  }\n  update(selector, modifier) {\n    const result = super.update(selector, modifier);\n    return result;\n  }\n  remove(selector) {\n    const result = super.remove(selector);\n    return result;\n  }\n}\n\nexport const DoichainEntries = new DoichainEntriesCollection('doichain-entries');\n\n// Deny all client-side updates since we will be using methods to manage this collection\nDoichainEntries.deny({\n  insert() { return true; },\n  update() { return true; },\n  remove() { return true; },\n});\n\nDoichainEntries.schema = new SimpleSchema({\n  _id: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n  },\n  name: {\n    type: String,\n   // index: true,\n   // denyUpdate: true\n  },\n  value: {\n    type: String,\n   // denyUpdate: false\n  },\n  address: {\n    type: String,\n   // denyUpdate: false\n  },\n  masterDoi: {\n        type: String,\n        optional: true,\n    //    index: true,\n    //    denyUpdate: true //TODO doesn't work inside a backage aldeed:schema-index@3.0.0\n  },\n  index: {\n        type: SimpleSchema.Integer,\n        optional: true,\n       // denyUpdate: true\n  },\n  txId: {\n    type: String,\n   // denyUpdate: false\n  }\n});\n\nDoichainEntries.attachSchema(DoichainEntries.schema);\n\n// This represents the keys from Entry objects that should be published\n// to the client. If we add secret properties to Entry objects, don't list\n// them here to keep them private to the server.\nDoichainEntries.publicFields = {\n  _id: 1,\n  name: 1,\n  value: 1,\n  address: 1,\n  masterDoi: 1,\n  index: 1,\n  txId: 1\n};\n","import { ValidatedMethod } from 'meteor/mdg:validated-method';\nimport { Meteor } from 'meteor/meteor';\nimport { DDPRateLimiter } from 'meteor/ddp-rate-limiter';\nimport getKeyPairM from '../../modules/server/doichain/get_key-pair.js';\nimport getBalanceM from '../../modules/server/doichain/get_balance.js';\n\n\nconst getKeyPair = new ValidatedMethod({\n  name: 'doichain.getKeyPair',\n  validate: null,\n  run() {\n    return getKeyPairM();\n  },\n});\n\nconst getBalance = new ValidatedMethod({\n  name: 'doichain.getBalance',\n  validate: null,\n  run() {\n    const logVal = getBalanceM();\n    return logVal;\n  },\n});\n\n\n// Get list of all method names on doichain\nconst OPTINS_METHODS = _.pluck([\n  getKeyPair\n,getBalance], 'name');\n\nif (Meteor.isServer) {\n  // Only allow 5 opt-in operations per connection per second\n  DDPRateLimiter.addRule({\n    name(name) {\n      return _.contains(OPTINS_METHODS, name);\n    },\n\n    // Rate limit per connection ID\n    connectionId() { return true; },\n  }, 5, 1000);\n}\n","import { Meteor} from 'meteor/meteor';\nimport { DDPRateLimiter } from 'meteor/ddp-rate-limiter';\nimport { ValidatedMethod } from 'meteor/mdg:validated-method';\nimport getLanguages from '../../modules/server/languages/get.js';\n\nconst getAllLanguages = new ValidatedMethod({\n  name: 'languages.getAll',\n  validate: null,\n  run() {\n    return getLanguages();\n  },\n});\n\n// Get list of all method names on languages\nconst OPTINS_METHODS = _.pluck([\n  getAllLanguages\n], 'name');\n\nif (Meteor.isServer) {\n  // Only allow 5 opt-in operations per connection per second\n  DDPRateLimiter.addRule({\n    name(name) {\n      return _.contains(OPTINS_METHODS, name);\n    },\n\n    // Rate limit per connection ID\n    connectionId() { return true; },\n  }, 5, 1000);\n}\n","import { Mongo } from 'meteor/mongo';\nimport SimpleSchema from 'simpl-schema';\n\nclass MetaCollection extends Mongo.Collection {\n  insert(data, callback) {\n    const ourData = data;\n    const result = super.insert(ourData, callback);\n    return result;\n  }\n  update(selector, modifier) {\n    const result = super.update(selector, modifier);\n    return result;\n  }\n  remove(selector) {\n    const result = super.remove(selector);\n    return result;\n  }\n}\n\nexport const Meta = new MetaCollection('meta');\n\n// Deny all client-side updates since we will be using methods to manage this collection\nMeta.deny({\n  insert() { return true; },\n  update() { return true; },\n  remove() { return true; },\n});\n\nMeta.schema = new SimpleSchema({\n  _id: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n  },\n  key: {\n    type: String,\n  //  index: true, //TODO doesn't work inside a backage aldeed:schema-index@3.0.0\n      // TODO see https://github.com/aldeed/meteor-collection2/issues/378\n  //  denyUpdate: true //TODO aldeed:schema-deny@2.0.1\n  },\n  value: {\n    type: String\n  }\n});\n\nMeta.attachSchema(Meta.schema);\n\n// This represents the keys from Meta objects that should be published\n// to the client. If we add secret properties to Meta objects, don't list\n// them here to keep them private to the server.\nMeta.publicFields = {\n};\n","import { Meteor } from 'meteor/meteor';\nimport { DDPRateLimiter } from 'meteor/ddp-rate-limiter';\nimport { _i18n as i18n } from 'meteor/universe:i18n';\nimport { ValidatedMethod } from 'meteor/mdg:validated-method';\nimport { Roles } from 'meteor/alanning:roles';\nimport { _ } from 'meteor/underscore';\nimport addOptIn from '../../modules/server/opt-ins/add_and_write_to_blockchain.js';\n\nconst add = new ValidatedMethod({\n  name: 'opt-ins.add',\n  validate: null,\n  run({ recipientMail, senderMail, data }) {\n    if(!this.userId || !Roles.userIsInRole(this.userId, ['admin'])) {\n      const error = \"api.opt-ins.add.accessDenied\";\n      throw new Meteor.Error(error, i18n.__(error));\n    }\n\n    const optIn = {\n      \"recipient_mail\": recipientMail,\n      \"sender_mail\": senderMail,\n      data\n    }\n\n    addOptIn(optIn)\n  },\n});\n\n// Get list of all method names on opt-ins\nconst OPTIONS_METHODS = _.pluck([\n  add\n], 'name');\nif (Meteor.isServer) {\n  // Only allow 5 opt-in operations per connection per second\n  DDPRateLimiter.addRule({\n    name(name) {\n      return _.contains(OPTIONS_METHODS, name);\n    },\n\n    // Rate limit per connection ID\n    connectionId() { return true; },\n  }, 5, 1000);\n}\n","import { Mongo } from 'meteor/mongo';\nimport SimpleSchema from 'simpl-schema';\n\nclass OptInsCollection extends Mongo.Collection {\n  insert(optIn, callback) {\n    const ourOptIn = optIn;\n    ourOptIn.recipient_sender = ourOptIn.recipient+ourOptIn.sender;\n    ourOptIn.createdAt = ourOptIn.createdAt || new Date();\n    const result = super.insert(ourOptIn, callback);\n    return result;\n  }\n  update(selector, modifier) {\n    const result = super.update(selector, modifier);\n    return result;\n  }\n  remove(selector) {\n    const result = super.remove(selector);\n    return result;\n  }\n}\n\nexport const OptIns = new OptInsCollection('opt-ins');\n\n// Deny all client-side updates since we will be using methods to manage this collection\nOptIns.deny({\n  insert() { return true; },\n  update() { return true; },\n  remove() { return true; },\n});\n\nOptIns.schema = new SimpleSchema({\n  _id: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n  },\n  recipient: {\n    type: String,\n    optional: true,\n //   denyUpdate: true, //TODO enable this when this package works again see meta\n  },\n  sender: {\n    type: String,\n    optional: true,\n//    denyUpdate: true,\n  },\n  data: {\n    type: String,\n    optional: true,\n //   denyUpdate: false,\n  },\n  index: {\n    type: SimpleSchema.Integer,\n    optional: true,\n  //  denyUpdate: false,\n  },\n  nameId: {\n    type: String,\n    optional: true,\n  //  denyUpdate: false,\n  },\n  txId: {\n      type: String,\n      optional: true,\n   //   denyUpdate: false,\n  },\n  masterDoi: {\n      type: String,\n      optional: true,\n  //    denyUpdate: false,\n  },\n  createdAt: {\n    type: Date,\n//    denyUpdate: true,\n  },\n  confirmedAt: {\n    type: Date,\n    optional: true,\n //   denyUpdate: false,\n  },\n  confirmedBy: {\n    type: String,\n    regEx: SimpleSchema.RegEx.IP,\n    optional: true,\n //   denyUpdate: false\n  },\n  confirmationToken: {\n    type: String,\n    optional: true,\n  //  denyUpdate: false\n  },\n  ownerId:{\n    type: String,\n    optional: true,\n    regEx: SimpleSchema.RegEx.Id\n  },\n  error:{\n      type: String,\n      optional: true,\n   //   denyUpdate: false\n  }\n});\n\nOptIns.attachSchema(OptIns.schema);\n\n// This represents the keys from Opt-In objects that should be published\n// to the client. If we add secret properties to Opt-In objects, don't list\n// them here to keep them private to the server.\nOptIns.publicFields = {\n  _id: 1,\n  recipient: 1,\n  sender: 1,\n  data: 1,\n  index: 1,\n  nameId: 1,\n  txId: 1,\n  masterDoi: 1,\n  createdAt: 1,\n  confirmedAt: 1,\n  confirmedBy: 1,\n  ownerId: 1,\n  error: 1\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Roles } from 'meteor/alanning:roles';\nimport { OptIns } from '../opt-ins.js';\n\nMeteor.publish('opt-ins.all', function OptInsAll() {\n  if(!this.userId) {\n    return this.ready();\n  }\n  if(!Roles.userIsInRole(this.userId, ['admin'])){\n    return OptIns.find({ownerId:this.userId}, {\n      fields: OptIns.publicFields,\n    });\n  }\n  \n\n  return OptIns.find({}, {\n    fields: OptIns.publicFields,\n  });\n});\n","import { Mongo } from 'meteor/mongo';\nimport SimpleSchema from 'simpl-schema';\n\nclass RecipientsCollection extends Mongo.Collection {\n  insert(recipient, callback) {\n    const ourRecipient = recipient;\n    ourRecipient.createdAt = ourRecipient.createdAt || new Date();\n    const result = super.insert(ourRecipient, callback);\n    return result;\n  }\n  update(selector, modifier) {\n    const result = super.update(selector, modifier);\n    return result;\n  }\n  remove(selector) {\n    const result = super.remove(selector);\n    return result;\n  }\n}\n\nexport const Recipients = new RecipientsCollection('recipients');\n\n// Deny all client-side updates since we will be using methods to manage this collection\nRecipients.deny({\n  insert() { return true; },\n  update() { return true; },\n  remove() { return true; },\n});\n\nRecipients.schema = new SimpleSchema({\n  _id: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n  },\n  email: {\n    type: String,\n    //index: true,\n    //denyUpdate: true,\n  },\n  privateKey: {\n    type: String,\n    //unique: true, //TODO enable this when this package works again see meta\n    //denyUpdate: true,\n  },\n  publicKey: {\n    type: String,\n    //unique: true,\n    //denyUpdate: true,\n  },\n  createdAt: {\n    type: Date,\n    //denyUpdate: true,\n  }\n});\n\nRecipients.attachSchema(Recipients.schema);\n\n// This represents the keys from Recipient objects that should be published\n// to the client. If we add secret properties to Recipient objects, don't list\n// them here to keep them private to the server.\nRecipients.publicFields = {\n  _id: 1,\n  email: 1,\n  publicKey: 1,\n  createdAt: 1\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Roles } from 'meteor/alanning:roles';\n\nimport { Recipients } from '../recipients.js';\nimport { OptIns} from '../../opt-ins/opt-ins.js'\nMeteor.publish('recipients.byOwner',function recipientGet(){\n  let pipeline=[];\n  if(!Roles.userIsInRole(this.userId, ['admin'])){\n    pipeline.push(\n      {$redact:{\n      $cond: {\n        if: { $cmp: [ \"$ownerId\", this.userId ] },\n        then: \"$$PRUNE\",\n        else: \"$$KEEP\" }}});\n      }\n      pipeline.push({ $lookup: { from: \"recipients\", localField: \"recipient\", foreignField: \"_id\", as: \"RecipientEmail\" } });\n      pipeline.push({ $unwind: \"$RecipientEmail\"});\n      pipeline.push({ $project: {\"RecipientEmail._id\":1}});\n\n      const result = OptIns.aggregate(pipeline);\n      let rIds=[];\n      result.forEach(element => {\n        rIds.push(element.RecipientEmail._id);\n      });\n  return Recipients.find({\"_id\":{\"$in\":rIds}},{fields:Recipients.publicFields});\n});\nMeteor.publish('recipients.all', function recipientsAll() {\n  if(!this.userId || !Roles.userIsInRole(this.userId, ['admin'])) {\n    return this.ready();\n  }\n\n  return Recipients.find({}, {\n    fields: Recipients.publicFields,\n  });\n});\n","import { Mongo } from 'meteor/mongo';\nimport SimpleSchema from 'simpl-schema';\n\nclass SendersCollection extends Mongo.Collection {\n  insert(sender, callback) {\n    const ourSender = sender;\n    ourSender.createdAt = ourSender.createdAt || new Date();\n    const result = super.insert(ourSender, callback);\n    return result;\n  }\n  update(selector, modifier) {\n    const result = super.update(selector, modifier);\n    return result;\n  }\n  remove(selector) {\n    const result = super.remove(selector);\n    return result;\n  }\n}\n\nexport const Senders = new SendersCollection('senders');\n\n// Deny all client-side updates since we will be using methods to manage this collection\nSenders.deny({\n  insert() { return true; },\n  update() { return true; },\n  remove() { return true; },\n});\n\nSenders.schema = new SimpleSchema({\n  _id: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n  },\n  email: {\n    type: String,\n    //index: true,   //TODO enable this when this package works again see meta\n    //denyUpdate: true,\n  },\n  createdAt: {\n    type: Date,\n    //denyUpdate: true,\n  }\n});\n\nSenders.attachSchema(Senders.schema);\n\n// This represents the keys from Sender objects that should be published\n// to the client. If we add secret properties to Sender objects, don't list\n// them here to keep them private to the server.\nSenders.publicFields = {\n  email: 1,\n  createdAt: 1\n};\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { DOI_MAIL_FETCH_URL } from '../../../startup/server/email-configuration.js';\nimport {logSend} from \"../../../startup/server/log-configuration\";\nimport {OptIns} from \"../../../api/opt-ins/opt-ins\";\n\nconst ExportDoisDataSchema = new SimpleSchema({\n  status: {\n    type: String,\n    optional: true,\n  },\n  role:{\n    type:String\n  },\n  userid:{\n    type: String,\n    regEx: SimpleSchema.RegEx.id,\n    optional:true \n  }\n});\n\n//TODO add sender and recipient email address to export\n\nconst exportDois = (data) => {\n  try {\n    const ourData = data;\n    ExportDoisDataSchema.validate(ourData);\n    let pipeline=[{ $match: {\"confirmedAt\":{ $exists: true, $ne: null }} }];\n    \n    if(ourData.role!='admin'||ourData.userid!=undefined){\n      pipeline.push({ $redact:{\n        $cond: {\n          if: { $cmp: [ \"$ownerId\", ourData.userid ] },\n          then: \"$$PRUNE\",\n          else: \"$$KEEP\" }}});\n    }\n    pipeline.concat([\n        { $lookup: { from: \"recipients\", localField: \"recipient\", foreignField: \"_id\", as: \"RecipientEmail\" } },\n        { $lookup: { from: \"senders\", localField: \"sender\", foreignField: \"_id\", as: \"SenderEmail\" } },\n        { $unwind: \"$SenderEmail\"},\n        { $unwind: \"$RecipientEmail\"},\n        { $project: {\"_id\":1,\"createdAt\":1, \"confirmedAt\":1,\"nameId\":1, \"SenderEmail.email\":1,\"RecipientEmail.email\":1}}\n    ]);\n    //if(ourData.status==1) query = {\"confirmedAt\": { $exists: true, $ne: null }}\n\n    let optIns =  OptIns.aggregate(pipeline);\n    let exportDoiData;\n    try {\n        exportDoiData = optIns;\n        logSend('exportDoi url:',DOI_MAIL_FETCH_URL,JSON.stringify(exportDoiData));\n      return exportDoiData\n\n    } catch(error) {\n      throw \"Error while exporting dois: \"+error;\n    }\n\n  } catch (exception) {\n    throw new Meteor.Error('dapps.exportDoi.exception', exception);\n  }\n};\n\nexport default exportDois;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { DOI_FETCH_ROUTE, DOI_CONFIRMATION_ROUTE, API_PATH, VERSION } from '../../../../server/api/rest/rest.js';\nimport { getUrl } from '../../../startup/server/dapp-configuration.js';\nimport { CONFIRM_CLIENT, CONFIRM_ADDRESS } from '../../../startup/server/doichain-configuration.js';\nimport { getHttpGET } from '../../../../server/api/http.js';\nimport { signMessage } from '../../../../server/api/doichain.js';\nimport { OptIns } from '../../../../imports/api/opt-ins/opt-ins.js';\nimport parseTemplate from '../emails/parse_template.js';\nimport generateDoiToken from '../opt-ins/generate_doi-token.js';\nimport generateDoiHash from '../emails/generate_doi-hash.js';\nimport addOptIn from '../opt-ins/add.js';\nimport addSendMailJob from '../jobs/add_send_mail.js';\nimport {logConfirm, logError} from \"../../../startup/server/log-configuration\";\n\nconst FetchDoiMailDataSchema = new SimpleSchema({\n  name: {\n    type: String\n  },\n  domain: {\n    type: String\n  }\n});\n\n\nconst fetchDoiMailData = (data) => {\n  try {\n    const ourData = data;\n    FetchDoiMailDataSchema.validate(ourData);\n    const url = ourData.domain+API_PATH+VERSION+\"/\"+DOI_FETCH_ROUTE;\n    const signature = signMessage(CONFIRM_CLIENT, CONFIRM_ADDRESS, ourData.name);\n    const query = \"name_id=\"+encodeURIComponent(ourData.name)+\"&signature=\"+encodeURIComponent(signature);\n    logConfirm('calling for doi-email-template:'+url+' query:', query);\n\n    /**\n      TODO when running Send-dApp in Testnet behind NAT this URL will not be accessible from the internet\n      but even when we use the URL from localhost verify andn others will fails.\n     */\n    const response = getHttpGET(url, query);\n    if(response === undefined || response.data === undefined) throw \"Bad response\";\n    const responseData = response.data;\n    logConfirm('response while getting getting email template from URL:',response.data.status);\n\n    if(responseData.status !== \"success\") {\n      if(responseData.error === undefined) throw \"Bad response\";\n      if(responseData.error.includes(\"Opt-In not found\")) {\n        //Do nothing and don't throw error so job is done\n          logError('response data from Send-dApp:',responseData.error);\n        return;\n      }\n      throw responseData.error;\n    }\n    logConfirm('DOI Mail data fetched.');\n\n    const optInId = addOptIn({name: ourData.name});\n    const optIn = OptIns.findOne({_id: optInId});\n    logConfirm('opt-in found:',optIn);\n    if(optIn.confirmationToken !== undefined) return;\n\n    const token = generateDoiToken({id: optIn._id});\n    logConfirm('generated confirmationToken:',token);\n    const confirmationHash = generateDoiHash({id: optIn._id, token: token, redirect: responseData.data.redirect});\n    logConfirm('generated confirmationHash:',confirmationHash);\n    const confirmationUrl = getUrl()+API_PATH+VERSION+\"/\"+DOI_CONFIRMATION_ROUTE+\"/\"+encodeURIComponent(confirmationHash);\n    logConfirm('confirmationUrl:'+confirmationUrl);\n\n    const template = parseTemplate({template: responseData.data.content, data: {\n      confirmation_url: confirmationUrl\n    }});\n\n    //logConfirm('we are using this template:',template);\n\n    logConfirm('sending email to peter for confirmation over bobs dApp');\n    addSendMailJob({\n      to: responseData.data.recipient,\n      subject: responseData.data.subject,\n      message: template,\n      returnPath: responseData.data.returnPath\n    });\n  } catch (exception) {\n    throw new Meteor.Error('dapps.fetchDoiMailData.exception', exception);\n  }\n};\n\nexport default fetchDoiMailData;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { OptIns } from '../../../api/opt-ins/opt-ins.js';\nimport { Recipients } from '../../../api/recipients/recipients.js';\nimport getOptInProvider from '../dns/get_opt-in-provider.js';\nimport getOptInKey from '../dns/get_opt-in-key.js';\nimport verifySignature from '../doichain/verify_signature.js';\nimport { getHttpGET } from '../../../../server/api/http.js';\nimport { DOI_MAIL_FETCH_URL } from '../../../startup/server/email-configuration.js';\nimport { logSend } from \"../../../startup/server/log-configuration\";\nimport { Accounts } from 'meteor/accounts-base'\n\nconst GetDoiMailDataSchema = new SimpleSchema({\n  name_id: {\n    type: String\n  },\n  signature: {\n    type: String\n  }\n});\n\nconst userProfileSchema = new SimpleSchema({\n  subject: {\n    type: String,\n    optional:true\n  },\n  redirect: {\n    type: String,\n    regEx: \"@(https?|ftp)://(-\\\\.)?([^\\\\s/?\\\\.#-]+\\\\.?)+(/[^\\\\s]*)?$@\",\n    optional:true\n  },\n  returnPath: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email,\n    optional:true\n  },\n  templateURL: {\n    type: String,\n    regEx: \"@(https?|ftp)://(-\\\\.)?([^\\\\s/?\\\\.#-]+\\\\.?)+(/[^\\\\s]*)?$@\",\n    optional:true\n  }\n});\n\nconst getDoiMailData = (data) => {\n  try {\n    const ourData = data;\n    GetDoiMailDataSchema.validate(ourData);\n    const optIn = OptIns.findOne({nameId: ourData.name_id});\n    if(optIn === undefined) throw \"Opt-In with name_id: \"+ourData.name_id+\" not found\";\n    logSend('Opt-In found',optIn);\n\n    const recipient = Recipients.findOne({_id: optIn.recipient});\n    if(recipient === undefined) throw \"Recipient not found\";\n    logSend('Recipient found', recipient);\n\n    const parts = recipient.email.split(\"@\");\n    const domain = parts[parts.length-1];\n\n    let publicKey = getOptInKey({ domain: domain});\n\n    if(!publicKey){\n      const provider = getOptInProvider({domain: ourData.domain });\n      logSend(\"using doichain provider instead of directly configured publicKey:\", { provider: provider });\n      publicKey = getOptInKey({ domain: provider}); //get public key from provider or fallback if publickey was not set in dns\n    }\n\n    logSend('queried data: (parts, domain, provider, publicKey)', '('+parts+','+domain+','+publicKey+')');\n\n    //TODO: Only allow access one time\n    // Possible solution:\n    // 1. Provider (confirm dApp) request the data\n    // 2. Provider receive the data\n    // 3. Provider sends confirmation \"I got the data\"\n    // 4. Send dApp lock the data for this opt in\n    logSend('verifying signature...');\n    if(!verifySignature({publicKey: publicKey, data: ourData.name_id, signature: ourData.signature})) {\n      throw \"signature incorrect - access denied\";\n    }\n    \n    logSend('signature verified');\n\n    //TODO: Query for language\n    let doiMailData;\n    try {\n\n      doiMailData = getHttpGET(DOI_MAIL_FETCH_URL, \"\").data;\n      let defaultReturnData = {\n        \"recipient\": recipient.email,\n        \"content\": doiMailData.data.content,\n        \"redirect\": doiMailData.data.redirect,\n        \"subject\": doiMailData.data.subject,\n        \"returnPath\": doiMailData.data.returnPath\n      }\n\n    let returnData = defaultReturnData;\n\n    try{\n      let owner = Accounts.users.findOne({_id: optIn.ownerId});\n      let mailTemplate = owner.profile.mailTemplate;\n      userProfileSchema.validate(mailTemplate);\n\n      returnData[\"redirect\"] = mailTemplate[\"redirect\"] || defaultReturnData[\"redirect\"];\n      returnData[\"subject\"] = mailTemplate[\"subject\"] || defaultReturnData[\"subject\"];\n      returnData[\"returnPath\"] = mailTemplate[\"returnPath\"] || defaultReturnData[\"returnPath\"];\n      returnData[\"content\"] = mailTemplate[\"templateURL\"] ? (getHttpGET(mailTemplate[\"templateURL\"], \"\").content || defaultReturnData[\"content\"]) : defaultReturnData[\"content\"];\n      \n    }\n    catch(error) {\n      returnData=defaultReturnData;\n    }\n\n      logSend('doiMailData and url:', DOI_MAIL_FETCH_URL, returnData);\n\n      return returnData\n\n    } catch(error) {\n      throw \"Error while fetching mail content: \"+error;\n    }\n\n  } catch(exception) {\n    throw new Meteor.Error('dapps.getDoiMailData.exception', exception);\n  }\n};\n\nexport default getDoiMailData;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { resolveTxt } from '../../../../server/api/dns.js';\nimport { FALLBACK_PROVIDER } from '../../../startup/server/dns-configuration.js';\nimport {isRegtest, isTestnet} from \"../../../startup/server/dapp-configuration\";\nimport {logSend} from \"../../../startup/server/log-configuration\";\n\nconst OPT_IN_KEY = \"doichain-opt-in-key\";\nconst OPT_IN_KEY_TESTNET = \"doichain-testnet-opt-in-key\";\n\nconst GetOptInKeySchema = new SimpleSchema({\n  domain: {\n    type: String\n  }\n});\n\n\nconst getOptInKey = (data) => {\n  try {\n    const ourData = data;\n    GetOptInKeySchema.validate(ourData);\n\n    let ourOPT_IN_KEY=OPT_IN_KEY;\n\n    if(isRegtest() || isTestnet()){\n        ourOPT_IN_KEY = OPT_IN_KEY_TESTNET;\n        logSend('Using RegTest:'+isRegtest()+\" Testnet: \"+isTestnet()+\" ourOPT_IN_KEY\",ourOPT_IN_KEY);\n    }\n    const key = resolveTxt(ourOPT_IN_KEY, ourData.domain);\n    logSend('DNS TXT configured public key of recipient email domain and confirmation dapp',{foundKey:key, domain:ourData.domain, dnskey:ourOPT_IN_KEY});\n\n    if(key === undefined) return useFallback(ourData.domain);\n    return key;\n  } catch (exception) {\n    throw new Meteor.Error('dns.getOptInKey.exception', exception);\n  }\n};\n\nconst useFallback = (domain) => {\n  if(domain === FALLBACK_PROVIDER) throw new Meteor.Error(\"Fallback has no key defined!\");\n    logSend(\"Key not defined. Using fallback: \",FALLBACK_PROVIDER);\n  return getOptInKey({domain: FALLBACK_PROVIDER});\n};\n\nexport default getOptInKey;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { resolveTxt } from '../../../../server/api/dns.js';\nimport { FALLBACK_PROVIDER } from '../../../startup/server/dns-configuration.js';\nimport {logSend} from \"../../../startup/server/log-configuration\";\nimport {isRegtest, isTestnet} from \"../../../startup/server/dapp-configuration\";\n\nconst PROVIDER_KEY = \"doichain-opt-in-provider\";\nconst PROVIDER_KEY_TESTNET = \"doichain-testnet-opt-in-provider\";\n\nconst GetOptInProviderSchema = new SimpleSchema({\n  domain: {\n    type: String\n  }\n});\n\n\nconst getOptInProvider = (data) => {\n  try {\n    const ourData = data;\n    GetOptInProviderSchema.validate(ourData);\n\n    let ourPROVIDER_KEY=PROVIDER_KEY;\n    if(isRegtest() || isTestnet()){\n        ourPROVIDER_KEY = PROVIDER_KEY_TESTNET;\n        logSend('Using RegTest:'+isRegtest()+\" : Testnet:\"+isTestnet()+\" PROVIDER_KEY\",{providerKey:ourPROVIDER_KEY, domain:ourData.domain});\n    }\n\n    const provider = resolveTxt(ourPROVIDER_KEY, ourData.domain);\n    if(provider === undefined) return useFallback();\n\n    logSend('opt-in-provider from dns - server of mail recipient: (TXT):',provider);\n    return provider;\n  } catch (exception) {\n    throw new Meteor.Error('dns.getOptInProvider.exception', exception);\n  }\n};\n\nconst useFallback = () => {\n  logSend('Provider not defined. Fallback '+FALLBACK_PROVIDER+' is used');\n  return FALLBACK_PROVIDER;\n};\n\nexport default getOptInProvider;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { CONFIRM_CLIENT, CONFIRM_ADDRESS } from '../../../startup/server/doichain-configuration.js';\nimport { getWif } from '../../../../server/api/doichain.js';\nimport { DoichainEntries } from '../../../api/doichain/entries.js';\nimport addFetchDoiMailDataJob from '../jobs/add_fetch-doi-mail-data.js';\nimport getPrivateKeyFromWif from './get_private-key_from_wif.js';\nimport decryptMessage from './decrypt_message.js';\nimport {logConfirm, logSend} from \"../../../startup/server/log-configuration\";\n\nconst AddDoichainEntrySchema = new SimpleSchema({\n  name: {\n    type: String\n  },\n  value: {\n    type: String\n  },\n  address: {\n    type: String\n  },\n  txId: {\n    type: String\n  }\n});\n\n/**\n * Inserts\n *\n * @param entry\n * @returns {*}\n */\nconst addDoichainEntry = (entry) => {\n  try {\n\n    const ourEntry = entry;\n    logConfirm('adding DoichainEntry on Bob...',ourEntry.name);\n    AddDoichainEntrySchema.validate(ourEntry);\n\n    const ety = DoichainEntries.findOne({name: ourEntry.name});\n    if(ety !== undefined){\n        logSend('returning locally saved entry with _id:'+ety._id);\n        return ety._id;\n    }\n\n    const value = JSON.parse(ourEntry.value);\n    //logSend(\"value:\",value);\n    if(value.from === undefined) throw \"Wrong blockchain entry\"; //TODO if from is missing but value is there, it is probably allready handeled correctly anyways this is not so cool as it seems.\n    const wif = getWif(CONFIRM_CLIENT, CONFIRM_ADDRESS);\n    const privateKey = getPrivateKeyFromWif({wif: wif});\n    logSend('got private key (will not show it here)');\n\n    const domain = decryptMessage({privateKey: privateKey, message: value.from});\n    logSend('decrypted message from domain: ',domain);\n\n    const namePos = ourEntry.name.indexOf('-'); //if this is not a co-registration fetch mail.\n    logSend('namePos:',namePos);\n    const masterDoi = (namePos!=-1)?ourEntry.name.substring(0,namePos):undefined;\n    logSend('masterDoi:',masterDoi);\n    const index = masterDoi?ourEntry.name.substring(namePos+1):undefined;\n    logSend('index:',index);\n\n    const id = DoichainEntries.insert({\n        name: ourEntry.name,\n        value: ourEntry.value,\n        address: ourEntry.address,\n        masterDoi: masterDoi,\n        index: index,\n        txId: ourEntry.txId,\n        expiresIn: ourEntry.expiresIn,\n        expired: ourEntry.expired\n    });\n\n    logSend('DoichainEntry added on Bob:', {id:id,name:ourEntry.name,masterDoi:masterDoi,index:index});\n\n    if(!masterDoi){\n        addFetchDoiMailDataJob({\n            name: ourEntry.name,\n            domain: domain\n        });\n        logSend('New entry added: \\n'+\n            'NameId='+ourEntry.name+\"\\n\"+\n            'Address='+ourEntry.address+\"\\n\"+\n            'TxId='+ourEntry.txId+\"\\n\"+\n            'Value='+ourEntry.value);\n\n    }else{\n        logSend('This transaction belongs to co-registration', masterDoi);\n    }\n\n    return id;\n  } catch (exception) {\n    throw new Meteor.Error('doichain.addEntryAndFetchData.exception', exception);\n  }\n};\n\nexport default addDoichainEntry;\n","import { Meteor } from 'meteor/meteor';\nimport { listSinceBlock, nameShow, getRawTransaction} from '../../../../server/api/doichain.js';\nimport { CONFIRM_CLIENT, CONFIRM_ADDRESS } from '../../../startup/server/doichain-configuration.js';\nimport addDoichainEntry from './add_entry_and_fetch_data.js'\nimport { Meta } from '../../../api/meta/meta.js';\nimport addOrUpdateMeta from '../meta/addOrUpdate.js';\nimport {logConfirm} from \"../../../startup/server/log-configuration\";\n\nconst TX_NAME_START = \"e/\";\nconst LAST_CHECKED_BLOCK_KEY = \"lastCheckedBlock\";\n\nconst checkNewTransaction = (txid, job) => {\n  try {\n\n      if(!txid){\n          logConfirm(\"checkNewTransaction triggered when starting node - checking all confirmed blocks since last check for doichain address\",CONFIRM_ADDRESS);\n\n          try {\n              var lastCheckedBlock = Meta.findOne({key: LAST_CHECKED_BLOCK_KEY});\n              if(lastCheckedBlock !== undefined) lastCheckedBlock = lastCheckedBlock.value;\n              logConfirm(\"lastCheckedBlock\",lastCheckedBlock);\n              const ret = listSinceBlock(CONFIRM_CLIENT, lastCheckedBlock);\n              if(ret === undefined || ret.transactions === undefined) return;\n\n              const txs = ret.transactions;\n              lastCheckedBlock = ret.lastblock;\n              if(!ret || !txs || !txs.length===0){\n                  logConfirm(\"transactions do not contain nameOp transaction details or transaction not found.\", lastCheckedBlock);\n                  addOrUpdateMeta({key: LAST_CHECKED_BLOCK_KEY, value: lastCheckedBlock});\n                  return;\n              }\n\n              logConfirm(\"listSinceBlock\",ret);\n\n              const addressTxs = txs.filter(tx =>\n                  tx.address === CONFIRM_ADDRESS\n                  && tx.name !== undefined //since name_show cannot be read without confirmations\n                  && tx.name.startsWith(\"doi: \"+TX_NAME_START)  //here 'doi: e/xxxx' is already written in the block\n              );\n              addressTxs.forEach(tx => {\n                  logConfirm(\"tx:\",tx);\n                  var txName = tx.name.substring((\"doi: \"+TX_NAME_START).length);\n                  logConfirm(\"excuting name_show in order to get value of nameId:\", txName);\n                  const ety = nameShow(CONFIRM_CLIENT, txName);\n                  logConfirm(\"nameShow: value\",ety);\n                  if(!ety){\n                      logConfirm(\"couldn't find name - obviously not (yet?!) confirmed in blockchain:\", ety);\n                      return;\n                  }\n                  addTx(txName, ety.value,tx.address,tx.txid); //TODO ety.value.from is maybe NOT existing because of this its  (maybe) ont working...\n              });\n              addOrUpdateMeta({key: LAST_CHECKED_BLOCK_KEY, value: lastCheckedBlock});\n              logConfirm(\"Transactions updated - lastCheckedBlock:\",lastCheckedBlock);\n              job.done();\n          } catch(exception) {\n              throw new Meteor.Error('namecoin.checkNewTransactions.exception', exception);\n          }\n\n      }else{\n          logConfirm(\"txid: \"+txid+\" was triggered by walletnotify for address:\",CONFIRM_ADDRESS);\n\n          const ret = getRawTransaction(CONFIRM_CLIENT, txid);\n          const txs = ret.vout;\n\n          if(!ret || !txs || !txs.length===0){\n              logConfirm(\"txid \"+txid+' does not contain transaction details or transaction not found.');\n              return;\n          }\n         // logConfirm('now checking raw transactions with filter:',txs);\n\n          const addressTxs = txs.filter(tx =>\n              tx.scriptPubKey !== undefined\n              && tx.scriptPubKey.nameOp !== undefined\n              && tx.scriptPubKey.nameOp.op === \"name_doi\"\n            //  && tx.scriptPubKey.addresses[0] === CONFIRM_ADDRESS //only own transaction should arrive here. - so check on own address unneccesary\n              && tx.scriptPubKey.nameOp.name !== undefined\n              && tx.scriptPubKey.nameOp.name.startsWith(TX_NAME_START)\n          );\n\n          //logConfirm(\"found name_op transactions:\", addressTxs);\n          addressTxs.forEach(tx => {\n              addTx(tx.scriptPubKey.nameOp.name, tx.scriptPubKey.nameOp.value,tx.scriptPubKey.addresses[0],txid);\n          });\n      }\n  } catch(exception) {\n    throw new Meteor.Error('doichain.checkNewTransactions.exception', exception);\n  }\n  return true;\n};\n\n\nfunction addTx(name, value, address, txid) {\n    const txName = name.substring(TX_NAME_START.length);\n\n    addDoichainEntry({\n        name: txName,\n        value: value,\n        address: address,\n        txId: txid\n    });\n}\n\nexport default checkNewTransaction;\n\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport crypto from 'crypto';\nimport ecies from 'standard-ecies';\n\nconst DecryptMessageSchema = new SimpleSchema({\n  privateKey: {\n    type: String\n  },\n  message: {\n    type: String\n  }\n});\n\nconst decryptMessage = (data) => {\n  try {\n    const ourData = data;\n    DecryptMessageSchema.validate(ourData);\n    const privateKey = Buffer.from(ourData.privateKey, 'hex');\n    const ecdh = crypto.createECDH('secp256k1');\n    ecdh.setPrivateKey(privateKey);\n    const message = Buffer.from(ourData.message, 'hex');\n    return ecies.decrypt(ecdh, message).toString('utf8');\n  } catch(exception) {\n    throw new Meteor.Error('doichain.decryptMessage.exception', exception);\n  }\n};\n\nexport default decryptMessage;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport ecies from 'standard-ecies';\n\nconst EncryptMessageSchema = new SimpleSchema({\n  publicKey: {\n    type: String\n  },\n  message: {\n    type: String\n  }\n});\n\nconst encryptMessage = (data) => {\n  try {\n    const ourData = data;\n    EncryptMessageSchema.validate(ourData);\n    const publicKey = Buffer.from(ourData.publicKey, 'hex');\n    const message = Buffer.from(ourData.message);\n    return ecies.encrypt(publicKey, message).toString('hex');\n  } catch(exception) {\n    throw new Meteor.Error('doichain.encryptMessage.exception', exception);\n  }\n};\n\nexport default encryptMessage;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { OptIns } from '../../../api/opt-ins/opt-ins.js';\nimport getKeyPair from './get_key-pair.js';\nimport {logSend} from \"../../../startup/server/log-configuration\";\n\nconst GenerateNameIdSchema = new SimpleSchema({\n  id: {\n    type: String\n  },\n  masterDoi: {\n      type: String,\n      optional: true\n  },\n  index: {\n      type: SimpleSchema.Integer,\n      optional: true\n  }\n});\n\nconst generateNameId = (optIn) => {\n  try {\n    const ourOptIn = optIn;\n    GenerateNameIdSchema.validate(ourOptIn);\n    let nameId;\n    if(optIn.masterDoi){\n        nameId = ourOptIn.masterDoi+\"-\"+ourOptIn.index;\n        logSend(\"used master_doi as nameId index \"+optIn.index+\"storage:\",nameId);\n    }\n    else{\n        nameId = getKeyPair().privateKey;\n        logSend(\"generated nameId for doichain storage:\",nameId);\n    }\n\n    OptIns.update({_id : ourOptIn.id}, {$set:{nameId: nameId}});\n\n    return nameId;\n  } catch(exception) {\n    throw new Meteor.Error('doichain.generateNameId.exception', exception);\n  }\n};\n\nexport default generateNameId;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport CryptoJS from 'crypto-js';\nimport Base58 from 'bs58';\nimport { isRegtest } from '../../../startup/server/dapp-configuration.js';\nimport {isTestnet} from \"../../../startup/server/dapp-configuration\";\n\nconst VERSION_BYTE = 0x34;\nconst VERSION_BYTE_REGTEST = 0x6f;\nconst GetAddressSchema = new SimpleSchema({\n  publicKey: {\n    type: String\n  }\n});\n\nconst getAddress = (data) => {\n  try {\n    const ourData = data;\n    GetAddressSchema.validate(ourData);\n    return _getAddress(ourData.publicKey);\n  } catch(exception) {\n    throw new Meteor.Error('doichain.getAddress.exception', exception);\n  }\n};\n\nfunction _getAddress(publicKey) {\n  const pubKey = CryptoJS.lib.WordArray.create(Buffer.from(publicKey, 'hex'));\n  let key = CryptoJS.SHA256(pubKey);\n  key = CryptoJS.RIPEMD160(key);\n  let versionByte = VERSION_BYTE;\n  if(isRegtest() || isTestnet()) versionByte = VERSION_BYTE_REGTEST;\n  let address = Buffer.concat([Buffer.from([versionByte]), Buffer.from(key.toString(), 'hex')]);\n  key = CryptoJS.SHA256(CryptoJS.lib.WordArray.create(address));\n  key = CryptoJS.SHA256(key);\n  let checksum = key.toString().substring(0, 8);\n  address = new Buffer(address.toString('hex')+checksum,'hex');\n  address = Base58.encode(address);\n  return address;\n}\n\nexport default getAddress;\n","import { Meteor } from 'meteor/meteor';\nimport { getBalance } from '../../../../server/api/doichain.js';\nimport { CONFIRM_CLIENT} from '../../../startup/server/doichain-configuration.js';\n\n\nconst get_Balance = () => {\n    \n  try {\n    const bal=getBalance(CONFIRM_CLIENT);\n    return bal;\n    \n  } catch(exception) {\n    throw new Meteor.Error('doichain.getBalance.exception', exception);\n  }\n  return true;\n};\n\nexport default get_Balance;\n\n","import { Meteor } from 'meteor/meteor';\nimport CryptoJS from 'crypto-js';\nimport SimpleSchema from 'simpl-schema';\n\nconst GetDataHashSchema = new SimpleSchema({\n  data: {\n    type: String\n  }\n});\n\nconst getDataHash = (data) => {\n  try {\n    const ourData = data;\n      GetDataHashSchema.validate(ourData);\n    const hash = CryptoJS.SHA256(ourData).toString();\n    return hash;\n  } catch(exception) {\n    throw new Meteor.Error('doichain.getDataHash.exception', exception);\n  }\n};\n\nexport default getDataHash;\n","import { Meteor } from 'meteor/meteor';\nimport { randomBytes } from 'crypto';\nimport secp256k1 from 'secp256k1';\n\nconst getKeyPair = () => {\n  try {\n    let privKey\n    do {privKey = randomBytes(32)} while(!secp256k1.privateKeyVerify(privKey))\n    const privateKey = privKey;\n    const publicKey = secp256k1.publicKeyCreate(privateKey);\n    return {\n      privateKey: privateKey.toString('hex').toUpperCase(),\n      publicKey: publicKey.toString('hex').toUpperCase()\n    }\n  } catch(exception) {\n    throw new Meteor.Error('doichain.getKeyPair.exception', exception);\n  }\n};\n\nexport default getKeyPair;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport Base58 from 'bs58';\n\nconst GetPrivateKeyFromWifSchema = new SimpleSchema({\n  wif: {\n    type: String\n  }\n});\n\nconst getPrivateKeyFromWif = (data) => {\n  try {\n    const ourData = data;\n    GetPrivateKeyFromWifSchema.validate(ourData);\n    return _getPrivateKeyFromWif(ourData.wif);\n  } catch(exception) {\n    throw new Meteor.Error('doichain.getPrivateKeyFromWif.exception', exception);\n  }\n};\n\nfunction _getPrivateKeyFromWif(wif) {\n  var privateKey = Base58.decode(wif).toString('hex');\n  privateKey = privateKey.substring(2, privateKey.length - 8);\n  if(privateKey.length === 66 && privateKey.endsWith(\"01\")) {\n    privateKey = privateKey.substring(0, privateKey.length - 2);\n  }\n  return privateKey;\n}\n\nexport default getPrivateKeyFromWif;\n","import SimpleSchema from 'simpl-schema';\nimport {logSend} from \"../../../startup/server/log-configuration\";\n\nimport getOptInKey from \"../dns/get_opt-in-key\";\nimport getOptInProvider from \"../dns/get_opt-in-provider\";\nimport getAddress from \"./get_address\";\n\nconst GetPublicKeySchema = new SimpleSchema({\n    domain: {\n        type: String\n    }\n});\n\nconst getPublicKeyAndAddress = (data) => {\n\n    const ourData = data;\n    GetPublicKeySchema.validate(ourData);\n\n    let publicKey = getOptInKey({domain: ourData.domain});\n    if(!publicKey){\n        const provider = getOptInProvider({domain: ourData.domain});\n        logSend(\"using doichain provider instead of directly configured publicKey:\",{provider:provider});\n        publicKey = getOptInKey({domain: provider}); //get public key from provider or fallback if publickey was not set in dns\n    }\n    const destAddress =  getAddress({publicKey: publicKey});\n    logSend('publicKey and destAddress ', {publicKey:publicKey,destAddress:destAddress});\n    return {publicKey:publicKey,destAddress:destAddress};\n};\n\nexport default getPublicKeyAndAddress;","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport bitcore from 'bitcore-lib';\nimport Message from 'bitcore-message';\n\nconst GetSignatureSchema = new SimpleSchema({\n  message: {\n    type: String\n  },\n  privateKey: {\n    type: String\n  }\n});\n\nconst getSignature = (data) => {\n  try {\n    const ourData = data;\n    GetSignatureSchema.validate(ourData);\n    const signature = Message(ourData.message).sign(new bitcore.PrivateKey(ourData.privateKey));\n    return signature;\n  } catch(exception) {\n    throw new Meteor.Error('doichain.getSignature.exception', exception);\n  }\n};\n\nexport default getSignature;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { SEND_CLIENT } from '../../../startup/server/doichain-configuration.js';\nimport encryptMessage from \"./encrypt_message\";\nimport {getUrl} from \"../../../startup/server/dapp-configuration\";\nimport {logBlockchain, logSend} from \"../../../startup/server/log-configuration\";\nimport {feeDoi,nameDoi} from \"../../../../server/api/doichain\";\nimport {OptIns} from \"../../../api/opt-ins/opt-ins\";\nimport getPublicKeyAndAddress from \"./get_publickey_and_address_by_domain\";\n\n\nconst InsertSchema = new SimpleSchema({\n  nameId: {\n    type: String\n  },\n  signature: {\n    type: String\n  },\n  dataHash: {\n    type: String\n  },\n  domain: {\n    type: String\n  },\n  soiDate: {\n    type: Date\n  }\n});\n\nconst insert = (data) => {\n  const ourData = data;\n  try {\n    InsertSchema.validate(ourData);\n    logSend(\"domain:\",ourData.domain);\n\n    const publicKeyAndAddress = getPublicKeyAndAddress({domain:ourData.domain});\n    const from = encryptMessage({publicKey: publicKeyAndAddress.publicKey, message: getUrl()});\n    logSend('encrypted url for use ad from in doichain value:',getUrl(),from);\n\n    const nameValue = JSON.stringify({\n        signature: ourData.signature,\n        dataHash: ourData.dataHash,\n        from: from\n    });\n\n    //TODO (!) this must be replaced in future by \"atomic name trading example\" https://wiki.namecoin.info/?title=Atomic_Name-Trading\n    logBlockchain('sending a fee to bob so he can pay the doi storage (destAddress):', publicKeyAndAddress.destAddress);\n    const feeDoiTx = feeDoi(SEND_CLIENT, publicKeyAndAddress.destAddress);\n    logBlockchain('fee send txid to destaddress', feeDoiTx, publicKeyAndAddress.destAddress);\n\n    logBlockchain('adding data to blockchain via name_doi (nameId,value,destAddress):', ourData.nameId,nameValue,publicKeyAndAddress.destAddress);\n    const nameDoiTx = nameDoi(SEND_CLIENT, ourData.nameId, nameValue, publicKeyAndAddress.destAddress);\n    logBlockchain('name_doi added blockchain. txid:', nameDoiTx);\n\n    OptIns.update({nameId: ourData.nameId}, {$set: {txId:nameDoiTx}});\n    logBlockchain('updating OptIn locally with:', {nameId: ourData.nameId, txId: nameDoiTx});\n\n  } catch(exception) {\n      OptIns.update({nameId: ourData.nameId}, {$set: {error:JSON.stringify(exception.message)}});\n    throw new Meteor.Error('doichain.insert.exception', exception); //TODO update opt-in in local db to inform user about the error! e.g. Insufficient funds etc.\n  }\n};\n\nexport default insert;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { CONFIRM_CLIENT } from '../../../startup/server/doichain-configuration.js';\nimport {getWif, signMessage, getTransaction, nameDoi, nameShow} from \"../../../../server/api/doichain\";\nimport {API_PATH, DOI_CONFIRMATION_NOTIFY_ROUTE, VERSION} from \"../../../../server/api/rest/rest\";\nimport {CONFIRM_ADDRESS} from \"../../../startup/server/doichain-configuration\";\nimport {getHttpPUT} from \"../../../../server/api/http\";\nimport {logConfirm} from \"../../../startup/server/log-configuration\";\nimport getPrivateKeyFromWif from \"./get_private-key_from_wif\";\nimport decryptMessage from \"./decrypt_message\";\nimport {OptIns} from \"../../../api/opt-ins/opt-ins\";\n\nconst UpdateSchema = new SimpleSchema({\n  nameId: {\n    type: String\n  },\n  value: {\n    type: String\n  },\n  host : {\n      type: String,\n      optional: true,\n  },\n  fromHostUrl : {\n      type: String\n  }\n});\n\nconst update = (data, job) => {\n  try {\n    const ourData = data;\n\n    UpdateSchema.validate(ourData);\n\n    //stop this update until this name as at least 1 confirmation\n    const name_data = nameShow(CONFIRM_CLIENT,ourData.nameId);\n    if(name_data === undefined){\n        rerun(job);\n        logConfirm('name not visible - delaying name update',ourData.nameId);\n        return;\n    }\n    const our_transaction = getTransaction(CONFIRM_CLIENT,name_data.txid);\n    if(our_transaction.confirmations===0){\n        rerun(job);\n        logConfirm('transaction has 0 confirmations - delaying name update',JSON.parse(ourData.value));\n        return;\n    }\n    logConfirm('updating blockchain with doiSignature:',JSON.parse(ourData.value));\n    const wif = getWif(CONFIRM_CLIENT, CONFIRM_ADDRESS);\n    const privateKey = getPrivateKeyFromWif({wif: wif});\n    logConfirm('got private key (will not show it here) in order to decrypt Send-dApp host url from value:',ourData.fromHostUrl);\n    const ourfromHostUrl = decryptMessage({privateKey: privateKey, message: ourData.fromHostUrl});\n    logConfirm('decrypted fromHostUrl',ourfromHostUrl);\n    const url = ourfromHostUrl+API_PATH+VERSION+\"/\"+DOI_CONFIRMATION_NOTIFY_ROUTE;\n\n    logConfirm('creating signature with ADDRESS'+CONFIRM_ADDRESS+\" nameId:\",ourData.value);\n    const signature = signMessage(CONFIRM_CLIENT, CONFIRM_ADDRESS, ourData.nameId); //TODO why here over nameID?\n    logConfirm('signature created:',signature);\n\n    const updateData = {\n        nameId: ourData.nameId,\n        signature: signature,\n        host: ourData.host\n    };\n\n    try {\n        const txid = nameDoi(CONFIRM_CLIENT, ourData.nameId, ourData.value, null);\n        logConfirm('update transaction txid:',txid);\n    }catch(exception){\n        //\n        logConfirm('this nameDOI doesnÂ´t have a block yet and will be updated with the next block and with the next queue start:',ourData.nameId);\n        if(exception.toString().indexOf(\"there is already a registration for this doi name\")==-1) {\n            OptIns.update({nameId: ourData.nameId}, {$set: {error: JSON.stringify(exception.message)}});\n        }\n        throw new Meteor.Error('doichain.update.exception', exception);\n        //}else{\n        //    logConfirm('this nameDOI doesnÂ´t have a block yet and will be updated with the next block and with the next queue start:',ourData.nameId);\n        //}\n    }\n\n    const response = getHttpPUT(url, updateData);\n    logConfirm('informed send dApp about confirmed doi on url:'+url+' with updateData'+JSON.stringify(updateData)+\" response:\",response.data);\n    job.done();\n  } catch(exception) {\n    throw new Meteor.Error('doichain.update.exception', exception);\n  }\n};\n\nfunction rerun(job){\n    logConfirm('rerunning txid in 10sec - canceling old job','');\n    job.cancel();\n    logConfirm('restart blockchain doi update','');\n    job.restart(\n        {\n            //repeats: 600,   // Only repeat this once\n            // This is the default\n           // wait: 10000   // Wait 10 sec between repeats\n                          // Default is previous setting\n        },\n        function (err, result) {\n            if (result) {\n                logConfirm('rerunning txid in 10sec:',result);\n            }\n        }\n    );\n}\n\nexport default update;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport bitcore from 'bitcore-lib';\nimport Message from 'bitcore-message';\nimport {logError, logVerify} from \"../../../startup/server/log-configuration\";\nconst NETWORK = bitcore.Networks.add({\n  name: 'doichain',\n  alias: 'doichain',\n  pubkeyhash: 0x34,\n  privatekey: 0xB4,\n  scripthash: 13,\n  networkMagic: 0xf9beb4fe,\n});\n\nconst VerifySignatureSchema = new SimpleSchema({\n  data: {\n    type: String\n  },\n  publicKey: {\n    type: String\n  },\n  signature: {\n    type: String\n  }\n});\n\nconst verifySignature = (data) => {\n  try {\n    const ourData = data;\n    logVerify('verifySignature:',ourData);\n    VerifySignatureSchema.validate(ourData);\n    const address = bitcore.Address.fromPublicKey(new bitcore.PublicKey(ourData.publicKey), NETWORK);\n    try {\n      return Message(ourData.data).verify(address, ourData.signature);\n    } catch(error) { logError(error)}\n    return false;\n  } catch(exception) {\n    throw new Meteor.Error('doichain.verifySignature.exception', exception);\n  }\n};\n\nexport default verifySignature;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { OptIns } from '../../../api/opt-ins/opt-ins.js';\nimport { Senders } from '../../../api/senders/senders.js';\nimport { Recipients } from '../../../api/recipients/recipients.js';\nimport generateNameId from './generate_name-id.js';\nimport getSignature from './get_signature.js';\nimport getDataHash from './get_data-hash.js';\nimport addInsertBlockchainJob from '../jobs/add_insert_blockchain.js';\nimport {logSend} from \"../../../startup/server/log-configuration\";\n\nconst WriteToBlockchainSchema = new SimpleSchema({\n  id: {\n    type: String\n  }\n});\n\nconst writeToBlockchain = (data) => {\n  try {\n    const ourData = data;\n    WriteToBlockchainSchema.validate(ourData);\n\n    const optIn = OptIns.findOne({_id: data.id});\n    const recipient = Recipients.findOne({_id: optIn.recipient});\n    const sender = Senders.findOne({_id: optIn.sender});\n    logSend(\"optIn data:\",{index:ourData.index, optIn:optIn,recipient:recipient,sender: sender});\n\n\n    const nameId = generateNameId({id: data.id,index:optIn.index,masterDoi:optIn.masterDoi });\n    const signature = getSignature({message: recipient.email+sender.email, privateKey: recipient.privateKey});\n    logSend(\"generated signature from email recipient and sender:\",signature);\n\n    let dataHash = \"\";\n\n    if(optIn.data) {\n      dataHash = getDataHash({data: optIn.data});\n      logSend(\"generated datahash from given data:\",dataHash);\n    }\n\n    const parts = recipient.email.split(\"@\");\n    const domain = parts[parts.length-1];\n    logSend(\"email domain for publicKey request is:\",domain);\n    addInsertBlockchainJob({\n      nameId: nameId,\n      signature: signature,\n      dataHash: dataHash,\n      domain: domain,\n      soiDate: optIn.createdAt\n    })\n  } catch (exception) {\n    throw new Meteor.Error('doichain.writeToBlockchain.exception', exception);\n  }\n};\n\nexport default writeToBlockchain\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { HashIds } from '../../../startup/server/email-configuration.js';\n\nconst DecodeDoiHashSchema = new SimpleSchema({\n  hash: {\n    type: String\n  }\n});\n\nconst decodeDoiHash = (hash) => {\n  try {\n    const ourHash = hash;\n    DecodeDoiHashSchema.validate(ourHash);\n    const hex = HashIds.decodeHex(ourHash.hash);\n    if(!hex || hex === '') throw \"Wrong hash\";\n    try {\n      const obj = JSON.parse(Buffer(hex, 'hex').toString('ascii'));\n      return obj;\n    } catch(exception) {throw \"Wrong hash\";}\n  } catch (exception) {\n    throw new Meteor.Error('emails.decode_doi-hash.exception', exception);\n  }\n};\n\nexport default decodeDoiHash;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { HashIds } from '../../../startup/server/email-configuration.js';\n\nconst GenerateDoiHashSchema = new SimpleSchema({\n  id: {\n    type: String\n  },\n  token: {\n    type: String\n  },\n  redirect: {\n    type: String\n  }\n});\n\nconst generateDoiHash = (optIn) => {\n  try {\n    const ourOptIn = optIn;\n    GenerateDoiHashSchema.validate(ourOptIn);\n\n    const json = JSON.stringify({\n      id: ourOptIn.id,\n      token: ourOptIn.token,\n      redirect: ourOptIn.redirect\n    });\n\n    const hex = Buffer(json).toString('hex');\n    const hash = HashIds.encodeHex(hex);\n    return hash;\n  } catch (exception) {\n    throw new Meteor.Error('emails.generate_doi-hash.exception', exception);\n  }\n};\n\nexport default generateDoiHash;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport {logConfirm} from \"../../../startup/server/log-configuration\";\n\nconst PLACEHOLDER_REGEX = /\\${([\\w]*)}/g;\nconst ParseTemplateSchema = new SimpleSchema({\n  template: {\n    type: String,\n  },\n  data: {\n    type: Object,\n    blackbox: true\n  }\n});\n\nconst parseTemplate = (data) => {\n  try {\n    const ourData = data;\n    //logConfirm('parseTemplate:',ourData);\n\n    ParseTemplateSchema.validate(ourData);\n    logConfirm('ParseTemplateSchema validated');\n\n    var _match;\n    var template = ourData.template;\n   //logConfirm('doing some regex with template:',template);\n\n    do {\n      _match = PLACEHOLDER_REGEX.exec(template);\n      if(_match) template = _replacePlaceholder(template, _match, ourData.data[_match[1]]);\n    } while (_match);\n    return template;\n  } catch (exception) {\n    throw new Meteor.Error('emails.parseTemplate.exception', exception);\n  }\n};\n\nfunction _replacePlaceholder(template, _match, replace) {\n  var rep = replace;\n  if(replace === undefined) rep = \"\";\n  return template.substring(0, _match.index)+rep+template.substring(_match.index+_match[0].length);\n}\n\nexport default parseTemplate;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport {logConfirm} from \"../../../startup/server/log-configuration\";\nimport { DOI_MAIL_DEFAULT_EMAIL_FROM } from '../../../startup/server/email-configuration.js';\n\nconst SendMailSchema = new SimpleSchema({\n  from: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  to: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  subject: {\n    type: String,\n  },\n  message: {\n    type: String,\n  },\n  returnPath: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  }\n});\n\nconst sendMail = (mail) => {\n  try {\n\n    mail.from = DOI_MAIL_DEFAULT_EMAIL_FROM;\n\n    const ourMail = mail;\n    logConfirm('sending email with data:',{to:mail.to, subject:mail.subject});\n    SendMailSchema.validate(ourMail);\n    //TODO: Text fallback\n    Email.send({\n      from: mail.from,\n      to: mail.to,\n      subject: mail.subject,\n      html: mail.message,\n      headers: {\n        'Return-Path': mail.returnPath,\n      }\n    });\n\n  } catch (exception) {\n    throw new Meteor.Error('emails.send.exception', exception);\n  }\n};\n\nexport default sendMail;\n","import { Meteor } from 'meteor/meteor';\nimport { Job } from 'meteor/vsivsi:job-collection';\nimport { BlockchainJobs } from '../../../../server/api/blockchain_jobs.js';\n\nconst addCheckNewTransactionsBlockchainJob = () => {\n  try {\n    const job = new Job(BlockchainJobs, 'checkNewTransaction', {});\n    job.retry({retries: 60, wait: 15*1000 }).save({cancelRepeats: true});\n  } catch (exception) {\n    throw new Meteor.Error('jobs.addCheckNewTransactionsBlockchain.exception', exception);\n  }\n};\n\nexport default addCheckNewTransactionsBlockchainJob;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { Job } from 'meteor/vsivsi:job-collection';\nimport { DAppJobs } from '../../../../server/api/dapp_jobs.js';\n\nconst AddFetchDoiMailDataJobSchema = new SimpleSchema({\n  name: {\n    type: String\n  },\n  domain: {\n    type: String\n  }\n});\n\nconst addFetchDoiMailDataJob = (data) => {\n  try {\n    const ourData = data;\n    AddFetchDoiMailDataJobSchema.validate(ourData);\n    const job = new Job(DAppJobs, 'fetchDoiMailData', ourData);\n    job.retry({retries: 5, wait: 1*10*1000 }).save(); //check every 10 secs 5 times\n  } catch (exception) {\n    throw new Meteor.Error('jobs.addFetchDoiMailData.exception', exception);\n  }\n};\n\nexport default addFetchDoiMailDataJob;\n","import { Meteor } from 'meteor/meteor';\nimport { Job } from 'meteor/vsivsi:job-collection';\nimport SimpleSchema from 'simpl-schema';\nimport { BlockchainJobs } from '../../../../server/api/blockchain_jobs.js';\n\nconst AddInsertBlockchainJobSchema = new SimpleSchema({\n  nameId: {\n    type: String\n  },\n  signature: {\n    type: String\n  },\n  dataHash: {\n    type: String,\n    optional:true\n  },\n  domain: {\n    type: String\n  },\n  soiDate: {\n    type: Date\n  }\n});\n\nconst addInsertBlockchainJob = (entry) => {\n  try {\n    const ourEntry = entry;\n    AddInsertBlockchainJobSchema.validate(ourEntry);\n    const job = new Job(BlockchainJobs, 'insert', ourEntry);\n    job.retry({retries: 10, wait: 3*60*1000 }).save(); //check every 10sec for 1h\n  } catch (exception) {\n    throw new Meteor.Error('jobs.addInsertBlockchain.exception', exception);\n  }\n};\n\nexport default addInsertBlockchainJob;\n","import { Meteor } from 'meteor/meteor';\nimport { Job } from 'meteor/vsivsi:job-collection';\nimport SimpleSchema from 'simpl-schema';\nimport { MailJobs } from '../../../../server/api/mail_jobs.js';\n\nconst AddSendMailJobSchema = new SimpleSchema({\n  /*from: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },*/\n  to: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  subject: {\n    type: String,\n  },\n  message: {\n    type: String,\n  },\n  returnPath: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  }\n});\n\nconst addSendMailJob = (mail) => {\n  try {\n    const ourMail = mail;\n    AddSendMailJobSchema.validate(ourMail);\n    const job = new Job(MailJobs, 'send', ourMail);\n    job.retry({retries: 5, wait: 60*1000 }).save();\n  } catch (exception) {\n    throw new Meteor.Error('jobs.addSendMail.exception', exception);\n  }\n};\n\nexport default addSendMailJob;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { Job } from 'meteor/vsivsi:job-collection';\nimport { BlockchainJobs } from '../../../../server/api/blockchain_jobs.js';\n\nconst AddUpdateBlockchainJobSchema = new SimpleSchema({\n  nameId: {\n    type: String\n  },\n  value: {\n    type: String\n  },\n  fromHostUrl: {\n    type: String\n  },\n  host: {\n      type: String\n  }\n});\n\nconst addUpdateBlockchainJob = (entry) => {\n  try {\n    const ourEntry = entry;\n    AddUpdateBlockchainJobSchema.validate(ourEntry);\n    const job = new Job(BlockchainJobs, 'update', ourEntry);\n    job.retry({retries: 360, wait: 1*10*1000 }).save();\n  } catch (exception) {\n    throw new Meteor.Error('jobs.addUpdateBlockchain.exception', exception);\n  }\n};\n\nexport default addUpdateBlockchainJob;\n","import { Meteor } from 'meteor/meteor';\nimport i18n from 'meteor/universe:i18n';\n\n// universe:i18n only bundles the default language on the client side.\n// To get a list of all avialble languages with at least one translation,\n// i18n.getLanguages() must be called server side.\nconst getLanguages = () => {\n  try {\n    return i18n.getLanguages();\n  } catch (exception) {\n    throw new Meteor.Error('languages.get.exception', exception);\n  }\n};\n\nexport default getLanguages;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { Meta } from '../../../api/meta/meta.js';\n\nconst AddOrUpdateMetaSchema = new SimpleSchema({\n  key: {\n    type: String\n  },\n  value: {\n    type: String\n  }\n});\n\nconst addOrUpdateMeta = (data) => {\n  try {\n    const ourData = data;\n    AddOrUpdateMetaSchema.validate(ourData);\n    const meta = Meta.findOne({key: ourData.key});\n    if(meta !== undefined) Meta.update({_id : meta._id}, {$set: {\n      value: ourData.value\n    }});\n    else return Meta.insert({\n      key: ourData.key,\n      value: ourData.value\n    })\n  } catch (exception) {\n    throw new Meteor.Error('meta.addOrUpdate.exception', exception);\n  }\n};\n\nexport default addOrUpdateMeta;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { OptIns } from '../../../api/opt-ins/opt-ins.js';\n\nconst AddOptInSchema = new SimpleSchema({\n  name: {\n    type: String\n  }\n});\n\nconst addOptIn = (optIn) => {\n  try {\n    const ourOptIn = optIn;\n    AddOptInSchema.validate(ourOptIn);\n    const optIns = OptIns.find({nameId: ourOptIn.name}).fetch();\n    if(optIns.length > 0) return optIns[0]._id;\n    const optInId = OptIns.insert({\n      nameId: ourOptIn.name\n    });\n    return optInId;\n  } catch (exception) {\n    throw new Meteor.Error('opt-ins.add.exception', exception);\n  }\n};\n\nexport default addOptIn;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport addRecipient from '../recipients/add.js';\nimport addSender from '../senders/add.js';\nimport { OptIns } from '../../../api/opt-ins/opt-ins.js';\nimport writeToBlockchain from '../doichain/write_to_blockchain.js';\nimport {logError, logSend} from \"../../../startup/server/log-configuration\";\n\n\nconst AddOptInSchema = new SimpleSchema({\n  recipient_mail: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  sender_mail: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  data: {\n    type: String,\n    optional: true\n  },\n  master_doi: {\n      type: String,\n      optional: true\n  },\n  index: {\n      type: SimpleSchema.Integer,\n      optional: true\n  },\n  ownerId: {\n    type: String,\n    regEx: SimpleSchema.RegEx.id\n  }\n});\n\nconst addOptIn = (optIn) => {\n  try {\n    const ourOptIn = optIn;\n    AddOptInSchema.validate(ourOptIn);\n\n    const recipient = {\n      email: ourOptIn.recipient_mail\n    }\n    const recipientId = addRecipient(recipient);\n    const sender = {\n      email: ourOptIn.sender_mail\n    }\n    const senderId = addSender(sender);\n    \n    const optIns = OptIns.find({recipient: recipientId, sender: senderId}).fetch();\n    if(optIns.length > 0) return optIns[0]._id; //TODO when SOI already exists resend email?\n\n    if(ourOptIn.data !== undefined) {\n      try {\n        JSON.parse(ourOptIn.data);\n      } catch(error) {\n        logError(\"ourOptIn.data:\",ourOptIn.data);\n        throw \"Invalid data json \";\n      }\n    }\n    \n    const optInId = OptIns.insert({\n      recipient: recipientId,\n      sender: senderId,\n      index: ourOptIn.index,\n      masterDoi : ourOptIn.master_doi,\n      data: ourOptIn.data,\n      ownerId: ourOptIn.ownerId\n    });\n    logSend(\"optIn (index:\"+ourOptIn.index+\" added to local db with optInId\",optInId);\n\n    writeToBlockchain({id: optInId});\n    return optInId;\n  } catch (exception) {\n    throw new Meteor.Error('opt-ins.addAndWriteToBlockchain.exception', exception);\n  }\n};\n\nexport default addOptIn;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { CONFIRM_CLIENT, CONFIRM_ADDRESS } from '../../../startup/server/doichain-configuration.js';\nimport { OptIns } from '../../../api/opt-ins/opt-ins.js';\nimport { DoichainEntries } from '../../../api/doichain/entries.js';\nimport decodeDoiHash from '../emails/decode_doi-hash.js';\nimport { signMessage } from '../../../../server/api/doichain.js';\nimport addUpdateBlockchainJob from '../jobs/add_update_blockchain.js';\nimport {logConfirm} from \"../../../startup/server/log-configuration\";\n\nconst ConfirmOptInSchema = new SimpleSchema({\n  host: {\n    type: String\n  },\n  hash: {\n    type: String\n  }\n});\n\nconst confirmOptIn = (request) => {\n  try {\n    const ourRequest = request;\n    ConfirmOptInSchema.validate(ourRequest);\n    const decoded = decodeDoiHash({hash: request.hash});\n    const optIn = OptIns.findOne({_id: decoded.id});\n    if(optIn === undefined || optIn.confirmationToken !== decoded.token) throw \"Invalid hash\";\n    const confirmedAt = new Date();\n\n    OptIns.update({_id : optIn._id},{$set:{confirmedAt: confirmedAt, confirmedBy: ourRequest.host}, $unset: {confirmationToken: \"\"}});\n\n    //TODO here find all DoichainEntries in the local database  and blockchain with the same masterDoi\n    const entries = DoichainEntries.find({$or: [{name: optIn.nameId}, {masterDoi: optIn.nameId}]});\n    if(entries === undefined) throw \"Doichain entry/entries not found\";\n\n    entries.forEach(entry => {\n        logConfirm('confirming DoiChainEntry:',entry);\n\n        const value = JSON.parse(entry.value);\n        logConfirm('getSignature (only of value!)', value);\n\n        const doiSignature = signMessage(CONFIRM_CLIENT, CONFIRM_ADDRESS, value.signature);\n        logConfirm('got doiSignature:',doiSignature);\n        const fromHostUrl = value.from;\n\n        delete value.from;\n        value.doiTimestamp = confirmedAt.toISOString();\n        value.doiSignature = doiSignature;\n        const jsonValue = JSON.stringify(value);\n        logConfirm('updating Doichain nameId:'+optIn.nameId+' with value:',jsonValue);\n\n        addUpdateBlockchainJob({\n            nameId: entry.name,\n            value: jsonValue,\n            fromHostUrl: fromHostUrl,\n            host: ourRequest.host\n        });\n    });\n    logConfirm('redirecting user to:',decoded.redirect);\n    return decoded.redirect;\n  } catch (exception) {\n    throw new Meteor.Error('opt-ins.confirm.exception', exception);\n  }\n};\n\nexport default confirmOptIn\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { randomBytes } from 'crypto';\nimport { OptIns } from '../../../api/opt-ins/opt-ins.js';\n\nconst GenerateDoiTokenSchema = new SimpleSchema({\n  id: {\n    type: String\n  }\n});\n\nconst generateDoiToken = (optIn) => {\n  try {\n    const ourOptIn = optIn;\n    GenerateDoiTokenSchema.validate(ourOptIn);\n    const token = randomBytes(32).toString('hex');\n    OptIns.update({_id : ourOptIn.id},{$set:{confirmationToken: token}});\n    return token;\n  } catch (exception) {\n    throw new Meteor.Error('opt-ins.generate_doi-token.exception', exception);\n  }\n};\n\nexport default generateDoiToken\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { OptIns } from '../../../api/opt-ins/opt-ins.js';\nimport { Recipients } from '../../../api/recipients/recipients.js';\nimport verifySignature from '../doichain/verify_signature.js';\nimport {logSend} from \"../../../startup/server/log-configuration\";\nimport getPublicKeyAndAddress from \"../doichain/get_publickey_and_address_by_domain\";\n\nconst UpdateOptInStatusSchema = new SimpleSchema({\n  nameId: {\n    type: String\n  },\n  signature: {\n    type: String\n  },\n  host: {\n      type: String,\n      optional: true\n  }\n});\n\n\nconst updateOptInStatus = (data) => {\n  try {\n    const ourData = data;\n    logSend('confirm dApp confirms optIn:',JSON.stringify(data));\n    UpdateOptInStatusSchema.validate(ourData);\n    const optIn = OptIns.findOne({nameId: ourData.nameId});\n    if(optIn === undefined) throw \"Opt-In not found\";\n    logSend('confirm dApp confirms optIn:',ourData.nameId);\n\n    const recipient = Recipients.findOne({_id: optIn.recipient});\n    if(recipient === undefined) throw \"Recipient not found\";\n    const parts = recipient.email.split(\"@\");\n    const domain = parts[parts.length-1];\n    const publicKeyAndAddress = getPublicKeyAndAddress({domain:domain});\n\n    //TODO getting information from Bob that a certain nameId (DOI) got confirmed.\n    if(!verifySignature({publicKey: publicKeyAndAddress.publicKey, data: ourData.nameId, signature: ourData.signature})) {\n      throw \"Access denied\";\n    }\n    logSend('signature valid for publicKey', publicKeyAndAddress.publicKey);\n\n    OptIns.update({_id : optIn._id},{$set:{confirmedAt: new Date(), confirmedBy: ourData.host}});\n  } catch (exception) {\n    throw new Meteor.Error('dapps.send.updateOptInStatus.exception', exception);\n  }\n};\n\nexport default updateOptInStatus;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { VERIFY_CLIENT } from '../../../startup/server/doichain-configuration.js';\nimport { nameShow } from '../../../../server/api/doichain.js';\nimport getOptInProvider from '../dns/get_opt-in-provider.js';\nimport getOptInKey from '../dns/get_opt-in-key.js';\nimport verifySignature from '../doichain/verify_signature.js';\nimport {logVerify} from \"../../../startup/server/log-configuration\";\nimport getPublicKeyAndAddress from \"../doichain/get_publickey_and_address_by_domain\";\n\nconst VerifyOptInSchema = new SimpleSchema({\n  recipient_mail: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  sender_mail: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  name_id: {\n    type: String\n  },\n  recipient_public_key: {\n    type: String\n  }\n});\n\nconst verifyOptIn = (data) => {\n  try {\n    const ourData = data;\n    VerifyOptInSchema.validate(ourData);\n    const entry = nameShow(VERIFY_CLIENT, ourData.name_id);\n    if(entry === undefined) return false;\n    const entryData = JSON.parse(entry.value);\n    const firstCheck = verifySignature({\n      data: ourData.recipient_mail+ourData.sender_mail,\n      signature: entryData.signature,\n      publicKey: ourData.recipient_public_key\n    })\n\n    if(!firstCheck) return {firstCheck: false};\n    const parts = ourData.recipient_mail.split(\"@\"); //TODO put this into getPublicKeyAndAddress\n    const domain = parts[parts.length-1];\n    const publicKeyAndAddress = getPublicKeyAndAddress({domain: domain});\n\n    const secondCheck = verifySignature({\n      data: entryData.signature,\n      signature: entryData.doiSignature,\n      publicKey: publicKeyAndAddress.publicKey\n    })\n\n    if(!secondCheck) return {secondCheck: false};\n    return true;\n  } catch (exception) {\n    throw new Meteor.Error('opt-ins.verify.exception', exception);\n  }\n};\n\nexport default verifyOptIn\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { Recipients } from '../../../api/recipients/recipients.js';\nimport getKeyPair from '../doichain/get_key-pair.js';\n\nconst AddRecipientSchema = new SimpleSchema({\n  email: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  }\n});\n\nconst addRecipient = (recipient) => {\n  try {\n    const ourRecipient = recipient;\n    AddRecipientSchema.validate(ourRecipient);\n    const recipients = Recipients.find({email: recipient.email}).fetch();\n    if(recipients.length > 0) return recipients[0]._id;\n    const keyPair = getKeyPair();\n    return Recipients.insert({\n      email: ourRecipient.email,\n      privateKey: keyPair.privateKey,\n      publicKey: keyPair.publicKey\n    })\n  } catch (exception) {\n    throw new Meteor.Error('recipients.add.exception', exception);\n  }\n};\n\nexport default addRecipient;\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport { Senders } from '../../../api/senders/senders.js';\n\nconst AddSenderSchema = new SimpleSchema({\n  email: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  }\n});\n\nconst addSender = (sender) => {\n  try {\n    const ourSender = sender;\n    AddSenderSchema.validate(ourSender);\n    const senders = Senders.find({email: sender.email}).fetch();\n    if(senders.length > 0) return senders[0]._id;\n    return Senders.insert({\n      email: ourSender.email\n    })\n  } catch (exception) {\n    throw new Meteor.Error('senders.add.exception', exception);\n  }\n};\n\nexport default addSender;\n","import { Meteor } from 'meteor/meteor';\n\nexport function isDebug() {\n  if(Meteor.settings !== undefined &&\n     Meteor.settings.app !== undefined &&\n     Meteor.settings.app.debug !== undefined) return Meteor.settings.app.debug\n  return false;\n}\n\nexport function isRegtest() {\n  if(Meteor.settings !== undefined &&\n     Meteor.settings.app !== undefined &&\n     Meteor.settings.app.regtest !== undefined) return Meteor.settings.app.regtest\n  return false;\n}\n\nexport function isTestnet() {\n    if(Meteor.settings !== undefined &&\n        Meteor.settings.app !== undefined &&\n        Meteor.settings.app.testnet !== undefined) return Meteor.settings.app.testnet\n    return false;\n}\n\nexport function getUrl() {\n  if(Meteor.settings !== undefined &&\n     Meteor.settings.app !== undefined &&\n     Meteor.settings.app.host !== undefined) {\n       let port = 3000;\n       if(Meteor.settings.app.port !== undefined) port = Meteor.settings.app.port\n       return \"http://\"+Meteor.settings.app.host+\":\"+port+\"/\";\n  }\n  return Meteor.absoluteUrl();\n}\n","export const FALLBACK_PROVIDER = \"doichain.org\";\n","import namecoin from 'namecoin';\nimport { SEND_APP, CONFIRM_APP, VERIFY_APP, isAppType } from './type-configuration.js';\n\nvar sendSettings = Meteor.settings.send;\nvar sendClient = undefined;\nif(isAppType(SEND_APP)) {\n  if(!sendSettings || !sendSettings.doichain)\n    throw new Meteor.Error(\"config.send.doichain\", \"Send app doichain settings not found\")\n  sendClient = createClient(sendSettings.doichain);\n}\nexport const SEND_CLIENT = sendClient;\n\nvar confirmSettings = Meteor.settings.confirm;\nvar confirmClient = undefined;\nvar confirmAddress = undefined;\nif(isAppType(CONFIRM_APP)) {\n  if(!confirmSettings || !confirmSettings.doichain)\n    throw new Meteor.Error(\"config.confirm.doichain\", \"Confirm app doichain settings not found\")\n  confirmClient = createClient(confirmSettings.doichain);\n  confirmAddress = confirmSettings.doichain.address;\n}\nexport const CONFIRM_CLIENT = confirmClient;\nexport const CONFIRM_ADDRESS = confirmAddress;\n\nvar verifySettings = Meteor.settings.verify;\nvar verifyClient = undefined;\nif(isAppType(VERIFY_APP)) {\n  if(!verifySettings || !verifySettings.doichain)\n    throw new Meteor.Error(\"config.verify.doichain\", \"Verify app doichain settings not found\")\n  verifyClient = createClient(verifySettings.doichain);\n}\nexport const VERIFY_CLIENT = verifyClient;\n\nfunction createClient(settings) {\n  return new namecoin.Client({\n    host: settings.host,\n    port: settings.port,\n    user: settings.username,\n    pass: settings.password\n  });\n}\n","import { Meteor } from 'meteor/meteor';\nimport { SEND_APP, CONFIRM_APP, isAppType } from './type-configuration.js';\nimport Hashids from 'hashids';\n//const Hashids = require('hashids').default;\nimport {logConfirm} from \"./log-configuration\";\n\nexport const HashIds = new Hashids('0xugmLe7Nyee6vk1iF88(6CmwpqoG4hQ*-T74tjYw^O2vOO(Xl-91wA8*nCg_lX$');\n\nvar sendSettings = Meteor.settings.send;\nvar doiMailFetchUrl = undefined;\n\nif(isAppType(SEND_APP)) {\n  if(!sendSettings || !sendSettings.doiMailFetchUrl)\n    throw new Meteor.Error(\"config.send.email\", \"Settings not found\");\n  doiMailFetchUrl = sendSettings.doiMailFetchUrl;\n}\nexport const DOI_MAIL_FETCH_URL = doiMailFetchUrl;\n\nvar defaultFrom = undefined;\nif(isAppType(CONFIRM_APP)) {\n  var confirmSettings = Meteor.settings.confirm;\n\n  if(!confirmSettings || !confirmSettings.smtp)\n        throw new Meteor.Error(\"config.confirm.smtp\", \"Confirm app email smtp settings not found\")\n\n  if(!confirmSettings.smtp.defaultFrom)\n        throw new Meteor.Error(\"config.confirm.defaultFrom\", \"Confirm app email defaultFrom not found\")\n\n  defaultFrom  =  confirmSettings.smtp.defaultFrom;\n\n  logConfirm('sending with defaultFrom:',defaultFrom);\n\n  Meteor.startup(() => {\n\n   if(confirmSettings.smtp.username === undefined){\n       process.env.MAIL_URL = 'smtp://' +\n           encodeURIComponent(confirmSettings.smtp.server) +\n           ':' +\n           confirmSettings.smtp.port;\n   }else{\n       process.env.MAIL_URL = 'smtp://' +\n           encodeURIComponent(confirmSettings.smtp.username) +\n           ':' + encodeURIComponent(confirmSettings.smtp.password) +\n           '@' + encodeURIComponent(confirmSettings.smtp.server) +\n           ':' +\n           confirmSettings.smtp.port;\n   }\n\n   logConfirm('using MAIL_URL:',process.env.MAIL_URL);\n\n   if(confirmSettings.smtp.NODE_TLS_REJECT_UNAUTHORIZED!==undefined)\n       process.env.NODE_TLS_REJECT_UNAUTHORIZED = confirmSettings.smtp.NODE_TLS_REJECT_UNAUTHORIZED; //0\n  });\n}\nexport const DOI_MAIL_DEFAULT_EMAIL_FROM = defaultFrom;\n","import { Meteor } from 'meteor/meteor';\nimport { Roles } from 'meteor/alanning:roles';\nimport {Meta} from '../../api/meta/meta.js'\nMeteor.startup(() => {\n\n  let version=Assets.getText(\"private/version.json\");\n\n  if(Meta.find({key:\"version\"}).count() > 0){\n    Meta.remove({key:\"version\"});\n  }\n   Meta.insert({key:\"version\",value:version});\n  \n  if(Meteor.users.find().count() === 0) {\n    const id = Accounts.createUser({\n      username: 'admin',\n      email: 'admin@sendeffect.de',\n      password: 'password'\n    });\n    Roles.addUsersToRoles(id, 'admin');\n  }\n});\n","import './log-configuration.js';\nimport './dapp-configuration.js';\nimport './type-configuration.js';\nimport './dns-configuration.js';\nimport './doichain-configuration.js';\nimport './fixtures.js';\nimport './register-api.js';\nimport './useraccounts-configuration.js';\nimport './security.js';\nimport './email-configuration.js';\nimport './jobs.js';\n","import { Meteor } from 'meteor/meteor';\nimport { MailJobs } from '../../../server/api/mail_jobs.js';\nimport { BlockchainJobs } from '../../../server/api/blockchain_jobs.js';\nimport { DAppJobs } from '../../../server/api/dapp_jobs.js';\nimport { CONFIRM_APP, isAppType } from './type-configuration.js';\nimport addCheckNewTransactionsBlockchainJob from '../../modules/server/jobs/add_check_new_transactions.js';\n\nMeteor.startup(() => {\n  MailJobs.startJobServer();\n  BlockchainJobs.startJobServer();\n  DAppJobs.startJobServer();\n  if(isAppType(CONFIRM_APP)) addCheckNewTransactionsBlockchainJob();\n});\n","import {isDebug} from \"./dapp-configuration\";\n\nrequire('scribe-js')();\n\nexport const console = process.console;\nexport const sendModeTagColor = {msg : 'send-mode', colors : ['yellow', 'inverse']};\nexport const confirmModeTagColor = {msg : 'confirm-mode', colors : ['blue', 'inverse']};\nexport const verifyModeTagColor = {msg : 'verify-mode', colors : ['green', 'inverse']};\nexport const blockchainModeTagColor = {msg : 'blockchain-mode', colors : ['white', 'inverse']};\nexport const testingModeTagColor = {msg : 'testing-mode', colors : ['orange', 'inverse']};\n\nexport function logSend(message,param) {\n    if(isDebug()) {console.time().tag(sendModeTagColor).log(message,param?param:'');}\n}\n\nexport function logConfirm(message,param) {\n    if(isDebug()) {console.time().tag(confirmModeTagColor).log(message, param?param:'');}\n}\n\nexport function logVerify(message, param) {\n    if(isDebug()) {console.time().tag(verifyModeTagColor).log(message, param?param:'');}\n}\n\nexport function logBlockchain(message, param) {\n    if(isDebug()){console.time().tag(blockchainModeTagColor).log(message, param?param:'');}\n}\n\nexport function logMain(message, param) {\n    if(isDebug()){console.time().tag(blockchainModeTagColor).log(message, param?param:'');}\n}\n\nexport function logError(message, param) {\n    if(isDebug()){console.time().tag(blockchainModeTagColor).error(message, param?param:'');}\n}\n\nexport function testLogging(message, param) {\n    if(isDebug()){console.time().tag(testingModeTagColor).log(message, param?param:'');}\n}","import '../../api/languages/methods';\nimport '../../api/doichain/methods';\nimport '../../api/recipients/server/publications'\nimport '../../api/opt-ins/methods';\nimport '../../api/meta/meta';\nimport '../../api/opt-ins/server/publications';\n\n","import { Meteor } from 'meteor/meteor';\nimport { DDPRateLimiter } from 'meteor/ddp-rate-limiter';\nimport { _ } from 'meteor/underscore';\n\n// Don't let people write arbitrary data to their 'profile' field from the client\nMeteor.users.deny({\n  update() {\n    return true;\n  },\n});\n\n// Get a list of all accounts methods by running `Meteor.server.method_handlers` in meteor shell\nconst AUTH_METHODS = [\n  'login',\n  'logout',\n  'logoutOtherClients',\n  'getNewToken',\n  'removeOtherTokens',\n  'configureLoginService',\n  'changePassword',\n  'forgotPassword',\n  'resetPassword',\n  'verifyEmail',\n  'createUser',\n  'ATRemoveService',\n  'ATCreateUserServer',\n  'ATResendVerificationEmail',\n];\n\nif (Meteor.isServer) {\n  // Only allow 2 login attempts per connection per 5 seconds\n  DDPRateLimiter.addRule({\n    name(name) {\n      return _.contains(AUTH_METHODS, name);\n    },\n\n    // Rate limit per connection ID\n    connectionId() { return true; },\n  }, 2, 5000);\n}\n","import { Meteor } from 'meteor/meteor';\nexport const SEND_APP = \"send\";\nexport const CONFIRM_APP = \"confirm\";\nexport const VERIFY_APP = \"verify\";\nexport function isAppType(type) {\n  if(Meteor.settings === undefined || Meteor.settings.app === undefined) throw \"No settings found!\"\n  const types = Meteor.settings.app.types;\n  if(types !== undefined) return types.includes(type);\n  return false;\n}\n","import { Accounts } from 'meteor/accounts-base';\nAccounts.config({\n    sendVerificationEmail: true,\n    forbidClientAccountCreation: true\n});\n\n\n\nAccounts.emailTemplates.from='doichain@le-space.de';","import '../imports/startup/server';\nimport './api/index.js';\n","\nimport { JobCollection,Job } from 'meteor/vsivsi:job-collection';\nexport const BlockchainJobs = JobCollection('blockchain');\nimport { Meteor } from 'meteor/meteor';\nimport insert from '../../imports/modules/server/doichain/insert.js';\nimport update from '../../imports/modules/server/doichain/update.js';\n/* eslint-disable no-unused-vars */ //TODO re-enable this!\nimport checkNewTransaction from '../../imports/modules/server/doichain/check_new_transactions.js';\nimport { CONFIRM_APP, isAppType } from '../../imports/startup/server/type-configuration.js';\nimport {logMain} from \"../../imports/startup/server/log-configuration\";\n\nBlockchainJobs.processJobs('insert', {workTimeout: 30*1000},function (job, cb) {\n  try {\n    const entry = job.data;\n    insert(entry);\n    job.done();\n  } catch(exception) {\n    job.fail();\n\n      throw new Meteor.Error('jobs.blockchain.insert.exception', exception);\n  } finally {\n    cb();\n  }\n});\n\nBlockchainJobs.processJobs('update', {workTimeout: 30*1000},function (job, cb) {\n  try {\n    const entry = job.data;\n    update(entry,job);\n  } catch(exception) {\n    job.fail();\n    throw new Meteor.Error('jobs.blockchain.update.exception', exception);\n  } finally {\n    cb();\n  }\n});\n\nBlockchainJobs.processJobs('checkNewTransaction', {workTimeout: 30*1000},function (job, cb) {\n  try {\n    if(!isAppType(CONFIRM_APP)) {\n      job.pause();\n      job.cancel();\n      job.remove();\n    } else {\n      //checkNewTransaction(null,job);\n    }\n  } catch(exception) {\n    job.fail();\n    throw new Meteor.Error('jobs.blockchain.checkNewTransactions.exception', exception);\n  } finally {\n    cb();\n  }\n});\n\nnew Job(BlockchainJobs, 'cleanup', {})\n    .repeat({ schedule: BlockchainJobs.later.parse.text(\"every 5 minutes\") })\n    .save({cancelRepeats: true});\n\nlet q = BlockchainJobs.processJobs('cleanup',{ pollInterval: false, workTimeout: 60*1000 } ,function (job, cb) {\n  const current = new Date()\n    current.setMinutes(current.getMinutes() - 5);\n\n  const ids = BlockchainJobs.find({\n          status: {$in: Job.jobStatusRemovable},\n          updated: {$lt: current}},\n          {fields: { _id: 1 }});\n\n    logMain('found  removable blockchain jobs:',ids);\n    BlockchainJobs.removeJobs(ids);\n    if(ids.length > 0){\n      job.done(\"Removed #{ids.length} old jobs\");\n    }\n    cb();\n});\n\nBlockchainJobs.find({ type: 'jobType', status: 'ready' })\n    .observe({\n        added: function () { q.trigger(); }\n    });\n","import { JobCollection, Job } from 'meteor/vsivsi:job-collection';\nimport fetchDoiMailData from '../../imports/modules/server/dapps/fetch_doi-mail-data.js';\nimport { Meteor } from 'meteor/meteor';\nimport {logMain} from \"../../imports/startup/server/log-configuration\";\nexport const DAppJobs = JobCollection('dapp');\n\nDAppJobs.processJobs('fetchDoiMailData', function (job, cb) {\n  try {\n    const data = job.data;\n    fetchDoiMailData(data);\n    job.done();\n  } catch(exception) {\n    job.fail();\n    throw new Meteor.Error('jobs.dapp.fetchDoiMailData.exception', exception);\n  } finally {\n    cb();\n  }\n});\n\n\nnew Job(DAppJobs, 'cleanup', {})\n    .repeat({ schedule: DAppJobs.later.parse.text(\"every 5 minutes\") })\n    .save({cancelRepeats: true});\n\nlet q = DAppJobs.processJobs('cleanup',{ pollInterval: false, workTimeout: 60*1000 } ,function (job, cb) {\n    const current = new Date()\n    current.setMinutes(current.getMinutes() - 5);\n\n    const ids = DAppJobs.find({\n            status: {$in: Job.jobStatusRemovable},\n            updated: {$lt: current}},\n        {fields: { _id: 1 }});\n\n    logMain('found  removable blockchain jobs:',ids);\n    DAppJobs.removeJobs(ids);\n    if(ids.length > 0){\n        job.done(\"Removed #{ids.length} old jobs\");\n    }\n    cb();\n});\n\nDAppJobs.find({ type: 'jobType', status: 'ready' })\n    .observe({\n        added: function () { q.trigger(); }\n    });\n","import { Meteor } from 'meteor/meteor';\nimport dns from 'dns';\nimport {logSend} from \"../../imports/startup/server/log-configuration\";\n\nexport function resolveTxt(key, domain) {\n  const syncFunc = Meteor.wrapAsync(dns_resolveTxt);\n  try {\n    const records = syncFunc(key, domain);\n    if(records === undefined) return undefined;\n    let value = undefined;\n    records.forEach(record => {\n      if(record[0].startsWith(key)) {\n        const val = record[0].substring(key.length+1);\n        value = val.trim();\n\n      }\n    });\n    return value;\n  } catch(error) {\n    logSend(\"error while asking dns servers from \",dns.getServers());\n    if(error.message.startsWith(\"queryTxt ENODATA\") ||\n        error.message.startsWith(\"queryTxt ENOTFOUND\")) return undefined;\n    else throw error;\n  }\n}\n\nfunction dns_resolveTxt(key, domain, callback) {\n    logSend(\"resolving dns txt attribute: \", {key:key,domain:domain});\n    dns.resolveTxt(domain, (err, records) => {\n    callback(err, records);\n  });\n}\n","import { Meteor } from 'meteor/meteor';\nimport {logBlockchain, logConfirm, logError} from \"../../imports/startup/server/log-configuration\";\n\nconst NAMESPACE = 'e/';\n\nexport function getWif(client, address) {\n  if(!address){\n        address = getAddressesByAccount(\"\")[0];\n        logBlockchain('address was not defined so getting the first existing one of the wallet:',address);\n  }\n  if(!address){\n        address = getNewAddress(\"\");\n        logBlockchain('address was never defined  at all generated new address for this wallet:',address);\n  }\n  const syncFunc = Meteor.wrapAsync(doichain_dumpprivkey);\n  return syncFunc(client, address);\n}\n\nfunction doichain_dumpprivkey(client, address, callback) {\n  const ourAddress = address;\n  client.cmd('dumpprivkey', ourAddress, function(err, data) {\n    if(err)  logError('doichain_dumpprivkey:',err);\n    callback(err, data);\n  });\n}\n\nexport function getAddressesByAccount(client, accout) {\n    const syncFunc = Meteor.wrapAsync(doichain_getaddressesbyaccount);\n    return syncFunc(client, accout);\n}\n\nfunction doichain_getaddressesbyaccount(client, account, callback) {\n    const ourAccount = account;\n    client.cmd('getaddressesbyaccount', ourAccount, function(err, data) {\n        if(err)  logError('getaddressesbyaccount:',err);\n        callback(err, data);\n    });\n}\n\nexport function getNewAddress(client, accout) {\n    const syncFunc = Meteor.wrapAsync(doichain_getnewaddress);\n    return syncFunc(client, accout);\n}\nfunction doichain_getnewaddress(client, account, callback) {\n    const ourAccount = account;\n    client.cmd('getnewaddresss', ourAccount, function(err, data) {\n        if(err)  logError('getnewaddresss:',err);\n        callback(err, data);\n    });\n}\n\n\nexport function signMessage(client, address, message) {\n    const syncFunc = Meteor.wrapAsync(doichain_signMessage);\n    return syncFunc(client, address, message);\n}\n\nfunction doichain_signMessage(client, address, message, callback) {\n    const ourAddress = address;\n    const ourMessage = message;\n    client.cmd('signmessage', ourAddress, ourMessage, function(err, data) {\n        callback(err, data);\n    });\n}\n\nexport function nameShow(client, id) {\n  const syncFunc = Meteor.wrapAsync(doichain_nameShow);\n  return syncFunc(client, id);\n}\n\nfunction doichain_nameShow(client, id, callback) {\n  const ourId = checkId(id);\n  logConfirm('doichain-cli name_show :',ourId);\n  client.cmd('name_show', ourId, function(err, data) {\n    if(err !== undefined && err !== null && err.message.startsWith(\"name not found\")) {\n      err = undefined,\n      data = undefined\n    }\n    callback(err, data);\n  });\n}\n\nexport function feeDoi(client, address) {\n    const syncFunc = Meteor.wrapAsync(doichain_feeDoi);\n    return syncFunc(client, address);\n}\n\nfunction doichain_feeDoi(client, address, callback) {\n    const destAddress = address;\n    client.cmd('sendtoaddress', destAddress, '0.02', function(err, data) {\n        callback(err, data);\n    });\n}\n\nexport function nameDoi(client, name, value, address) {\n    const syncFunc = Meteor.wrapAsync(doichain_nameDoi);\n    return syncFunc(client, name, value, address);\n}\n\nfunction doichain_nameDoi(client, name, value, address, callback) {\n    const ourName = checkId(name);\n    const ourValue = value;\n    const destAddress = address;\n    if(!address) {\n        client.cmd('name_doi', ourName, ourValue, function (err, data) {\n            callback(err, data);\n        });\n    }else{\n        client.cmd('name_doi', ourName, ourValue, destAddress, function(err, data) {\n            callback(err, data);\n        });\n    }\n}\n\nexport function listSinceBlock(client, block) {\n    const syncFunc = Meteor.wrapAsync(doichain_listSinceBlock);\n    var ourBlock = block;\n    if(ourBlock === undefined) ourBlock = null;\n    return syncFunc(client, ourBlock);\n}\n\nfunction doichain_listSinceBlock(client, block, callback) {\n    var ourBlock = block;\n    if(ourBlock === null) client.cmd('listsinceblock', function(err, data) {\n        callback(err, data);\n    });\n    else client.cmd('listsinceblock', ourBlock, function(err, data) {\n        callback(err, data);\n    });\n}\n\nexport function getTransaction(client, txid) {\n    const syncFunc = Meteor.wrapAsync(doichain_gettransaction);\n    return syncFunc(client, txid);\n}\n\nfunction doichain_gettransaction(client, txid, callback) {\n    logConfirm('doichain_gettransaction:',txid);\n    client.cmd('gettransaction', txid, function(err, data) {\n        if(err)  logError('doichain_gettransaction:',err);\n        callback(err, data);\n    });\n}\n\nexport function getRawTransaction(client, txid) {\n    const syncFunc = Meteor.wrapAsync(doichain_getrawtransaction);\n    return syncFunc(client, txid);\n}\n\nfunction doichain_getrawtransaction(client, txid, callback) {\n    logBlockchain('doichain_getrawtransaction:',txid);\n    client.cmd('getrawtransaction', txid, 1, function(err, data) {\n        if(err)  logError('doichain_getrawtransaction:',err);\n        callback(err, data);\n    });\n}\n\nexport function getBalance(client) {\n    const syncFunc = Meteor.wrapAsync(doichain_getbalance);\n    return syncFunc(client);\n}\n\nfunction doichain_getbalance(client, callback) {\n    client.cmd('getbalance', function(err, data) {\n        if(err) { logError('doichain_getbalance:',err);}\n        callback(err, data);\n    });\n}\n\nexport function getInfo(client) {\n    const syncFunc = Meteor.wrapAsync(doichain_getinfo);\n    return syncFunc(client);\n}\n\nfunction doichain_getinfo(client, callback) {\n    client.cmd('getblockchaininfo', function(err, data) {\n        if(err) { logError('doichain-getinfo:',err);}\n        callback(err, data);\n    });\n}\n\nfunction checkId(id) {\n    const DOI_PREFIX = \"doi: \";\n    let ret_val = id; //default value\n\n    if(id.startsWith(DOI_PREFIX)) ret_val = id.substring(DOI_PREFIX.length); //in case it starts with doi: cut  this away\n    if(!id.startsWith(NAMESPACE)) ret_val = NAMESPACE+id; //in case it doesn't start with e/ put it in front now.\n  return ret_val;\n}\n","import { Meteor } from 'meteor/meteor';\nimport { HTTP } from 'meteor/http'\n\nexport function getHttpGET(url, query) {\n  const syncFunc = Meteor.wrapAsync(_get);\n  return syncFunc(url, query);\n}\n\nexport function getHttpGETdata(url, data) {\n    const syncFunc = Meteor.wrapAsync(_getData);\n    return syncFunc(url, data);\n}\n\nexport function getHttpPOST(url, data) {\n    const syncFunc = Meteor.wrapAsync(_post);\n    return syncFunc(url, data);\n}\n\nexport function getHttpPUT(url, data) {\n    const syncFunc = Meteor.wrapAsync(_put);\n    return syncFunc(url, data);\n}\n\nfunction _get(url, query, callback) {\n  const ourUrl = url;\n  const ourQuery = query;\n  HTTP.get(ourUrl, {query: ourQuery}, function(err, ret) {\n    callback(err, ret);\n  });\n}\n\nfunction _getData(url, data, callback) {\n    const ourUrl = url;\n    const ourData = data;\n    HTTP.get(ourUrl, ourData, function(err, ret) {\n        callback(err, ret);\n    });\n}\n\nfunction _post(url, data, callback) {\n    const ourUrl = url;\n    const ourData =  data;\n\n    HTTP.post(ourUrl, ourData, function(err, ret) {\n        callback(err, ret);\n    });\n}\n\nfunction _put(url, updateData, callback) {\n    const ourUrl = url;\n    const ourData = {\n        data: updateData\n    }\n\n    HTTP.put(ourUrl, ourData, function(err, ret) {\n      callback(err, ret);\n    });\n}\n","import './mail_jobs.js';\nimport './doichain.js';\nimport './blockchain_jobs.js';\nimport './dapp_jobs.js';\nimport './dns.js';\nimport './rest/rest.js';\n","import { Meteor } from 'meteor/meteor';\nimport { JobCollection, Job } from 'meteor/vsivsi:job-collection';\nexport const MailJobs = JobCollection('emails');\nimport sendMail from '../../imports/modules/server/emails/send.js';\nimport {logMain} from \"../../imports/startup/server/log-configuration\";\n\n\n\nMailJobs.processJobs('send', function (job, cb) {\n  try {\n    const email = job.data;\n    sendMail(email);\n    job.done();\n  } catch(exception) {\n    job.fail();\n    throw new Meteor.Error('jobs.mail.send.exception', exception);\n  } finally {\n    cb();\n  }\n});\n\n\nnew Job(MailJobs, 'cleanup', {})\n    .repeat({ schedule: MailJobs.later.parse.text(\"every 5 minutes\") })\n    .save({cancelRepeats: true})\n\nlet q = MailJobs.processJobs('cleanup',{ pollInterval: false, workTimeout: 60*1000 } ,function (job, cb) {\n    const current = new Date()\n    current.setMinutes(current.getMinutes() - 5);\n\n    const ids = MailJobs.find({\n            status: {$in: Job.jobStatusRemovable},\n            updated: {$lt: current}},\n        {fields: { _id: 1 }});\n\n    logMain('found  removable blockchain jobs:',ids);\n    MailJobs.removeJobs(ids);\n    if(ids.length > 0){\n        job.done(\"Removed #{ids.length} old jobs\");\n    }\n    cb();\n});\n\nMailJobs.find({ type: 'jobType', status: 'ready' })\n    .observe({\n        added: function () { q.trigger(); }\n    });\n\n","import { Restivus } from 'meteor/nimble:restivus';\nimport { isDebug } from '../../../imports/startup/server/dapp-configuration.js';\nimport { SEND_APP, CONFIRM_APP, VERIFY_APP, isAppType } from '../../../imports/startup/server/type-configuration.js';\n\nexport const DOI_CONFIRMATION_ROUTE = \"opt-in/confirm\";\nexport const DOI_CONFIRMATION_NOTIFY_ROUTE = \"opt-in\";\nexport const DOI_WALLETNOTIFY_ROUTE = \"walletnotify\";\nexport const DOI_FETCH_ROUTE = \"doi-mail\";\nexport const DOI_EXPORT_ROUTE = \"export\";\nexport const API_PATH = \"api/\";\nexport const VERSION = \"v1\";\n\nexport const Api = new Restivus({\n  apiPath: API_PATH,\n  version: VERSION,\n  useDefaultAuth: true,\n  prettyJson: true\n});\n\nif(isDebug()) require('./imports/debug.js');\nif(isAppType(SEND_APP)) require('./imports/send.js');\nif(isAppType(CONFIRM_APP)) require('./imports/confirm.js');\nif(isAppType(VERIFY_APP)) require('./imports/verify.js');\nrequire('./imports/user.js');\nrequire('./imports/status.js');\n","import { Api, DOI_WALLETNOTIFY_ROUTE, DOI_CONFIRMATION_ROUTE } from '../rest.js';\nimport confirmOptIn from '../../../../imports/modules/server/opt-ins/confirm.js'\nimport checkNewTransaction from \"../../../../imports/modules/server/doichain/check_new_transactions\";\nimport {logConfirm} from \"../../../../imports/startup/server/log-configuration\";\n//doku of meteor-restivus https://github.com/kahmali/meteor-restivus\nApi.addRoute(DOI_CONFIRMATION_ROUTE+'/:hash', {authRequired: false}, {\n  get: {\n    action: function() {\n      const hash = this.urlParams.hash;\n      try {\n        let ip = this.request.headers['x-forwarded-for'] ||\n          this.request.connection.remoteAddress ||\n          this.request.socket.remoteAddress ||\n          (this.request.connection.socket ? this.request.connection.socket.remoteAddress: null);\n\n          if(ip.indexOf(',')!=-1)ip=ip.substring(0,ip.indexOf(','));\n\n          logConfirm('REST opt-in/confirm :',{hash:hash, host:ip});\n          const redirect = confirmOptIn({host: ip, hash: hash});\n\n        return {\n          statusCode: 303,\n          headers: {'Content-Type': 'text/plain', 'Location': redirect},\n          body: 'Location: '+redirect\n        };\n      } catch(error) {\n        return {statusCode: 500, body: {status: 'fail', message: error.message}};\n      }\n    }\n  }\n});\n\nApi.addRoute(DOI_WALLETNOTIFY_ROUTE, {\n    get: {\n        authRequired: false,\n        action: function() {\n            const params = this.queryParams;\n            const txid = params.tx;\n\n            try {\n                checkNewTransaction(txid);\n                return {status: 'success',  data:'txid:'+txid+' was read from blockchain'};\n            } catch(error) {\n                return {status: 'fail', error: error.message};\n            }\n        }\n    }\n});\n","import { Api } from '../rest.js';\nApi.addRoute('debug/mail', {authRequired: false}, {\n  get: {\n    action: function() {\n      const data = {\n        \"from\": \"noreply@doichain.org\",\n        \"subject\": \"Doichain.org Newsletter BestÃ¤tigung\",\n        \"redirect\": \"https://www.doichain.org/vielen-dank/\",\n        \"returnPath\": \"noreply@doichain.org\",\n        \"content\":\"<style type='text/css' media='screen'>\\n\" +\n            \"* {\\n\" +\n            \"\\tline-height: inherit;\\n\" +\n            \"}\\n\" +\n            \".ExternalClass * {\\n\" +\n            \"\\tline-height: 100%;\\n\" +\n            \"}\\n\" +\n            \"body, p {\\n\" +\n            \"\\tmargin: 0;\\n\" +\n            \"\\tpadding: 0;\\n\" +\n            \"\\tmargin-bottom: 0;\\n\" +\n            \"\\t-webkit-text-size-adjust: none;\\n\" +\n            \"\\t-ms-text-size-adjust: none;\\n\" +\n            \"}\\n\" +\n            \"img {\\n\" +\n            \"\\tline-height: 100%;\\n\" +\n            \"\\toutline: none;\\n\" +\n            \"\\ttext-decoration: none;\\n\" +\n            \"\\t-ms-interpolation-mode: bicubic;\\n\" +\n            \"}\\n\" +\n            \"a img {\\n\" +\n            \"\\tborder: none;\\n\" +\n            \"}\\n\" +\n            \"#backgroundTable {\\n\" +\n            \"\\tmargin: 0;\\n\" +\n            \"\\tpadding: 0;\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \"a, a:link, .no-detect-local a, .appleLinks a {\\n\" +\n            \"\\tcolor: #5555ff !important;\\n\" +\n            \"\\ttext-decoration: underline;\\n\" +\n            \"}\\n\" +\n            \".ExternalClass {\\n\" +\n            \"\\tdisplay: block !important;\\n\" +\n            \"\\twidth: 100%;\\n\" +\n            \"}\\n\" +\n            \".ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div {\\n\" +\n            \"\\tline-height: inherit;\\n\" +\n            \"}\\n\" +\n            \"table td {\\n\" +\n            \"\\tborder-collapse: collapse;\\n\" +\n            \"\\tmso-table-lspace: 0pt;\\n\" +\n            \"\\tmso-table-rspace: 0pt;\\n\" +\n            \"}\\n\" +\n            \"sup {\\n\" +\n            \"\\tposition: relative;\\n\" +\n            \"\\ttop: 4px;\\n\" +\n            \"\\tline-height: 7px !important;\\n\" +\n            \"\\tfont-size: 11px !important;\\n\" +\n            \"}\\n\" +\n            \".mobile_link a[href^='tel'], .mobile_link a[href^='sms'] {\\n\" +\n            \"\\ttext-decoration: default;\\n\" +\n            \"\\tcolor: #5555ff !important;\\n\" +\n            \"\\tpointer-events: auto;\\n\" +\n            \"\\tcursor: default;\\n\" +\n            \"}\\n\" +\n            \".no-detect a {\\n\" +\n            \"\\ttext-decoration: none;\\n\" +\n            \"\\tcolor: #5555ff;\\n\" +\n            \"\\tpointer-events: auto;\\n\" +\n            \"\\tcursor: default;\\n\" +\n            \"}\\n\" +\n            \"{\\n\" +\n            \"color: #5555ff;\\n\" +\n            \"}\\n\" +\n            \"span {\\n\" +\n            \"\\tcolor: inherit;\\n\" +\n            \"\\tborder-bottom: none;\\n\" +\n            \"}\\n\" +\n            \"span:hover {\\n\" +\n            \"\\tbackground-color: transparent;\\n\" +\n            \"}\\n\" +\n            \".nounderline {\\n\" +\n            \"\\ttext-decoration: none !important;\\n\" +\n            \"}\\n\" +\n            \"h1, h2, h3 {\\n\" +\n            \"\\tmargin: 0;\\n\" +\n            \"\\tpadding: 0;\\n\" +\n            \"}\\n\" +\n            \"p {\\n\" +\n            \"\\tMargin: 0px !important;\\n\" +\n            \"}\\n\" +\n            \"table[class='email-root-wrapper'] {\\n\" +\n            \"\\twidth: 600px !important;\\n\" +\n            \"}\\n\" +\n            \"body {\\n\" +\n            \"}\\n\" +\n            \"body {\\n\" +\n            \"\\tmin-width: 280px;\\n\" +\n            \"\\twidth: 100%;\\n\" +\n            \"}\\n\" +\n            \"td[class='pattern'] .c112p20r {\\n\" +\n            \"\\twidth: 20%;\\n\" +\n            \"}\\n\" +\n            \"td[class='pattern'] .c336p60r {\\n\" +\n            \"\\twidth: 60.000000000000256%;\\n\" +\n            \"}\\n\" +\n            \"</style>\\n\" +\n            \"<style>\\n\" +\n            \"@media only screen and (max-width: 599px), only screen and (max-device-width: 599px), only screen and (max-width: 400px), only screen and (max-device-width: 400px) {\\n\" +\n            \".email-root-wrapper {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \".full-width {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"\\theight: auto !important;\\n\" +\n            \"\\ttext-align: center;\\n\" +\n            \"}\\n\" +\n            \".fullwidthhalfleft {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \".fullwidthhalfright {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \".fullwidthhalfinner {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"\\tmargin: 0 auto !important;\\n\" +\n            \"\\tfloat: none !important;\\n\" +\n            \"\\tmargin-left: auto !important;\\n\" +\n            \"\\tmargin-right: auto !important;\\n\" +\n            \"\\tclear: both !important;\\n\" +\n            \"}\\n\" +\n            \".hide {\\n\" +\n            \"\\tdisplay: none !important;\\n\" +\n            \"\\twidth: 0px !important;\\n\" +\n            \"\\theight: 0px !important;\\n\" +\n            \"\\toverflow: hidden;\\n\" +\n            \"}\\n\" +\n            \".desktop-hide {\\n\" +\n            \"\\tdisplay: block !important;\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"\\theight: auto !important;\\n\" +\n            \"\\toverflow: hidden;\\n\" +\n            \"\\tmax-height: inherit !important;\\n\" +\n            \"}\\n\" +\n            \".c112p20r {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"\\tfloat: none;\\n\" +\n            \"}\\n\" +\n            \".c336p60r {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"\\tfloat: none;\\n\" +\n            \"}\\n\" +\n            \"}\\n\" +\n            \"</style>\\n\" +\n            \"<style>\\n\" +\n            \"@media only screen and (min-width: 600px) {\\n\" +\n            \"td[class='pattern'] .c112p20r {\\n\" +\n            \"\\twidth: 112px !important;\\n\" +\n            \"}\\n\" +\n            \"td[class='pattern'] .c336p60r {\\n\" +\n            \"\\twidth: 336px !important;\\n\" +\n            \"}\\n\" +\n            \"}\\n\" +\n            \"\\n\" +\n            \"@media only screen and (max-width: 599px), only screen and (max-device-width: 599px), only screen and (max-width: 400px), only screen and (max-device-width: 400px) {\\n\" +\n            \"table[class='email-root-wrapper'] {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \"td[class='wrap'] .full-width {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"\\theight: auto !important;\\n\" +\n            \"}\\n\" +\n            \"td[class='wrap'] .fullwidthhalfleft {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \"td[class='wrap'] .fullwidthhalfright {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \"td[class='wrap'] .fullwidthhalfinner {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"\\tmargin: 0 auto !important;\\n\" +\n            \"\\tfloat: none !important;\\n\" +\n            \"\\tmargin-left: auto !important;\\n\" +\n            \"\\tmargin-right: auto !important;\\n\" +\n            \"\\tclear: both !important;\\n\" +\n            \"}\\n\" +\n            \"td[class='wrap'] .hide {\\n\" +\n            \"\\tdisplay: none !important;\\n\" +\n            \"\\twidth: 0px;\\n\" +\n            \"\\theight: 0px;\\n\" +\n            \"\\toverflow: hidden;\\n\" +\n            \"}\\n\" +\n            \"td[class='pattern'] .c112p20r {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \"td[class='pattern'] .c336p60r {\\n\" +\n            \"\\twidth: 100% !important;\\n\" +\n            \"}\\n\" +\n            \"}\\n\" +\n            \"\\n\" +\n            \"@media yahoo {\\n\" +\n            \"table {\\n\" +\n            \"\\tfloat: none !important;\\n\" +\n            \"\\theight: auto;\\n\" +\n            \"}\\n\" +\n            \"table[align='left'] {\\n\" +\n            \"\\tfloat: left !important;\\n\" +\n            \"}\\n\" +\n            \"td[align='left'] {\\n\" +\n            \"\\tfloat: left !important;\\n\" +\n            \"\\theight: auto;\\n\" +\n            \"}\\n\" +\n            \"table[align='center'] {\\n\" +\n            \"\\tmargin: 0 auto;\\n\" +\n            \"}\\n\" +\n            \"td[align='center'] {\\n\" +\n            \"\\tmargin: 0 auto;\\n\" +\n            \"\\theight: auto;\\n\" +\n            \"}\\n\" +\n            \"table[align='right'] {\\n\" +\n            \"\\tfloat: right !important;\\n\" +\n            \"}\\n\" +\n            \"td[align='right'] {\\n\" +\n            \"\\tfloat: right !important;\\n\" +\n            \"\\theight: auto;\\n\" +\n            \"}\\n\" +\n            \"}\\n\" +\n            \"</style>\\n\" +\n            \"\\n\" +\n            \"<!--[if (gte IE 7) & (vml)]>\\n\" +\n            \"<style type='text/css'>\\n\" +\n            \"html, body {margin:0 !important; padding:0px !important;}\\n\" +\n            \"img.full-width { position: relative !important; }\\n\" +\n            \"\\n\" +\n            \".img240x30 { width: 240px !important; height: 30px !important;}\\n\" +\n            \".img20x20 { width: 20px !important; height: 20px !important;}\\n\" +\n            \"\\n\" +\n            \"</style>\\n\" +\n            \"<![endif]-->\\n\" +\n            \"\\n\" +\n            \"<!--[if gte mso 9]>\\n\" +\n            \"<style type='text/css'>\\n\" +\n            \".mso-font-fix-arial { font-family: Arial, sans-serif;}\\n\" +\n            \".mso-font-fix-georgia { font-family: Georgia, sans-serif;}\\n\" +\n            \".mso-font-fix-tahoma { font-family: Tahoma, sans-serif;}\\n\" +\n            \".mso-font-fix-times_new_roman { font-family: 'Times New Roman', sans-serif;}\\n\" +\n            \".mso-font-fix-trebuchet_ms { font-family: 'Trebuchet MS', sans-serif;}\\n\" +\n            \".mso-font-fix-verdana { font-family: Verdana, sans-serif;}\\n\" +\n            \"</style>\\n\" +\n            \"<![endif]-->\\n\" +\n            \"\\n\" +\n            \"<!--[if gte mso 9]>\\n\" +\n            \"<style type='text/css'>\\n\" +\n            \"table, td {\\n\" +\n            \"border-collapse: collapse !important;\\n\" +\n            \"mso-table-lspace: 0px !important;\\n\" +\n            \"mso-table-rspace: 0px !important;\\n\" +\n            \"}\\n\" +\n            \"\\n\" +\n            \".email-root-wrapper { width 600px !important;}\\n\" +\n            \".imglink { font-size: 0px; }\\n\" +\n            \".edm_button { font-size: 0px; }\\n\" +\n            \"</style>\\n\" +\n            \"<![endif]-->\\n\" +\n            \"\\n\" +\n            \"<!--[if gte mso 15]>\\n\" +\n            \"<style type='text/css'>\\n\" +\n            \"table {\\n\" +\n            \"font-size:0px;\\n\" +\n            \"mso-margin-top-alt:0px;\\n\" +\n            \"}\\n\" +\n            \"\\n\" +\n            \".fullwidthhalfleft {\\n\" +\n            \"width: 49% !important;\\n\" +\n            \"float:left !important;\\n\" +\n            \"}\\n\" +\n            \"\\n\" +\n            \".fullwidthhalfright {\\n\" +\n            \"width: 50% !important;\\n\" +\n            \"float:right !important;\\n\" +\n            \"}\\n\" +\n            \"</style>\\n\" +\n            \"<![endif]-->\\n\" +\n            \"<style type='text/css' media='(pointer) and (min-color-index:0)'>\\n\" +\n            \"html, body {\\n\" +\n            \"\\tbackground-image: none !important;\\n\" +\n            \"\\tbackground-color: #ebebeb !important;\\n\" +\n            \"\\tmargin: 0 !important;\\n\" +\n            \"\\tpadding: 0 !important;\\n\" +\n            \"}\\n\" +\n            \"</style>\\n\" +\n            \"</head>\\n\" +\n            \"<body leftmargin='0' marginwidth='0' topmargin='0' marginheight='0' offset='0' background=\\\"\\\" bgcolor='#ebebeb' style='font-family:Arial, sans-serif; font-size:0px;margin:0;padding:0; '>\\n\" +\n            \"<!--[if t]><![endif]--><!--[if t]><![endif]--><!--[if t]><![endif]--><!--[if t]><![endif]--><!--[if t]><![endif]--><!--[if t]><![endif]-->\\n\" +\n            \"<table align='center' border='0' cellpadding='0' cellspacing='0' background=\\\"\\\"  height='100%' width='100%' id='backgroundTable'>\\n\" +\n            \"  <tr>\\n\" +\n            \"    <td class='wrap' align='center' valign='top' width='100%'>\\n\" +\n            \"\\t\\t<center>\\n\" +\n            \"        <!-- content -->\\n\" +\n            \"        \\t<div style='padding: 0px;'>\\n\" +\n            \"        \\t  <table cellpadding='0' cellspacing='0' border='0' width='100%' bgcolor='#ebebeb'>\\n\" +\n            \"           \\t\\t <tr>\\n\" +\n            \"            \\t\\t  <td valign='top' style='padding: 0px;'>\\n\" +\n            \"\\t\\t\\t\\t\\t\\t  <table cellpadding='0' cellspacing='0' width='600' align='center' style='max-width: 600px;min-width: 240px;margin: 0 auto;' class='email-root-wrapper'>\\n\" +\n            \"                 \\t\\t \\t\\t<tr>\\n\" +\n            \"                   \\t\\t\\t\\t\\t <td valign='top' style='padding: 0px;'>\\n\" +\n            \"\\t\\t\\t\\t\\t\\t\\t\\t \\t\\t<table cellpadding='0' cellspacing='0' border='0' width='100%' bgcolor='#FFFFFF' style='border: 0px none;background-color: #FFFFFF;'>\\n\" +\n            \"                       \\t\\t\\t\\t\\t\\t <tr>\\n\" +\n            \"                       \\t\\t\\t  \\t\\t\\t\\t <td valign='top' style='padding-top: 30px;padding-right: 20px;padding-bottom: 35px;padding-left: 20px;'>\\n\" +\n            \"\\t\\t\\t\\t\\t\\t\\t\\t\\t   \\t\\t\\t\\t\\n\" +\n            \"\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table cellpadding='0'\\n\" +\n            \"\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcellspacing='0' border='0' align='center' width='240'  style='border: 0px none;height: auto;' class='full-width'>\\n\" +\n            \"                                         \\t \\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\n\" +\n            \"                                            \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td valign='top' style='padding: 0px;'><img src='https://sf26.sendsfx.com/admin/temp/user/17/doichain_100h.png' width='240' height='30' alt=\\\"\\\" border='0' style='display: block;width: 100%;height: auto;' class='full-width img240x30' /></td>\\n\" +\n            \"                                         \\t \\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\n\" +\n            \"                                        \\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\n\" +\n            \"\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\n\" +\n            \"\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\n\" +\n            \"                      \\t\\t  \\t\\t\\t\\t</tr>\\n\" +\n            \"                      \\t\\t\\t\\t\\t</table>\\n\" +\n            \"\\t\\t\\t\\t\\t\\t\\t\\t \\n\" +\n            \"\\t\\t\\t\\t\\t\\t\\t\\t \\n\" +\n            \"                      <table cellpadding='0' cellspacing='0' border='0' width='100%' bgcolor='#0071aa' style='border: 0px none;background-color: #0071aa;background-image: url('https://sf26.sendsfx.com/admin/temp/user/17/blue-bg.jpg');background-repeat: no-repeat ;background-position: center;'>\\n\" +\n            \"                        <tr>\\n\" +\n            \"                          <td valign='top' style='padding-top: 40px;padding-right: 20px;padding-bottom: 45px;padding-left: 20px;'><table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                              <tr>\\n\" +\n            \"                                <td style='padding: 0px;' class='pattern'><table cellpadding='0' cellspacing='0' border='0' width='100%'>\\n\" +\n            \"                                    <tr>\\n\" +\n            \"                                      <td valign='top' style='padding-bottom: 10px;'><div style='text-align: left;font-family: arial;font-size: 20px;color: #ffffff;line-height: 30px;mso-line-height: exactly;mso-text-raise: 5px;'>\\n\" +\n            \"                                          <p\\n\" +\n            \"style='padding: 0; margin: 0;text-align: center;'>Bitte bestÃ¤tigen Sie Ihre Anmeldung</p>\\n\" +\n            \"                                        </div></td>\\n\" +\n            \"                                    </tr>\\n\" +\n            \"                                  </table>\\n\" +\n            \"                                  <table cellpadding='0' cellspacing='0' border='0' width='100%'>\\n\" +\n            \"                                    <tr>\\n\" +\n            \"                                      <td valign='top' style='padding: 0;mso-cellspacing: 0in;'><table cellpadding='0' cellspacing='0' border='0' align='left' width='112'  style='float: left;' class='c112p20r'>\\n\" +\n            \"                                          <tr>\\n\" +\n            \"                                            <td valign='top' style='padding: 0px;'><table cellpadding='0' cellspacing='0' border='0' width='100%' style='border: 0px none;' class='hide'>\\n\" +\n            \"                                                <tr>\\n\" +\n            \"                                                  <td valign='top' style='padding: 0px;'><table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                                                      <tr>\\n\" +\n            \"                                                        <td style='padding: 0px;'><table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                                                            <tr>\\n\" +\n            \"                                                              <td align='center' style='padding: 0px;'><table cellpadding='0' cellspacing='0' border='0' align='center' width='20'  style='border: 0px none;height: auto;'>\\n\" +\n            \"                                                                  <tr>\\n\" +\n            \"                                                                    <td valign='top' style='padding: 0px;'><img\\n\" +\n            \"src='https://sf26.sendsfx.com/admin/temp/user/17/img_89837318.png' width='20' height='20' alt=\\\"\\\" border='0' style='display: block;' class='img20x20' /></td>\\n\" +\n            \"                                                                  </tr>\\n\" +\n            \"                                                                </table></td>\\n\" +\n            \"                                                            </tr>\\n\" +\n            \"                                                          </table></td>\\n\" +\n            \"                                                      </tr>\\n\" +\n            \"                                                    </table></td>\\n\" +\n            \"                                                </tr>\\n\" +\n            \"                                              </table></td>\\n\" +\n            \"                                          </tr>\\n\" +\n            \"                                        </table>\\n\" +\n            \"                                        \\n\" +\n            \"                                        <!--[if gte mso 9]></td><td valign='top' style='padding:0;'><![endif]-->\\n\" +\n            \"                                        \\n\" +\n            \"                                        <table cellpadding='0' cellspacing='0' border='0' align='left' width='336'  style='float: left;' class='c336p60r'>\\n\" +\n            \"                                          <tr>\\n\" +\n            \"                                            <td valign='top' style='padding: 0px;'><table cellpadding='0' cellspacing='0' border='0' width='100%'>\\n\" +\n            \"                                                <tr>\\n\" +\n            \"                                                  <td valign='top' style='padding-bottom: 30px;'><table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                                                      <tr>\\n\" +\n            \"                                                        <td style='padding: 0px;'><table cellpadding='0' cellspacing='0' border='0' width='100%' style='border-top: 2px solid #ffffff;'>\\n\" +\n            \"                                                            <tr>\\n\" +\n            \"                                                              <td valign='top'><table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                                                                  <tr>\\n\" +\n            \"                                                                    <td style='padding: 0px;'></td>\\n\" +\n            \"                                                                  </tr>\\n\" +\n            \"                                                                </table></td>\\n\" +\n            \"                                                            </tr>\\n\" +\n            \"                                                          </table></td>\\n\" +\n            \"                                                      </tr>\\n\" +\n            \"                                                    </table></td>\\n\" +\n            \"                                                </tr>\\n\" +\n            \"                                              </table></td>\\n\" +\n            \"                                          </tr>\\n\" +\n            \"                                        </table>\\n\" +\n            \"                                        \\n\" +\n            \"                                        <!--[if gte mso 9]></td><td valign='top' style='padding:0;'><![endif]-->\\n\" +\n            \"                                        \\n\" +\n            \"                                        <table cellpadding='0' cellspacing='0' border='0' align='left' width='112'  style='float: left;' class='c112p20r'>\\n\" +\n            \"                                          <tr>\\n\" +\n            \"                                            <td valign='top' style='padding: 0px;'><table cellpadding='0' cellspacing='0' border='0' width='100%' style='border: 0px none;' class='hide'>\\n\" +\n            \"                                                <tr>\\n\" +\n            \"                                                  <td valign='top' style='padding: 0px;'><table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                                                      <tr>\\n\" +\n            \"                                                        <td style='padding: 0px;'><table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                                                            <tr>\\n\" +\n            \"                                                              <td align='center' style='padding: 0px;'><table cellpadding='0' cellspacing='0' border='0' align='center' width='20'  style='border: 0px none;height: auto;'>\\n\" +\n            \"                                                                  <tr>\\n\" +\n            \"                                                                    <td valign='top' style='padding: 0px;'><img src='https://sf26.sendsfx.com/admin/temp/user/17/img_89837318.png' width='20' height='20' alt=\\\"\\\" border='0' style='display: block;' class='img20x20'\\n\" +\n            \"/></td>\\n\" +\n            \"                                                                  </tr>\\n\" +\n            \"                                                                </table></td>\\n\" +\n            \"                                                            </tr>\\n\" +\n            \"                                                          </table></td>\\n\" +\n            \"                                                      </tr>\\n\" +\n            \"                                                    </table></td>\\n\" +\n            \"                                                </tr>\\n\" +\n            \"                                              </table></td>\\n\" +\n            \"                                          </tr>\\n\" +\n            \"                                        </table></td>\\n\" +\n            \"                                    </tr>\\n\" +\n            \"                                  </table>\\n\" +\n            \"                                  <table cellpadding='0' cellspacing='0' border='0' width='100%'>\\n\" +\n            \"                                    <tr>\\n\" +\n            \"                                      <td valign='top' style='padding-bottom: 20px;'><div style='text-align: left;font-family: arial;font-size: 16px;color: #ffffff;line-height: 26px;mso-line-height: exactly;mso-text-raise: 5px;'>\\n\" +\n            \"                                          <p style='padding: 0; margin: 0;text-align: center;'>Vielen Dank, dass Sie sich fÃ¼r unseren Newsletter angemeldet haben.</p>\\n\" +\n            \"                                          <p style='padding: 0; margin: 0;text-align: center;'>Um diese E-Mail-Adresse und Ihre kostenlose Anmeldung zu bestÃ¤tigen, klicken Sie bitte jetzt auf den folgenden Button:</p>\\n\" +\n            \"                                        </div></td>\\n\" +\n            \"                                    </tr>\\n\" +\n            \"                                  </table>\\n\" +\n            \"                                  <table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                                    <tr>\\n\" +\n            \"                                      <td align='center' style='padding: 0px;'><table cellpadding='0' cellspacing='0' border='0' align='center' style='text-align: center;color: #000;' class='full-width'>\\n\" +\n            \"                                          <tr>\\n\" +\n            \"                                            <td valign='top' align='center' style='padding-right: 10px;padding-bottom: 30px;padding-left: 10px;'><table cellpadding='0' cellspacing='0' border='0' bgcolor='#85ac1c' style='border: 0px none;border-radius: 5px;border-collapse: separate !important;background-color: #85ac1c;' class='full-width'>\\n\" +\n            \"                                                <tr>\\n\" +\n            \"                                                  <td valign='top' align='center' style='padding: 12px;'><a href='${confirmation_url}' target='_blank' style='text-decoration: none;' class='edm_button'><span style='font-family: arial;font-size: 18px;color: #ffffff;line-height: 28px;text-decoration: none;'><span\\n\" +\n            \"style='font-size: 18px;'>Jetzt Anmeldung best&auml;tigen</span></span> </a></td>\\n\" +\n            \"                                                </tr>\\n\" +\n            \"                                              </table></td>\\n\" +\n            \"                                          </tr>\\n\" +\n            \"                                        </table></td>\\n\" +\n            \"                                    </tr>\\n\" +\n            \"                                  </table>\\n\" +\n            \"                                  <div style='text-align: left;font-family: arial;font-size: 12px;color: #ffffff;line-height: 22px;mso-line-height: exactly;mso-text-raise: 5px;'>\\n\" +\n            \"                                    <p style='padding: 0; margin: 0;text-align: center;'>Wenn Sie ihre E-Mail-Adresse nicht bestÃ¤tigen, kÃ¶nnen keine Newsletter zugestellt werden. Ihr EinverstÃ¤ndnis kÃ¶nnen Sie selbstverstÃ¤ndlich jederzeit widerrufen. Sollte es sich bei der Anmeldung um ein Versehen handeln oder wurde der Newsletter nicht in Ihrem Namen bestellt, kÃ¶nnen Sie diese E-Mail einfach ignorieren. Ihnen werden keine weiteren Nachrichten zugeschickt.</p>\\n\" +\n            \"                                  </div></td>\\n\" +\n            \"                              </tr>\\n\" +\n            \"                            </table></td>\\n\" +\n            \"                        </tr>\\n\" +\n            \"                      </table>\\n\" +\n            \"                      <table cellpadding='0' cellspacing='0' border='0' width='100%' bgcolor='#ffffff' style='border: 0px none;background-color: #ffffff;'>\\n\" +\n            \"                        <tr>\\n\" +\n            \"                          <td valign='top' style='padding-top: 30px;padding-right: 20px;padding-bottom: 35px;padding-left: 20px;'><table cellpadding='0' cellspacing='0' width='100%'>\\n\" +\n            \"                              <tr>\\n\" +\n            \"                                <td style='padding: 0px;'><table cellpadding='0' cellspacing='0' border='0' width='100%'>\\n\" +\n            \"                                    <tr>\\n\" +\n            \"                                      <td valign='top' style='padding-bottom: 25px;'><div style='text-align: left;font-family: arial;font-size: 12px;color: #333333;line-height: 22px;mso-line-height: exactly;mso-text-raise: 5px;'>\\n\" +\n            \"                                          <p style='padding: 0; margin: 0;text-align: center;'><span style='line-height: 3;'><strong>Kontakt</strong></span><br>\\n\" +\n            \"                                            service@sendeffect.de<br>\\n\" +\n            \"                                            www.sendeffect.de<br>\\n\" +\n            \"                                            Telefon: +49 (0) 8571 - 97 39 - 69-0</p>\\n\" +\n            \"                                        </div></td>\\n\" +\n            \"                                    </tr>\\n\" +\n            \"                                  </table>\\n\" +\n            \"                                  <div style='text-align: left;font-family: arial;font-size: 12px;color: #333333;line-height: 22px;mso-line-height: exactly;mso-text-raise: 5px;'>\\n\" +\n            \"                                    <p style='padding: 0; margin: 0;text-align: center;'><span style='line-height: 3;'><strong>Impressum</strong></span><br>\\n\" +\n            \"                                      Anschrift: Schulgasse 5, D-84359 Simbach am Inn, eMail: service@sendeffect.de<br>\\n\" +\n            \"                                      Betreiber: WEBanizer AG, Registergericht: Amtsgericht Landshut HRB 5177, UstId.: DE 2068 62 070<br>\\n\" +\n            \"                                      Vorstand: Ottmar Neuburger, Aufsichtsrat: Tobias Neuburger</p>\\n\" +\n            \"                                  </div></td>\\n\" +\n            \"                              </tr>\\n\" +\n            \"                            </table></td>\\n\" +\n            \"                        </tr>\\n\" +\n            \"                      </table></td>\\n\" +\n            \"                  </tr>\\n\" +\n            \"                </table></td>\\n\" +\n            \"            </tr>\\n\" +\n            \"          </table>\\n\" +\n            \"        </div>\\n\" +\n            \"        <!-- content end -->\\n\" +\n            \"      </center></td>\\n\" +\n            \"  </tr>\\n\" +\n            \"</table>\"\n      }\n\n      return {\"status\": \"success\", \"data\": data};\n    }\n  }\n});\n","import { Api, DOI_FETCH_ROUTE, DOI_CONFIRMATION_NOTIFY_ROUTE } from '../rest.js';\nimport addOptIn from '../../../../imports/modules/server/opt-ins/add_and_write_to_blockchain.js';\nimport updateOptInStatus from '../../../../imports/modules/server/opt-ins/update_status.js';\nimport getDoiMailData from '../../../../imports/modules/server/dapps/get_doi-mail-data.js';\nimport {logError, logSend} from \"../../../../imports/startup/server/log-configuration\";\nimport {DOI_EXPORT_ROUTE} from \"../rest\";\nimport exportDois from \"../../../../imports/modules/server/dapps/export_dois\";\nimport {OptIns} from \"../../../../imports/api/opt-ins/opt-ins\";\nimport {Roles} from \"meteor/alanning:roles\";\n\n//doku of meteor-restivus https://github.com/kahmali/meteor-restivus\n\nApi.addRoute(DOI_CONFIRMATION_NOTIFY_ROUTE, {\n  post: {\n    authRequired: true,\n    //roleRequired: ['admin'],\n    action: function() {\n      const qParams = this.queryParams;\n      const bParams = this.bodyParams;\n      let params = {}\n      if(qParams !== undefined) params = {...qParams}\n      if(bParams !== undefined) params = {...params, ...bParams}\n\n      const uid = this.userId;\n\n      if(!Roles.userIsInRole(uid, 'admin') || //if its not an admin always use uid as ownerId\n          (Roles.userIsInRole(uid, 'admin') && (params[\"ownerId\"]==null || params[\"ownerId\"]==undefined))) {  //if its an admin only use uid in case no ownerId was given\n          params[\"ownerId\"] = uid;\n      }\n\n      logSend('parameter received from browser:',params);\n      if(params.sender_mail.constructor === Array){ //this is a SOI with co-sponsors first email is main sponsor\n          return prepareCoDOI(params);\n      }else{\n         return prepareAdd(params);\n      }\n    }\n  },\n  put: {\n    authRequired: false,\n    action: function() {\n      const qParams = this.queryParams;\n      const bParams = this.bodyParams;\n\n      logSend('qParams:',qParams);\n      logSend('bParams:',bParams);\n\n      let params = {}\n      if(qParams !== undefined) params = {...qParams}\n      if(bParams !== undefined) params = {...params, ...bParams}\n      try {\n        const val = updateOptInStatus(params);\n        logSend('opt-In status updated',val);\n        return {status: 'success', data: {message: 'Opt-In status updated'}};\n      } catch(error) {\n        return {statusCode: 500, body: {status: 'fail', message: error.message}};\n      }\n    }\n  }\n});\n\nApi.addRoute(DOI_FETCH_ROUTE, {authRequired: false}, {\n  get: {\n    action: function() {\n      const params = this.queryParams;\n      try {\n          logSend('rest api - DOI_FETCH_ROUTE called by bob to request email template',JSON.stringify(params));\n          const data = getDoiMailData(params);\n          logSend('got doi-mail-data (including templalte) returning to bob',{subject:data.subject, recipient:data.recipient});\n        return {status: 'success', data};\n      } catch(error) {\n        logError('error while getting DoiMailData',error);\n        return {status: 'fail', error: error.message};\n      }\n    }\n  }\n});\n\nApi.addRoute(DOI_EXPORT_ROUTE, {\n    get: {\n        authRequired: true,\n        //roleRequired: ['admin'],\n        action: function() {\n            let params = this.queryParams;\n            const uid = this.userId;\n            if(!Roles.userIsInRole(uid, 'admin')){\n                params = {userid:uid,role:'user'};\n            }\n            else{\n                params = {...params,role:'admin'}\n            }\n            try {\n                logSend('rest api - DOI_EXPORT_ROUTE called',JSON.stringify(params));\n                const data = exportDois(params);\n                logSend('got dois from database',JSON.stringify(data));\n                return {status: 'success', data};\n            } catch(error) {\n                logError('error while exporting confirmed dois',error);\n                return {status: 'fail', error: error.message};\n            }\n        }\n    }\n});\n\nfunction prepareCoDOI(params){\n\n    logSend('is array ',params.sender_mail);\n\n    const senders = params.sender_mail;\n    const recipient_mail = params.recipient_mail;\n    const data = params.data;\n    const ownerID = params.ownerId;\n\n    let currentOptInId;\n    let retResponse = [];\n    let master_doi;\n    senders.forEach((sender,index) => {\n\n        const ret_response = prepareAdd({sender_mail:sender,recipient_mail:recipient_mail,data:data, master_doi:master_doi, index: index, ownerId:ownerID});\n        logSend('CoDOI:',ret_response);\n        if(ret_response.status === undefined || ret_response.status===\"failed\") throw \"could not add co-opt-in\";\n        retResponse.push(ret_response);\n        currentOptInId = ret_response.data.id;\n\n        if(index===0)\n        {\n            logSend('main sponsor optInId:',currentOptInId);\n            const optIn = OptIns.findOne({_id: currentOptInId});\n            master_doi = optIn.nameId;\n            logSend('main sponsor nameId:',master_doi);\n        }\n\n    });\n\n    logSend(retResponse);\n\n    return retResponse;\n}\n\nfunction prepareAdd(params){\n\n    try {\n        const val = addOptIn(params);\n        logSend('opt-In added ID:',val);\n        return {status: 'success', data: {id: val, status: 'success', message: 'Opt-In added.'}};\n    } catch(error) {\n        return {statusCode: 500, body: {status: 'fail', message: error.message}};\n    }\n}","import { Api } from '../rest.js';\nimport {getInfo} from \"../../doichain\";\nimport { CONFIRM_CLIENT,SEND_CLIENT} from \"../../../../imports/startup/server/doichain-configuration\";\n\nApi.addRoute('status', {authRequired: false}, {\n  get: {\n    action: function() {\n      try {\n        const data = getInfo(SEND_CLIENT?SEND_CLIENT:CONFIRM_CLIENT);\n        return {\"status\": \"success\", \"data\":data};\n      }catch(ex){\n            return {\"status\": \"failed\", \"data\": ex.toString()};\n      }\n    }\n  }\n});\n","import { Api } from '../rest.js';\nimport {Meteor} from 'meteor/meteor';\nimport {Accounts} from 'meteor/accounts-base'\nimport SimpleSchema from 'simpl-schema';\nimport {Roles} from \"meteor/alanning:roles\";\nimport {logMain} from \"../../../../imports/startup/server/log-configuration\";\n\nconst mailTemplateSchema = new SimpleSchema({\n    subject: {\n        type: String,\n        optional:true \n    },\n    redirect: {\n        type: String,\n        regEx: \"@(https?|ftp)://(-\\\\.)?([^\\\\s/?\\\\.#-]+\\\\.?)+(/[^\\\\s]*)?$@\",\n        optional:true \n    },\n    returnPath: {\n        type: String,\n        regEx: SimpleSchema.RegEx.Email,\n        optional:true \n    },\n    templateURL:{\n        type: String,\n        regEx: \"@(https?|ftp)://(-\\\\.)?([^\\\\s/?\\\\.#-]+\\\\.?)+(/[^\\\\s]*)?$@\",\n        optional:true \n    }\n});\n\nconst createUserSchema = new SimpleSchema({\n    username: {\n      type: String,\n      regEx: \"^[A-Z,a-z,0-9,!,_,$,#]{4,24}$\"  //Only usernames between 4-24 characters from A-Z,a-z,0-9,!,_,$,# allowed\n    },\n    email: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Email\n    },\n    password: {\n      type: String,\n      regEx: \"^[A-Z,a-z,0-9,!,_,$,#]{8,24}$\" //Only passwords between 8-24 characters from A-Z,a-z,0-9,!,_,$,# allowed\n    },\n    mailTemplate:{\n        type: mailTemplateSchema,\n        optional:true \n    }\n  });\n  const updateUserSchema = new SimpleSchema({\n    mailTemplate:{\n        type: mailTemplateSchema\n    }\n});\n\n//TODO: collection options separate\nconst collectionOptions =\n  {\n    path:\"users\",\n    routeOptions:\n    {\n        authRequired : true\n        //,roleRequired : \"admin\"\n    },\n    excludedEndpoints: ['patch','deleteAll'],\n    endpoints:\n    {\n        delete:{roleRequired : \"admin\"},\n        post:\n        {\n            roleRequired : \"admin\",\n            action: function(){\n                const qParams = this.queryParams;\n                const bParams = this.bodyParams;\n                let params = {};\n                if(qParams !== undefined) params = {...qParams}\n                if(bParams !== undefined) params = {...params, ...bParams}\n                try{\n                    let userId;\n                    createUserSchema.validate(params);\n                    logMain('validated',params);\n                    if(params.mailTemplate !== undefined){\n                        userId = Accounts.createUser({username:params.username,\n                            email:params.email,\n                            password:params.password,\n                            profile:{mailTemplate:params.mailTemplate}});\n                    }\n                    else{\n                        userId = Accounts.createUser({username:params.username,email:params.email,password:params.password, profile:{}});\n                    }    \n                    return {status: 'success', data: {userid: userId}};\n                } catch(error) {\n                  return {statusCode: 400, body: {status: 'fail', message: error.message}};\n                }\n                \n            }\n        },\n        put:\n        {\n            action: function(){      \n                const qParams = this.queryParams;\n                const bParams = this.bodyParams;\n                let params = {};\n                let uid=this.userId;\n                const paramId=this.urlParams.id;\n                if(qParams !== undefined) params = {...qParams}\n                if(bParams !== undefined) params = {...params, ...bParams}\n\n                try{ //TODO this is not necessary here and can probably go right into the definition of the REST METHOD next to put (!?!)\n                    if(!Roles.userIsInRole(uid, 'admin')){\n                        if(uid!==paramId){\n                            throw Error(\"No Permission\");\n                        }\n                    }\n                    updateUserSchema.validate(params);\n                    if(!Meteor.users.update(this.urlParams.id,{$set:{\"profile.mailTemplate\":params.mailTemplate}})){\n                        throw Error(\"Failed to update user\");\n                    }\n                    return {status: 'success', data: {userid: this.urlParams.id, mailTemplate:params.mailTemplate}};\n                } catch(error) {\n                  return {statusCode: 400, body: {status: 'fail', message: error.message}};\n                }\n            }\n        }\n    }\n}\nApi.addCollection(Meteor.users,collectionOptions);","import { Api } from '../rest.js';\nimport verifyOptIn from '../../../../imports/modules/server/opt-ins/verify.js';\n\nApi.addRoute('opt-in/verify', {authRequired: true}, {\n  get: {\n    authRequired: false,\n    action: function() {\n        const qParams = this.queryParams;\n        const bParams = this.bodyParams;\n        let params = {}\n        if(qParams !== undefined) params = {...qParams}\n        if(bParams !== undefined) params = {...params, ...bParams}\n\n      try {\n        const val = verifyOptIn(params);\n        return {status: \"success\", data: {val}};\n      } catch(error) {\n        return {statusCode: 500, body: {status: 'fail', message: error.message}};\n      }\n    }\n  }\n});\n"]}